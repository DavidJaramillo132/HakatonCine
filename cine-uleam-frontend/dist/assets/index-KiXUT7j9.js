function nh(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(r,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function el(r){const e=Object.create(null);for(const t of r.split(","))e[t]=1;return t=>t in e}const qe={},qn=[],Tr=()=>{},Ef=()=>!1,Ko=r=>r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&(r.charCodeAt(2)>122||r.charCodeAt(2)<97),tl=r=>r.startsWith("onUpdate:"),Bt=Object.assign,rl=(r,e)=>{const t=r.indexOf(e);t>-1&&r.splice(t,1)},ih=Object.prototype.hasOwnProperty,je=(r,e)=>ih.call(r,e),ve=Array.isArray,zn=r=>qi(r)==="[object Map]",oi=r=>qi(r)==="[object Set]",$l=r=>qi(r)==="[object Date]",_e=r=>typeof r=="function",ct=r=>typeof r=="string",Rr=r=>typeof r=="symbol",ze=r=>r!==null&&typeof r=="object",Af=r=>(ze(r)||_e(r))&&_e(r.then)&&_e(r.catch),Cf=Object.prototype.toString,qi=r=>Cf.call(r),oh=r=>qi(r).slice(8,-1),Sf=r=>qi(r)==="[object Object]",nl=r=>ct(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,Ci=el(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Xo=r=>{const e=Object.create(null);return(t=>e[t]||(e[t]=r(t)))},ah=/-\w/g,cr=Xo(r=>r.replace(ah,e=>e.slice(1).toUpperCase())),sh=/\B([A-Z])/g,ln=Xo(r=>r.replace(sh,"-$1").toLowerCase()),Yo=Xo(r=>r.charAt(0).toUpperCase()+r.slice(1)),va=Xo(r=>r?`on${Yo(r)}`:""),tn=(r,e)=>!Object.is(r,e),xo=(r,...e)=>{for(let t=0;t<r.length;t++)r[t](...e)},If=(r,e,t,n=!1)=>{Object.defineProperty(r,e,{configurable:!0,enumerable:!1,writable:n,value:t})},Zo=r=>{const e=parseFloat(r);return isNaN(e)?r:e};let Vl;const Jo=()=>Vl||(Vl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Qo(r){if(ve(r)){const e={};for(let t=0;t<r.length;t++){const n=r[t],i=ct(n)?fh(n):Qo(n);if(i)for(const o in i)e[o]=i[o]}return e}else if(ct(r)||ze(r))return r}const lh=/;(?![^(]*\))/g,uh=/:([^]+)/,ch=/\/\*[^]*?\*\//g;function fh(r){const e={};return r.replace(ch,"").split(lh).forEach(t=>{if(t){const n=t.split(uh);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function At(r){let e="";if(ct(r))e=r;else if(ve(r))for(let t=0;t<r.length;t++){const n=At(r[t]);n&&(e+=n+" ")}else if(ze(r))for(const t in r)r[t]&&(e+=t+" ");return e.trim()}const dh="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",hh=el(dh);function Of(r){return!!r||r===""}function ph(r,e){if(r.length!==e.length)return!1;let t=!0;for(let n=0;t&&n<r.length;n++)t=In(r[n],e[n]);return t}function In(r,e){if(r===e)return!0;let t=$l(r),n=$l(e);if(t||n)return t&&n?r.getTime()===e.getTime():!1;if(t=Rr(r),n=Rr(e),t||n)return r===e;if(t=ve(r),n=ve(e),t||n)return t&&n?ph(r,e):!1;if(t=ze(r),n=ze(e),t||n){if(!t||!n)return!1;const i=Object.keys(r).length,o=Object.keys(e).length;if(i!==o)return!1;for(const a in r){const s=r.hasOwnProperty(a),l=e.hasOwnProperty(a);if(s&&!l||!s&&l||!In(r[a],e[a]))return!1}}return String(r)===String(e)}function il(r,e){return r.findIndex(t=>In(t,e))}const Tf=r=>!!(r&&r.__v_isRef===!0),V=r=>ct(r)?r:r==null?"":ve(r)||ze(r)&&(r.toString===Cf||!_e(r.toString))?Tf(r)?V(r.value):JSON.stringify(r,Rf,2):String(r),Rf=(r,e)=>Tf(e)?Rf(r,e.value):zn(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[n,i],o)=>(t[ga(n,o)+" =>"]=i,t),{})}:oi(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>ga(t))}:Rr(e)?ga(e):ze(e)&&!ve(e)&&!Sf(e)?String(e):e,ga=(r,e="")=>{var t;return Rr(r)?`Symbol(${(t=r.description)!=null?t:e})`:r};let zt;class vh{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=zt,!e&&zt&&(this.index=(zt.scopes||(zt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=zt;try{return zt=this,e()}finally{zt=t}}}on(){++this._on===1&&(this.prevScope=zt,zt=this)}off(){this._on>0&&--this._on===0&&(zt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(this.effects.length=0,t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function gh(){return zt}let Ye;const ya=new WeakSet;class Pf{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,zt&&zt.active&&zt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ya.has(this)&&(ya.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Df(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Hl(this),kf(this);const e=Ye,t=mr;Ye=this,mr=!0;try{return this.fn()}finally{Mf(this),Ye=e,mr=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)sl(e);this.deps=this.depsTail=void 0,Hl(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ya.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){gs(this)&&this.run()}get dirty(){return gs(this)}}let Nf=0,Si,Ii;function Df(r,e=!1){if(r.flags|=8,e){r.next=Ii,Ii=r;return}r.next=Si,Si=r}function ol(){Nf++}function al(){if(--Nf>0)return;if(Ii){let e=Ii;for(Ii=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let r;for(;Si;){let e=Si;for(Si=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){r||(r=n)}e=t}}if(r)throw r}function kf(r){for(let e=r.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Mf(r){let e,t=r.depsTail,n=t;for(;n;){const i=n.prevDep;n.version===-1?(n===t&&(t=i),sl(n),yh(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}r.deps=e,r.depsTail=t}function gs(r){for(let e=r.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Bf(e.dep.computed)||e.dep.version!==e.version))return!0;return!!r._dirty}function Bf(r){if(r.flags&4&&!(r.flags&16)||(r.flags&=-17,r.globalVersion===Bi)||(r.globalVersion=Bi,!r.isSSR&&r.flags&128&&(!r.deps&&!r._dirty||!gs(r))))return;r.flags|=2;const e=r.dep,t=Ye,n=mr;Ye=r,mr=!0;try{kf(r);const i=r.fn(r._value);(e.version===0||tn(i,r._value))&&(r.flags|=128,r._value=i,e.version++)}catch(i){throw e.version++,i}finally{Ye=t,mr=n,Mf(r),r.flags&=-3}}function sl(r,e=!1){const{dep:t,prevSub:n,nextSub:i}=r;if(n&&(n.nextSub=i,r.prevSub=void 0),i&&(i.prevSub=n,r.nextSub=void 0),t.subs===r&&(t.subs=n,!n&&t.computed)){t.computed.flags&=-5;for(let o=t.computed.deps;o;o=o.nextDep)sl(o,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function yh(r){const{prevDep:e,nextDep:t}=r;e&&(e.nextDep=t,r.prevDep=void 0),t&&(t.prevDep=e,r.nextDep=void 0)}let mr=!0;const Lf=[];function $r(){Lf.push(mr),mr=!1}function Vr(){const r=Lf.pop();mr=r===void 0?!0:r}function Hl(r){const{cleanup:e}=r;if(r.cleanup=void 0,e){const t=Ye;Ye=void 0;try{e()}finally{Ye=t}}}let Bi=0;class mh{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ll{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Ye||!mr||Ye===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Ye)t=this.activeLink=new mh(Ye,this),Ye.deps?(t.prevDep=Ye.depsTail,Ye.depsTail.nextDep=t,Ye.depsTail=t):Ye.deps=Ye.depsTail=t,Ff(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const n=t.nextDep;n.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=n),t.prevDep=Ye.depsTail,t.nextDep=void 0,Ye.depsTail.nextDep=t,Ye.depsTail=t,Ye.deps===t&&(Ye.deps=n)}return t}trigger(e){this.version++,Bi++,this.notify(e)}notify(e){ol();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{al()}}}function Ff(r){if(r.dep.sc++,r.sub.flags&4){const e=r.dep.computed;if(e&&!r.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)Ff(n)}const t=r.dep.subs;t!==r&&(r.prevSub=t,t&&(t.nextSub=r)),r.dep.subs=r}}const ys=new WeakMap,Cn=Symbol(""),ms=Symbol(""),Li=Symbol("");function Dt(r,e,t){if(mr&&Ye){let n=ys.get(r);n||ys.set(r,n=new Map);let i=n.get(t);i||(n.set(t,i=new ll),i.map=n,i.key=t),i.track()}}function Lr(r,e,t,n,i,o){const a=ys.get(r);if(!a){Bi++;return}const s=l=>{l&&l.trigger()};if(ol(),e==="clear")a.forEach(s);else{const l=ve(r),u=l&&nl(t);if(l&&t==="length"){const c=Number(n);a.forEach((f,d)=>{(d==="length"||d===Li||!Rr(d)&&d>=c)&&s(f)})}else switch((t!==void 0||a.has(void 0))&&s(a.get(t)),u&&s(a.get(Li)),e){case"add":l?u&&s(a.get("length")):(s(a.get(Cn)),zn(r)&&s(a.get(ms)));break;case"delete":l||(s(a.get(Cn)),zn(r)&&s(a.get(ms)));break;case"set":zn(r)&&s(a.get(Cn));break}}al()}function Rn(r){const e=Ue(r);return e===r?e:(Dt(e,"iterate",Li),sr(r)?e:e.map(Ot))}function ea(r){return Dt(r=Ue(r),"iterate",Li),r}const xh={__proto__:null,[Symbol.iterator](){return ma(this,Symbol.iterator,Ot)},concat(...r){return Rn(this).concat(...r.map(e=>ve(e)?Rn(e):e))},entries(){return ma(this,"entries",r=>(r[1]=Ot(r[1]),r))},every(r,e){return Dr(this,"every",r,e,void 0,arguments)},filter(r,e){return Dr(this,"filter",r,e,t=>t.map(Ot),arguments)},find(r,e){return Dr(this,"find",r,e,Ot,arguments)},findIndex(r,e){return Dr(this,"findIndex",r,e,void 0,arguments)},findLast(r,e){return Dr(this,"findLast",r,e,Ot,arguments)},findLastIndex(r,e){return Dr(this,"findLastIndex",r,e,void 0,arguments)},forEach(r,e){return Dr(this,"forEach",r,e,void 0,arguments)},includes(...r){return xa(this,"includes",r)},indexOf(...r){return xa(this,"indexOf",r)},join(r){return Rn(this).join(r)},lastIndexOf(...r){return xa(this,"lastIndexOf",r)},map(r,e){return Dr(this,"map",r,e,void 0,arguments)},pop(){return hi(this,"pop")},push(...r){return hi(this,"push",r)},reduce(r,...e){return Gl(this,"reduce",r,e)},reduceRight(r,...e){return Gl(this,"reduceRight",r,e)},shift(){return hi(this,"shift")},some(r,e){return Dr(this,"some",r,e,void 0,arguments)},splice(...r){return hi(this,"splice",r)},toReversed(){return Rn(this).toReversed()},toSorted(r){return Rn(this).toSorted(r)},toSpliced(...r){return Rn(this).toSpliced(...r)},unshift(...r){return hi(this,"unshift",r)},values(){return ma(this,"values",Ot)}};function ma(r,e,t){const n=ea(r),i=n[e]();return n!==r&&!sr(r)&&(i._next=i.next,i.next=()=>{const o=i._next();return o.done||(o.value=t(o.value)),o}),i}const wh=Array.prototype;function Dr(r,e,t,n,i,o){const a=ea(r),s=a!==r&&!sr(r),l=a[e];if(l!==wh[e]){const f=l.apply(r,o);return s?Ot(f):f}let u=t;a!==r&&(s?u=function(f,d){return t.call(this,Ot(f),d,r)}:t.length>2&&(u=function(f,d){return t.call(this,f,d,r)}));const c=l.call(a,u,n);return s&&i?i(c):c}function Gl(r,e,t,n){const i=ea(r);let o=t;return i!==r&&(sr(r)?t.length>3&&(o=function(a,s,l){return t.call(this,a,s,l,r)}):o=function(a,s,l){return t.call(this,a,Ot(s),l,r)}),i[e](o,...n)}function xa(r,e,t){const n=Ue(r);Dt(n,"iterate",Li);const i=n[e](...t);return(i===-1||i===!1)&&fl(t[0])?(t[0]=Ue(t[0]),n[e](...t)):i}function hi(r,e,t=[]){$r(),ol();const n=Ue(r)[e].apply(r,t);return al(),Vr(),n}const _h=el("__proto__,__v_isRef,__isVue"),Uf=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(Rr));function bh(r){Rr(r)||(r=String(r));const e=Ue(this);return Dt(e,"has",r),e.hasOwnProperty(r)}class jf{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){if(t==="__v_skip")return e.__v_skip;const i=this._isReadonly,o=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return o;if(t==="__v_raw")return n===(i?o?Nh:Gf:o?Hf:Vf).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const a=ve(e);if(!i){let l;if(a&&(l=xh[t]))return l;if(t==="hasOwnProperty")return bh}const s=Reflect.get(e,t,Mt(e)?e:n);if((Rr(t)?Uf.has(t):_h(t))||(i||Dt(e,"get",t),o))return s;if(Mt(s)){const l=a&&nl(t)?s:s.value;return i&&ze(l)?ws(l):l}return ze(s)?i?ws(s):ar(s):s}}class $f extends jf{constructor(e=!1){super(!1,e)}set(e,t,n,i){let o=e[t];if(!this._isShallow){const l=on(o);if(!sr(n)&&!on(n)&&(o=Ue(o),n=Ue(n)),!ve(e)&&Mt(o)&&!Mt(n))return l||(o.value=n),!0}const a=ve(e)&&nl(t)?Number(t)<e.length:je(e,t),s=Reflect.set(e,t,n,Mt(e)?e:i);return e===Ue(i)&&(a?tn(n,o)&&Lr(e,"set",t,n):Lr(e,"add",t,n)),s}deleteProperty(e,t){const n=je(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&n&&Lr(e,"delete",t,void 0),i}has(e,t){const n=Reflect.has(e,t);return(!Rr(t)||!Uf.has(t))&&Dt(e,"has",t),n}ownKeys(e){return Dt(e,"iterate",ve(e)?"length":Cn),Reflect.ownKeys(e)}}class Eh extends jf{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const Ah=new $f,Ch=new Eh,Sh=new $f(!0);const xs=r=>r,Qi=r=>Reflect.getPrototypeOf(r);function Ih(r,e,t){return function(...n){const i=this.__v_raw,o=Ue(i),a=zn(o),s=r==="entries"||r===Symbol.iterator&&a,l=r==="keys"&&a,u=i[r](...n),c=t?xs:e?Oo:Ot;return!e&&Dt(o,"iterate",l?ms:Cn),{next(){const{value:f,done:d}=u.next();return d?{value:f,done:d}:{value:s?[c(f[0]),c(f[1])]:c(f),done:d}},[Symbol.iterator](){return this}}}}function eo(r){return function(...e){return r==="delete"?!1:r==="clear"?void 0:this}}function Oh(r,e){const t={get(i){const o=this.__v_raw,a=Ue(o),s=Ue(i);r||(tn(i,s)&&Dt(a,"get",i),Dt(a,"get",s));const{has:l}=Qi(a),u=e?xs:r?Oo:Ot;if(l.call(a,i))return u(o.get(i));if(l.call(a,s))return u(o.get(s));o!==a&&o.get(i)},get size(){const i=this.__v_raw;return!r&&Dt(Ue(i),"iterate",Cn),i.size},has(i){const o=this.__v_raw,a=Ue(o),s=Ue(i);return r||(tn(i,s)&&Dt(a,"has",i),Dt(a,"has",s)),i===s?o.has(i):o.has(i)||o.has(s)},forEach(i,o){const a=this,s=a.__v_raw,l=Ue(s),u=e?xs:r?Oo:Ot;return!r&&Dt(l,"iterate",Cn),s.forEach((c,f)=>i.call(o,u(c),u(f),a))}};return Bt(t,r?{add:eo("add"),set:eo("set"),delete:eo("delete"),clear:eo("clear")}:{add(i){!e&&!sr(i)&&!on(i)&&(i=Ue(i));const o=Ue(this);return Qi(o).has.call(o,i)||(o.add(i),Lr(o,"add",i,i)),this},set(i,o){!e&&!sr(o)&&!on(o)&&(o=Ue(o));const a=Ue(this),{has:s,get:l}=Qi(a);let u=s.call(a,i);u||(i=Ue(i),u=s.call(a,i));const c=l.call(a,i);return a.set(i,o),u?tn(o,c)&&Lr(a,"set",i,o):Lr(a,"add",i,o),this},delete(i){const o=Ue(this),{has:a,get:s}=Qi(o);let l=a.call(o,i);l||(i=Ue(i),l=a.call(o,i)),s&&s.call(o,i);const u=o.delete(i);return l&&Lr(o,"delete",i,void 0),u},clear(){const i=Ue(this),o=i.size!==0,a=i.clear();return o&&Lr(i,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=Ih(i,r,e)}),t}function ul(r,e){const t=Oh(r,e);return(n,i,o)=>i==="__v_isReactive"?!r:i==="__v_isReadonly"?r:i==="__v_raw"?n:Reflect.get(je(t,i)&&i in n?t:n,i,o)}const Th={get:ul(!1,!1)},Rh={get:ul(!1,!0)},Ph={get:ul(!0,!1)};const Vf=new WeakMap,Hf=new WeakMap,Gf=new WeakMap,Nh=new WeakMap;function Dh(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function kh(r){return r.__v_skip||!Object.isExtensible(r)?0:Dh(oh(r))}function ar(r){return on(r)?r:cl(r,!1,Ah,Th,Vf)}function Wf(r){return cl(r,!1,Sh,Rh,Hf)}function ws(r){return cl(r,!0,Ch,Ph,Gf)}function cl(r,e,t,n,i){if(!ze(r)||r.__v_raw&&!(e&&r.__v_isReactive))return r;const o=kh(r);if(o===0)return r;const a=i.get(r);if(a)return a;const s=new Proxy(r,o===2?n:t);return i.set(r,s),s}function Kn(r){return on(r)?Kn(r.__v_raw):!!(r&&r.__v_isReactive)}function on(r){return!!(r&&r.__v_isReadonly)}function sr(r){return!!(r&&r.__v_isShallow)}function fl(r){return r?!!r.__v_raw:!1}function Ue(r){const e=r&&r.__v_raw;return e?Ue(e):r}function Mh(r){return!je(r,"__v_skip")&&Object.isExtensible(r)&&If(r,"__v_skip",!0),r}const Ot=r=>ze(r)?ar(r):r,Oo=r=>ze(r)?ws(r):r;function Mt(r){return r?r.__v_isRef===!0:!1}function Q(r){return qf(r,!1)}function Bh(r){return qf(r,!0)}function qf(r,e){return Mt(r)?r:new Lh(r,e)}class Lh{constructor(e,t){this.dep=new ll,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:Ue(e),this._value=t?e:Ot(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,n=this.__v_isShallow||sr(e)||on(e);e=n?e:Ue(e),tn(e,t)&&(this._rawValue=e,this._value=n?e:Ot(e),this.dep.trigger())}}function jr(r){return Mt(r)?r.value:r}const Fh={get:(r,e,t)=>e==="__v_raw"?r:jr(Reflect.get(r,e,t)),set:(r,e,t,n)=>{const i=r[e];return Mt(i)&&!Mt(t)?(i.value=t,!0):Reflect.set(r,e,t,n)}};function zf(r){return Kn(r)?r:new Proxy(r,Fh)}class Uh{constructor(e,t,n){this.fn=e,this.setter=t,this._value=void 0,this.dep=new ll(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Bi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Ye!==this)return Df(this,!0),!0}get value(){const e=this.dep.track();return Bf(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function jh(r,e,t=!1){let n,i;return _e(r)?n=r:(n=r.get,i=r.set),new Uh(n,i,t)}const to={},To=new WeakMap;let yn;function $h(r,e=!1,t=yn){if(t){let n=To.get(t);n||To.set(t,n=[]),n.push(r)}}function Vh(r,e,t=qe){const{immediate:n,deep:i,once:o,scheduler:a,augmentJob:s,call:l}=t,u=_=>i?_:sr(_)||i===!1||i===0?Fr(_,1):Fr(_);let c,f,d,h,p=!1,y=!1;if(Mt(r)?(f=()=>r.value,p=sr(r)):Kn(r)?(f=()=>u(r),p=!0):ve(r)?(y=!0,p=r.some(_=>Kn(_)||sr(_)),f=()=>r.map(_=>{if(Mt(_))return _.value;if(Kn(_))return u(_);if(_e(_))return l?l(_,2):_()})):_e(r)?e?f=l?()=>l(r,2):r:f=()=>{if(d){$r();try{d()}finally{Vr()}}const _=yn;yn=c;try{return l?l(r,3,[h]):r(h)}finally{yn=_}}:f=Tr,e&&i){const _=f,C=i===!0?1/0:i;f=()=>Fr(_(),C)}const m=gh(),g=()=>{c.stop(),m&&m.active&&rl(m.effects,c)};if(o&&e){const _=e;e=(...C)=>{_(...C),g()}}let x=y?new Array(r.length).fill(to):to;const w=_=>{if(!(!(c.flags&1)||!c.dirty&&!_))if(e){const C=c.run();if(i||p||(y?C.some((E,I)=>tn(E,x[I])):tn(C,x))){d&&d();const E=yn;yn=c;try{const I=[C,x===to?void 0:y&&x[0]===to?[]:x,h];x=C,l?l(e,3,I):e(...I)}finally{yn=E}}}else c.run()};return s&&s(w),c=new Pf(f),c.scheduler=a?()=>a(w,!1):w,h=_=>$h(_,!1,c),d=c.onStop=()=>{const _=To.get(c);if(_){if(l)l(_,4);else for(const C of _)C();To.delete(c)}},e?n?w(!0):x=c.run():a?a(w.bind(null,!0),!0):c.run(),g.pause=c.pause.bind(c),g.resume=c.resume.bind(c),g.stop=g,g}function Fr(r,e=1/0,t){if(e<=0||!ze(r)||r.__v_skip||(t=t||new Map,(t.get(r)||0)>=e))return r;if(t.set(r,e),e--,Mt(r))Fr(r.value,e,t);else if(ve(r))for(let n=0;n<r.length;n++)Fr(r[n],e,t);else if(oi(r)||zn(r))r.forEach(n=>{Fr(n,e,t)});else if(Sf(r)){for(const n in r)Fr(r[n],e,t);for(const n of Object.getOwnPropertySymbols(r))Object.prototype.propertyIsEnumerable.call(r,n)&&Fr(r[n],e,t)}return r}function zi(r,e,t,n){try{return n?r(...n):r()}catch(i){ta(i,e,t)}}function Pr(r,e,t,n){if(_e(r)){const i=zi(r,e,t,n);return i&&Af(i)&&i.catch(o=>{ta(o,e,t)}),i}if(ve(r)){const i=[];for(let o=0;o<r.length;o++)i.push(Pr(r[o],e,t,n));return i}}function ta(r,e,t,n=!0){const i=e?e.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||qe;if(e){let s=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${t}`;for(;s;){const c=s.ec;if(c){for(let f=0;f<c.length;f++)if(c[f](r,l,u)===!1)return}s=s.parent}if(o){$r(),zi(o,null,10,[r,l,u]),Vr();return}}Hh(r,t,i,n,a)}function Hh(r,e,t,n=!0,i=!1){if(i)throw r;console.error(r)}const Ht=[];let Sr=-1;const Xn=[];let Yr=null,Fn=0;const Kf=Promise.resolve();let Ro=null;function ra(r){const e=Ro||Kf;return r?e.then(this?r.bind(this):r):e}function Gh(r){let e=Sr+1,t=Ht.length;for(;e<t;){const n=e+t>>>1,i=Ht[n],o=Fi(i);o<r||o===r&&i.flags&2?e=n+1:t=n}return e}function dl(r){if(!(r.flags&1)){const e=Fi(r),t=Ht[Ht.length-1];!t||!(r.flags&2)&&e>=Fi(t)?Ht.push(r):Ht.splice(Gh(e),0,r),r.flags|=1,Xf()}}function Xf(){Ro||(Ro=Kf.then(Zf))}function Wh(r){ve(r)?Xn.push(...r):Yr&&r.id===-1?Yr.splice(Fn+1,0,r):r.flags&1||(Xn.push(r),r.flags|=1),Xf()}function Wl(r,e,t=Sr+1){for(;t<Ht.length;t++){const n=Ht[t];if(n&&n.flags&2){if(r&&n.id!==r.uid)continue;Ht.splice(t,1),t--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Yf(r){if(Xn.length){const e=[...new Set(Xn)].sort((t,n)=>Fi(t)-Fi(n));if(Xn.length=0,Yr){Yr.push(...e);return}for(Yr=e,Fn=0;Fn<Yr.length;Fn++){const t=Yr[Fn];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Yr=null,Fn=0}}const Fi=r=>r.id==null?r.flags&2?-1:1/0:r.id;function Zf(r){try{for(Sr=0;Sr<Ht.length;Sr++){const e=Ht[Sr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),zi(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Sr<Ht.length;Sr++){const e=Ht[Sr];e&&(e.flags&=-2)}Sr=-1,Ht.length=0,Yf(),Ro=null,(Ht.length||Xn.length)&&Zf()}}let rr=null,Jf=null;function Po(r){const e=rr;return rr=r,Jf=r&&r.type.__scopeId||null,e}function Te(r,e=rr,t){if(!e||r._n)return r;const n=(...i)=>{n._d&&ko(-1);const o=Po(e);let a;try{a=r(...i)}finally{Po(o),n._d&&ko(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function Ee(r,e){if(rr===null)return r;const t=sa(rr),n=r.dirs||(r.dirs=[]);for(let i=0;i<e.length;i++){let[o,a,s,l=qe]=e[i];o&&(_e(o)&&(o={mounted:o,updated:o}),o.deep&&Fr(a),n.push({dir:o,instance:t,value:a,oldValue:void 0,arg:s,modifiers:l}))}return r}function fn(r,e,t,n){const i=r.dirs,o=e&&e.dirs;for(let a=0;a<i.length;a++){const s=i[a];o&&(s.oldValue=o[a].value);let l=s.dir[n];l&&($r(),Pr(l,t,8,[r.el,s,r,e]),Vr())}}const qh=Symbol("_vte"),zh=r=>r.__isTeleport,Kh=Symbol("_leaveCb");function hl(r,e){r.shapeFlag&6&&r.component?(r.transition=e,hl(r.component.subTree,e)):r.shapeFlag&128?(r.ssContent.transition=e.clone(r.ssContent),r.ssFallback.transition=e.clone(r.ssFallback)):r.transition=e}function xt(r,e){return _e(r)?Bt({name:r.name},e,{setup:r}):r}function Qf(r){r.ids=[r.ids[0]+r.ids[2]+++"-",0,0]}const No=new WeakMap;function Oi(r,e,t,n,i=!1){if(ve(r)){r.forEach((p,y)=>Oi(p,e&&(ve(e)?e[y]:e),t,n,i));return}if(Ti(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Oi(r,e,t,n.component.subTree);return}const o=n.shapeFlag&4?sa(n.component):n.el,a=i?null:o,{i:s,r:l}=r,u=e&&e.r,c=s.refs===qe?s.refs={}:s.refs,f=s.setupState,d=Ue(f),h=f===qe?Ef:p=>je(d,p);if(u!=null&&u!==l){if(ql(e),ct(u))c[u]=null,h(u)&&(f[u]=null);else if(Mt(u)){u.value=null;const p=e;p.k&&(c[p.k]=null)}}if(_e(l))zi(l,s,12,[a,c]);else{const p=ct(l),y=Mt(l);if(p||y){const m=()=>{if(r.f){const g=p?h(l)?f[l]:c[l]:l.value;if(i)ve(g)&&rl(g,o);else if(ve(g))g.includes(o)||g.push(o);else if(p)c[l]=[o],h(l)&&(f[l]=c[l]);else{const x=[o];l.value=x,r.k&&(c[r.k]=x)}}else p?(c[l]=a,h(l)&&(f[l]=a)):y&&(l.value=a,r.k&&(c[r.k]=a))};if(a){const g=()=>{m(),No.delete(r)};g.id=-1,No.set(r,g),Jt(g,t)}else ql(r),m()}}}function ql(r){const e=No.get(r);e&&(e.flags|=8,No.delete(r))}Jo().requestIdleCallback;Jo().cancelIdleCallback;const Ti=r=>!!r.type.__asyncLoader,ed=r=>r.type.__isKeepAlive;function Xh(r,e){td(r,"a",e)}function Yh(r,e){td(r,"da",e)}function td(r,e,t=kt){const n=r.__wdc||(r.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return r()});if(na(e,n,t),t){let i=t.parent;for(;i&&i.parent;)ed(i.parent.vnode)&&Zh(n,e,t,i),i=i.parent}}function Zh(r,e,t,n){const i=na(e,r,n,!0);ia(()=>{rl(n[e],i)},t)}function na(r,e,t=kt,n=!1){if(t){const i=t[r]||(t[r]=[]),o=e.__weh||(e.__weh=(...a)=>{$r();const s=Ki(t),l=Pr(e,t,r,a);return s(),Vr(),l});return n?i.unshift(o):i.push(o),o}}const Gr=r=>(e,t=kt)=>{(!ji||r==="sp")&&na(r,(...n)=>e(...n),t)},Jh=Gr("bm"),un=Gr("m"),Qh=Gr("bu"),e1=Gr("u"),t1=Gr("bum"),ia=Gr("um"),r1=Gr("sp"),n1=Gr("rtg"),i1=Gr("rtc");function o1(r,e=kt){na("ec",r,e)}const a1="components";function Xt(r,e){return l1(a1,r,!0,e)||r}const s1=Symbol.for("v-ndc");function l1(r,e,t=!0,n=!1){const i=rr||kt;if(i){const o=i.type;{const s=Y1(o,!1);if(s&&(s===e||s===cr(e)||s===Yo(cr(e))))return o}const a=zl(i[r]||o[r],e)||zl(i.appContext[r],e);return!a&&n?o:a}}function zl(r,e){return r&&(r[e]||r[cr(e)]||r[Yo(cr(e))])}function Qt(r,e,t,n){let i;const o=t,a=ve(r);if(a||ct(r)){const s=a&&Kn(r);let l=!1,u=!1;s&&(l=!sr(r),u=on(r),r=ea(r)),i=new Array(r.length);for(let c=0,f=r.length;c<f;c++)i[c]=e(l?u?Oo(Ot(r[c])):Ot(r[c]):r[c],c,void 0,o)}else if(typeof r=="number"){i=new Array(r);for(let s=0;s<r;s++)i[s]=e(s+1,s,void 0,o)}else if(ze(r))if(r[Symbol.iterator])i=Array.from(r,(s,l)=>e(s,l,void 0,o));else{const s=Object.keys(r);i=new Array(s.length);for(let l=0,u=s.length;l<u;l++){const c=s[l];i[l]=e(r[c],c,l,o)}}else i=[];return i}const _s=r=>r?_d(r)?sa(r):_s(r.parent):null,Ri=Bt(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>_s(r.parent),$root:r=>_s(r.root),$host:r=>r.ce,$emit:r=>r.emit,$options:r=>nd(r),$forceUpdate:r=>r.f||(r.f=()=>{dl(r.update)}),$nextTick:r=>r.n||(r.n=ra.bind(r.proxy)),$watch:r=>T1.bind(r)}),wa=(r,e)=>r!==qe&&!r.__isScriptSetup&&je(r,e),u1={get({_:r},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:n,data:i,props:o,accessCache:a,type:s,appContext:l}=r;let u;if(e[0]!=="$"){const h=a[e];if(h!==void 0)switch(h){case 1:return n[e];case 2:return i[e];case 4:return t[e];case 3:return o[e]}else{if(wa(n,e))return a[e]=1,n[e];if(i!==qe&&je(i,e))return a[e]=2,i[e];if((u=r.propsOptions[0])&&je(u,e))return a[e]=3,o[e];if(t!==qe&&je(t,e))return a[e]=4,t[e];bs&&(a[e]=0)}}const c=Ri[e];let f,d;if(c)return e==="$attrs"&&Dt(r.attrs,"get",""),c(r);if((f=s.__cssModules)&&(f=f[e]))return f;if(t!==qe&&je(t,e))return a[e]=4,t[e];if(d=l.config.globalProperties,je(d,e))return d[e]},set({_:r},e,t){const{data:n,setupState:i,ctx:o}=r;return wa(i,e)?(i[e]=t,!0):n!==qe&&je(n,e)?(n[e]=t,!0):je(r.props,e)||e[0]==="$"&&e.slice(1)in r?!1:(o[e]=t,!0)},has({_:{data:r,setupState:e,accessCache:t,ctx:n,appContext:i,propsOptions:o,type:a}},s){let l,u;return!!(t[s]||r!==qe&&s[0]!=="$"&&je(r,s)||wa(e,s)||(l=o[0])&&je(l,s)||je(n,s)||je(Ri,s)||je(i.config.globalProperties,s)||(u=a.__cssModules)&&u[s])},defineProperty(r,e,t){return t.get!=null?r._.accessCache[e]=0:je(t,"value")&&this.set(r,e,t.value,null),Reflect.defineProperty(r,e,t)}};function Kl(r){return ve(r)?r.reduce((e,t)=>(e[t]=null,e),{}):r}let bs=!0;function c1(r){const e=nd(r),t=r.proxy,n=r.ctx;bs=!1,e.beforeCreate&&Xl(e.beforeCreate,r,"bc");const{data:i,computed:o,methods:a,watch:s,provide:l,inject:u,created:c,beforeMount:f,mounted:d,beforeUpdate:h,updated:p,activated:y,deactivated:m,beforeDestroy:g,beforeUnmount:x,destroyed:w,unmounted:_,render:C,renderTracked:E,renderTriggered:I,errorCaptured:D,serverPrefetch:M,expose:j,inheritAttrs:X,components:F,directives:k,filters:W}=e;if(u&&f1(u,n,null),a)for(const me in a){const he=a[me];_e(he)&&(n[me]=he.bind(t))}if(i){const me=i.call(t,t);ze(me)&&(r.data=ar(me))}if(bs=!0,o)for(const me in o){const he=o[me],wt=_e(he)?he.bind(t,t):_e(he.get)?he.get.bind(t,t):Tr,_t=!_e(he)&&_e(he.set)?he.set.bind(t):Tr,z=Ne({get:wt,set:_t});Object.defineProperty(n,me,{enumerable:!0,configurable:!0,get:()=>z.value,set:N=>z.value=N})}if(s)for(const me in s)rd(s[me],n,t,me);if(l){const me=_e(l)?l.call(t):l;Reflect.ownKeys(me).forEach(he=>{wo(he,me[he])})}c&&Xl(c,r,"c");function ue(me,he){ve(he)?he.forEach(wt=>me(wt.bind(t))):he&&me(he.bind(t))}if(ue(Jh,f),ue(un,d),ue(Qh,h),ue(e1,p),ue(Xh,y),ue(Yh,m),ue(o1,D),ue(i1,E),ue(n1,I),ue(t1,x),ue(ia,_),ue(r1,M),ve(j))if(j.length){const me=r.exposed||(r.exposed={});j.forEach(he=>{Object.defineProperty(me,he,{get:()=>t[he],set:wt=>t[he]=wt,enumerable:!0})})}else r.exposed||(r.exposed={});C&&r.render===Tr&&(r.render=C),X!=null&&(r.inheritAttrs=X),F&&(r.components=F),k&&(r.directives=k),M&&Qf(r)}function f1(r,e,t=Tr){ve(r)&&(r=Es(r));for(const n in r){const i=r[n];let o;ze(i)?"default"in i?o=xr(i.from||n,i.default,!0):o=xr(i.from||n):o=xr(i),Mt(o)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[n]=o}}function Xl(r,e,t){Pr(ve(r)?r.map(n=>n.bind(e.proxy)):r.bind(e.proxy),e,t)}function rd(r,e,t,n){let i=n.includes(".")?gd(t,n):()=>t[n];if(ct(r)){const o=e[r];_e(o)&&_o(i,o)}else if(_e(r))_o(i,r.bind(t));else if(ze(r))if(ve(r))r.forEach(o=>rd(o,e,t,n));else{const o=_e(r.handler)?r.handler.bind(t):e[r.handler];_e(o)&&_o(i,o,r)}}function nd(r){const e=r.type,{mixins:t,extends:n}=e,{mixins:i,optionsCache:o,config:{optionMergeStrategies:a}}=r.appContext,s=o.get(e);let l;return s?l=s:!i.length&&!t&&!n?l=e:(l={},i.length&&i.forEach(u=>Do(l,u,a,!0)),Do(l,e,a)),ze(e)&&o.set(e,l),l}function Do(r,e,t,n=!1){const{mixins:i,extends:o}=e;o&&Do(r,o,t,!0),i&&i.forEach(a=>Do(r,a,t,!0));for(const a in e)if(!(n&&a==="expose")){const s=d1[a]||t&&t[a];r[a]=s?s(r[a],e[a]):e[a]}return r}const d1={data:Yl,props:Zl,emits:Zl,methods:wi,computed:wi,beforeCreate:jt,created:jt,beforeMount:jt,mounted:jt,beforeUpdate:jt,updated:jt,beforeDestroy:jt,beforeUnmount:jt,destroyed:jt,unmounted:jt,activated:jt,deactivated:jt,errorCaptured:jt,serverPrefetch:jt,components:wi,directives:wi,watch:p1,provide:Yl,inject:h1};function Yl(r,e){return e?r?function(){return Bt(_e(r)?r.call(this,this):r,_e(e)?e.call(this,this):e)}:e:r}function h1(r,e){return wi(Es(r),Es(e))}function Es(r){if(ve(r)){const e={};for(let t=0;t<r.length;t++)e[r[t]]=r[t];return e}return r}function jt(r,e){return r?[...new Set([].concat(r,e))]:e}function wi(r,e){return r?Bt(Object.create(null),r,e):e}function Zl(r,e){return r?ve(r)&&ve(e)?[...new Set([...r,...e])]:Bt(Object.create(null),Kl(r),Kl(e??{})):e}function p1(r,e){if(!r)return e;if(!e)return r;const t=Bt(Object.create(null),r);for(const n in e)t[n]=jt(r[n],e[n]);return t}function id(){return{app:null,config:{isNativeTag:Ef,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let v1=0;function g1(r,e){return function(n,i=null){_e(n)||(n=Bt({},n)),i!=null&&!ze(i)&&(i=null);const o=id(),a=new WeakSet,s=[];let l=!1;const u=o.app={_uid:v1++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:J1,get config(){return o.config},set config(c){},use(c,...f){return a.has(c)||(c&&_e(c.install)?(a.add(c),c.install(u,...f)):_e(c)&&(a.add(c),c(u,...f))),u},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),u},component(c,f){return f?(o.components[c]=f,u):o.components[c]},directive(c,f){return f?(o.directives[c]=f,u):o.directives[c]},mount(c,f,d){if(!l){const h=u._ceVNode||ye(n,i);return h.appContext=o,d===!0?d="svg":d===!1&&(d=void 0),r(h,c,d),l=!0,u._container=c,c.__vue_app__=u,sa(h.component)}},onUnmount(c){s.push(c)},unmount(){l&&(Pr(s,u._instance,16),r(null,u._container),delete u._container.__vue_app__)},provide(c,f){return o.provides[c]=f,u},runWithContext(c){const f=Yn;Yn=u;try{return c()}finally{Yn=f}}};return u}}let Yn=null;function wo(r,e){if(kt){let t=kt.provides;const n=kt.parent&&kt.parent.provides;n===t&&(t=kt.provides=Object.create(n)),t[r]=e}}function xr(r,e,t=!1){const n=W1();if(n||Yn){let i=Yn?Yn._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&r in i)return i[r];if(arguments.length>1)return t&&_e(e)?e.call(n&&n.proxy):e}}const od={},ad=()=>Object.create(od),sd=r=>Object.getPrototypeOf(r)===od;function y1(r,e,t,n=!1){const i={},o=ad();r.propsDefaults=Object.create(null),ld(r,e,i,o);for(const a in r.propsOptions[0])a in i||(i[a]=void 0);t?r.props=n?i:Wf(i):r.type.props?r.props=i:r.props=o,r.attrs=o}function m1(r,e,t,n){const{props:i,attrs:o,vnode:{patchFlag:a}}=r,s=Ue(i),[l]=r.propsOptions;let u=!1;if((n||a>0)&&!(a&16)){if(a&8){const c=r.vnode.dynamicProps;for(let f=0;f<c.length;f++){let d=c[f];if(oa(r.emitsOptions,d))continue;const h=e[d];if(l)if(je(o,d))h!==o[d]&&(o[d]=h,u=!0);else{const p=cr(d);i[p]=As(l,s,p,h,r,!1)}else h!==o[d]&&(o[d]=h,u=!0)}}}else{ld(r,e,i,o)&&(u=!0);let c;for(const f in s)(!e||!je(e,f)&&((c=ln(f))===f||!je(e,c)))&&(l?t&&(t[f]!==void 0||t[c]!==void 0)&&(i[f]=As(l,s,f,void 0,r,!0)):delete i[f]);if(o!==s)for(const f in o)(!e||!je(e,f))&&(delete o[f],u=!0)}u&&Lr(r.attrs,"set","")}function ld(r,e,t,n){const[i,o]=r.propsOptions;let a=!1,s;if(e)for(let l in e){if(Ci(l))continue;const u=e[l];let c;i&&je(i,c=cr(l))?!o||!o.includes(c)?t[c]=u:(s||(s={}))[c]=u:oa(r.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,a=!0)}if(o){const l=Ue(t),u=s||qe;for(let c=0;c<o.length;c++){const f=o[c];t[f]=As(i,l,f,u[f],r,!je(u,f))}}return a}function As(r,e,t,n,i,o){const a=r[t];if(a!=null){const s=je(a,"default");if(s&&n===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&_e(l)){const{propsDefaults:u}=i;if(t in u)n=u[t];else{const c=Ki(i);n=u[t]=l.call(null,e),c()}}else n=l;i.ce&&i.ce._setProp(t,n)}a[0]&&(o&&!s?n=!1:a[1]&&(n===""||n===ln(t))&&(n=!0))}return n}const x1=new WeakMap;function ud(r,e,t=!1){const n=t?x1:e.propsCache,i=n.get(r);if(i)return i;const o=r.props,a={},s=[];let l=!1;if(!_e(r)){const c=f=>{l=!0;const[d,h]=ud(f,e,!0);Bt(a,d),h&&s.push(...h)};!t&&e.mixins.length&&e.mixins.forEach(c),r.extends&&c(r.extends),r.mixins&&r.mixins.forEach(c)}if(!o&&!l)return ze(r)&&n.set(r,qn),qn;if(ve(o))for(let c=0;c<o.length;c++){const f=cr(o[c]);Jl(f)&&(a[f]=qe)}else if(o)for(const c in o){const f=cr(c);if(Jl(f)){const d=o[c],h=a[f]=ve(d)||_e(d)?{type:d}:Bt({},d),p=h.type;let y=!1,m=!0;if(ve(p))for(let g=0;g<p.length;++g){const x=p[g],w=_e(x)&&x.name;if(w==="Boolean"){y=!0;break}else w==="String"&&(m=!1)}else y=_e(p)&&p.name==="Boolean";h[0]=y,h[1]=m,(y||je(h,"default"))&&s.push(f)}}const u=[a,s];return ze(r)&&n.set(r,u),u}function Jl(r){return r[0]!=="$"&&!Ci(r)}const pl=r=>r==="_"||r==="_ctx"||r==="$stable",vl=r=>ve(r)?r.map(Ir):[Ir(r)],w1=(r,e,t)=>{if(e._n)return e;const n=Te((...i)=>vl(e(...i)),t);return n._c=!1,n},cd=(r,e,t)=>{const n=r._ctx;for(const i in r){if(pl(i))continue;const o=r[i];if(_e(o))e[i]=w1(i,o,n);else if(o!=null){const a=vl(o);e[i]=()=>a}}},fd=(r,e)=>{const t=vl(e);r.slots.default=()=>t},dd=(r,e,t)=>{for(const n in e)(t||!pl(n))&&(r[n]=e[n])},_1=(r,e,t)=>{const n=r.slots=ad();if(r.vnode.shapeFlag&32){const i=e._;i?(dd(n,e,t),t&&If(n,"_",i,!0)):cd(e,n)}else e&&fd(r,e)},b1=(r,e,t)=>{const{vnode:n,slots:i}=r;let o=!0,a=qe;if(n.shapeFlag&32){const s=e._;s?t&&s===1?o=!1:dd(i,e,t):(o=!e.$stable,cd(e,i)),a=e}else e&&(fd(r,e),a={default:1});if(o)for(const s in i)!pl(s)&&a[s]==null&&delete i[s]},Jt=L1;function E1(r){return A1(r)}function A1(r,e){const t=Jo();t.__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:a,createText:s,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:d,setScopeId:h=Tr,insertStaticContent:p}=r,y=(A,S,O,$=null,H=null,U=null,ne=void 0,te=null,J=!!S.dynamicChildren)=>{if(A===S)return;A&&!pi(A,S)&&($=L(A),N(A,H,U,!0),A=null),S.patchFlag===-2&&(J=!1,S.dynamicChildren=null);const{type:G,ref:pe,shapeFlag:ie}=S;switch(G){case aa:m(A,S,O,$);break;case an:g(A,S,O,$);break;case bo:A==null&&x(S,O,$,ne);break;case at:F(A,S,O,$,H,U,ne,te,J);break;default:ie&1?C(A,S,O,$,H,U,ne,te,J):ie&6?k(A,S,O,$,H,U,ne,te,J):(ie&64||ie&128)&&G.process(A,S,O,$,H,U,ne,te,J,se)}pe!=null&&H?Oi(pe,A&&A.ref,U,S||A,!S):pe==null&&A&&A.ref!=null&&Oi(A.ref,null,U,A,!0)},m=(A,S,O,$)=>{if(A==null)n(S.el=s(S.children),O,$);else{const H=S.el=A.el;S.children!==A.children&&u(H,S.children)}},g=(A,S,O,$)=>{A==null?n(S.el=l(S.children||""),O,$):S.el=A.el},x=(A,S,O,$)=>{[A.el,A.anchor]=p(A.children,S,O,$,A.el,A.anchor)},w=({el:A,anchor:S},O,$)=>{let H;for(;A&&A!==S;)H=d(A),n(A,O,$),A=H;n(S,O,$)},_=({el:A,anchor:S})=>{let O;for(;A&&A!==S;)O=d(A),i(A),A=O;i(S)},C=(A,S,O,$,H,U,ne,te,J)=>{if(S.type==="svg"?ne="svg":S.type==="math"&&(ne="mathml"),A==null)E(S,O,$,H,U,ne,te,J);else{const G=A.el&&A.el._isVueCE?A.el:null;try{G&&G._beginPatch(),M(A,S,H,U,ne,te,J)}finally{G&&G._endPatch()}}},E=(A,S,O,$,H,U,ne,te)=>{let J,G;const{props:pe,shapeFlag:ie,transition:de,dirs:xe}=A;if(J=A.el=a(A.type,U,pe&&pe.is,pe),ie&8?c(J,A.children):ie&16&&D(A.children,J,null,$,H,_a(A,U),ne,te),xe&&fn(A,null,$,"created"),I(J,A,A.scopeId,ne,$),pe){for(const Ke in pe)Ke!=="value"&&!Ci(Ke)&&o(J,Ke,null,pe[Ke],U,$);"value"in pe&&o(J,"value",null,pe.value,U),(G=pe.onVnodeBeforeMount)&&Ar(G,$,A)}xe&&fn(A,null,$,"beforeMount");const Oe=C1(H,de);Oe&&de.beforeEnter(J),n(J,S,O),((G=pe&&pe.onVnodeMounted)||Oe||xe)&&Jt(()=>{G&&Ar(G,$,A),Oe&&de.enter(J),xe&&fn(A,null,$,"mounted")},H)},I=(A,S,O,$,H)=>{if(O&&h(A,O),$)for(let U=0;U<$.length;U++)h(A,$[U]);if(H){let U=H.subTree;if(S===U||md(U.type)&&(U.ssContent===S||U.ssFallback===S)){const ne=H.vnode;I(A,ne,ne.scopeId,ne.slotScopeIds,H.parent)}}},D=(A,S,O,$,H,U,ne,te,J=0)=>{for(let G=J;G<A.length;G++){const pe=A[G]=te?Zr(A[G]):Ir(A[G]);y(null,pe,S,O,$,H,U,ne,te)}},M=(A,S,O,$,H,U,ne)=>{const te=S.el=A.el;let{patchFlag:J,dynamicChildren:G,dirs:pe}=S;J|=A.patchFlag&16;const ie=A.props||qe,de=S.props||qe;let xe;if(O&&dn(O,!1),(xe=de.onVnodeBeforeUpdate)&&Ar(xe,O,S,A),pe&&fn(S,A,O,"beforeUpdate"),O&&dn(O,!0),(ie.innerHTML&&de.innerHTML==null||ie.textContent&&de.textContent==null)&&c(te,""),G?j(A.dynamicChildren,G,te,O,$,_a(S,H),U):ne||he(A,S,te,null,O,$,_a(S,H),U,!1),J>0){if(J&16)X(te,ie,de,O,H);else if(J&2&&ie.class!==de.class&&o(te,"class",null,de.class,H),J&4&&o(te,"style",ie.style,de.style,H),J&8){const Oe=S.dynamicProps;for(let Ke=0;Ke<Oe.length;Ke++){const $e=Oe[Ke],Gt=ie[$e],Wt=de[$e];(Wt!==Gt||$e==="value")&&o(te,$e,Gt,Wt,H,O)}}J&1&&A.children!==S.children&&c(te,S.children)}else!ne&&G==null&&X(te,ie,de,O,H);((xe=de.onVnodeUpdated)||pe)&&Jt(()=>{xe&&Ar(xe,O,S,A),pe&&fn(S,A,O,"updated")},$)},j=(A,S,O,$,H,U,ne)=>{for(let te=0;te<S.length;te++){const J=A[te],G=S[te],pe=J.el&&(J.type===at||!pi(J,G)||J.shapeFlag&198)?f(J.el):O;y(J,G,pe,null,$,H,U,ne,!0)}},X=(A,S,O,$,H)=>{if(S!==O){if(S!==qe)for(const U in S)!Ci(U)&&!(U in O)&&o(A,U,S[U],null,H,$);for(const U in O){if(Ci(U))continue;const ne=O[U],te=S[U];ne!==te&&U!=="value"&&o(A,U,te,ne,H,$)}"value"in O&&o(A,"value",S.value,O.value,H)}},F=(A,S,O,$,H,U,ne,te,J)=>{const G=S.el=A?A.el:s(""),pe=S.anchor=A?A.anchor:s("");let{patchFlag:ie,dynamicChildren:de,slotScopeIds:xe}=S;xe&&(te=te?te.concat(xe):xe),A==null?(n(G,O,$),n(pe,O,$),D(S.children||[],O,pe,H,U,ne,te,J)):ie>0&&ie&64&&de&&A.dynamicChildren?(j(A.dynamicChildren,de,O,H,U,ne,te),(S.key!=null||H&&S===H.subTree)&&hd(A,S,!0)):he(A,S,O,pe,H,U,ne,te,J)},k=(A,S,O,$,H,U,ne,te,J)=>{S.slotScopeIds=te,A==null?S.shapeFlag&512?H.ctx.activate(S,O,$,ne,J):W(S,O,$,H,U,ne,J):Z(A,S,J)},W=(A,S,O,$,H,U,ne)=>{const te=A.component=G1(A,$,H);if(ed(A)&&(te.ctx.renderer=se),q1(te,!1,ne),te.asyncDep){if(H&&H.registerDep(te,ue,ne),!A.el){const J=te.subTree=ye(an);g(null,J,S,O),A.placeholder=J.el}}else ue(te,A,S,O,H,U,ne)},Z=(A,S,O)=>{const $=S.component=A.component;if(M1(A,S,O))if($.asyncDep&&!$.asyncResolved){me($,S,O);return}else $.next=S,$.update();else S.el=A.el,$.vnode=S},ue=(A,S,O,$,H,U,ne)=>{const te=()=>{if(A.isMounted){let{next:ie,bu:de,u:xe,parent:Oe,vnode:Ke}=A;{const br=pd(A);if(br){ie&&(ie.el=Ke.el,me(A,ie,ne)),br.asyncDep.then(()=>{A.isUnmounted||te()});return}}let $e=ie,Gt;dn(A,!1),ie?(ie.el=Ke.el,me(A,ie,ne)):ie=Ke,de&&xo(de),(Gt=ie.props&&ie.props.onVnodeBeforeUpdate)&&Ar(Gt,Oe,ie,Ke),dn(A,!0);const Wt=eu(A),_r=A.subTree;A.subTree=Wt,y(_r,Wt,f(_r.el),L(_r),A,H,U),ie.el=Wt.el,$e===null&&B1(A,Wt.el),xe&&Jt(xe,H),(Gt=ie.props&&ie.props.onVnodeUpdated)&&Jt(()=>Ar(Gt,Oe,ie,Ke),H)}else{let ie;const{el:de,props:xe}=S,{bm:Oe,m:Ke,parent:$e,root:Gt,type:Wt}=A,_r=Ti(S);dn(A,!1),Oe&&xo(Oe),!_r&&(ie=xe&&xe.onVnodeBeforeMount)&&Ar(ie,$e,S),dn(A,!0);{Gt.ce&&Gt.ce._def.shadowRoot!==!1&&Gt.ce._injectChildStyle(Wt);const br=A.subTree=eu(A);y(null,br,O,$,A,H,U),S.el=br.el}if(Ke&&Jt(Ke,H),!_r&&(ie=xe&&xe.onVnodeMounted)){const br=S;Jt(()=>Ar(ie,$e,br),H)}(S.shapeFlag&256||$e&&Ti($e.vnode)&&$e.vnode.shapeFlag&256)&&A.a&&Jt(A.a,H),A.isMounted=!0,S=O=$=null}};A.scope.on();const J=A.effect=new Pf(te);A.scope.off();const G=A.update=J.run.bind(J),pe=A.job=J.runIfDirty.bind(J);pe.i=A,pe.id=A.uid,J.scheduler=()=>dl(pe),dn(A,!0),G()},me=(A,S,O)=>{S.component=A;const $=A.vnode.props;A.vnode=S,A.next=null,m1(A,S.props,$,O),b1(A,S.children,O),$r(),Wl(A),Vr()},he=(A,S,O,$,H,U,ne,te,J=!1)=>{const G=A&&A.children,pe=A?A.shapeFlag:0,ie=S.children,{patchFlag:de,shapeFlag:xe}=S;if(de>0){if(de&128){_t(G,ie,O,$,H,U,ne,te,J);return}else if(de&256){wt(G,ie,O,$,H,U,ne,te,J);return}}xe&8?(pe&16&&tt(G,H,U),ie!==G&&c(O,ie)):pe&16?xe&16?_t(G,ie,O,$,H,U,ne,te,J):tt(G,H,U,!0):(pe&8&&c(O,""),xe&16&&D(ie,O,$,H,U,ne,te,J))},wt=(A,S,O,$,H,U,ne,te,J)=>{A=A||qn,S=S||qn;const G=A.length,pe=S.length,ie=Math.min(G,pe);let de;for(de=0;de<ie;de++){const xe=S[de]=J?Zr(S[de]):Ir(S[de]);y(A[de],xe,O,null,H,U,ne,te,J)}G>pe?tt(A,H,U,!0,!1,ie):D(S,O,$,H,U,ne,te,J,ie)},_t=(A,S,O,$,H,U,ne,te,J)=>{let G=0;const pe=S.length;let ie=A.length-1,de=pe-1;for(;G<=ie&&G<=de;){const xe=A[G],Oe=S[G]=J?Zr(S[G]):Ir(S[G]);if(pi(xe,Oe))y(xe,Oe,O,null,H,U,ne,te,J);else break;G++}for(;G<=ie&&G<=de;){const xe=A[ie],Oe=S[de]=J?Zr(S[de]):Ir(S[de]);if(pi(xe,Oe))y(xe,Oe,O,null,H,U,ne,te,J);else break;ie--,de--}if(G>ie){if(G<=de){const xe=de+1,Oe=xe<pe?S[xe].el:$;for(;G<=de;)y(null,S[G]=J?Zr(S[G]):Ir(S[G]),O,Oe,H,U,ne,te,J),G++}}else if(G>de)for(;G<=ie;)N(A[G],H,U,!0),G++;else{const xe=G,Oe=G,Ke=new Map;for(G=Oe;G<=de;G++){const Zt=S[G]=J?Zr(S[G]):Ir(S[G]);Zt.key!=null&&Ke.set(Zt.key,G)}let $e,Gt=0;const Wt=de-Oe+1;let _r=!1,br=0;const di=new Array(Wt);for(G=0;G<Wt;G++)di[G]=0;for(G=xe;G<=ie;G++){const Zt=A[G];if(Gt>=Wt){N(Zt,H,U,!0);continue}let Er;if(Zt.key!=null)Er=Ke.get(Zt.key);else for($e=Oe;$e<=de;$e++)if(di[$e-Oe]===0&&pi(Zt,S[$e])){Er=$e;break}Er===void 0?N(Zt,H,U,!0):(di[Er-Oe]=G+1,Er>=br?br=Er:_r=!0,y(Zt,S[Er],O,null,H,U,ne,te,J),Gt++)}const Fl=_r?S1(di):qn;for($e=Fl.length-1,G=Wt-1;G>=0;G--){const Zt=Oe+G,Er=S[Zt],Ul=S[Zt+1],jl=Zt+1<pe?Ul.el||Ul.placeholder:$;di[G]===0?y(null,Er,O,jl,H,U,ne,te,J):_r&&($e<0||G!==Fl[$e]?z(Er,O,jl,2):$e--)}}},z=(A,S,O,$,H=null)=>{const{el:U,type:ne,transition:te,children:J,shapeFlag:G}=A;if(G&6){z(A.component.subTree,S,O,$);return}if(G&128){A.suspense.move(S,O,$);return}if(G&64){ne.move(A,S,O,se);return}if(ne===at){n(U,S,O);for(let ie=0;ie<J.length;ie++)z(J[ie],S,O,$);n(A.anchor,S,O);return}if(ne===bo){w(A,S,O);return}if($!==2&&G&1&&te)if($===0)te.beforeEnter(U),n(U,S,O),Jt(()=>te.enter(U),H);else{const{leave:ie,delayLeave:de,afterLeave:xe}=te,Oe=()=>{A.ctx.isUnmounted?i(U):n(U,S,O)},Ke=()=>{U._isLeaving&&U[Kh](!0),ie(U,()=>{Oe(),xe&&xe()})};de?de(U,Oe,Ke):Ke()}else n(U,S,O)},N=(A,S,O,$=!1,H=!1)=>{const{type:U,props:ne,ref:te,children:J,dynamicChildren:G,shapeFlag:pe,patchFlag:ie,dirs:de,cacheIndex:xe}=A;if(ie===-2&&(H=!1),te!=null&&($r(),Oi(te,null,O,A,!0),Vr()),xe!=null&&(S.renderCache[xe]=void 0),pe&256){S.ctx.deactivate(A);return}const Oe=pe&1&&de,Ke=!Ti(A);let $e;if(Ke&&($e=ne&&ne.onVnodeBeforeUnmount)&&Ar($e,S,A),pe&6)Ie(A.component,O,$);else{if(pe&128){A.suspense.unmount(O,$);return}Oe&&fn(A,null,S,"beforeUnmount"),pe&64?A.type.remove(A,S,O,se,$):G&&!G.hasOnce&&(U!==at||ie>0&&ie&64)?tt(G,S,O,!1,!0):(U===at&&ie&384||!H&&pe&16)&&tt(J,S,O),$&&De(A)}(Ke&&($e=ne&&ne.onVnodeUnmounted)||Oe)&&Jt(()=>{$e&&Ar($e,S,A),Oe&&fn(A,null,S,"unmounted")},O)},De=A=>{const{type:S,el:O,anchor:$,transition:H}=A;if(S===at){q(O,$);return}if(S===bo){_(A);return}const U=()=>{i(O),H&&!H.persisted&&H.afterLeave&&H.afterLeave()};if(A.shapeFlag&1&&H&&!H.persisted){const{leave:ne,delayLeave:te}=H,J=()=>ne(O,U);te?te(A.el,U,J):J()}else U()},q=(A,S)=>{let O;for(;A!==S;)O=d(A),i(A),A=O;i(S)},Ie=(A,S,O)=>{const{bum:$,scope:H,job:U,subTree:ne,um:te,m:J,a:G}=A;Ql(J),Ql(G),$&&xo($),H.stop(),U&&(U.flags|=8,N(ne,A,S,O)),te&&Jt(te,S),Jt(()=>{A.isUnmounted=!0},S)},tt=(A,S,O,$=!1,H=!1,U=0)=>{for(let ne=U;ne<A.length;ne++)N(A[ne],S,O,$,H)},L=A=>{if(A.shapeFlag&6)return L(A.component.subTree);if(A.shapeFlag&128)return A.suspense.next();const S=d(A.anchor||A.el),O=S&&S[qh];return O?d(O):S};let K=!1;const ee=(A,S,O)=>{A==null?S._vnode&&N(S._vnode,null,null,!0):y(S._vnode||null,A,S,null,null,null,O),S._vnode=A,K||(K=!0,Wl(),Yf(),K=!1)},se={p:y,um:N,m:z,r:De,mt:W,mc:D,pc:he,pbc:j,n:L,o:r};return{render:ee,hydrate:void 0,createApp:g1(ee)}}function _a({type:r,props:e},t){return t==="svg"&&r==="foreignObject"||t==="mathml"&&r==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function dn({effect:r,job:e},t){t?(r.flags|=32,e.flags|=4):(r.flags&=-33,e.flags&=-5)}function C1(r,e){return(!r||r&&!r.pendingBranch)&&e&&!e.persisted}function hd(r,e,t=!1){const n=r.children,i=e.children;if(ve(n)&&ve(i))for(let o=0;o<n.length;o++){const a=n[o];let s=i[o];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=i[o]=Zr(i[o]),s.el=a.el),!t&&s.patchFlag!==-2&&hd(a,s)),s.type===aa&&s.patchFlag!==-1&&(s.el=a.el),s.type===an&&!s.el&&(s.el=a.el)}}function S1(r){const e=r.slice(),t=[0];let n,i,o,a,s;const l=r.length;for(n=0;n<l;n++){const u=r[n];if(u!==0){if(i=t[t.length-1],r[i]<u){e[n]=i,t.push(n);continue}for(o=0,a=t.length-1;o<a;)s=o+a>>1,r[t[s]]<u?o=s+1:a=s;u<r[t[o]]&&(o>0&&(e[n]=t[o-1]),t[o]=n)}}for(o=t.length,a=t[o-1];o-- >0;)t[o]=a,a=e[a];return t}function pd(r){const e=r.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:pd(e)}function Ql(r){if(r)for(let e=0;e<r.length;e++)r[e].flags|=8}const I1=Symbol.for("v-scx"),O1=()=>xr(I1);function _o(r,e,t){return vd(r,e,t)}function vd(r,e,t=qe){const{immediate:n,deep:i,flush:o,once:a}=t,s=Bt({},t),l=e&&n||!e&&o!=="post";let u;if(ji){if(o==="sync"){const h=O1();u=h.__watcherHandles||(h.__watcherHandles=[])}else if(!l){const h=()=>{};return h.stop=Tr,h.resume=Tr,h.pause=Tr,h}}const c=kt;s.call=(h,p,y)=>Pr(h,c,p,y);let f=!1;o==="post"?s.scheduler=h=>{Jt(h,c&&c.suspense)}:o!=="sync"&&(f=!0,s.scheduler=(h,p)=>{p?h():dl(h)}),s.augmentJob=h=>{e&&(h.flags|=4),f&&(h.flags|=2,c&&(h.id=c.uid,h.i=c))};const d=Vh(r,e,s);return ji&&(u?u.push(d):l&&d()),d}function T1(r,e,t){const n=this.proxy,i=ct(r)?r.includes(".")?gd(n,r):()=>n[r]:r.bind(n,n);let o;_e(e)?o=e:(o=e.handler,t=e);const a=Ki(this),s=vd(i,o.bind(n),t);return a(),s}function gd(r,e){const t=e.split(".");return()=>{let n=r;for(let i=0;i<t.length&&n;i++)n=n[t[i]];return n}}const R1=(r,e)=>e==="modelValue"||e==="model-value"?r.modelModifiers:r[`${e}Modifiers`]||r[`${cr(e)}Modifiers`]||r[`${ln(e)}Modifiers`];function P1(r,e,...t){if(r.isUnmounted)return;const n=r.vnode.props||qe;let i=t;const o=e.startsWith("update:"),a=o&&R1(n,e.slice(7));a&&(a.trim&&(i=t.map(c=>ct(c)?c.trim():c)),a.number&&(i=t.map(Zo)));let s,l=n[s=va(e)]||n[s=va(cr(e))];!l&&o&&(l=n[s=va(ln(e))]),l&&Pr(l,r,6,i);const u=n[s+"Once"];if(u){if(!r.emitted)r.emitted={};else if(r.emitted[s])return;r.emitted[s]=!0,Pr(u,r,6,i)}}const N1=new WeakMap;function yd(r,e,t=!1){const n=t?N1:e.emitsCache,i=n.get(r);if(i!==void 0)return i;const o=r.emits;let a={},s=!1;if(!_e(r)){const l=u=>{const c=yd(u,e,!0);c&&(s=!0,Bt(a,c))};!t&&e.mixins.length&&e.mixins.forEach(l),r.extends&&l(r.extends),r.mixins&&r.mixins.forEach(l)}return!o&&!s?(ze(r)&&n.set(r,null),null):(ve(o)?o.forEach(l=>a[l]=null):Bt(a,o),ze(r)&&n.set(r,a),a)}function oa(r,e){return!r||!Ko(e)?!1:(e=e.slice(2).replace(/Once$/,""),je(r,e[0].toLowerCase()+e.slice(1))||je(r,ln(e))||je(r,e))}function eu(r){const{type:e,vnode:t,proxy:n,withProxy:i,propsOptions:[o],slots:a,attrs:s,emit:l,render:u,renderCache:c,props:f,data:d,setupState:h,ctx:p,inheritAttrs:y}=r,m=Po(r);let g,x;try{if(t.shapeFlag&4){const _=i||n,C=_;g=Ir(u.call(C,_,c,f,h,d,p)),x=s}else{const _=e;g=Ir(_.length>1?_(f,{attrs:s,slots:a,emit:l}):_(f,null)),x=e.props?s:D1(s)}}catch(_){Pi.length=0,ta(_,r,1),g=ye(an)}let w=g;if(x&&y!==!1){const _=Object.keys(x),{shapeFlag:C}=w;_.length&&C&7&&(o&&_.some(tl)&&(x=k1(x,o)),w=Jn(w,x,!1,!0))}return t.dirs&&(w=Jn(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(t.dirs):t.dirs),t.transition&&hl(w,t.transition),g=w,Po(m),g}const D1=r=>{let e;for(const t in r)(t==="class"||t==="style"||Ko(t))&&((e||(e={}))[t]=r[t]);return e},k1=(r,e)=>{const t={};for(const n in r)(!tl(n)||!(n.slice(9)in e))&&(t[n]=r[n]);return t};function M1(r,e,t){const{props:n,children:i,component:o}=r,{props:a,children:s,patchFlag:l}=e,u=o.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return n?tu(n,a,u):!!a;if(l&8){const c=e.dynamicProps;for(let f=0;f<c.length;f++){const d=c[f];if(a[d]!==n[d]&&!oa(u,d))return!0}}}else return(i||s)&&(!s||!s.$stable)?!0:n===a?!1:n?a?tu(n,a,u):!0:!!a;return!1}function tu(r,e,t){const n=Object.keys(e);if(n.length!==Object.keys(r).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(e[o]!==r[o]&&!oa(t,o))return!0}return!1}function B1({vnode:r,parent:e},t){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===r&&(n.el=r.el),n===r)(r=e.vnode).el=t,e=e.parent;else break}}const md=r=>r.__isSuspense;function L1(r,e){e&&e.pendingBranch?ve(r)?e.effects.push(...r):e.effects.push(r):Wh(r)}const at=Symbol.for("v-fgt"),aa=Symbol.for("v-txt"),an=Symbol.for("v-cmt"),bo=Symbol.for("v-stc"),Pi=[];let nr=null;function R(r=!1){Pi.push(nr=r?null:[])}function F1(){Pi.pop(),nr=Pi[Pi.length-1]||null}let Ui=1;function ko(r,e=!1){Ui+=r,r<0&&nr&&e&&(nr.hasOnce=!0)}function xd(r){return r.dynamicChildren=Ui>0?nr||qn:null,F1(),Ui>0&&nr&&nr.push(r),r}function P(r,e,t,n,i,o){return xd(v(r,e,t,n,i,o,!0))}function gl(r,e,t,n,i){return xd(ye(r,e,t,n,i,!0))}function Mo(r){return r?r.__v_isVNode===!0:!1}function pi(r,e){return r.type===e.type&&r.key===e.key}const wd=({key:r})=>r??null,Eo=({ref:r,ref_key:e,ref_for:t})=>(typeof r=="number"&&(r=""+r),r!=null?ct(r)||Mt(r)||_e(r)?{i:rr,r,k:e,f:!!t}:r:null);function v(r,e=null,t=null,n=0,i=null,o=r===at?0:1,a=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:r,props:e,key:e&&wd(e),ref:e&&Eo(e),scopeId:Jf,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:rr};return s?(yl(l,t),o&128&&r.normalize(l)):t&&(l.shapeFlag|=ct(t)?8:16),Ui>0&&!a&&nr&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&nr.push(l),l}const ye=U1;function U1(r,e=null,t=null,n=0,i=null,o=!1){if((!r||r===s1)&&(r=an),Mo(r)){const s=Jn(r,e,!0);return t&&yl(s,t),Ui>0&&!o&&nr&&(s.shapeFlag&6?nr[nr.indexOf(r)]=s:nr.push(s)),s.patchFlag=-2,s}if(Z1(r)&&(r=r.__vccOpts),e){e=j1(e);let{class:s,style:l}=e;s&&!ct(s)&&(e.class=At(s)),ze(l)&&(fl(l)&&!ve(l)&&(l=Bt({},l)),e.style=Qo(l))}const a=ct(r)?1:md(r)?128:zh(r)?64:ze(r)?4:_e(r)?2:0;return v(r,e,t,n,i,a,o,!0)}function j1(r){return r?fl(r)||sd(r)?Bt({},r):r:null}function Jn(r,e,t=!1,n=!1){const{props:i,ref:o,patchFlag:a,children:s,transition:l}=r,u=e?$1(i||{},e):i,c={__v_isVNode:!0,__v_skip:!0,type:r.type,props:u,key:u&&wd(u),ref:e&&e.ref?t&&o?ve(o)?o.concat(Eo(e)):[o,Eo(e)]:Eo(e):o,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:s,target:r.target,targetStart:r.targetStart,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:e&&r.type!==at?a===-1?16:a|16:a,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:l,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&Jn(r.ssContent),ssFallback:r.ssFallback&&Jn(r.ssFallback),placeholder:r.placeholder,el:r.el,anchor:r.anchor,ctx:r.ctx,ce:r.ce};return l&&n&&hl(c,l.clone(c)),c}function be(r=" ",e=0){return ye(aa,null,r,e)}function Qn(r,e){const t=ye(bo,null,r);return t.staticCount=e,t}function re(r="",e=!1){return e?(R(),gl(an,null,r)):ye(an,null,r)}function Ir(r){return r==null||typeof r=="boolean"?ye(an):ve(r)?ye(at,null,r.slice()):Mo(r)?Zr(r):ye(aa,null,String(r))}function Zr(r){return r.el===null&&r.patchFlag!==-1||r.memo?r:Jn(r)}function yl(r,e){let t=0;const{shapeFlag:n}=r;if(e==null)e=null;else if(ve(e))t=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),yl(r,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!sd(e)?e._ctx=rr:i===3&&rr&&(rr.slots._===1?e._=1:(e._=2,r.patchFlag|=1024))}else _e(e)?(e={default:e,_ctx:rr},t=32):(e=String(e),n&64?(t=16,e=[be(e)]):t=8);r.children=e,r.shapeFlag|=t}function $1(...r){const e={};for(let t=0;t<r.length;t++){const n=r[t];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=At([e.class,n.class]));else if(i==="style")e.style=Qo([e.style,n.style]);else if(Ko(i)){const o=e[i],a=n[i];a&&o!==a&&!(ve(o)&&o.includes(a))&&(e[i]=o?[].concat(o,a):a)}else i!==""&&(e[i]=n[i])}return e}function Ar(r,e,t,n=null){Pr(r,e,7,[t,n])}const V1=id();let H1=0;function G1(r,e,t){const n=r.type,i=(e?e.appContext:r.appContext)||V1,o={uid:H1++,vnode:r,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new vh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ud(n,i),emitsOptions:yd(n,i),emit:null,emitted:null,propsDefaults:qe,inheritAttrs:n.inheritAttrs,ctx:qe,data:qe,props:qe,attrs:qe,slots:qe,refs:qe,setupState:qe,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=P1.bind(null,o),r.ce&&r.ce(o),o}let kt=null;const W1=()=>kt||rr;let Bo,Cs;{const r=Jo(),e=(t,n)=>{let i;return(i=r[t])||(i=r[t]=[]),i.push(n),o=>{i.length>1?i.forEach(a=>a(o)):i[0](o)}};Bo=e("__VUE_INSTANCE_SETTERS__",t=>kt=t),Cs=e("__VUE_SSR_SETTERS__",t=>ji=t)}const Ki=r=>{const e=kt;return Bo(r),r.scope.on(),()=>{r.scope.off(),Bo(e)}},ru=()=>{kt&&kt.scope.off(),Bo(null)};function _d(r){return r.vnode.shapeFlag&4}let ji=!1;function q1(r,e=!1,t=!1){e&&Cs(e);const{props:n,children:i}=r.vnode,o=_d(r);y1(r,n,o,e),_1(r,i,t||e);const a=o?z1(r,e):void 0;return e&&Cs(!1),a}function z1(r,e){const t=r.type;r.accessCache=Object.create(null),r.proxy=new Proxy(r.ctx,u1);const{setup:n}=t;if(n){$r();const i=r.setupContext=n.length>1?X1(r):null,o=Ki(r),a=zi(n,r,0,[r.props,i]),s=Af(a);if(Vr(),o(),(s||r.sp)&&!Ti(r)&&Qf(r),s){if(a.then(ru,ru),e)return a.then(l=>{nu(r,l)}).catch(l=>{ta(l,r,0)});r.asyncDep=a}else nu(r,a)}else bd(r)}function nu(r,e,t){_e(e)?r.type.__ssrInlineRender?r.ssrRender=e:r.render=e:ze(e)&&(r.setupState=zf(e)),bd(r)}function bd(r,e,t){const n=r.type;r.render||(r.render=n.render||Tr);{const i=Ki(r);$r();try{c1(r)}finally{Vr(),i()}}}const K1={get(r,e){return Dt(r,"get",""),r[e]}};function X1(r){const e=t=>{r.exposed=t||{}};return{attrs:new Proxy(r.attrs,K1),slots:r.slots,emit:r.emit,expose:e}}function sa(r){return r.exposed?r.exposeProxy||(r.exposeProxy=new Proxy(zf(Mh(r.exposed)),{get(e,t){if(t in e)return e[t];if(t in Ri)return Ri[t](r)},has(e,t){return t in e||t in Ri}})):r.proxy}function Y1(r,e=!0){return _e(r)?r.displayName||r.name:r.name||e&&r.__name}function Z1(r){return _e(r)&&"__vccOpts"in r}const Ne=(r,e)=>jh(r,e,ji);function Ed(r,e,t){try{ko(-1);const n=arguments.length;return n===2?ze(e)&&!ve(e)?Mo(e)?ye(r,null,[e]):ye(r,e):ye(r,null,e):(n>3?t=Array.prototype.slice.call(arguments,2):n===3&&Mo(t)&&(t=[t]),ye(r,e,t))}finally{ko(1)}}const J1="3.5.23";let Ss;const iu=typeof window<"u"&&window.trustedTypes;if(iu)try{Ss=iu.createPolicy("vue",{createHTML:r=>r})}catch{}const Ad=Ss?r=>Ss.createHTML(r):r=>r,Q1="http://www.w3.org/2000/svg",ep="http://www.w3.org/1998/Math/MathML",Mr=typeof document<"u"?document:null,ou=Mr&&Mr.createElement("template"),tp={insert:(r,e,t)=>{e.insertBefore(r,t||null)},remove:r=>{const e=r.parentNode;e&&e.removeChild(r)},createElement:(r,e,t,n)=>{const i=e==="svg"?Mr.createElementNS(Q1,r):e==="mathml"?Mr.createElementNS(ep,r):t?Mr.createElement(r,{is:t}):Mr.createElement(r);return r==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:r=>Mr.createTextNode(r),createComment:r=>Mr.createComment(r),setText:(r,e)=>{r.nodeValue=e},setElementText:(r,e)=>{r.textContent=e},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>Mr.querySelector(r),setScopeId(r,e){r.setAttribute(e,"")},insertStaticContent(r,e,t,n,i,o){const a=t?t.previousSibling:e.lastChild;if(i&&(i===o||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===o||!(i=i.nextSibling)););else{ou.innerHTML=Ad(n==="svg"?`<svg>${r}</svg>`:n==="mathml"?`<math>${r}</math>`:r);const s=ou.content;if(n==="svg"||n==="mathml"){const l=s.firstChild;for(;l.firstChild;)s.appendChild(l.firstChild);s.removeChild(l)}e.insertBefore(s,t)}return[a?a.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},rp=Symbol("_vtc");function np(r,e,t){const n=r[rp];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?r.removeAttribute("class"):t?r.setAttribute("class",e):r.className=e}const au=Symbol("_vod"),ip=Symbol("_vsh"),op=Symbol(""),ap=/(?:^|;)\s*display\s*:/;function sp(r,e,t){const n=r.style,i=ct(t);let o=!1;if(t&&!i){if(e)if(ct(e))for(const a of e.split(";")){const s=a.slice(0,a.indexOf(":")).trim();t[s]==null&&Ao(n,s,"")}else for(const a in e)t[a]==null&&Ao(n,a,"");for(const a in t)a==="display"&&(o=!0),Ao(n,a,t[a])}else if(i){if(e!==t){const a=n[op];a&&(t+=";"+a),n.cssText=t,o=ap.test(t)}}else e&&r.removeAttribute("style");au in r&&(r[au]=o?n.display:"",r[ip]&&(n.display="none"))}const su=/\s*!important$/;function Ao(r,e,t){if(ve(t))t.forEach(n=>Ao(r,e,n));else if(t==null&&(t=""),e.startsWith("--"))r.setProperty(e,t);else{const n=lp(r,e);su.test(t)?r.setProperty(ln(n),t.replace(su,""),"important"):r[n]=t}}const lu=["Webkit","Moz","ms"],ba={};function lp(r,e){const t=ba[e];if(t)return t;let n=cr(e);if(n!=="filter"&&n in r)return ba[e]=n;n=Yo(n);for(let i=0;i<lu.length;i++){const o=lu[i]+n;if(o in r)return ba[e]=o}return e}const uu="http://www.w3.org/1999/xlink";function cu(r,e,t,n,i,o=hh(e)){n&&e.startsWith("xlink:")?t==null?r.removeAttributeNS(uu,e.slice(6,e.length)):r.setAttributeNS(uu,e,t):t==null||o&&!Of(t)?r.removeAttribute(e):r.setAttribute(e,o?"":Rr(t)?String(t):t)}function fu(r,e,t,n,i){if(e==="innerHTML"||e==="textContent"){t!=null&&(r[e]=e==="innerHTML"?Ad(t):t);return}const o=r.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const s=o==="OPTION"?r.getAttribute("value")||"":r.value,l=t==null?r.type==="checkbox"?"on":"":String(t);(s!==l||!("_value"in r))&&(r.value=l),t==null&&r.removeAttribute(e),r._value=t;return}let a=!1;if(t===""||t==null){const s=typeof r[e];s==="boolean"?t=Of(t):t==null&&s==="string"?(t="",a=!0):s==="number"&&(t=0,a=!0)}try{r[e]=t}catch{}a&&r.removeAttribute(i||e)}function Ur(r,e,t,n){r.addEventListener(e,t,n)}function up(r,e,t,n){r.removeEventListener(e,t,n)}const du=Symbol("_vei");function cp(r,e,t,n,i=null){const o=r[du]||(r[du]={}),a=o[e];if(n&&a)a.value=n;else{const[s,l]=fp(e);if(n){const u=o[e]=pp(n,i);Ur(r,s,u,l)}else a&&(up(r,s,a,l),o[e]=void 0)}}const hu=/(?:Once|Passive|Capture)$/;function fp(r){let e;if(hu.test(r)){e={};let n;for(;n=r.match(hu);)r=r.slice(0,r.length-n[0].length),e[n[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):ln(r.slice(2)),e]}let Ea=0;const dp=Promise.resolve(),hp=()=>Ea||(dp.then(()=>Ea=0),Ea=Date.now());function pp(r,e){const t=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=t.attached)return;Pr(vp(n,t.value),e,5,[n])};return t.value=r,t.attached=hp(),t}function vp(r,e){if(ve(e)){const t=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{t.call(r),r._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const pu=r=>r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&r.charCodeAt(2)>96&&r.charCodeAt(2)<123,gp=(r,e,t,n,i,o)=>{const a=i==="svg";e==="class"?np(r,n,a):e==="style"?sp(r,t,n):Ko(e)?tl(e)||cp(r,e,t,n,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):yp(r,e,n,a))?(fu(r,e,n),!r.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&cu(r,e,n,a,o,e!=="value")):r._isVueCE&&(/[A-Z]/.test(e)||!ct(n))?fu(r,cr(e),n,o,e):(e==="true-value"?r._trueValue=n:e==="false-value"&&(r._falseValue=n),cu(r,e,n,a))};function yp(r,e,t,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in r&&pu(e)&&_e(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&r.tagName==="IFRAME"||e==="form"||e==="list"&&r.tagName==="INPUT"||e==="type"&&r.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=r.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return pu(e)&&ct(t)?!1:e in r}const sn=r=>{const e=r.props["onUpdate:modelValue"]||!1;return ve(e)?t=>xo(e,t):e};function mp(r){r.target.composing=!0}function vu(r){const e=r.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const lr=Symbol("_assign");function gu(r,e,t){return e&&(r=r.trim()),t&&(r=Zo(r)),r}const We={created(r,{modifiers:{lazy:e,trim:t,number:n}},i){r[lr]=sn(i);const o=n||i.props&&i.props.type==="number";Ur(r,e?"change":"input",a=>{a.target.composing||r[lr](gu(r.value,t,o))}),(t||o)&&Ur(r,"change",()=>{r.value=gu(r.value,t,o)}),e||(Ur(r,"compositionstart",mp),Ur(r,"compositionend",vu),Ur(r,"change",vu))},mounted(r,{value:e}){r.value=e??""},beforeUpdate(r,{value:e,oldValue:t,modifiers:{lazy:n,trim:i,number:o}},a){if(r[lr]=sn(a),r.composing)return;const s=(o||r.type==="number")&&!/^0\d/.test(r.value)?Zo(r.value):r.value,l=e??"";s!==l&&(document.activeElement===r&&r.type!=="range"&&(n&&e===t||i&&r.value.trim()===l)||(r.value=l))}},ml={deep:!0,created(r,e,t){r[lr]=sn(t),Ur(r,"change",()=>{const n=r._modelValue,i=ei(r),o=r.checked,a=r[lr];if(ve(n)){const s=il(n,i),l=s!==-1;if(o&&!l)a(n.concat(i));else if(!o&&l){const u=[...n];u.splice(s,1),a(u)}}else if(oi(n)){const s=new Set(n);o?s.add(i):s.delete(i),a(s)}else a(Sd(r,o))})},mounted:yu,beforeUpdate(r,e,t){r[lr]=sn(t),yu(r,e,t)}};function yu(r,{value:e,oldValue:t},n){r._modelValue=e;let i;if(ve(e))i=il(e,n.props.value)>-1;else if(oi(e))i=e.has(n.props.value);else{if(e===t)return;i=In(e,Sd(r,!0))}r.checked!==i&&(r.checked=i)}const Cd={created(r,{value:e},t){r.checked=In(e,t.props.value),r[lr]=sn(t),Ur(r,"change",()=>{r[lr](ei(r))})},beforeUpdate(r,{value:e,oldValue:t},n){r[lr]=sn(n),e!==t&&(r.checked=In(e,n.props.value))}},Hr={deep:!0,created(r,{value:e,modifiers:{number:t}},n){const i=oi(e);Ur(r,"change",()=>{const o=Array.prototype.filter.call(r.options,a=>a.selected).map(a=>t?Zo(ei(a)):ei(a));r[lr](r.multiple?i?new Set(o):o:o[0]),r._assigning=!0,ra(()=>{r._assigning=!1})}),r[lr]=sn(n)},mounted(r,{value:e}){mu(r,e)},beforeUpdate(r,e,t){r[lr]=sn(t)},updated(r,{value:e}){r._assigning||mu(r,e)}};function mu(r,e){const t=r.multiple,n=ve(e);if(!(t&&!n&&!oi(e))){for(let i=0,o=r.options.length;i<o;i++){const a=r.options[i],s=ei(a);if(t)if(n){const l=typeof s;l==="string"||l==="number"?a.selected=e.some(u=>String(u)===String(s)):a.selected=il(e,s)>-1}else a.selected=e.has(s);else if(In(ei(a),e)){r.selectedIndex!==i&&(r.selectedIndex=i);return}}!t&&r.selectedIndex!==-1&&(r.selectedIndex=-1)}}function ei(r){return"_value"in r?r._value:r.value}function Sd(r,e){const t=e?"_trueValue":"_falseValue";return t in r?r[t]:e}const $i={created(r,e,t){ro(r,e,t,null,"created")},mounted(r,e,t){ro(r,e,t,null,"mounted")},beforeUpdate(r,e,t,n){ro(r,e,t,n,"beforeUpdate")},updated(r,e,t,n){ro(r,e,t,n,"updated")}};function xp(r,e){switch(r){case"SELECT":return Hr;case"TEXTAREA":return We;default:switch(e){case"checkbox":return ml;case"radio":return Cd;default:return We}}}function ro(r,e,t,n,i){const a=xp(r.tagName,t.props&&t.props.type)[i];a&&a(r,e,t,n)}const wp=["ctrl","shift","alt","meta"],_p={stop:r=>r.stopPropagation(),prevent:r=>r.preventDefault(),self:r=>r.target!==r.currentTarget,ctrl:r=>!r.ctrlKey,shift:r=>!r.shiftKey,alt:r=>!r.altKey,meta:r=>!r.metaKey,left:r=>"button"in r&&r.button!==0,middle:r=>"button"in r&&r.button!==1,right:r=>"button"in r&&r.button!==2,exact:(r,e)=>wp.some(t=>r[`${t}Key`]&&!e.includes(t))},ai=(r,e)=>{const t=r._withMods||(r._withMods={}),n=e.join(".");return t[n]||(t[n]=((i,...o)=>{for(let a=0;a<e.length;a++){const s=_p[e[a]];if(s&&s(i,e))return}return r(i,...o)}))},bp={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Id=(r,e)=>{const t=r._withKeys||(r._withKeys={}),n=e.join(".");return t[n]||(t[n]=(i=>{if(!("key"in i))return;const o=ln(i.key);if(e.some(a=>a===o||bp[a]===o))return r(i)}))},Ep=Bt({patchProp:gp},tp);let xu;function Ap(){return xu||(xu=E1(Ep))}const Cp=((...r)=>{const e=Ap().createApp(...r),{mount:t}=e;return e.mount=n=>{const i=Ip(n);if(!i)return;const o=e._component;!_e(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const a=t(i,!1,Sp(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},e});function Sp(r){if(r instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&r instanceof MathMLElement)return"mathml"}function Ip(r){return ct(r)?document.querySelector(r):r}const Op={class:"bg-[#8B0000] text-white"},Tp={class:"container mx-auto px-4 py-12"},Rp={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8"},Pp={class:"space-y-4"},Np={class:"text-blue-200 text-xs"},Dp={class:"space-y-4"},kp={class:"space-y-2"},Mp={class:"space-y-4"},Bp={class:"space-y-2"},Lp=xt({__name:"Footer",setup(r){const e=Ne(()=>new Date().getFullYear());return(t,n)=>{const i=Xt("router-link");return R(),P("footer",Op,[v("div",Tp,[v("div",Rp,[v("div",Pp,[n[0]||(n[0]=v("h3",{class:"text-2xl font-bold tracking-wider"},"CINE ULEAM",-1)),n[1]||(n[1]=v("p",{class:"text-blue-100 text-sm leading-relaxed"}," El cine oficial de la Universidad Laica Eloy Alfaro de Manab. Entretenimiento y cultura cinematogrfica para toda la comunidad universitaria. ",-1)),v("p",Np,"  "+V(e.value)+" Todos los derechos reservados. ",1)]),v("div",Dp,[n[5]||(n[5]=v("h4",{class:"text-lg font-semibold border-b border-white pb-2"},"Navegacin",-1)),v("ul",kp,[v("li",null,[ye(i,{to:"/",class:"text-blue-100 hover:text-yellow-400 transition-colors duration-200 text-sm"},{default:Te(()=>[...n[2]||(n[2]=[be("Inicio",-1)])]),_:1})]),v("li",null,[ye(i,{to:"/cartelera",class:"text-blue-100 hover:text-yellow-400 transition-colors duration-200 text-sm"},{default:Te(()=>[...n[3]||(n[3]=[be("Cartelera",-1)])]),_:1})]),v("li",null,[ye(i,{to:"/proximas",class:"text-blue-100 hover:text-yellow-400 transition-colors duration-200 text-sm"},{default:Te(()=>[...n[4]||(n[4]=[be("Prximas Pelculas",-1)])]),_:1})])])]),v("div",Mp,[n[8]||(n[8]=v("h4",{class:"text-lg font-semibold border-b border-b border-whitepb-2"},"Informacin",-1)),v("ul",Bp,[v("li",null,[ye(i,{to:"/contacto",class:"text-blue-100 hover:text-yellow-400 transition-colors duration-200 text-sm"},{default:Te(()=>[...n[6]||(n[6]=[be("Contacto",-1)])]),_:1})]),v("li",null,[ye(i,{to:"/acerca-de",class:"text-blue-100 hover:text-yellow-400 transition-colors duration-200 text-sm"},{default:Te(()=>[...n[7]||(n[7]=[be("Acerca de",-1)])]),_:1})])])]),n[9]||(n[9]=Qn('<div class="space-y-4"><h4 class="text-lg font-semibold border-b border-b border-whitepb-2">Sguenos</h4><div class="flex space-x-4"><a href="https://www.facebook.com/UleamEc" aria-label="Facebook" class="hover:bg-yellow-500 hover:text-[#003366] p-3 rounded-full transition-all duration-200 hover:scale-110"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"></path></svg></a><a href="https://www.instagram.com/uleam_ecuador_oficial/" aria-label="Instagram" class="hover:bg-yellow-500 hover:text-[#003366] p-3 rounded-full transition-all duration-200 hover:scale-110"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"></path></svg></a></div><p class="text-blue-100 text-xs mt-4"> Campus ULEAM<br> (05) 262-3740<br> cine@uleam.edu.ec </p></div>',1))]),n[10]||(n[10]=v("div",{class:"mt-8 pt-6 text-center"},[v("p",{class:"text-blue-100 text-sm flex items-center justify-center gap-2"}," Hecho para la comunidad ULEAM ")],-1))])])}}});const Un=typeof document<"u";function Od(r){return typeof r=="object"||"displayName"in r||"props"in r||"__vccOpts"in r}function Fp(r){return r.__esModule||r[Symbol.toStringTag]==="Module"||r.default&&Od(r.default)}const Fe=Object.assign;function Aa(r,e){const t={};for(const n in e){const i=e[n];t[n]=wr(i)?i.map(r):r(i)}return t}const Ni=()=>{},wr=Array.isArray;function wu(r,e){const t={};for(const n in r)t[n]=n in e?e[n]:r[n];return t}const Td=/#/g,Up=/&/g,jp=/\//g,$p=/=/g,Vp=/\?/g,Rd=/\+/g,Hp=/%5B/g,Gp=/%5D/g,Pd=/%5E/g,Wp=/%60/g,Nd=/%7B/g,qp=/%7C/g,Dd=/%7D/g,zp=/%20/g;function xl(r){return r==null?"":encodeURI(""+r).replace(qp,"|").replace(Hp,"[").replace(Gp,"]")}function Kp(r){return xl(r).replace(Nd,"{").replace(Dd,"}").replace(Pd,"^")}function Is(r){return xl(r).replace(Rd,"%2B").replace(zp,"+").replace(Td,"%23").replace(Up,"%26").replace(Wp,"`").replace(Nd,"{").replace(Dd,"}").replace(Pd,"^")}function Xp(r){return Is(r).replace($p,"%3D")}function Yp(r){return xl(r).replace(Td,"%23").replace(Vp,"%3F")}function Zp(r){return Yp(r).replace(jp,"%2F")}function Vi(r){if(r==null)return null;try{return decodeURIComponent(""+r)}catch{}return""+r}const Jp=/\/$/,Qp=r=>r.replace(Jp,"");function Ca(r,e,t="/"){let n,i={},o="",a="";const s=e.indexOf("#");let l=e.indexOf("?");return l=s>=0&&l>s?-1:l,l>=0&&(n=e.slice(0,l),o=e.slice(l,s>0?s:e.length),i=r(o.slice(1))),s>=0&&(n=n||e.slice(0,s),a=e.slice(s,e.length)),n=nv(n??e,t),{fullPath:n+o+a,path:n,query:i,hash:Vi(a)}}function ev(r,e){const t=e.query?r(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function _u(r,e){return!e||!r.toLowerCase().startsWith(e.toLowerCase())?r:r.slice(e.length)||"/"}function tv(r,e,t){const n=e.matched.length-1,i=t.matched.length-1;return n>-1&&n===i&&ti(e.matched[n],t.matched[i])&&kd(e.params,t.params)&&r(e.query)===r(t.query)&&e.hash===t.hash}function ti(r,e){return(r.aliasOf||r)===(e.aliasOf||e)}function kd(r,e){if(Object.keys(r).length!==Object.keys(e).length)return!1;for(const t in r)if(!rv(r[t],e[t]))return!1;return!0}function rv(r,e){return wr(r)?bu(r,e):wr(e)?bu(e,r):r===e}function bu(r,e){return wr(e)?r.length===e.length&&r.every((t,n)=>t===e[n]):r.length===1&&r[0]===e}function nv(r,e){if(r.startsWith("/"))return r;if(!r)return e;const t=e.split("/"),n=r.split("/"),i=n[n.length-1];(i===".."||i===".")&&n.push("");let o=t.length-1,a,s;for(a=0;a<n.length;a++)if(s=n[a],s!==".")if(s==="..")o>1&&o--;else break;return t.slice(0,o).join("/")+"/"+n.slice(a).join("/")}const Wr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Os=(function(r){return r.pop="pop",r.push="push",r})({}),Sa=(function(r){return r.back="back",r.forward="forward",r.unknown="",r})({});function iv(r){if(!r)if(Un){const e=document.querySelector("base");r=e&&e.getAttribute("href")||"/",r=r.replace(/^\w+:\/\/[^\/]+/,"")}else r="/";return r[0]!=="/"&&r[0]!=="#"&&(r="/"+r),Qp(r)}const ov=/^[^#]+#/;function av(r,e){return r.replace(ov,"#")+e}function sv(r,e){const t=document.documentElement.getBoundingClientRect(),n=r.getBoundingClientRect();return{behavior:e.behavior,left:n.left-t.left-(e.left||0),top:n.top-t.top-(e.top||0)}}const la=()=>({left:window.scrollX,top:window.scrollY});function lv(r){let e;if("el"in r){const t=r.el,n=typeof t=="string"&&t.startsWith("#"),i=typeof t=="string"?n?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!i)return;e=sv(i,r)}else e=r;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Eu(r,e){return(history.state?history.state.position-e:-1)+r}const Ts=new Map;function uv(r,e){Ts.set(r,e)}function cv(r){const e=Ts.get(r);return Ts.delete(r),e}function fv(r){return typeof r=="string"||r&&typeof r=="object"}function Md(r){return typeof r=="string"||typeof r=="symbol"}let ot=(function(r){return r[r.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",r[r.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",r[r.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",r[r.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",r[r.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",r})({});const Bd=Symbol("");ot.MATCHER_NOT_FOUND+"",ot.NAVIGATION_GUARD_REDIRECT+"",ot.NAVIGATION_ABORTED+"",ot.NAVIGATION_CANCELLED+"",ot.NAVIGATION_DUPLICATED+"";function ri(r,e){return Fe(new Error,{type:r,[Bd]:!0},e)}function kr(r,e){return r instanceof Error&&Bd in r&&(e==null||!!(r.type&e))}const dv=["params","query","hash"];function hv(r){if(typeof r=="string")return r;if(r.path!=null)return r.path;const e={};for(const t of dv)t in r&&(e[t]=r[t]);return JSON.stringify(e,null,2)}function pv(r){const e={};if(r===""||r==="?")return e;const t=(r[0]==="?"?r.slice(1):r).split("&");for(let n=0;n<t.length;++n){const i=t[n].replace(Rd," "),o=i.indexOf("="),a=Vi(o<0?i:i.slice(0,o)),s=o<0?null:Vi(i.slice(o+1));if(a in e){let l=e[a];wr(l)||(l=e[a]=[l]),l.push(s)}else e[a]=s}return e}function Au(r){let e="";for(let t in r){const n=r[t];if(t=Xp(t),n==null){n!==void 0&&(e+=(e.length?"&":"")+t);continue}(wr(n)?n.map(i=>i&&Is(i)):[n&&Is(n)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+t,i!=null&&(e+="="+i))})}return e}function vv(r){const e={};for(const t in r){const n=r[t];n!==void 0&&(e[t]=wr(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return e}const gv=Symbol(""),Cu=Symbol(""),ua=Symbol(""),wl=Symbol(""),Rs=Symbol("");function vi(){let r=[];function e(n){return r.push(n),()=>{const i=r.indexOf(n);i>-1&&r.splice(i,1)}}function t(){r=[]}return{add:e,list:()=>r.slice(),reset:t}}function Jr(r,e,t,n,i,o=a=>a()){const a=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((s,l)=>{const u=d=>{d===!1?l(ri(ot.NAVIGATION_ABORTED,{from:t,to:e})):d instanceof Error?l(d):fv(d)?l(ri(ot.NAVIGATION_GUARD_REDIRECT,{from:e,to:d})):(a&&n.enterCallbacks[i]===a&&typeof d=="function"&&a.push(d),s())},c=o(()=>r.call(n&&n.instances[i],e,t,u));let f=Promise.resolve(c);r.length<3&&(f=f.then(u)),f.catch(d=>l(d))})}function Ia(r,e,t,n,i=o=>o()){const o=[];for(const a of r)for(const s in a.components){let l=a.components[s];if(!(e!=="beforeRouteEnter"&&!a.instances[s]))if(Od(l)){const u=(l.__vccOpts||l)[e];u&&o.push(Jr(u,t,n,a,s,i))}else{let u=l();o.push(()=>u.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${s}" at "${a.path}"`);const f=Fp(c)?c.default:c;a.mods[s]=c,a.components[s]=f;const d=(f.__vccOpts||f)[e];return d&&Jr(d,t,n,a,s,i)()}))}}return o}function yv(r,e){const t=[],n=[],i=[],o=Math.max(e.matched.length,r.matched.length);for(let a=0;a<o;a++){const s=e.matched[a];s&&(r.matched.find(u=>ti(u,s))?n.push(s):t.push(s));const l=r.matched[a];l&&(e.matched.find(u=>ti(u,l))||i.push(l))}return[t,n,i]}let mv=()=>location.protocol+"//"+location.host;function Ld(r,e){const{pathname:t,search:n,hash:i}=e,o=r.indexOf("#");if(o>-1){let a=i.includes(r.slice(o))?r.slice(o).length:1,s=i.slice(a);return s[0]!=="/"&&(s="/"+s),_u(s,"")}return _u(t,r)+n+i}function xv(r,e,t,n){let i=[],o=[],a=null;const s=({state:d})=>{const h=Ld(r,location),p=t.value,y=e.value;let m=0;if(d){if(t.value=h,e.value=d,a&&a===p){a=null;return}m=y?d.position-y.position:0}else n(h);i.forEach(g=>{g(t.value,p,{delta:m,type:Os.pop,direction:m?m>0?Sa.forward:Sa.back:Sa.unknown})})};function l(){a=t.value}function u(d){i.push(d);const h=()=>{const p=i.indexOf(d);p>-1&&i.splice(p,1)};return o.push(h),h}function c(){if(document.visibilityState==="hidden"){const{history:d}=window;if(!d.state)return;d.replaceState(Fe({},d.state,{scroll:la()}),"")}}function f(){for(const d of o)d();o=[],window.removeEventListener("popstate",s),window.removeEventListener("pagehide",c),document.removeEventListener("visibilitychange",c)}return window.addEventListener("popstate",s),window.addEventListener("pagehide",c),document.addEventListener("visibilitychange",c),{pauseListeners:l,listen:u,destroy:f}}function Su(r,e,t,n=!1,i=!1){return{back:r,current:e,forward:t,replaced:n,position:window.history.length,scroll:i?la():null}}function wv(r){const{history:e,location:t}=window,n={value:Ld(r,t)},i={value:e.state};i.value||o(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function o(l,u,c){const f=r.indexOf("#"),d=f>-1?(t.host&&document.querySelector("base")?r:r.slice(f))+l:mv()+r+l;try{e[c?"replaceState":"pushState"](u,"",d),i.value=u}catch(h){console.error(h),t[c?"replace":"assign"](d)}}function a(l,u){o(l,Fe({},e.state,Su(i.value.back,l,i.value.forward,!0),u,{position:i.value.position}),!0),n.value=l}function s(l,u){const c=Fe({},i.value,e.state,{forward:l,scroll:la()});o(c.current,c,!0),o(l,Fe({},Su(n.value,l,null),{position:c.position+1},u),!1),n.value=l}return{location:n,state:i,push:s,replace:a}}function _v(r){r=iv(r);const e=wv(r),t=xv(r,e.state,e.location,e.replace);function n(o,a=!0){a||t.pauseListeners(),history.go(o)}const i=Fe({location:"",base:r,go:n,createHref:av.bind(null,r)},e,t);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}let bn=(function(r){return r[r.Static=0]="Static",r[r.Param=1]="Param",r[r.Group=2]="Group",r})({});var ft=(function(r){return r[r.Static=0]="Static",r[r.Param=1]="Param",r[r.ParamRegExp=2]="ParamRegExp",r[r.ParamRegExpEnd=3]="ParamRegExpEnd",r[r.EscapeNext=4]="EscapeNext",r})(ft||{});const bv={type:bn.Static,value:""},Ev=/[a-zA-Z0-9_]/;function Av(r){if(!r)return[[]];if(r==="/")return[[bv]];if(!r.startsWith("/"))throw new Error(`Invalid path "${r}"`);function e(h){throw new Error(`ERR (${t})/"${u}": ${h}`)}let t=ft.Static,n=t;const i=[];let o;function a(){o&&i.push(o),o=[]}let s=0,l,u="",c="";function f(){u&&(t===ft.Static?o.push({type:bn.Static,value:u}):t===ft.Param||t===ft.ParamRegExp||t===ft.ParamRegExpEnd?(o.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:bn.Param,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function d(){u+=l}for(;s<r.length;){if(l=r[s++],l==="\\"&&t!==ft.ParamRegExp){n=t,t=ft.EscapeNext;continue}switch(t){case ft.Static:l==="/"?(u&&f(),a()):l===":"?(f(),t=ft.Param):d();break;case ft.EscapeNext:d(),t=n;break;case ft.Param:l==="("?t=ft.ParamRegExp:Ev.test(l)?d():(f(),t=ft.Static,l!=="*"&&l!=="?"&&l!=="+"&&s--);break;case ft.ParamRegExp:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:t=ft.ParamRegExpEnd:c+=l;break;case ft.ParamRegExpEnd:f(),t=ft.Static,l!=="*"&&l!=="?"&&l!=="+"&&s--,c="";break;default:e("Unknown state");break}}return t===ft.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),f(),a(),i}const Iu="[^/]+?",Cv={sensitive:!1,strict:!1,start:!0,end:!0};var Vt=(function(r){return r[r._multiplier=10]="_multiplier",r[r.Root=90]="Root",r[r.Segment=40]="Segment",r[r.SubSegment=30]="SubSegment",r[r.Static=40]="Static",r[r.Dynamic=20]="Dynamic",r[r.BonusCustomRegExp=10]="BonusCustomRegExp",r[r.BonusWildcard=-50]="BonusWildcard",r[r.BonusRepeatable=-20]="BonusRepeatable",r[r.BonusOptional=-8]="BonusOptional",r[r.BonusStrict=.7000000000000001]="BonusStrict",r[r.BonusCaseSensitive=.25]="BonusCaseSensitive",r})(Vt||{});const Sv=/[.+*?^${}()[\]/\\]/g;function Iv(r,e){const t=Fe({},Cv,e),n=[];let i=t.start?"^":"";const o=[];for(const u of r){const c=u.length?[]:[Vt.Root];t.strict&&!u.length&&(i+="/");for(let f=0;f<u.length;f++){const d=u[f];let h=Vt.Segment+(t.sensitive?Vt.BonusCaseSensitive:0);if(d.type===bn.Static)f||(i+="/"),i+=d.value.replace(Sv,"\\$&"),h+=Vt.Static;else if(d.type===bn.Param){const{value:p,repeatable:y,optional:m,regexp:g}=d;o.push({name:p,repeatable:y,optional:m});const x=g||Iu;if(x!==Iu){h+=Vt.BonusCustomRegExp;try{`${x}`}catch(_){throw new Error(`Invalid custom RegExp for param "${p}" (${x}): `+_.message)}}let w=y?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;f||(w=m&&u.length<2?`(?:/${w})`:"/"+w),m&&(w+="?"),i+=w,h+=Vt.Dynamic,m&&(h+=Vt.BonusOptional),y&&(h+=Vt.BonusRepeatable),x===".*"&&(h+=Vt.BonusWildcard)}c.push(h)}n.push(c)}if(t.strict&&t.end){const u=n.length-1;n[u][n[u].length-1]+=Vt.BonusStrict}t.strict||(i+="/?"),t.end?i+="$":t.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const a=new RegExp(i,t.sensitive?"":"i");function s(u){const c=u.match(a),f={};if(!c)return null;for(let d=1;d<c.length;d++){const h=c[d]||"",p=o[d-1];f[p.name]=h&&p.repeatable?h.split("/"):h}return f}function l(u){let c="",f=!1;for(const d of r){(!f||!c.endsWith("/"))&&(c+="/"),f=!1;for(const h of d)if(h.type===bn.Static)c+=h.value;else if(h.type===bn.Param){const{value:p,repeatable:y,optional:m}=h,g=p in u?u[p]:"";if(wr(g)&&!y)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const x=wr(g)?g.join("/"):g;if(!x)if(m)d.length<2&&(c.endsWith("/")?c=c.slice(0,-1):f=!0);else throw new Error(`Missing required param "${p}"`);c+=x}}return c||"/"}return{re:a,score:n,keys:o,parse:s,stringify:l}}function Ov(r,e){let t=0;for(;t<r.length&&t<e.length;){const n=e[t]-r[t];if(n)return n;t++}return r.length<e.length?r.length===1&&r[0]===Vt.Static+Vt.Segment?-1:1:r.length>e.length?e.length===1&&e[0]===Vt.Static+Vt.Segment?1:-1:0}function Fd(r,e){let t=0;const n=r.score,i=e.score;for(;t<n.length&&t<i.length;){const o=Ov(n[t],i[t]);if(o)return o;t++}if(Math.abs(i.length-n.length)===1){if(Ou(n))return 1;if(Ou(i))return-1}return i.length-n.length}function Ou(r){const e=r[r.length-1];return r.length>0&&e[e.length-1]<0}const Tv={strict:!1,end:!0,sensitive:!1};function Rv(r,e,t){const n=Iv(Av(r.path),t),i=Fe(n,{record:r,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function Pv(r,e){const t=[],n=new Map;e=wu(Tv,e);function i(f){return n.get(f)}function o(f,d,h){const p=!h,y=Ru(f);y.aliasOf=h&&h.record;const m=wu(e,f),g=[y];if("alias"in f){const _=typeof f.alias=="string"?[f.alias]:f.alias;for(const C of _)g.push(Ru(Fe({},y,{components:h?h.record.components:y.components,path:C,aliasOf:h?h.record:y})))}let x,w;for(const _ of g){const{path:C}=_;if(d&&C[0]!=="/"){const E=d.record.path,I=E[E.length-1]==="/"?"":"/";_.path=d.record.path+(C&&I+C)}if(x=Rv(_,d,m),h?h.alias.push(x):(w=w||x,w!==x&&w.alias.push(x),p&&f.name&&!Pu(x)&&a(f.name)),Ud(x)&&l(x),y.children){const E=y.children;for(let I=0;I<E.length;I++)o(E[I],x,h&&h.children[I])}h=h||x}return w?()=>{a(w)}:Ni}function a(f){if(Md(f)){const d=n.get(f);d&&(n.delete(f),t.splice(t.indexOf(d),1),d.children.forEach(a),d.alias.forEach(a))}else{const d=t.indexOf(f);d>-1&&(t.splice(d,1),f.record.name&&n.delete(f.record.name),f.children.forEach(a),f.alias.forEach(a))}}function s(){return t}function l(f){const d=kv(f,t);t.splice(d,0,f),f.record.name&&!Pu(f)&&n.set(f.record.name,f)}function u(f,d){let h,p={},y,m;if("name"in f&&f.name){if(h=n.get(f.name),!h)throw ri(ot.MATCHER_NOT_FOUND,{location:f});m=h.record.name,p=Fe(Tu(d.params,h.keys.filter(w=>!w.optional).concat(h.parent?h.parent.keys.filter(w=>w.optional):[]).map(w=>w.name)),f.params&&Tu(f.params,h.keys.map(w=>w.name))),y=h.stringify(p)}else if(f.path!=null)y=f.path,h=t.find(w=>w.re.test(y)),h&&(p=h.parse(y),m=h.record.name);else{if(h=d.name?n.get(d.name):t.find(w=>w.re.test(d.path)),!h)throw ri(ot.MATCHER_NOT_FOUND,{location:f,currentLocation:d});m=h.record.name,p=Fe({},d.params,f.params),y=h.stringify(p)}const g=[];let x=h;for(;x;)g.unshift(x.record),x=x.parent;return{name:m,path:y,params:p,matched:g,meta:Dv(g)}}r.forEach(f=>o(f));function c(){t.length=0,n.clear()}return{addRoute:o,resolve:u,removeRoute:a,clearRoutes:c,getRoutes:s,getRecordMatcher:i}}function Tu(r,e){const t={};for(const n of e)n in r&&(t[n]=r[n]);return t}function Ru(r){const e={path:r.path,redirect:r.redirect,name:r.name,meta:r.meta||{},aliasOf:r.aliasOf,beforeEnter:r.beforeEnter,props:Nv(r),children:r.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in r?r.components||null:r.component&&{default:r.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Nv(r){const e={},t=r.props||!1;if("component"in r)e.default=t;else for(const n in r.components)e[n]=typeof t=="object"?t[n]:t;return e}function Pu(r){for(;r;){if(r.record.aliasOf)return!0;r=r.parent}return!1}function Dv(r){return r.reduce((e,t)=>Fe(e,t.meta),{})}function kv(r,e){let t=0,n=e.length;for(;t!==n;){const o=t+n>>1;Fd(r,e[o])<0?n=o:t=o+1}const i=Mv(r);return i&&(n=e.lastIndexOf(i,n-1)),n}function Mv(r){let e=r;for(;e=e.parent;)if(Ud(e)&&Fd(r,e)===0)return e}function Ud({record:r}){return!!(r.name||r.components&&Object.keys(r.components).length||r.redirect)}function Nu(r){const e=xr(ua),t=xr(wl),n=Ne(()=>{const l=jr(r.to);return e.resolve(l)}),i=Ne(()=>{const{matched:l}=n.value,{length:u}=l,c=l[u-1],f=t.matched;if(!c||!f.length)return-1;const d=f.findIndex(ti.bind(null,c));if(d>-1)return d;const h=Du(l[u-2]);return u>1&&Du(c)===h&&f[f.length-1].path!==h?f.findIndex(ti.bind(null,l[u-2])):d}),o=Ne(()=>i.value>-1&&jv(t.params,n.value.params)),a=Ne(()=>i.value>-1&&i.value===t.matched.length-1&&kd(t.params,n.value.params));function s(l={}){if(Uv(l)){const u=e[jr(r.replace)?"replace":"push"](jr(r.to)).catch(Ni);return r.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:n,href:Ne(()=>n.value.href),isActive:o,isExactActive:a,navigate:s}}function Bv(r){return r.length===1?r[0]:r}const Lv=xt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Nu,setup(r,{slots:e}){const t=ar(Nu(r)),{options:n}=xr(ua),i=Ne(()=>({[ku(r.activeClass,n.linkActiveClass,"router-link-active")]:t.isActive,[ku(r.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const o=e.default&&Bv(e.default(t));return r.custom?o:Ed("a",{"aria-current":t.isExactActive?r.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:i.value},o)}}}),Fv=Lv;function Uv(r){if(!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)&&!r.defaultPrevented&&!(r.button!==void 0&&r.button!==0)){if(r.currentTarget&&r.currentTarget.getAttribute){const e=r.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return r.preventDefault&&r.preventDefault(),!0}}function jv(r,e){for(const t in e){const n=e[t],i=r[t];if(typeof n=="string"){if(n!==i)return!1}else if(!wr(i)||i.length!==n.length||n.some((o,a)=>o!==i[a]))return!1}return!0}function Du(r){return r?r.aliasOf?r.aliasOf.path:r.path:""}const ku=(r,e,t)=>r??e??t,$v=xt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(r,{attrs:e,slots:t}){const n=xr(Rs),i=Ne(()=>r.route||n.value),o=xr(Cu,0),a=Ne(()=>{let u=jr(o);const{matched:c}=i.value;let f;for(;(f=c[u])&&!f.components;)u++;return u}),s=Ne(()=>i.value.matched[a.value]);wo(Cu,Ne(()=>a.value+1)),wo(gv,s),wo(Rs,i);const l=Q();return _o(()=>[l.value,s.value,r.name],([u,c,f],[d,h,p])=>{c&&(c.instances[f]=u,h&&h!==c&&u&&u===d&&(c.leaveGuards.size||(c.leaveGuards=h.leaveGuards),c.updateGuards.size||(c.updateGuards=h.updateGuards))),u&&c&&(!h||!ti(c,h)||!d)&&(c.enterCallbacks[f]||[]).forEach(y=>y(u))},{flush:"post"}),()=>{const u=i.value,c=r.name,f=s.value,d=f&&f.components[c];if(!d)return Mu(t.default,{Component:d,route:u});const h=f.props[c],p=h?h===!0?u.params:typeof h=="function"?h(u):h:null,m=Ed(d,Fe({},p,e,{onVnodeUnmounted:g=>{g.component.isUnmounted&&(f.instances[c]=null)},ref:l}));return Mu(t.default,{Component:m,route:u})||m}}});function Mu(r,e){if(!r)return null;const t=r(e);return t.length===1?t[0]:t}const Vv=$v;function Hv(r){const e=Pv(r.routes,r),t=r.parseQuery||pv,n=r.stringifyQuery||Au,i=r.history,o=vi(),a=vi(),s=vi(),l=Bh(Wr);let u=Wr;Un&&r.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=Aa.bind(null,L=>""+L),f=Aa.bind(null,Zp),d=Aa.bind(null,Vi);function h(L,K){let ee,se;return Md(L)?(ee=e.getRecordMatcher(L),se=K):se=L,e.addRoute(se,ee)}function p(L){const K=e.getRecordMatcher(L);K&&e.removeRoute(K)}function y(){return e.getRoutes().map(L=>L.record)}function m(L){return!!e.getRecordMatcher(L)}function g(L,K){if(K=Fe({},K||l.value),typeof L=="string"){const O=Ca(t,L,K.path),$=e.resolve({path:O.path},K),H=i.createHref(O.fullPath);return Fe(O,$,{params:d($.params),hash:Vi(O.hash),redirectedFrom:void 0,href:H})}let ee;if(L.path!=null)ee=Fe({},L,{path:Ca(t,L.path,K.path).path});else{const O=Fe({},L.params);for(const $ in O)O[$]==null&&delete O[$];ee=Fe({},L,{params:f(O)}),K.params=f(K.params)}const se=e.resolve(ee,K),Se=L.hash||"";se.params=c(d(se.params));const A=ev(n,Fe({},L,{hash:Kp(Se),path:se.path})),S=i.createHref(A);return Fe({fullPath:A,hash:Se,query:n===Au?vv(L.query):L.query||{}},se,{redirectedFrom:void 0,href:S})}function x(L){return typeof L=="string"?Ca(t,L,l.value.path):Fe({},L)}function w(L,K){if(u!==L)return ri(ot.NAVIGATION_CANCELLED,{from:K,to:L})}function _(L){return I(L)}function C(L){return _(Fe(x(L),{replace:!0}))}function E(L,K){const ee=L.matched[L.matched.length-1];if(ee&&ee.redirect){const{redirect:se}=ee;let Se=typeof se=="function"?se(L,K):se;return typeof Se=="string"&&(Se=Se.includes("?")||Se.includes("#")?Se=x(Se):{path:Se},Se.params={}),Fe({query:L.query,hash:L.hash,params:Se.path!=null?{}:L.params},Se)}}function I(L,K){const ee=u=g(L),se=l.value,Se=L.state,A=L.force,S=L.replace===!0,O=E(ee,se);if(O)return I(Fe(x(O),{state:typeof O=="object"?Fe({},Se,O.state):Se,force:A,replace:S}),K||ee);const $=ee;$.redirectedFrom=K;let H;return!A&&tv(n,se,ee)&&(H=ri(ot.NAVIGATION_DUPLICATED,{to:$,from:se}),z(se,se,!0,!1)),(H?Promise.resolve(H):j($,se)).catch(U=>kr(U)?kr(U,ot.NAVIGATION_GUARD_REDIRECT)?U:_t(U):he(U,$,se)).then(U=>{if(U){if(kr(U,ot.NAVIGATION_GUARD_REDIRECT))return I(Fe({replace:S},x(U.to),{state:typeof U.to=="object"?Fe({},Se,U.to.state):Se,force:A}),K||$)}else U=F($,se,!0,S,Se);return X($,se,U),U})}function D(L,K){const ee=w(L,K);return ee?Promise.reject(ee):Promise.resolve()}function M(L){const K=q.values().next().value;return K&&typeof K.runWithContext=="function"?K.runWithContext(L):L()}function j(L,K){let ee;const[se,Se,A]=yv(L,K);ee=Ia(se.reverse(),"beforeRouteLeave",L,K);for(const O of se)O.leaveGuards.forEach($=>{ee.push(Jr($,L,K))});const S=D.bind(null,L,K);return ee.push(S),tt(ee).then(()=>{ee=[];for(const O of o.list())ee.push(Jr(O,L,K));return ee.push(S),tt(ee)}).then(()=>{ee=Ia(Se,"beforeRouteUpdate",L,K);for(const O of Se)O.updateGuards.forEach($=>{ee.push(Jr($,L,K))});return ee.push(S),tt(ee)}).then(()=>{ee=[];for(const O of A)if(O.beforeEnter)if(wr(O.beforeEnter))for(const $ of O.beforeEnter)ee.push(Jr($,L,K));else ee.push(Jr(O.beforeEnter,L,K));return ee.push(S),tt(ee)}).then(()=>(L.matched.forEach(O=>O.enterCallbacks={}),ee=Ia(A,"beforeRouteEnter",L,K,M),ee.push(S),tt(ee))).then(()=>{ee=[];for(const O of a.list())ee.push(Jr(O,L,K));return ee.push(S),tt(ee)}).catch(O=>kr(O,ot.NAVIGATION_CANCELLED)?O:Promise.reject(O))}function X(L,K,ee){s.list().forEach(se=>M(()=>se(L,K,ee)))}function F(L,K,ee,se,Se){const A=w(L,K);if(A)return A;const S=K===Wr,O=Un?history.state:{};ee&&(se||S?i.replace(L.fullPath,Fe({scroll:S&&O&&O.scroll},Se)):i.push(L.fullPath,Se)),l.value=L,z(L,K,ee,S),_t()}let k;function W(){k||(k=i.listen((L,K,ee)=>{if(!Ie.listening)return;const se=g(L),Se=E(se,Ie.currentRoute.value);if(Se){I(Fe(Se,{replace:!0,force:!0}),se).catch(Ni);return}u=se;const A=l.value;Un&&uv(Eu(A.fullPath,ee.delta),la()),j(se,A).catch(S=>kr(S,ot.NAVIGATION_ABORTED|ot.NAVIGATION_CANCELLED)?S:kr(S,ot.NAVIGATION_GUARD_REDIRECT)?(I(Fe(x(S.to),{force:!0}),se).then(O=>{kr(O,ot.NAVIGATION_ABORTED|ot.NAVIGATION_DUPLICATED)&&!ee.delta&&ee.type===Os.pop&&i.go(-1,!1)}).catch(Ni),Promise.reject()):(ee.delta&&i.go(-ee.delta,!1),he(S,se,A))).then(S=>{S=S||F(se,A,!1),S&&(ee.delta&&!kr(S,ot.NAVIGATION_CANCELLED)?i.go(-ee.delta,!1):ee.type===Os.pop&&kr(S,ot.NAVIGATION_ABORTED|ot.NAVIGATION_DUPLICATED)&&i.go(-1,!1)),X(se,A,S)}).catch(Ni)}))}let Z=vi(),ue=vi(),me;function he(L,K,ee){_t(L);const se=ue.list();return se.length?se.forEach(Se=>Se(L,K,ee)):console.error(L),Promise.reject(L)}function wt(){return me&&l.value!==Wr?Promise.resolve():new Promise((L,K)=>{Z.add([L,K])})}function _t(L){return me||(me=!L,W(),Z.list().forEach(([K,ee])=>L?ee(L):K()),Z.reset()),L}function z(L,K,ee,se){const{scrollBehavior:Se}=r;if(!Un||!Se)return Promise.resolve();const A=!ee&&cv(Eu(L.fullPath,0))||(se||!ee)&&history.state&&history.state.scroll||null;return ra().then(()=>Se(L,K,A)).then(S=>S&&lv(S)).catch(S=>he(S,L,K))}const N=L=>i.go(L);let De;const q=new Set,Ie={currentRoute:l,listening:!0,addRoute:h,removeRoute:p,clearRoutes:e.clearRoutes,hasRoute:m,getRoutes:y,resolve:g,options:r,push:_,replace:C,go:N,back:()=>N(-1),forward:()=>N(1),beforeEach:o.add,beforeResolve:a.add,afterEach:s.add,onError:ue.add,isReady:wt,install(L){L.component("RouterLink",Fv),L.component("RouterView",Vv),L.config.globalProperties.$router=Ie,Object.defineProperty(L.config.globalProperties,"$route",{enumerable:!0,get:()=>jr(l)}),Un&&!De&&l.value===Wr&&(De=!0,_(i.location).catch(se=>{}));const K={};for(const se in Wr)Object.defineProperty(K,se,{get:()=>l.value[se],enumerable:!0});L.provide(ua,Ie),L.provide(wl,Wf(K)),L.provide(Rs,l);const ee=L.unmount;q.add(L),L.unmount=function(){q.delete(L),q.size<1&&(u=Wr,k&&k(),k=null,l.value=Wr,De=!1,me=!1),ee()}}};function tt(L){return L.reduce((K,ee)=>K.then(()=>M(ee)),Promise.resolve())}return Ie}function si(){return xr(ua)}function Gv(r){return xr(wl)}var Ps=function(r,e){return Ps=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},Ps(r,e)};function jd(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ps(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Lo=function(){return Lo=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Lo.apply(this,arguments)};function li(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function $d(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o}function Vd(r,e){return function(t,n){e(t,n,r)}}function Hd(r,e,t,n,i,o){function a(g){if(g!==void 0&&typeof g!="function")throw new TypeError("Function expected");return g}for(var s=n.kind,l=s==="getter"?"get":s==="setter"?"set":"value",u=!e&&r?n.static?r:r.prototype:null,c=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),f,d=!1,h=t.length-1;h>=0;h--){var p={};for(var y in n)p[y]=y==="access"?{}:n[y];for(var y in n.access)p.access[y]=n.access[y];p.addInitializer=function(g){if(d)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(g||null))};var m=(0,t[h])(s==="accessor"?{get:c.get,set:c.set}:c[l],p);if(s==="accessor"){if(m===void 0)continue;if(m===null||typeof m!="object")throw new TypeError("Object expected");(f=a(m.get))&&(c.get=f),(f=a(m.set))&&(c.set=f),(f=a(m.init))&&i.unshift(f)}else(f=a(m))&&(s==="field"?i.unshift(f):c[l]=f)}u&&Object.defineProperty(u,n.name,c),d=!0}function Gd(r,e,t){for(var n=arguments.length>2,i=0;i<e.length;i++)t=n?e[i].call(r,t):e[i].call(r);return n?t:void 0}function Wd(r){return typeof r=="symbol"?r:"".concat(r)}function qd(r,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function zd(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function ae(r,e,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(c){try{u(n.next(c))}catch(f){a(f)}}function l(c){try{u(n.throw(c))}catch(f){a(f)}}function u(c){c.done?o(c.value):i(c.value).then(s,l)}u((n=n.apply(r,e||[])).next())})}function Kd(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(c){u=[6,c],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var ca=Object.create?(function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}):(function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]});function Xd(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&ca(e,r,t)}function Fo(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _l(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o}function Yd(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(_l(arguments[e]));return r}function Zd(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}function Jd(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))}function ni(r){return this instanceof ni?(this.v=r,this):new ni(r)}function Qd(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(h){return function(p){return Promise.resolve(p).then(h,f)}}function s(h,p){n[h]&&(i[h]=function(y){return new Promise(function(m,g){o.push([h,y,m,g])>1||l(h,y)})},p&&(i[h]=p(i[h])))}function l(h,p){try{u(n[h](p))}catch(y){d(o[0][3],y)}}function u(h){h.value instanceof ni?Promise.resolve(h.value.v).then(c,f):d(o[0][2],h)}function c(h){l("next",h)}function f(h){l("throw",h)}function d(h,p){h(p),o.shift(),o.length&&l(o[0][0],o[0][1])}}function e0(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,o){e[i]=r[i]?function(a){return(t=!t)?{value:ni(r[i](a)),done:!1}:o?o(a):a}:o}}function t0(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof Fo=="function"?Fo(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=r[o]&&function(a){return new Promise(function(s,l){a=r[o](a),i(s,l,a.done,a.value)})}}function i(o,a,s,l){Promise.resolve(l).then(function(u){o({value:u,done:s})},a)}}function r0(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}var Wv=Object.create?(function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}):function(r,e){r.default=e},Ns=function(r){return Ns=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},Ns(r)};function n0(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t=Ns(r),n=0;n<t.length;n++)t[n]!=="default"&&ca(e,r,t[n]);return Wv(e,r),e}function i0(r){return r&&r.__esModule?r:{default:r}}function o0(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function a0(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t}function s0(r,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof r=="function"?e===r:r.has(e)}function l0(r,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],t&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),r.stack.push({value:e,dispose:n,async:t})}else t&&r.stack.push({async:!0});return e}var qv=typeof SuppressedError=="function"?SuppressedError:function(r,e,t){var n=new Error(t);return n.name="SuppressedError",n.error=r,n.suppressed=e,n};function u0(r){function e(o){r.error=r.hasError?new qv(o,r.error,"An error was suppressed during disposal."):o,r.hasError=!0}var t,n=0;function i(){for(;t=r.stack.pop();)try{if(!t.async&&n===1)return n=0,r.stack.push(t),Promise.resolve().then(i);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(o).then(i,function(a){return e(a),i()})}else n|=1}catch(a){e(a)}if(n===1)return r.hasError?Promise.reject(r.error):Promise.resolve();if(r.hasError)throw r.error}return i()}function c0(r,e){return typeof r=="string"&&/^\.\.?\//.test(r)?r.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,n,i,o,a){return n?e?".jsx":".js":i&&(!o||!a)?t:i+o+"."+a.toLowerCase()+"js"}):r}const zv={__extends:jd,__assign:Lo,__rest:li,__decorate:$d,__param:Vd,__esDecorate:Hd,__runInitializers:Gd,__propKey:Wd,__setFunctionName:qd,__metadata:zd,__awaiter:ae,__generator:Kd,__createBinding:ca,__exportStar:Xd,__values:Fo,__read:_l,__spread:Yd,__spreadArrays:Zd,__spreadArray:Jd,__await:ni,__asyncGenerator:Qd,__asyncDelegator:e0,__asyncValues:t0,__makeTemplateObject:r0,__importStar:n0,__importDefault:i0,__classPrivateFieldGet:o0,__classPrivateFieldSet:a0,__classPrivateFieldIn:s0,__addDisposableResource:l0,__disposeResources:u0,__rewriteRelativeImportExtension:c0},Kv=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:l0,get __assign(){return Lo},__asyncDelegator:e0,__asyncGenerator:Qd,__asyncValues:t0,__await:ni,__awaiter:ae,__classPrivateFieldGet:o0,__classPrivateFieldIn:s0,__classPrivateFieldSet:a0,__createBinding:ca,__decorate:$d,__disposeResources:u0,__esDecorate:Hd,__exportStar:Xd,__extends:jd,__generator:Kd,__importDefault:i0,__importStar:n0,__makeTemplateObject:r0,__metadata:zd,__param:Vd,__propKey:Wd,__read:_l,__rest:li,__rewriteRelativeImportExtension:c0,__runInitializers:Gd,__setFunctionName:qd,__spread:Yd,__spreadArray:Jd,__spreadArrays:Zd,__values:Fo,default:zv},Symbol.toStringTag,{value:"Module"})),Xv=r=>r?(...e)=>r(...e):(...e)=>fetch(...e);class bl extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class Bu extends bl{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Lu extends bl{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Fu extends bl{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ds;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(Ds||(Ds={}));class Yv{constructor(e,{headers:t={},customFetch:n,region:i=Ds.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=Xv(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ae(this,arguments,void 0,function*(t,n={}){var i;try{const{headers:o,method:a,body:s,signal:l}=n;let u={},{region:c}=n;c||(c=this.region);const f=new URL(`${this.url}/${t}`);c&&c!=="any"&&(u["x-region"]=c,f.searchParams.set("forceFunctionRegion",c));let d;s&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&s instanceof Blob||s instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",d=s):typeof s=="string"?(u["Content-Type"]="text/plain",d=s):typeof FormData<"u"&&s instanceof FormData?d=s:(u["Content-Type"]="application/json",d=JSON.stringify(s)):d=s;const h=yield this.fetch(f.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),o),body:d,signal:l}).catch(g=>{throw g.name==="AbortError"?g:new Bu(g)}),p=h.headers.get("x-relay-error");if(p&&p==="true")throw new Lu(h);if(!h.ok)throw new Fu(h);let y=((i=h.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),m;return y==="application/json"?m=yield h.json():y==="application/octet-stream"||y==="application/pdf"?m=yield h.blob():y==="text/event-stream"?m=h:y==="multipart/form-data"?m=yield h.formData():m=yield h.text(),{data:m,error:null,response:h}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new Bu(o)}:{data:null,error:o,response:o instanceof Fu||o instanceof Lu?o.context:void 0}}})}}function f0(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Zv(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function n(){var i=!1;try{i=this instanceof n}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var Rt={};const ui=Zv(Kv);var no={},io={},oo={},ao={},so={},lo={},Uu;function d0(){if(Uu)return lo;Uu=1,Object.defineProperty(lo,"__esModule",{value:!0});class r extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return lo.default=r,lo}var ju;function h0(){if(ju)return so;ju=1,Object.defineProperty(so,"__esModule",{value:!0});const e=ui.__importDefault(d0());class t{constructor(i){var o,a;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(o=i.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=i.signal,this.isMaybeSingle=(a=i.isMaybeSingle)!==null&&a!==void 0?a:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=new Headers(this.headers),this.headers.set(i,o),this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let s=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var u,c,f,d;let h=null,p=null,y=null,m=l.status,g=l.statusText;if(l.ok){if(this.method!=="HEAD"){const C=await l.text();C===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?p=C:p=JSON.parse(C))}const w=(c=this.headers.get("Prefer"))===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),_=(f=l.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");w&&_&&_.length>1&&(y=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(p)&&(p.length>1?(h={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,y=null,m=406,g="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{const w=await l.text();try{h=JSON.parse(w),Array.isArray(h)&&l.status===404&&(p=[],h=null,m=200,g="OK")}catch{l.status===404&&w===""?(m=204,g="No Content"):h={message:w}}if(h&&this.isMaybeSingle&&(!((d=h?.details)===null||d===void 0)&&d.includes("0 rows"))&&(h=null,m=200,g="OK"),h&&this.shouldThrowOnError)throw new e.default(h)}return{error:h,data:p,count:y,status:m,statusText:g}});return this.shouldThrowOnError||(s=s.catch(l=>{var u,c,f;return{error:{message:`${(u=l?.name)!==null&&u!==void 0?u:"FetchError"}: ${l?.message}`,details:`${(c=l?.stack)!==null&&c!==void 0?c:""}`,hint:"",code:`${(f=l?.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),s.then(i,o)}returns(){return this}overrideTypes(){return this}}return so.default=t,so}var $u;function p0(){if($u)return ao;$u=1,Object.defineProperty(ao,"__esModule",{value:!0});const e=ui.__importDefault(h0());class t extends e.default{select(i){let o=!1;const a=(i??"*").split("").map(s=>/\s/.test(s)&&!o?"":(s==='"'&&(o=!o),s)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:o=!0,nullsFirst:a,foreignTable:s,referencedTable:l=s}={}){const u=l?`${l}.order`:"order",c=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${c?`${c},`:""}${i}.${o?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:o,referencedTable:a=o}={}){const s=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(s,`${i}`),this}range(i,o,{foreignTable:a,referencedTable:s=a}={}){const l=typeof s>"u"?"offset":`${s}.offset`,u=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(u,`${o-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:o=!1,settings:a=!1,buffers:s=!1,wal:l=!1,format:u="text"}={}){var c;const f=[i?"analyze":null,o?"verbose":null,a?"settings":null,s?"buffers":null,l?"wal":null].filter(Boolean).join("|"),d=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${d}"; options=${f};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return ao.default=t,ao}var Vu;function El(){if(Vu)return oo;Vu=1,Object.defineProperty(oo,"__esModule",{value:!0});const e=ui.__importDefault(p0()),t=new RegExp("[,()]");class n extends e.default{eq(o,a){return this.url.searchParams.append(o,`eq.${a}`),this}neq(o,a){return this.url.searchParams.append(o,`neq.${a}`),this}gt(o,a){return this.url.searchParams.append(o,`gt.${a}`),this}gte(o,a){return this.url.searchParams.append(o,`gte.${a}`),this}lt(o,a){return this.url.searchParams.append(o,`lt.${a}`),this}lte(o,a){return this.url.searchParams.append(o,`lte.${a}`),this}like(o,a){return this.url.searchParams.append(o,`like.${a}`),this}likeAllOf(o,a){return this.url.searchParams.append(o,`like(all).{${a.join(",")}}`),this}likeAnyOf(o,a){return this.url.searchParams.append(o,`like(any).{${a.join(",")}}`),this}ilike(o,a){return this.url.searchParams.append(o,`ilike.${a}`),this}ilikeAllOf(o,a){return this.url.searchParams.append(o,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(o,a){return this.url.searchParams.append(o,`ilike(any).{${a.join(",")}}`),this}is(o,a){return this.url.searchParams.append(o,`is.${a}`),this}in(o,a){const s=Array.from(new Set(a)).map(l=>typeof l=="string"&&t.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(o,`in.(${s})`),this}contains(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cs.{${a.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(a)}`),this}containedBy(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cd.{${a.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(a)}`),this}rangeGt(o,a){return this.url.searchParams.append(o,`sr.${a}`),this}rangeGte(o,a){return this.url.searchParams.append(o,`nxl.${a}`),this}rangeLt(o,a){return this.url.searchParams.append(o,`sl.${a}`),this}rangeLte(o,a){return this.url.searchParams.append(o,`nxr.${a}`),this}rangeAdjacent(o,a){return this.url.searchParams.append(o,`adj.${a}`),this}overlaps(o,a){return typeof a=="string"?this.url.searchParams.append(o,`ov.${a}`):this.url.searchParams.append(o,`ov.{${a.join(",")}}`),this}textSearch(o,a,{config:s,type:l}={}){let u="";l==="plain"?u="pl":l==="phrase"?u="ph":l==="websearch"&&(u="w");const c=s===void 0?"":`(${s})`;return this.url.searchParams.append(o,`${u}fts${c}.${a}`),this}match(o){return Object.entries(o).forEach(([a,s])=>{this.url.searchParams.append(a,`eq.${s}`)}),this}not(o,a,s){return this.url.searchParams.append(o,`not.${a}.${s}`),this}or(o,{foreignTable:a,referencedTable:s=a}={}){const l=s?`${s}.or`:"or";return this.url.searchParams.append(l,`(${o})`),this}filter(o,a,s){return this.url.searchParams.append(o,`${a}.${s}`),this}}return oo.default=n,oo}var Hu;function v0(){if(Hu)return io;Hu=1,Object.defineProperty(io,"__esModule",{value:!0});const e=ui.__importDefault(El());class t{constructor(i,{headers:o={},schema:a,fetch:s}){this.url=i,this.headers=new Headers(o),this.schema=a,this.fetch=s}select(i,o){const{head:a=!1,count:s}=o??{},l=a?"HEAD":"GET";let u=!1;const c=(i??"*").split("").map(f=>/\s/.test(f)&&!u?"":(f==='"'&&(u=!u),f)).join("");return this.url.searchParams.set("select",c),s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:o,defaultToNull:a=!0}={}){var s;const l="POST";if(o&&this.headers.append("Prefer",`count=${o}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const u=i.reduce((c,f)=>c.concat(Object.keys(f)),[]);if(u.length>0){const c=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",c.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(i,{onConflict:o,ignoreDuplicates:a=!1,count:s,defaultToNull:l=!0}={}){var u;const c="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),s&&this.headers.append("Prefer",`count=${s}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const f=i.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(f.length>0){const d=[...new Set(f)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(i,{count:o}={}){var a;const s="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:i}={}){var o;const a="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return io.default=t,io}var Gu;function Jv(){if(Gu)return no;Gu=1,Object.defineProperty(no,"__esModule",{value:!0});const r=ui,e=r.__importDefault(v0()),t=r.__importDefault(El());class n{constructor(o,{headers:a={},schema:s,fetch:l}={}){this.url=o,this.headers=new Headers(a),this.schemaName=s,this.fetch=l}from(o){const a=new URL(`${this.url}/${o}`);return new e.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new n(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:s=!1,get:l=!1,count:u}={}){var c;let f;const d=new URL(`${this.url}/rpc/${o}`);let h;s||l?(f=s?"HEAD":"GET",Object.entries(a).filter(([y,m])=>m!==void 0).map(([y,m])=>[y,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([y,m])=>{d.searchParams.append(y,m)})):(f="POST",h=a);const p=new Headers(this.headers);return u&&p.set("Prefer",`count=${u}`),new t.default({method:f,url:d,headers:p,schema:this.schemaName,body:h,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}}return no.default=n,no}var Wu;function Qv(){if(Wu)return Rt;Wu=1,Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.PostgrestError=Rt.PostgrestBuilder=Rt.PostgrestTransformBuilder=Rt.PostgrestFilterBuilder=Rt.PostgrestQueryBuilder=Rt.PostgrestClient=void 0;const r=ui,e=r.__importDefault(Jv());Rt.PostgrestClient=e.default;const t=r.__importDefault(v0());Rt.PostgrestQueryBuilder=t.default;const n=r.__importDefault(El());Rt.PostgrestFilterBuilder=n.default;const i=r.__importDefault(p0());Rt.PostgrestTransformBuilder=i.default;const o=r.__importDefault(h0());Rt.PostgrestBuilder=o.default;const a=r.__importDefault(d0());return Rt.PostgrestError=a.default,Rt.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:o.default,PostgrestError:a.default},Rt}var g0=Qv();const y0=f0(g0),eg=nh({__proto__:null,default:y0},[g0]),{PostgrestClient:tg,PostgrestQueryBuilder:wC,PostgrestFilterBuilder:_C,PostgrestTransformBuilder:bC,PostgrestBuilder:EC,PostgrestError:AC}=y0||eg;class rg{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const n=t.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const n=this.getWebSocketConstructor();return new n(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const ng="2.80.0",ig=`realtime-js/${ng}`,og="1.0.0",ks=1e4,ag=1e3,sg=100;var Di;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Di||(Di={}));var dt;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(dt||(dt={}));var vr;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(vr||(vr={}));var Ms;(function(r){r.websocket="websocket"})(Ms||(Ms={}));var wn;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(wn||(wn={}));class lg{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const i=t.getUint8(1),o=t.getUint8(2);let a=this.HEADER_LENGTH+2;const s=n.decode(e.slice(a,a+i));a=a+i;const l=n.decode(e.slice(a,a+o));a=a+o;const u=JSON.parse(n.decode(e.slice(a,e.byteLength)));return{ref:null,topic:s,event:l,payload:u}}}class m0{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Xe;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(Xe||(Xe={}));const qu=(r,e,t={})=>{var n;const i=(n=t.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((o,a)=>(o[a]=ug(a,r,e,i),o),{}):{}},ug=(r,e,t,n)=>{const i=e.find(s=>s.name===r),o=i?.type,a=t[r];return o&&!n.includes(o)?x0(o,a):Bs(a)},x0=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return hg(e,t)}switch(r){case Xe.bool:return cg(e);case Xe.float4:case Xe.float8:case Xe.int2:case Xe.int4:case Xe.int8:case Xe.numeric:case Xe.oid:return fg(e);case Xe.json:case Xe.jsonb:return dg(e);case Xe.timestamp:return pg(e);case Xe.abstime:case Xe.date:case Xe.daterange:case Xe.int4range:case Xe.int8range:case Xe.money:case Xe.reltime:case Xe.text:case Xe.time:case Xe.timestamptz:case Xe.timetz:case Xe.tsrange:case Xe.tstzrange:return Bs(e);default:return Bs(e)}},Bs=r=>r,cg=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},fg=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},dg=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},hg=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,n=r[t];if(r[0]==="{"&&n==="}"){let o;const a=r.slice(1,t);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(s=>x0(e,s))}return r},pg=r=>typeof r=="string"?r.replace(" ","T"):r,w0=r=>{const e=new URL(r);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Oa{constructor(e,t,n={},i=ks){this.channel=e,this.event=t,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var zu;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(zu||(zu={}));class ki{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:o,onLeave:a,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ki.syncState(this.state,i,o,a),this.pendingDiffs.forEach(l=>{this.state=ki.syncDiff(this.state,l,o,a)}),this.pendingDiffs=[],s()}),this.channel._on(n.diff,{},i=>{const{onJoin:o,onLeave:a,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=ki.syncDiff(this.state,i,o,a),s())}),this.onJoin((i,o,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:a})}),this.onLeave((i,o,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,i){const o=this.cloneDeep(e),a=this.transformState(t),s={},l={};return this.map(o,(u,c)=>{a[u]||(l[u]=c)}),this.map(a,(u,c)=>{const f=o[u];if(f){const d=c.map(m=>m.presence_ref),h=f.map(m=>m.presence_ref),p=c.filter(m=>h.indexOf(m.presence_ref)<0),y=f.filter(m=>d.indexOf(m.presence_ref)<0);p.length>0&&(s[u]=p),y.length>0&&(l[u]=y)}else s[u]=c}),this.syncDiff(o,{joins:s,leaves:l},n,i)}static syncDiff(e,t,n,i){const{joins:o,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(o,(s,l)=>{var u;const c=(u=e[s])!==null&&u!==void 0?u:[];if(e[s]=this.cloneDeep(l),c.length>0){const f=e[s].map(h=>h.presence_ref),d=c.filter(h=>f.indexOf(h.presence_ref)<0);e[s].unshift(...d)}n(s,c,l)}),this.map(a,(s,l)=>{let u=e[s];if(!u)return;const c=l.map(f=>f.presence_ref);u=u.filter(f=>c.indexOf(f.presence_ref)<0),e[s]=u,i(s,u,l),u.length===0&&delete e[s]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const i=e[n];return"metas"in i?t[n]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[n]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ku;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(Ku||(Ku={}));var Mi;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(Mi||(Mi={}));var Br;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Br||(Br={}));class Al{constructor(e,t={config:{}},n){var i,o;if(this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=dt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Oa(this,vr.join,this.params,this.timeout),this.rejoinTimer=new m0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=dt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=dt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=dt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=dt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=dt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(vr.reply,{},(a,s)=>{this._trigger(this._replyEventName(s),a)}),this.presence=new ki(this),this.broadcastEndpointURL=w0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var n,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==dt.closed){const{config:{broadcast:a,presence:s,private:l}}=this.params,u=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(h=>h.filter))!==null&&i!==void 0?i:[],c=!!this.bindings[Mi.PRESENCE]&&this.bindings[Mi.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,f={},d={broadcast:a,presence:Object.assign(Object.assign({},s),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(h=>e?.(Br.CHANNEL_ERROR,h)),this._onClose(()=>e?.(Br.CLOSED)),this.updateJoinPayload(Object.assign({config:d},f)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:h})=>{var p;if(this.socket.setAuth(),h===void 0){e?.(Br.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,m=(p=y?.length)!==null&&p!==void 0?p:0,g=[];for(let x=0;x<m;x++){const w=y[x],{filter:{event:_,schema:C,table:E,filter:I}}=w,D=h&&h[x];if(D&&D.event===_&&D.schema===C&&D.table===E&&D.filter===I)g.push(Object.assign(Object.assign({},w),{id:D.id}));else{this.unsubscribe(),this.state=dt.errored,e?.(Br.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(Br.SUBSCRIBED);return}}).receive("error",h=>{this.state=dt.errored,e?.(Br.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{e?.(Br.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===dt.joined&&e===Mi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async httpSend(e,t,n={}){var i;const o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},s=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(s.status===202)return{success:!0};let l=s.statusText;try{const u=await s.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(e,t={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,s,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(s=(a=this.params)===null||a===void 0?void 0:a.config)===null||s===void 0?void 0:s.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=dt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(vr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new Oa(this,vr.leave,{},e),n.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=dt.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const i=new AbortController,o=setTimeout(()=>i.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(o),a}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Oa(this,e,t,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>sg){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var i,o;const a=e.toLocaleLowerCase(),{close:s,error:l,leave:u,join:c}=vr;if(n&&[s,l,u,c].indexOf(a)>=0&&n!==this._joinRef())return;let d=this._onMessage(a,t,n);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(h=>{var p,y,m;return((p=h.filter)===null||p===void 0?void 0:p.event)==="*"||((m=(y=h.filter)===null||y===void 0?void 0:y.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===a}).map(h=>h.callback(d,n)):(o=this.bindings[a])===null||o===void 0||o.filter(h=>{var p,y,m,g,x,w;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in h){const _=h.id,C=(p=h.filter)===null||p===void 0?void 0:p.event;return _&&((y=t.ids)===null||y===void 0?void 0:y.includes(_))&&(C==="*"||C?.toLocaleLowerCase()===((m=t.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))}else{const _=(x=(g=h?.filter)===null||g===void 0?void 0:g.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return _==="*"||_===((w=t?.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===a}).map(h=>{if(typeof d=="object"&&"ids"in d){const p=d.data,{schema:y,table:m,commit_timestamp:g,type:x,errors:w}=p;d=Object.assign(Object.assign({},{schema:y,table:m,commit_timestamp:g,eventType:x,new:{},old:{},errors:w}),this._getPayloadRecords(p))}h.callback(d,n)})}_isClosed(){return this.state===dt.closed}_isJoined(){return this.state===dt.joined}_isJoining(){return this.state===dt.joining}_isLeaving(){return this.state===dt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const i=e.toLocaleLowerCase(),o={type:i,filter:t,callback:n};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&Al.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(vr.close,{},e)}_onError(e){this._on(vr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=dt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=qu(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=qu(e.columns,e.old_record)),t}}const Ta=()=>{},uo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},vg=[1e3,2e3,5e3,1e4],gg=1e4,yg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class mg{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ks,this.transport=null,this.heartbeatIntervalMs=uo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ta,this.ref=0,this.reconnectTimer=null,this.logger=Ta,this.conn=null,this.sendBuffer=[],this.serializer=new lg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((n=t?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Ms.websocket}`,this.httpEndpoint=w0(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=rg.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:og}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Di.connecting:return wn.Connecting;case Di.open:return wn.Open;case Di.closing:return wn.Closing;default:return wn.Closed}}isConnected(){return this.connectionState()===wn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===n);if(i)return i;{const o=new Al(`realtime:${e}`,t,this);return this.channels.push(o),o}}push(e){const{topic:t,event:n,payload:i,ref:o}=e,a=()=>{this.encode(e,s=>{var l;(l=this.conn)===null||l===void 0||l.send(s)})};this.log("push",`${t} ${n} (${o})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ag,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},uo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:o,ref:a}=t,s=a?`(${a})`:"",l=o.status||"";this.log("receive",`${l} ${n} ${i} ${s}`.trim(),o),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(i,o,a)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(vr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${n}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([yg],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(n=>{const i={access_token:t,version:ig};t&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(vr.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new m0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},uo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,i,o,a,s,l,u,c;if(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(n=e?.timeout)!==null&&n!==void 0?n:ks,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:uo.HEARTBEAT_INTERVAL,this.worker=(o=e?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=e?.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(s=e?.heartbeatCallback)!==null&&s!==void 0?s:Ta,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e?.reconnectAfterMs)!==null&&l!==void 0?l:(f=>vg[f-1]||gg),this.encode=(u=e?.encode)!==null&&u!==void 0?u:((f,d)=>d(JSON.stringify(f))),this.decode=(c=e?.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class Cl extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function it(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class xg extends Cl{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ls extends Cl{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const Sl=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),wg=()=>Response,Fs=r=>{if(Array.isArray(r))return r.map(t=>Fs(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,n])=>{const i=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=Fs(n)}),e},_g=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},Ra=r=>{var e;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(e=r.error)===null||e===void 0?void 0:e.message)||JSON.stringify(r)},bg=(r,e,t)=>ae(void 0,void 0,void 0,function*(){const n=yield wg();r instanceof n&&!t?.noResolveJson?r.json().then(i=>{const o=r.status||500,a=i?.statusCode||o+"";e(new xg(Ra(i),o,a))}).catch(i=>{e(new Ls(Ra(i),i))}):e(new Ls(Ra(r),r))}),Eg=(r,e,t,n)=>{const i={method:r,headers:e?.headers||{}};return r==="GET"||!n?i:(_g(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(n)):i.body=n,e?.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),t))};function Xi(r,e,t,n,i,o){return ae(this,void 0,void 0,function*(){return new Promise((a,s)=>{r(t,Eg(e,n,i,o)).then(l=>{if(!l.ok)throw l;return n?.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>bg(l,s,n))})})}function Hi(r,e,t,n){return ae(this,void 0,void 0,function*(){return Xi(r,"GET",e,t,n)})}function pr(r,e,t,n,i){return ae(this,void 0,void 0,function*(){return Xi(r,"POST",e,n,i,t)})}function Us(r,e,t,n,i){return ae(this,void 0,void 0,function*(){return Xi(r,"PUT",e,n,i,t)})}function Ag(r,e,t,n){return ae(this,void 0,void 0,function*(){return Xi(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function Il(r,e,t,n,i){return ae(this,void 0,void 0,function*(){return Xi(r,"DELETE",e,n,i,t)})}class Cg{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return ae(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(it(e))return{data:null,error:e};throw e}})}}var _0;class Sg{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[_0]="BlobDownloadBuilder",this.promise=null}asStream(){return new Cg(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ae(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(it(e))return{data:null,error:e};throw e}})}}_0=Symbol.toStringTag;const Ig={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Xu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Og{constructor(e,t={},n,i){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=Sl(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,n,i){return ae(this,void 0,void 0,function*(){try{let o;const a=Object.assign(Object.assign({},Xu),i);let s=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",a.cacheControl),l&&!o.has("metadata")&&o.append("metadata",this.encodeMetadata(l))):(o=n,s["cache-control"]=`max-age=${a.cacheControl}`,s["content-type"]=a.contentType,l&&(s["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!a.duplex&&(a.duplex="half")),i?.headers&&(s=Object.assign(Object.assign({},s),i.headers));const u=this._removeEmptyFolders(t),c=this._getFinalPath(u),f=yield(e=="PUT"?Us:pr)(this.fetch,`${this.url}/object/${c}`,o,Object.assign({headers:s},a?.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(it(o))return{data:null,error:o};throw o}})}upload(e,t,n){return ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,i){return ae(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),a=this._getFinalPath(o),s=new URL(this.url+`/object/upload/sign/${a}`);s.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:Xu.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const f=yield Us(this.fetch,s.toString(),l,{headers:c});return{data:{path:o,fullPath:f.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(it(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return ae(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);t?.upsert&&(i["x-upsert"]="true");const o=yield pr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),a=new URL(this.url+o.url),s=a.searchParams.get("token");if(!s)throw new Cl("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:s},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(it(n))return{data:null,error:n};throw n}})}update(e,t,n){return ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return ae(this,void 0,void 0,function*(){try{return{data:yield pr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(it(i))return{data:null,error:i};throw i}})}copy(e,t,n){return ae(this,void 0,void 0,function*(){try{return{data:{path:(yield pr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(it(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,n){return ae(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),o=yield pr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n?.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(it(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,n){return ae(this,void 0,void 0,function*(){try{const i=yield pr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${o}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(it(i))return{data:null,error:i};throw i}})}download(e,t){const i=typeof t?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(t?.transform||{}),a=o?`?${o}`:"",s=this._getFinalPath(e),l=()=>Hi(this.fetch,`${this.url}/${i}/${s}${a}`,{headers:this.headers,noResolveJson:!0});return new Sg(l,this.shouldThrowOnError)}info(e){return ae(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield Hi(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Fs(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(it(n))return{data:null,error:n};throw n}})}exists(e){return ae(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Ag(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(it(n)&&n instanceof Ls){const i=n.originalError;if([400,404].includes(i?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),i=[],o=t?.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&i.push(o);const s=typeof t?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(t?.transform||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${u}`)}}}remove(e){return ae(this,void 0,void 0,function*(){try{return{data:yield Il(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(it(t))return{data:null,error:t};throw t}})}list(e,t,n){return ae(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Ig),t),{prefix:e||""});return{data:yield pr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(it(i))return{data:null,error:i};throw i}})}listV2(e,t){return ae(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield pr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},t),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(it(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const b0="2.80.0",E0={"X-Client-Info":`storage-js/${b0}`};class Tg{constructor(e,t={},n,i){this.shouldThrowOnError=!1;const o=new URL(e);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},E0),t),this.fetch=Sl(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return ae(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield Hi(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(it(t))return{data:null,error:t};throw t}})}getBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:yield Hi(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(it(t))return{data:null,error:t};throw t}})}createBucket(e){return ae(this,arguments,void 0,function*(t,n={public:!1}){try{return{data:yield pr(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(it(i))return{data:null,error:i};throw i}})}updateBucket(e,t){return ae(this,void 0,void 0,function*(){try{return{data:yield Us(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(it(n))return{data:null,error:n};throw n}})}emptyBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:yield pr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(it(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:yield Il(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(it(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}class Rg{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},E0),t),this.fetch=Sl(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:yield pr(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(it(t))return{data:null,error:t};throw t}})}listBuckets(e){return ae(this,void 0,void 0,function*(){try{const t=new URLSearchParams;e?.limit!==void 0&&t.set("limit",e.limit.toString()),e?.offset!==void 0&&t.set("offset",e.offset.toString()),e?.sortColumn&&t.set("sortColumn",e.sortColumn),e?.sortOrder&&t.set("sortOrder",e.sortOrder),e?.search&&t.set("search",e.search);const n=t.toString(),i=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield Hi(this.fetch,i,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(it(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:yield Il(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(it(t))return{data:null,error:t};throw t}})}}const Ol={"X-Client-Info":`storage-js/${b0}`,"Content-Type":"application/json"};class A0 extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function er(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}class Pa extends A0{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Pg extends A0{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var Yu;(function(r){r.InternalError="InternalError",r.S3VectorConflictException="S3VectorConflictException",r.S3VectorNotFoundException="S3VectorNotFoundException",r.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",r.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",r.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Yu||(Yu={}));const Tl=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),Ng=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},Zu=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Dg=(r,e,t)=>ae(void 0,void 0,void 0,function*(){if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!t?.noResolveJson){const i=r.status||500,o=r;if(typeof o.json=="function")o.json().then(a=>{const s=a?.statusCode||a?.code||i+"";e(new Pa(Zu(a),i,s))}).catch(()=>{const a=i+"",s=o.statusText||`HTTP ${i} error`;e(new Pa(s,i,a))});else{const a=i+"",s=o.statusText||`HTTP ${i} error`;e(new Pa(s,i,a))}}else e(new Pg(Zu(r),r))}),kg=(r,e,t,n)=>{const i={method:r,headers:e?.headers||{}};return n?(Ng(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(n)):i.body=n,Object.assign(Object.assign({},i),t)):i};function Mg(r,e,t,n,i,o){return ae(this,void 0,void 0,function*(){return new Promise((a,s)=>{r(t,kg(e,n,i,o)).then(l=>{if(!l.ok)throw l;if(n?.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>a(l)).catch(l=>Dg(l,s,n))})})}function tr(r,e,t,n,i){return ae(this,void 0,void 0,function*(){return Mg(r,"POST",e,n,i,t)})}class Bg{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ol),t),this.fetch=Tl(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return ae(this,void 0,void 0,function*(){try{return{data:(yield tr(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(er(t))return{data:null,error:t};throw t}})}getIndex(e,t){return ae(this,void 0,void 0,function*(){try{return{data:yield tr(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(er(n))return{data:null,error:n};throw n}})}listIndexes(e){return ae(this,void 0,void 0,function*(){try{return{data:yield tr(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(er(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return ae(this,void 0,void 0,function*(){try{return{data:(yield tr(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(er(n))return{data:null,error:n};throw n}})}}class Lg{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ol),t),this.fetch=Tl(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return ae(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield tr(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(er(t))return{data:null,error:t};throw t}})}getVectors(e){return ae(this,void 0,void 0,function*(){try{return{data:yield tr(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(er(t))return{data:null,error:t};throw t}})}listVectors(e){return ae(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield tr(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(er(t))return{data:null,error:t};throw t}})}queryVectors(e){return ae(this,void 0,void 0,function*(){try{return{data:yield tr(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(er(t))return{data:null,error:t};throw t}})}deleteVectors(e){return ae(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield tr(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(er(t))return{data:null,error:t};throw t}})}}class Fg{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ol),t),this.fetch=Tl(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:(yield tr(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(er(t))return{data:null,error:t};throw t}})}getBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:yield tr(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(er(t))return{data:null,error:t};throw t}})}listBuckets(){return ae(this,arguments,void 0,function*(e={}){try{return{data:yield tr(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(er(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:(yield tr(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(er(t))return{data:null,error:t};throw t}})}}class Ug extends Fg{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new jg(this.url,this.headers,e,this.fetch)}}class jg extends Bg{constructor(e,t,n,i){super(e,t,i),this.vectorBucketName=n}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ae(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ae(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ae(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ae(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new $g(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class $g extends Lg{constructor(e,t,n,i,o){super(e,t,o),this.vectorBucketName=n,this.indexName=i}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ae(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ae(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ae(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ae(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ae(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Vg extends Tg{constructor(e,t={},n,i){super(e,t,n,i)}from(e){return new Og(this.url,this.headers,e,this.fetch)}get vectors(){return new Ug(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Rg(this.url+"/iceberg",this.headers,this.fetch)}}const Hg="2.80.0";let _i="";typeof Deno<"u"?_i="deno":typeof document<"u"?_i="web":typeof navigator<"u"&&navigator.product==="ReactNative"?_i="react-native":_i="node";const Gg={"X-Client-Info":`supabase-js-${_i}/${Hg}`},Wg={headers:Gg},qg={schema:"public"},zg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Kg={},Xg=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),Yg=()=>Headers,Zg=(r,e,t)=>{const n=Xg(t),i=Yg();return async(o,a)=>{var s;const l=(s=await e())!==null&&s!==void 0?s:r;let u=new i(a?.headers);return u.has("apikey")||u.set("apikey",r),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(o,Object.assign(Object.assign({},a),{headers:u}))}};function Jg(r){return r.endsWith("/")?r:r+"/"}function Qg(r,e){var t,n;const{db:i,auth:o,realtime:a,global:s}=r,{db:l,auth:u,realtime:c,global:f}=e,d={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),o),realtime:Object.assign(Object.assign({},c),a),storage:{},global:Object.assign(Object.assign(Object.assign({},f),s),{headers:Object.assign(Object.assign({},(t=f?.headers)!==null&&t!==void 0?t:{}),(n=s?.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return r.accessToken?d.accessToken=r.accessToken:delete d.accessToken,d}function e2(r){const e=r?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Jg(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const C0="2.80.0",jn=30*1e3,js=3,Na=js*jn,t2="http://localhost:9999",r2="supabase.auth.token",n2={"X-Client-Info":`gotrue-js/${C0}`},$s="X-Supabase-Api-Version",S0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},i2=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,o2=600*1e3;class Gi extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function le(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class a2 extends Gi{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function s2(r){return le(r)&&r.name==="AuthApiError"}class _n extends Gi{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class cn extends Gi{constructor(e,t,n,i){super(e,n,i),this.name=t,this.status=n}}class dr extends cn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function l2(r){return le(r)&&r.name==="AuthSessionMissingError"}class Pn extends cn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class co extends cn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class fo extends cn{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function u2(r){return le(r)&&r.name==="AuthImplicitGrantRedirectError"}class Ju extends cn{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Vs extends cn{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Da(r){return le(r)&&r.name==="AuthRetryableFetchError"}class Qu extends cn{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Hs extends cn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Uo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ec=` 	
\r=`.split(""),c2=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<ec.length;e+=1)r[ec[e].charCodeAt(0)]=-2;for(let e=0;e<Uo.length;e+=1)r[Uo[e].charCodeAt(0)]=e;return r})();function tc(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(Uo[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(Uo[n]),e.queuedBits-=6}}function I0(r,e,t){const n=c2[r];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function rc(r){const e=[],t=a=>{e.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=a=>{h2(a,n,t)};for(let a=0;a<r.length;a+=1)I0(r.charCodeAt(a),i,o);return e.join("")}function f2(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function d2(r,e){for(let t=0;t<r.length;t+=1){let n=r.charCodeAt(t);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(r.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}f2(n,e)}}function h2(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let n=1;n<6;n+=1)if((r>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Zn(r){const e=[],t={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<r.length;i+=1)I0(r.charCodeAt(i),t,n);return new Uint8Array(e)}function p2(r){const e=[];return d2(r,t=>e.push(t)),new Uint8Array(e)}function En(r){const e=[],t={queue:0,queuedBits:0},n=i=>{e.push(i)};return r.forEach(i=>tc(i,t,n)),tc(null,t,n),e.join("")}function v2(r){return Math.round(Date.now()/1e3)+r}function g2(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const Pt=()=>typeof window<"u"&&typeof document<"u",hn={tested:!1,writable:!1},O0=()=>{if(!Pt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(hn.tested)return hn.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),hn.tested=!0,hn.writable=!0}catch{hn.tested=!0,hn.writable=!1}return hn.writable};function y2(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return t.searchParams.forEach((n,i)=>{e[i]=n}),e}const T0=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),m2=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",$n=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},pn=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},qr=async(r,e)=>{await r.removeItem(e)};class fa{constructor(){this.promise=new fa.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}fa.promiseConstructor=Promise;function ka(r){const e=r.split(".");if(e.length!==3)throw new Hs("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!i2.test(e[n]))throw new Hs("JWT not in base64url format");return{header:JSON.parse(rc(e[0])),payload:JSON.parse(rc(e[1])),signature:Zn(e[2]),raw:{header:e[0],payload:e[1]}}}async function x2(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function w2(r,e){return new Promise((n,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await r(o);if(!e(o,null,a)){n(a);return}}catch(a){if(!e(o,a)){i(a);return}}})()})}function _2(r){return("0"+r.toString(16)).substr(-2)}function b2(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let i="";for(let o=0;o<56;o++)i+=t.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,_2).join("")}async function E2(r){const t=new TextEncoder().encode(r),n=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(n);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function A2(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await E2(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Nn(r,e,t=!1){const n=b2();let i=n;t&&(i+="/PASSWORD_RECOVERY"),await $n(r,`${e}-code-verifier`,i);const o=await A2(n);return[o,n===o?"plain":"s256"]}const C2=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function S2(r){const e=r.headers.get($s);if(!e||!e.match(C2))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function I2(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function O2(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const T2=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Dn(r){if(!T2.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ma(){const r={};return new Proxy(r,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const n=t.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function R2(r,e){return new Proxy(r,{get:(t,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,n,i)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,n,i)}})}function nc(r){return JSON.parse(JSON.stringify(r))}const mn=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),P2=[502,503,504];async function ic(r){var e;if(!m2(r))throw new Vs(mn(r),0);if(P2.includes(r.status))throw new Vs(mn(r),r.status);let t;try{t=await r.json()}catch(o){throw new _n(mn(o),o)}let n;const i=S2(r);if(i&&i.getTime()>=S0["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new Qu(mn(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new dr}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new Qu(mn(t),r.status,t.weak_password.reasons);throw new a2(mn(t),r.status||500,n)}const N2=(r,e,t,n)=>{const i={method:r,headers:e?.headers||{}};return r==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),t))};async function ge(r,e,t,n){var i;const o=Object.assign({},n?.headers);o[$s]||(o[$s]=S0["2024-01-01"].name),n?.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const a=(i=n?.query)!==null&&i!==void 0?i:{};n?.redirectTo&&(a.redirect_to=n.redirectTo);const s=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await D2(r,e,t+s,{headers:o,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(l):{data:Object.assign({},l),error:null}}async function D2(r,e,t,n,i,o){const a=N2(e,n,i,o);let s;try{s=await r(t,Object.assign({},a))}catch(l){throw console.error(l),new Vs(mn(l),0)}if(s.ok||await ic(s),n?.noResolveJson)return s;try{return await s.json()}catch(l){await ic(l)}}function hr(r){var e;let t=null;B2(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=v2(r.expires_in)));const n=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:n},error:null}}function oc(r){const e=hr(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=r.weak_password),e}function en(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function k2(r){return{data:r,error:null}}function M2(r){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:o}=r,a=li(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),s={action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:o},l=Object.assign({},a);return{data:{properties:s,user:l},error:null}}function ac(r){return r}function B2(r){return r.access_token&&r.refresh_token&&r.expires_in}const Ba=["global","local","others"];class L2{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=T0(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Ba[0]){if(Ba.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ba.join(", ")}`);try{return await ge(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(le(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:en})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=li(e,["options"]),i=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(i.new_email=n?.newEmail,delete i.newEmail),await ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:M2,redirectTo:t?.redirectTo})}catch(t){if(le(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await ge(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:en})}catch(t){if(le(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,i,o,a,s,l;try{const u={nextPage:null,lastPage:0,total:0},c=await ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:ac});if(c.error)throw c.error;const f=await c.json(),d=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,h=(l=(s=c.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return h.length>0&&(h.forEach(p=>{const y=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(p.split(";")[1].split("=")[1]);u[`${m}Page`]=y}),u.total=parseInt(d)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(le(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Dn(e);try{return await ge(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:en})}catch(t){if(le(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Dn(e);try{return await ge(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:en})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){Dn(e);try{return await ge(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:en})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Dn(e.userId);try{const{data:t,error:n}=await ge(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:n}}catch(t){if(le(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Dn(e.userId),Dn(e.id);try{return{data:await ge(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(le(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,n,i,o,a,s,l;try{const u={nextPage:null,lastPage:0,total:0},c=await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:ac});if(c.error)throw c.error;const f=await c.json(),d=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,h=(l=(s=c.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return h.length>0&&(h.forEach(p=>{const y=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(p.split(";")[1].split("=")[1]);u[`${m}Page`]=y}),u.total=parseInt(d)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(le(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(le(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(le(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await ge(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(le(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await ge(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(le(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(le(t))return{data:null,error:t};throw t}}}function sc(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}const kn={debug:!!(globalThis&&O0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class R0 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class F2 extends R0{}async function U2(r,e,t){kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),kn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,i.name);try{return await t()}finally{kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,i.name)}}else{if(e===0)throw kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new F2(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(kn.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function j2(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function P0(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function $2(r){return parseInt(r,16)}function V2(r){const e=new TextEncoder().encode(r);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function H2(r){var e;const{chainId:t,domain:n,expirationTime:i,issuedAt:o=new Date,nonce:a,notBefore:s,requestId:l,resources:u,scheme:c,uri:f,version:d}=r;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(d!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${d}`);if(!((e=r.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const h=P0(r.address),p=c?`${c}://${n}`:n,y=r.statement?`${r.statement}
`:"",m=`${p} wants you to sign in with your Ethereum account:
${h}

${y}`;let g=`URI: ${f}
Version: ${d}
Chain ID: ${t}${a?`
Nonce: ${a}`:""}
Issued At: ${o.toISOString()}`;if(i&&(g+=`
Expiration Time: ${i.toISOString()}`),s&&(g+=`
Not Before: ${s.toISOString()}`),l&&(g+=`
Request ID: ${l}`),u){let x=`
Resources:`;for(const w of u){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);x+=`
- ${w}`}g+=x}return`${m}
${g}`}class lt extends Error{constructor({message:e,code:t,cause:n,name:i}){var o;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(o=i??(n instanceof Error?n.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=t}}class jo extends lt{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function G2({error:r,options:e}){var t,n,i;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new lt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((t=o.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new lt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(e.mediation==="conditional"&&((n=o.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new lt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new lt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new lt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new lt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return o.pubKeyCredParams.filter(s=>s.type==="public-key").length===0?new lt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new lt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const a=window.location.hostname;if(N0(a)){if(o.rp.id!==a)return new lt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new lt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new lt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new lt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new lt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function W2({error:r,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new lt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new lt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const n=window.location.hostname;if(N0(n)){if(t.rpId!==n)return new lt({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new lt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new lt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new lt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class q2{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const z2=new q2;function K2(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:e,user:t,excludeCredentials:n}=r,i=li(r,["challenge","user","excludeCredentials"]),o=Zn(e).buffer,a=Object.assign(Object.assign({},t),{id:Zn(t.id).buffer}),s=Object.assign(Object.assign({},i),{challenge:o,user:a});if(n&&n.length>0){s.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];s.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:Zn(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return s}function X2(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:e,allowCredentials:t}=r,n=li(r,["challenge","allowCredentials"]),i=Zn(e).buffer,o=Object.assign(Object.assign({},n),{challenge:i});if(t&&t.length>0){o.allowCredentials=new Array(t.length);for(let a=0;a<t.length;a++){const s=t[a];o.allowCredentials[a]=Object.assign(Object.assign({},s),{id:Zn(s.id).buffer,type:s.type||"public-key",transports:s.transports})}}return o}function Y2(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r;return{id:r.id,rawId:r.id,response:{attestationObject:En(new Uint8Array(r.response.attestationObject)),clientDataJSON:En(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Z2(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r,n=r.getClientExtensionResults(),i=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:En(new Uint8Array(i.authenticatorData)),clientDataJSON:En(new Uint8Array(i.clientDataJSON)),signature:En(new Uint8Array(i.signature)),userHandle:i.userHandle?En(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function N0(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function lc(){var r,e;return!!(Pt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function J2(r){try{const e=await navigator.credentials.create(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new jo("Browser returned unexpected credential type",e)}:{data:null,error:new jo("Empty credential response",e)}}catch(e){return{data:null,error:G2({error:e,options:r})}}}async function Q2(r){try{const e=await navigator.credentials.get(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new jo("Browser returned unexpected credential type",e)}:{data:null,error:new jo("Empty credential response",e)}}catch(e){return{data:null,error:W2({error:e,options:r})}}}const ey={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},ty={userVerification:"preferred",hints:["security-key"]};function $o(...r){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),t=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of r)if(i)for(const o in i){const a=i[o];if(a!==void 0)if(Array.isArray(a))n[o]=a;else if(t(a))n[o]=a;else if(e(a)){const s=n[o];e(s)?n[o]=$o(s,a):n[o]=$o(a)}else n[o]=a}return n}function ry(r,e){return $o(ey,r,e||{})}function ny(r,e){return $o(ty,r,e||{})}class iy{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:n,signal:i},o){try{const{data:a,error:s}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!a)return{data:null,error:s};const l=i??z2.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:u}=a.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(a.webauthn.type){case"create":{const u=ry(a.webauthn.credential_options.publicKey,o?.create),{data:c,error:f}=await J2({publicKey:u,signal:l});return c?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:c}},error:null}:{data:null,error:f}}case"request":{const u=ny(a.webauthn.credential_options.publicKey,o?.request),{data:c,error:f}=await Q2(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:u,signal:l}));return c?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:c}},error:null}:{data:null,error:f}}}}catch(a){return le(a)?{data:null,error:a}:{data:null,error:new _n("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:t,webauthn:n}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}},o){if(!t)return{data:null,error:new Gi("rpId is required for WebAuthn authentication")};try{if(!lc())return{data:null,error:new _n("Browser does not support WebAuthn",null)};const{data:a,error:s}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:n},signal:i},{request:o});if(!a)return{data:null,error:s};const{webauthn:l}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:l.type,rpId:t,rpOrigins:n,credential_response:l.credential_response}})}catch(a){return le(a)?{data:null,error:a}:{data:null,error:new _n("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i},o){if(!t)return{data:null,error:new Gi("rpId is required for WebAuthn registration")};try{if(!lc())return{data:null,error:new _n("Browser does not support WebAuthn",null)};const{data:a,error:s}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(c=>{var f;return(f=c.data)===null||f===void 0?void 0:f.all.find(d=>d.factor_type==="webauthn"&&d.friendly_name===e&&d.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c?.id}):void 0),{data:null,error:s};const{data:l,error:u}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:t,rpOrigins:n},signal:i},{create:o});return l?this._verify({factorId:a.id,challengeId:l.challengeId,webauthn:{rpId:t,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(a){return le(a)?{data:null,error:a}:{data:null,error:new _n("Unexpected error in register",a)}}}}j2();const oy={url:t2,storageKey:r2,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:n2,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function uc(r,e,t){return await t()}const Mn={};class Wi{get jwks(){var e,t;return(t=(e=Mn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Mn[this.storageKey]=Object.assign(Object.assign({},Mn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Mn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Mn[this.storageKey]=Object.assign(Object.assign({},Mn[this.storageKey]),{cachedAt:e})}constructor(e){var t,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},oy),e);if(this.storageKey=o.storageKey,this.instanceID=(t=Wi.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,Wi.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Pt()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new L2({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=T0(o.fetch),this.lock=o.lock||uc,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:Pt()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=U2:this.lock=uc,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new iy(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:O0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=sc(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=sc(this.memoryStorage)),Pt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${C0}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},n="none";if(Pt()&&(t=y2(window.location.href),this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce")),Pt()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:o}=await this._getSessionFromURL(t,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),u2(o)){const l=(e=o.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:s}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",s),await this._saveSession(a),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return le(t)?this._returnResult({error:t}):this._returnResult({error:new _n("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,i;try{const o=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:hr}),{data:a,error:s}=o;if(s||!a)return this._returnResult({data:{user:null,session:null},error:s});const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(o){if(le(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var t,n,i;try{let o;if("email"in e){const{email:c,password:f,options:d}=e;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await Nn(this.storage,this.storageKey)),o=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d?.emailRedirectTo,body:{email:c,password:f,data:(t=d?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:h,code_challenge_method:p},xform:hr})}else if("phone"in e){const{phone:c,password:f,options:d}=e;o=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:f,data:(n=d?.data)!==null&&n!==void 0?n:{},channel:(i=d?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:hr})}else throw new co("You must provide either an email or phone number and a password");const{data:a,error:s}=o;if(s||!a)return this._returnResult({data:{user:null,session:null},error:s});const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(o){if(le(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:o,password:a,options:s}=e;t=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:oc})}else if("phone"in e){const{phone:o,password:a,options:s}=e;t=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:oc})}else throw new co("You must provide either an email or phone number and a password");const{data:n,error:i}=t;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const o=new Pn;return this._returnResult({data:{user:null,session:null},error:o})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(t){if(le(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,n,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,n,i,o,a,s,l,u,c,f,d;let h,p;if("message"in e)h=e.message,p=e.signature;else{const{chain:y,wallet:m,statement:g,options:x}=e;let w;if(Pt())if(typeof m=="object")w=m;else{const M=window;if("ethereum"in M&&typeof M.ethereum=="object"&&"request"in M.ethereum&&typeof M.ethereum.request=="function")w=M.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!x?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=m}const _=new URL((t=x?.url)!==null&&t!==void 0?t:window.location.href),C=await w.request({method:"eth_requestAccounts"}).then(M=>M).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!C||C.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=P0(C[0]);let I=(n=x?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!I){const M=await w.request({method:"eth_chainId"});I=$2(M)}const D={domain:_.host,address:E,statement:g,uri:_.href,version:"1",chainId:I,nonce:(i=x?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(o=x?.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(s=x?.signInWithEthereum)===null||s===void 0?void 0:s.expirationTime,notBefore:(l=x?.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=x?.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=x?.signInWithEthereum)===null||c===void 0?void 0:c.resources};h=H2(D),p=await w.request({method:"personal_sign",params:[V2(h),E]})}try{const{data:y,error:m}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:p},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(d=e.options)===null||d===void 0?void 0:d.captchaToken}}:null),xform:hr});if(m)throw m;if(!y||!y.session||!y.user){const g=new Pn;return this._returnResult({data:{user:null,session:null},error:g})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:m})}catch(y){if(le(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(e){var t,n,i,o,a,s,l,u,c,f,d,h;let p,y;if("message"in e)p=e.message,y=e.signature;else{const{chain:m,wallet:g,statement:x,options:w}=e;let _;if(Pt())if(typeof g=="object")_=g;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))_=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!w?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=g}const C=new URL((t=w?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in _&&_.signIn){const E=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w?.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),x?{statement:x}:null));let I;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")I=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)I=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)p=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),y=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${C.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(i=(n=w?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=w?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((a=w?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((s=w?.signInWithSolana)===null||s===void 0)&&s.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((l=w?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((f=(c=w?.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||f===void 0)&&f.length?["Resources",...w.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const E=await _.signMessage(new TextEncoder().encode(p),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=E}}try{const{data:m,error:g}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:En(y)},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:hr});if(g)throw g;if(!m||!m.session||!m.user){const x=new Pn;return this._returnResult({data:{user:null,session:null},error:x})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign({},m),error:g})}catch(m){if(le(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async _exchangeCodeForSession(e){const t=await pn(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(t??"").split("/");try{const{data:o,error:a}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:hr});if(await qr(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!o||!o.session||!o.user){const s=new Pn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:s})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:a})}catch(o){if(le(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:t,provider:n,token:i,access_token:o,nonce:a}=e,s=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:hr}),{data:l,error:u}=s;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const c=new Pn;return this._returnResult({data:{user:null,session:null},error:c})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(t){if(le(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,n,i,o,a;try{if("email"in e){const{email:s,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Nn(this.storage,this.storageKey));const{error:f}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:(t=l?.data)!==null&&t!==void 0?t:{},create_user:(n=l?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in e){const{phone:s,options:l}=e,{data:u,error:c}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:s,data:(i=l?.data)!==null&&i!==void 0?i:{},create_user:(o=l?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(a=l?.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:c})}throw new co("You must provide either an email or phone number.")}catch(s){if(le(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async verifyOtp(e){var t,n;try{let i,o;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:s}=await ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:hr});if(s)throw s;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,u=a.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(le(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var t,n,i;try{let o=null,a=null;this.flowType==="pkce"&&([o,a]=await Nn(this.storage,this.storageKey));const s=await ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:k2});return this._returnResult(s)}catch(o){if(le(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new dr;const{error:i}=await ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(le(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:o}=e,{error:a}=await ge(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:n,type:i,options:o}=e,{data:a,error:s}=await ge(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:s})}throw new co("You must provide either an email or phone number and a type")}catch(t){if(le(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await pn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Na:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const a=await pn(this.userStorage,this.storageKey+"-user");a?.user?e.user=a.user:e.user=Ma()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=R2(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:en}):await this._useSession(async t=>{var n,i,o;const{data:a,error:s}=t;if(s)throw s;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new dr}:await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:en})})}catch(t){if(le(t))return l2(t)&&(await this._removeSession(),await qr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:i,error:o}=n;if(o)throw o;if(!i.session)throw new dr;const a=i.session;let s=null,l=null;this.flowType==="pkce"&&e.email!=null&&([s,l]=await Nn(this.storage,this.storageKey));const{data:u,error:c}=await ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:l}),jwt:a.access_token,xform:en});if(c)throw c;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(n){if(le(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new dr;const t=Date.now()/1e3;let n=t,i=!0,o=null;const{payload:a}=ka(e.access_token);if(a.exp&&(n=a.exp,i=n<=t),i){const{data:s,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!s)return{data:{user:null,session:null},error:null};o=s}else{const{data:s,error:l}=await this._getUser(e.access_token);if(l)throw l;o={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(t){if(le(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:a,error:s}=t;if(s)throw s;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!e?.refresh_token)throw new dr;const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(le(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!Pt())throw new fo("No browser detected.");if(e.error||e.error_description||e.error_code)throw new fo(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Ju("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new fo("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ju("No code detected.");const{data:x,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:o,refresh_token:a,expires_in:s,expires_at:l,token_type:u}=e;if(!o||!s||!a||!u)throw new fo("No session defined in URL");const c=Math.round(Date.now()/1e3),f=parseInt(s);let d=c+f;l&&(d=parseInt(l));const h=d-c;h*1e3<=jn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${f}s`);const p=d-f;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,d,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,d,c);const{data:y,error:m}=await this._getUser(o);if(m)throw m;const g={provider_token:n,provider_refresh_token:i,access_token:o,expires_in:f,expires_at:d,refresh_token:a,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:e.type},error:null})}catch(n){if(le(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await pn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:i,error:o}=t;if(o)return this._returnResult({error:o});const a=(n=i.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:s}=await this.admin.signOut(a,e);if(s&&!(s2(s)&&(s.status===404||s.status===401||s.status===403)))return this._returnResult({error:s})}return e!=="others"&&(await this._removeSession(),await qr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=g2(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,i;try{const{data:{session:o},error:a}=t;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,t={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Nn(this.storage,this.storageKey,!0));try{return await ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(le(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(le(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:n,error:i}=await this._useSession(async o=>{var a,s,l,u,c;const{data:f,error:d}=o;if(d)throw d;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ge(this.fetch,"GET",h,{headers:this.headers,jwt:(c=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return Pt()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n?.url),this._returnResult({data:{provider:e.provider,url:n?.url},error:null})}catch(n){if(le(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var n;try{const{error:i,data:{session:o}}=t;if(i)throw i;const{options:a,provider:s,token:l,access_token:u,nonce:c}=e,f=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=o?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:s,id_token:l,access_token:u,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:hr}),{data:d,error:h}=f;return h?this._returnResult({data:{user:null,session:null},error:h}):!d||!d.session||!d.user?this._returnResult({data:{user:null,session:null},error:new Pn}):(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),this._returnResult({data:d,error:h}))}catch(i){if(le(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,i;const{data:o,error:a}=t;if(a)throw a;return await ge(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(le(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await w2(async i=>(i>0&&await x2(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:hr})),(i,o)=>{const a=200*Math.pow(2,i);return o&&Da(o)&&Date.now()+a-n<jn})}catch(n){if(this._debug(t,"error",n),le(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Pt()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await pn(this.storage,this.storageKey);if(i&&this.userStorage){let a=await pn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await $n(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a?.user)!==null&&e!==void 0?e:Ma()}else if(i&&!i.user&&!i.user){const a=await pn(this.storage,this.storageKey+"-user");a&&a?.user?(i.user=a.user,await qr(this.storage,this.storageKey+"-user"),await $n(this.storage,this.storageKey,i)):i.user=Ma()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const o=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Na;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${Na}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),Da(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:s}=await this._getUser(i.access_token);!s&&a?.user?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new dr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new fa;const{data:o,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new dr;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const s={data:o.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(o){if(this._debug(i,"error",o),le(o)){const a={data:null,error:o};return Da(o)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,t)}catch(l){o.push(l)}});if(await Promise.all(a),o.length>0){for(let s=0;s<o.length;s+=1)console.error(o[s]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&t.user&&await $n(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const o=nc(i);await $n(this.storage,this.storageKey,o)}else{const i=nc(t);await $n(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await qr(this.storage,this.storageKey),await qr(this.storage,this.storageKey+"-code-verifier"),await qr(this.storage,this.storageKey+"-user"),this.userStorage&&await qr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Pt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),jn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/jn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${jn}ms, refresh threshold is ${js} ticks`),i<=js&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof R0)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Pt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const i=[`provider=${encodeURIComponent(t)}`];if(n?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,a]=await Nn(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(s.toString())}if(n?.queryParams){const o=new URLSearchParams(n.queryParams);i.push(o.toString())}return n?.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:i,error:o}=t;return o?this._returnResult({data:null,error:o}):await ge(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(le(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,i;const{data:o,error:a}=t;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:u}=await ge(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:(n=o?.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l?.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(t){if(le(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:o}=t;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Y2(e.webauthn.credential_response):Z2(e.webauthn.credential_response)})}:{code:e.code}),{data:s,error:l}=await ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),this._returnResult({data:s,error:l}))})}catch(t){if(le(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:o}=t;if(o)return this._returnResult({data:null,error:o});const a=await ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});if(a.error)return a;const{data:s}=a;if(s.type!=="webauthn")return{data:s,error:null};switch(s.webauthn.type){case"create":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:K2(s.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:X2(s.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(le(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=t?.factors)!==null&&e!==void 0?e:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:n},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=ka(n.access_token);let a=null;o.aal&&(a=o.aal);let s=a;((t=(e=n.user.factors)===null||e===void 0?void 0:e.filter(c=>c.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(s="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:s,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;return i?this._returnResult({data:null,error:i}):n?await ge(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new dr})})}catch(t){if(le(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new dr});const a=await ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:s=>({data:s,error:null})});return a.data&&a.data.redirect_url&&Pt()&&!t?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new dr});const a=await ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:s=>({data:s,error:null})});return a.data&&a.data.redirect_url&&Pt()&&!t?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(s=>s.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(s=>s.kid===e),n&&this.jwks_cached_at+o2>i)return n;const{data:o,error:a}=await ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,n=o.keys.find(s=>s.kid===e),!n)?null:n}async getClaims(e,t={}){try{let n=e;if(!n){const{data:h,error:p}=await this.getSession();if(p||!h.session)return this._returnResult({data:null,error:p});n=h.session.access_token}const{header:i,payload:o,signature:a,raw:{header:s,payload:l}}=ka(n);t?.allowExpired||I2(o.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!u){const{error:h}=await this.getUser(n);if(h)throw h;return{data:{claims:o,header:i,signature:a},error:null}}const c=O2(i.alg),f=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,f,a,p2(`${s}.${l}`)))throw new Hs("Invalid JWT signature");return{data:{claims:o,header:i,signature:a},error:null}}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}}Wi.nextInstanceID={};const ay=Wi;class sy extends ay{constructor(e){super(e)}}class ly{constructor(e,t,n){var i,o,a;this.supabaseUrl=e,this.supabaseKey=t;const s=e2(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const l=`sb-${s.hostname.split(".")[0]}-auth-token`,u={db:qg,realtime:Kg,auth:Object.assign(Object.assign({},zg),{storageKey:l}),global:Wg},c=Qg(n??{},u);this.storageKey=(i=c.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=c.global.headers)!==null&&o!==void 0?o:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(f,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=c.auth)!==null&&a!==void 0?a:{},this.headers,c.global.fetch),this.fetch=Zg(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new tg(new URL("rest/v1",s).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new Vg(this.storageUrl.href,this.headers,this.fetch,n?.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new Yv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,userStorage:o,storageKey:a,flowType:s,lock:l,debug:u,throwOnError:c},f,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new sy({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),f),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,userStorage:o,flowType:s,lock:l,debug:u,throwOnError:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new mg(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n?.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const uy=(r,e,t)=>new ly(r,e,t);function cy(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const e=r.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}cy()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const fy="https://qatxikvgjlogwdopocvm.supabase.co",dy="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFhdHhpa3ZnamxvZ3dkb3BvY3ZtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI0NTkxNzYsImV4cCI6MjA3ODAzNTE3Nn0.8fbqBRhTRDy0n-zn9YrmzdFbK3orm51awvDgBWMzumw",we=uy(fy,dy),hy={class:"bg-[#8B0000] text-white shadow-lg sticky top-0 z-50"},py={class:"container mx-auto px-6 py-4"},vy={class:"flex items-center justify-between"},gy={class:"hidden md:block"},yy={class:"flex items-center space-x-8"},my={key:0},xy={key:1},wy={key:2,class:"text-sm text-yellow-200 font-semibold"},_y={key:3},by={key:4},Ey={key:5},Ay={key:6},Cy={key:7},Sy={class:"md:hidden"},Iy={key:0,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Oy={key:1,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ty={key:0,class:"md:hidden mt-4 pb-4"},Ry={class:"flex flex-col space-y-4"},Py={key:0},Ny={key:1},Dy={key:2,class:"text-sm text-yellow-200 font-semibold"},ky={key:3},My={key:4},By={key:5},Ly={key:6},Fy={key:7},Uy=xt({__name:"Navbar",setup(r){const e=Q(!1),t=Q(!1),n=Q(null),i=Q(""),o=si();let a=null;const s=()=>{e.value=!e.value},l=()=>{e.value=!1},u=async()=>{const{data:m}=await we.auth.getSession(),g=m.session,x=localStorage.getItem("userId"),w=localStorage.getItem("userRole"),_=localStorage.getItem("userName");if(g){const C=g.user.user_metadata?.role??w??null,E=g.user.user_metadata?.full_name??_??g.user.email??"";t.value=!0,n.value=C,i.value=E,C&&!w&&localStorage.setItem("userRole",C),E&&!_&&localStorage.setItem("userName",E),localStorage.setItem("userId",g.user.id);return}x?(t.value=!0,n.value=w,i.value=_??""):(t.value=!1,n.value=null,i.value="")},c=async()=>{await we.auth.signOut(),localStorage.removeItem("userId"),localStorage.removeItem("userRole"),localStorage.removeItem("userName"),await u(),o.push("/login")},f=()=>{u()};un(()=>{u(),a=we.auth.onAuthStateChange(()=>{u()}),window.addEventListener("storage",f)}),ia(()=>{a?.data.subscription.unsubscribe(),window.removeEventListener("storage",f)});const d=Ne(()=>n.value==="admin"?"/admin":"/cartelera"),h=Ne(()=>n.value==="admin"?"Panel Admin":"Cartelera"),p=Ne(()=>i.value||"Usuario"),y=Ne(()=>n.value==="estudiante");return(m,g)=>{const x=Xt("router-link");return R(),P("header",hy,[v("nav",py,[v("div",vy,[g[9]||(g[9]=v("div",{class:"flex items-center space-x-2"},[v("h1",{class:"text-2xl font-bold tracking-wide"},"CINE ULEAM")],-1)),v("div",gy,[v("ul",yy,[v("li",null,[ye(x,{to:"/",class:"hover:text-yellow-400 transition-colors duration-200 font-medium"},{default:Te(()=>[...g[1]||(g[1]=[be(" Inicio ",-1)])]),_:1})]),t.value?(R(),P("li",my,[ye(x,{to:d.value,class:"hover:text-yellow-400 transition-colors duration-200 font-medium"},{default:Te(()=>[be(V(h.value),1)]),_:1},8,["to"])])):re("",!0),n.value==="admin"?(R(),P("li",xy,[ye(x,{to:"/escanear-qr",class:"hover:text-yellow-400 transition-colors duration-200 font-medium"},{default:Te(()=>[...g[2]||(g[2]=[be(" Escner QR ",-1)])]),_:1})])):re("",!0),t.value?(R(),P("li",wy," Hola, "+V(p.value)+"! ",1)):re("",!0),t.value?re("",!0):(R(),P("li",_y,[ye(x,{to:"/cartelera",class:"hover:text-yellow-400 transition-colors duration-200 font-medium"},{default:Te(()=>[...g[3]||(g[3]=[be(" Cartelera ",-1)])]),_:1})])),y.value?(R(),P("li",by,[ye(x,{to:"/sugerencia",class:"hover:text-yellow-400 transition-colors duration-200 font-medium"},{default:Te(()=>[...g[4]||(g[4]=[be(" Sugerencia ",-1)])]),_:1})])):re("",!0),t.value?re("",!0):(R(),P("li",Ey,[ye(x,{to:"/login",class:"hover:text-yellow-400 transition-colors duration-200 font-medium"},{default:Te(()=>[...g[5]||(g[5]=[be(" Iniciar Sesin ",-1)])]),_:1})])),t.value?re("",!0):(R(),P("li",Ay,[ye(x,{to:"/register",class:"bg-white text-[#8B0000] px-6 py-2 rounded-lg font-semibold hover:bg-yellow-400 hover:text-[#8B0000] transition-all duration-200"},{default:Te(()=>[...g[6]||(g[6]=[be(" Registrarse ",-1)])]),_:1})])),t.value?(R(),P("li",Cy,[v("button",{onClick:c,class:"bg-white/10 px-6 py-2 rounded-lg font-semibold hover:bg-white hover:text-[#8B0000] transition-all duration-200"}," Cerrar sesin ")])):re("",!0)])]),v("div",Sy,[v("button",{onClick:s,class:"text-white focus:outline-none","aria-label":"Toggle menu"},[e.value?(R(),P("svg",Oy,[...g[8]||(g[8]=[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])])):(R(),P("svg",Iy,[...g[7]||(g[7]=[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,-1)])]))])])]),e.value?(R(),P("div",Ty,[v("ul",Ry,[v("li",null,[ye(x,{to:"/",onClick:l,class:"block hover:text-yellow-400 transition-colors duration-200 font-medium"},{default:Te(()=>[...g[10]||(g[10]=[be(" Inicio ",-1)])]),_:1})]),t.value?(R(),P("li",Py,[ye(x,{to:d.value,onClick:l,class:"block hover:text-yellow-400 transition-colors duration-200 font-medium"},{default:Te(()=>[be(V(h.value),1)]),_:1},8,["to"])])):re("",!0),n.value==="admin"?(R(),P("li",Ny,[ye(x,{to:"/escanear-qr",onClick:l,class:"block hover:text-yellow-400 transition-colors duration-200 font-medium"},{default:Te(()=>[...g[11]||(g[11]=[be(" Escner QR ",-1)])]),_:1})])):re("",!0),t.value?(R(),P("li",Dy," Hola, "+V(p.value)+"! ",1)):re("",!0),t.value?re("",!0):(R(),P("li",ky,[ye(x,{to:"/cartelera",onClick:l,class:"block hover:text-yellow-400 transition-colors duration-200 font-medium"},{default:Te(()=>[...g[12]||(g[12]=[be(" Cartelera ",-1)])]),_:1})])),y.value?(R(),P("li",My,[ye(x,{to:"/sugerencia",onClick:l,class:"block hover:text-yellow-400 transition-colors duration-200 font-medium"},{default:Te(()=>[...g[13]||(g[13]=[be(" Sugerencia ",-1)])]),_:1})])):re("",!0),t.value?re("",!0):(R(),P("li",By,[ye(x,{to:"/login",onClick:l,class:"block hover:text-yellow-400 transition-colors duration-200 font-medium"},{default:Te(()=>[...g[14]||(g[14]=[be(" Iniciar Sesin ",-1)])]),_:1})])),t.value?re("",!0):(R(),P("li",Ly,[ye(x,{to:"/register",onClick:l,class:"block bg-white text-[#8B0000] px-6 py-2 rounded-lg font-semibold text-center hover:bg-yellow-400 hover:text-[#8B0000] transition-all duration-200"},{default:Te(()=>[...g[15]||(g[15]=[be(" Registrarse ",-1)])]),_:1})])),t.value?(R(),P("li",Fy,[v("button",{onClick:g[0]||(g[0]=()=>{c(),l()}),class:"w-full bg-white/10 px-6 py-2 rounded-lg font-semibold hover:bg-white hover:text-[#8B0000] transition-all duration-200"}," Cerrar sesin ")])):re("",!0)])])):re("",!0)])])}}}),jy={class:"app-layout"},$y={class:"main-content"},Vy=xt({__name:"App",setup(r){return(e,t)=>{const n=Xt("router-view");return R(),P("div",jy,[ye(Uy),v("main",$y,[ye(n)]),ye(Lp)])}}}),Hy="/assets/cine3-BRvoO-bB.jpeg",Gy={class:"relative z-10 max-w-3xl text-center space-y-6"},Wy={class:"flex flex-col sm:flex-row gap-4 justify-center mt-8"},qy=xt({__name:"Home",setup(r){return(e,t)=>{const n=Xt("RouterLink");return R(),P("section",{class:"relative min-h-screen flex items-center justify-center text-white px-8 py-12 bg-cover bg-center",style:Qo({backgroundImage:`url(${jr(Hy)})`})},[t[3]||(t[3]=v("div",{class:"absolute inset-0 bg-black/30 backdrop-blur-md"},null,-1)),v("div",Gy,[t[1]||(t[1]=v("h1",{class:"text-4xl font-bold"},"Bienvenido al Cine ULEAM",-1)),t[2]||(t[2]=v("p",{class:"text-xl"},"Disfruta de las mejores pelculas en el corazn de tu universidad.",-1)),v("div",Wy,[ye(n,{to:"/cartelera",class:"bg-[#8B0000] text-white px-8 py-3 font-semibold rounded-xl shadow-lg hover:bg-[#A52A2A] hover:scale-105 transition-all duration-300"},{default:Te(()=>[...t[0]||(t[0]=[be(" Ver Cartelera ",-1)])]),_:1})])])],4)}}}),Yi=(r,e)=>{const t=r.__vccOpts||r;for(const[n,i]of e)t[n]=i;return t},zy=Yi(qy,[["__scopeId","data-v-7a7054b3"]]),Ky={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 py-12 px-4 sm:px-6 lg:px-8 relative z-10"},Xy={class:"max-w-md w-full space-y-8 bg-white p-8 rounded-2xl shadow-2xl relative z-20"},Yy={class:"space-y-4"},Zy={class:"relative"},Jy={class:"relative"},Qy=["type"],em={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},tm={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},rm={class:"flex items-center justify-between"},nm={class:"flex items-center"},im={class:"text-sm"},om={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg"},am=["disabled"],sm={class:"text-center"},lm={class:"text-sm text-gray-600"},um=xt({__name:"Login",setup(r){const e=si(),t=ar({email:"",password:"",remember:!1}),n=Q(!1),i=Q(""),o=Q(!1),a=()=>{n.value=!n.value},s=async()=>{if(i.value="",!t.email.endsWith("@live.uleam.edu.ec")){i.value="Debe usar su correo institucional (@live.uleam.edu.ec)";return}o.value=!0;try{const{error:l}=await we.auth.signInWithPassword({email:t.email,password:t.password});if(l)throw l;const{data:u,error:c}=await we.from("usuarios").select("*").eq("correo",t.email).single();if(c)throw c;localStorage.setItem("userRole",u.rol),localStorage.setItem("userId",u.id),localStorage.setItem("userName",u.nombre),u.rol==="admin"?e.push("/admin"):e.push("/cartelera")}catch(l){i.value=l.message||"Error al iniciar sesin"}finally{o.value=!1}};return(l,u)=>{const c=Xt("router-link");return R(),P("div",Ky,[v("div",Xy,[u[13]||(u[13]=v("div",{class:"text-center"},[v("div",{class:"flex justify-center mb-4"}),v("h2",{class:"text-3xl font-extrabold text-gray-900"}," Iniciar Sesin "),v("p",{class:"mt-2 text-sm text-gray-600"}," Accede a tu cuenta de Cine ULEAM ")],-1)),v("form",{class:"mt-8 space-y-6",onSubmit:ai(s,["prevent"])},[v("div",Yy,[v("div",null,[u[4]||(u[4]=v("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-1"}," Correo Electrnico ",-1)),v("div",Zy,[u[3]||(u[3]=v("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[v("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})])],-1)),Ee(v("input",{id:"email","onUpdate:modelValue":u[0]||(u[0]=f=>t.email=f),type:"email",required:"",class:"appearance-none block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200",placeholder:"ejemplo@live.uleam.edu.ec"},null,512),[[We,t.email]])])]),v("div",null,[u[8]||(u[8]=v("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-1"}," Contrasea ",-1)),v("div",Jy,[u[7]||(u[7]=v("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[v("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1)),Ee(v("input",{id:"password","onUpdate:modelValue":u[1]||(u[1]=f=>t.password=f),type:n.value?"text":"password",required:"",class:"appearance-none block w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200",placeholder:""},null,8,Qy),[[$i,t.password]]),v("button",{type:"button",onClick:a,class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[n.value?(R(),P("svg",tm,[...u[6]||(u[6]=[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(R(),P("svg",em,[...u[5]||(u[5]=[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])])])]),v("div",rm,[v("div",nm,[Ee(v("input",{id:"remember","onUpdate:modelValue":u[2]||(u[2]=f=>t.remember=f),type:"checkbox",class:"h-4 w-4 text-[#8B0000] focus:ring-[#8B0000] border-gray-300 rounded cursor-pointer"},null,512),[[ml,t.remember]]),u[9]||(u[9]=v("label",{for:"remember",class:"ml-2 block text-sm text-gray-700 cursor-pointer"}," Recordarme ",-1))]),v("div",im,[ye(c,{to:"/forgot-password",class:"font-medium text-[#8B0000] hover:text-[#A52A2A] transition duration-200"},{default:Te(()=>[...u[10]||(u[10]=[be(" Olvidaste tu contrasea? ",-1)])]),_:1})])]),i.value?(R(),P("div",om,"  "+V(i.value),1)):re("",!0),v("div",null,[v("button",{type:"submit",disabled:o.value,class:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-lg font-semibold text-white bg-[#8B0000] hover:bg-[#A52A2A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#8B0000] transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed"},V(o.value?"Iniciando sesin...":"Iniciar Sesin"),9,am)]),v("div",sm,[v("p",lm,[u[12]||(u[12]=be(" No tienes una cuenta? ",-1)),ye(c,{to:"/register",class:"font-medium text-[#8B0000] hover:text-[#A52A2A] transition duration-200"},{default:Te(()=>[...u[11]||(u[11]=[be(" Regstrate aqu ",-1)])]),_:1})])])],32)])])}}}),cm={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 py-12 px-4 sm:px-6 lg:px-8 relative z-10"},fm={class:"max-w-md w-full space-y-8 bg-white p-8 rounded-2xl shadow-2xl relative z-20"},dm={class:"space-y-4"},hm={class:"relative"},pm={class:"relative"},vm={class:"relative"},gm=["type"],ym={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},mm={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},xm={class:"relative"},wm=["type"],_m={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},bm={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Em={key:0,class:"mt-1 text-sm text-red-600"},Am={class:"flex items-start"},Cm={class:"flex items-center h-5"},Sm={key:0,class:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg"},Im={key:1,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg"},Om={class:"text-sm"},Tm=["disabled"],Rm={class:"text-center"},Pm={class:"text-sm text-gray-600"},Nm=xt({__name:"Register",setup(r){const e=si(),t=ar({fullName:"",email:"",password:"",confirmPassword:"",acceptTerms:!1}),n=Q(!1),i=Q(!1),o=Q(!1),a=Q(""),s=Q(""),l=()=>{n.value=!n.value},u=()=>{i.value=!i.value},c=Ne(()=>t.confirmPassword.length>0&&t.password!==t.confirmPassword),f=Ne(()=>t.fullName.length>0&&t.email.length>0&&t.email.endsWith("@live.uleam.edu.ec")&&t.password.length>=6&&t.password===t.confirmPassword&&t.acceptTerms),d=async()=>{if(f.value){if(!t.email.endsWith("@live.uleam.edu.ec")){a.value="Debe usar su correo institucional (@live.uleam.edu.ec)";return}o.value=!0,a.value="",s.value="";try{const{data:h,error:p}=await we.auth.signUp({email:t.email,password:t.password,options:{data:{full_name:t.fullName},emailRedirectTo:`${window.location.origin}/cartelera`}});if(p)throw p;if(h.user){await new Promise(g=>setTimeout(g,500));const{data:y,error:m}=await we.from("usuarios").select("*").eq("id",h.user.id).single();m&&console.error("Error al verificar usuario:",m),y?(localStorage.setItem("userId",y.id),localStorage.setItem("userRole",y.rol),localStorage.setItem("userName",y.nombre)):(localStorage.setItem("userId",h.user.id),localStorage.setItem("userRole","estudiante"),localStorage.setItem("userName",t.fullName)),s.value="Cuenta creada exitosamente!",setTimeout(()=>{e.push("/cartelera")},1e3)}else a.value="No se pudo crear la cuenta. Por favor, intenta nuevamente."}catch(h){console.error("Error en registro:",h),h.message.includes("already registered")?a.value="Este correo ya est registrado":a.value=h.message||"Error al crear la cuenta"}finally{o.value=!1}}};return(h,p)=>{const y=Xt("router-link");return R(),P("div",cm,[v("div",fm,[p[20]||(p[20]=v("div",{class:"text-center"},[v("h2",{class:"text-3xl font-extrabold text-gray-900"}," Crear Cuenta "),v("p",{class:"mt-2 text-sm text-gray-600"}," nete a la comunidad del Cine ULEAM ")],-1)),v("form",{class:"mt-8 space-y-6",onSubmit:ai(d,["prevent"])},[v("div",dm,[v("div",null,[p[6]||(p[6]=v("label",{for:"fullName",class:"block text-sm font-medium text-gray-700 mb-1"}," Nombre Completo ",-1)),v("div",hm,[p[5]||(p[5]=v("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[v("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),Ee(v("input",{id:"fullName","onUpdate:modelValue":p[0]||(p[0]=m=>t.fullName=m),type:"text",required:"",class:"appearance-none block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200",placeholder:"Juan Prez"},null,512),[[We,t.fullName]])])]),v("div",null,[p[8]||(p[8]=v("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-1"}," Correo Electrnico ",-1)),v("div",pm,[p[7]||(p[7]=v("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[v("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})])],-1)),Ee(v("input",{id:"email","onUpdate:modelValue":p[1]||(p[1]=m=>t.email=m),type:"email",required:"",class:"appearance-none block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200",placeholder:"ejemplo@live.uleam.edu.ec"},null,512),[[We,t.email]])])]),v("div",null,[p[12]||(p[12]=v("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-1"}," Contrasea ",-1)),v("div",vm,[p[11]||(p[11]=v("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[v("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1)),Ee(v("input",{id:"password","onUpdate:modelValue":p[2]||(p[2]=m=>t.password=m),type:n.value?"text":"password",required:"",minlength:"6",class:"appearance-none block w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200",placeholder:"Mnimo 6 caracteres"},null,8,gm),[[$i,t.password]]),v("button",{type:"button",onClick:l,class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[n.value?(R(),P("svg",mm,[...p[10]||(p[10]=[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(R(),P("svg",ym,[...p[9]||(p[9]=[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])])]),v("div",null,[p[16]||(p[16]=v("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-700 mb-1"}," Confirmar Contrasea ",-1)),v("div",xm,[p[15]||(p[15]=v("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[v("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),Ee(v("input",{id:"confirmPassword","onUpdate:modelValue":p[3]||(p[3]=m=>t.confirmPassword=m),type:i.value?"text":"password",required:"",minlength:"6",class:"appearance-none block w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200",placeholder:"Repite tu contrasea"},null,8,wm),[[$i,t.confirmPassword]]),v("button",{type:"button",onClick:u,class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[i.value?(R(),P("svg",bm,[...p[14]||(p[14]=[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(R(),P("svg",_m,[...p[13]||(p[13]=[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])]),c.value?(R(),P("p",Em," Las contraseas no coinciden ")):re("",!0)])]),v("div",Am,[v("div",Cm,[Ee(v("input",{id:"terms","onUpdate:modelValue":p[4]||(p[4]=m=>t.acceptTerms=m),type:"checkbox",required:"",class:"h-4 w-4 text-[#8B0000] focus:ring-[#8B0000] border-gray-300 rounded cursor-pointer"},null,512),[[ml,t.acceptTerms]])]),p[17]||(p[17]=v("div",{class:"ml-3 text-sm"},[v("label",{for:"terms",class:"text-gray-600 cursor-pointer"},[be(" Acepto los "),v("a",{href:"#",class:"font-medium text-[#8B0000] hover:text-[#A52A2A]"},"trminos y condiciones"),be(" y la "),v("a",{href:"#",class:"font-medium text-[#8B0000] hover:text-[#A52A2A]"},"poltica de privacidad")])],-1))]),s.value?(R(),P("div",Sm,"  "+V(s.value),1)):re("",!0),a.value?(R(),P("div",Im,[v("p",Om,V(a.value),1)])):re("",!0),v("div",null,[v("button",{type:"submit",disabled:!f.value||o.value,class:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-lg font-semibold text-white bg-[#8B0000] hover:bg-[#A52A2A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#8B0000] transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100"},V(o.value?"Creando cuenta...":"Crear Cuenta"),9,Tm)]),v("div",Rm,[v("p",Pm,[p[19]||(p[19]=be(" Ya tienes una cuenta? ",-1)),ye(y,{to:"/login",class:"font-medium text-[#8B0000] hover:text-[#A52A2A] transition duration-200"},{default:Te(()=>[...p[18]||(p[18]=[be(" Inicia sesin aqu ",-1)])]),_:1})])])],32)])])}}}),Dm={class:"min-h-screen bg-gray-50"},km={class:"container mx-auto px-6 py-8"},Mm={class:"mb-6"},Bm={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Lm={class:"bg-white rounded-xl shadow-md p-6"},Fm={class:"flex items-center justify-between"},Um={class:"text-3xl font-bold text-gray-800 mt-2"},jm={class:"bg-white rounded-xl shadow-md p-6"},$m={class:"flex items-center justify-between"},Vm={class:"text-3xl font-bold text-gray-800 mt-2"},Hm={class:"bg-white rounded-xl shadow-md overflow-hidden"},Gm={class:"border-b border-gray-200"},Wm={class:"flex -mb-px"},qm={class:"p-6"},zm={key:0,class:"space-y-6"},Km={class:"bg-gray-50 rounded-lg p-6"},Xm={class:"flex gap-4 mb-4"},Ym={key:0,class:"space-y-4"},Zm={class:"flex gap-4"},Jm=["disabled"],Qm={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm text-blue-700 flex items-center gap-2"},ex={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},tx=["onClick"],rx={class:"flex gap-4"},nx=["src","alt"],ix={class:"flex-1"},ox={class:"font-semibold text-gray-800"},ax={class:"text-sm text-gray-600"},sx={class:"text-sm text-gray-500 mt-1"},lx={key:1,class:"space-y-4"},ux={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},cx={class:"md:col-span-2"},fx={class:"md:col-span-2"},dx={key:0,class:"flex justify-center items-center py-12"},hx={key:1,class:"bg-blue-50 border border-blue-200 rounded-lg p-8 text-center"},px={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},vx=["src","alt"],gx={class:"p-4"},yx={class:"font-bold text-lg text-gray-800"},mx={class:"text-sm text-gray-600 mt-1"},xx={class:"text-sm text-gray-500 mt-1"},wx={class:"text-sm text-gray-700 mt-2 line-clamp-2"},_x={class:"flex gap-2 mt-4"},bx=["onClick"],Ex=["onClick"],Ax={key:1,class:"space-y-6"},Cx={class:"bg-gray-50 rounded-lg p-6"},Sx={class:"space-y-4"},Ix={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ox=["value"],Tx=["min"],Rx=["value"],Px={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg"},Nx={class:"space-y-4"},Dx={class:"flex items-center justify-between"},kx={class:"flex-1"},Mx={class:"font-bold text-gray-800"},Bx={class:"flex gap-4 mt-2 text-sm text-gray-600"},Lx={class:"flex gap-2"},Fx=["onClick"],Ux=xt({__name:"AdminCartelera",setup(r){const e=Q("peliculas"),t=Q("api"),n=Q(""),i=Q(!1),o=Q(!1),a=Q(!0),s=Q([]),l=Q(!1),u=Q(""),c=Q(null),f=ar({ocupacionTotal:0,reservasHoy:0,peliculasActivas:0,funcionesHoy:0}),d=Q([]),h=Q([]),p=Q([]),y=ar({titulo:"",director:"",duracion_min:0,genero:"",poster_url:"",sinopsis:""}),m=ar({pelicula_id:"",sala_id:"",fecha:"",hora_inicio:"",hora_fin:""}),g=Ne(()=>new Date().toISOString().split("T")[0]);un(async()=>{await x(),await w(),await _(),await C(),setInterval(async()=>{await C()},3e4)});const x=async()=>{try{a.value=!0,console.log("Cargando pelculas...");const{data:z,error:N}=await we.from("peliculas").select("*").order("creada_en",{ascending:!1});if(N)throw console.error("Error de Supabase:",N),N;console.log("Pelculas cargadas:",z),d.value=z||[],console.log("Total de pelculas:",d.value.length)}catch(z){console.error("Error cargando pelculas:",z),alert("Error al cargar pelculas: "+z.message)}finally{a.value=!1}},w=async()=>{try{const{data:z,error:N}=await we.from("funciones").select("*").order("fecha",{ascending:!0}).order("hora_inicio",{ascending:!0});if(N)throw N;h.value=z||[]}catch(z){console.error("Error cargando funciones:",z)}},_=async()=>{try{const{data:z,error:N}=await we.from("sala").select("*").order("nombre",{ascending:!0});if(N)throw N;p.value=z||[]}catch(z){console.error("Error cargando salas:",z)}},C=async()=>{try{const{count:z}=await we.from("peliculas").select("*",{count:"exact",head:!0});f.peliculasActivas=z||0;const N=new Date().toISOString().split("T")[0],{count:De}=await we.from("funciones").select("*",{count:"exact",head:!0}).eq("fecha",N);f.funcionesHoy=De||0;const q=new Date;q.setHours(0,0,0,0);const Ie=new Date;Ie.setHours(23,59,59,999);try{const{data:tt,error:L}=await we.from("reservas").select("id").gte("creada_en",q.toISOString()).lte("creada_en",Ie.toISOString());if(!L&&tt)f.reservasHoy=tt.length;else{const{count:K}=await we.from("reservas").select("*",{count:"exact",head:!0}).eq("estado","activa");f.reservasHoy=K||0}}catch(tt){console.error("Error cargando reservas:",tt);const{count:L}=await we.from("reservas").select("*",{count:"exact",head:!0});f.reservasHoy=L||0}}catch(z){console.error("Error cargando estadsticas:",z)}},E=async()=>{if(n.value.trim()){i.value=!0;try{const De=await(await fetch(`https://www.omdbapi.com/?s=${encodeURIComponent(n.value)}&apikey=34e63b5b`)).json();De.Response==="True"?s.value=De.Search:(alert("No se encontraron pelculas"),s.value=[])}catch(z){console.error("Error buscando pelcula:",z),alert("Error al buscar pelcula")}finally{i.value=!1}}},I=async z=>{if(!z||z==="N/A")return z;try{const De=await(await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(z)}&langpair=en|es`)).json();return De.responseStatus===200&&De.responseData&&De.responseData.translatedText||z}catch(N){return console.warn("Error al traducir texto:",N),z}},D=async z=>{try{o.value=!0;const q=await(await fetch(`https://www.omdbapi.com/?i=${z.imdbID}&apikey=34e63b5b`)).json();if(q.Response==="True"){y.titulo=q.Title,y.director=q.Director!=="N/A"?q.Director:"",y.duracion_min=parseInt(q.Runtime?.replace(" min",""))||0,y.genero=q.Genre!=="N/A"?q.Genre.split(",")[0].trim():"",y.poster_url=q.Poster!=="N/A"?q.Poster:"";const Ie=q.Plot!=="N/A"?q.Plot:"";Ie?y.sinopsis=await I(Ie):y.sinopsis="",l.value=!0,s.value=[]}}catch(N){console.error("Error obteniendo detalles:",N),alert("Error al obtener los detalles de la pelcula. Intenta de nuevo.")}finally{o.value=!1}},M=async()=>{if(!y.titulo||!y.sinopsis){alert("Por favor completa todos los campos requeridos");return}try{const z={titulo:y.titulo,director:y.director,duracion_min:y.duracion_min,genero:y.genero,poster_url:y.poster_url,sinopsis:y.sinopsis};if(c.value){const{error:N}=await we.from("peliculas").update(z).eq("id",c.value);if(N)throw N;alert("Pelcula actualizada correctamente")}else{const{error:N}=await we.from("peliculas").insert([z]);if(N)throw N;alert("Pelcula guardada correctamente")}await x(),await C(),F()}catch(z){console.error("Error guardando pelcula:",z),alert("Error al guardar la pelcula")}},j=z=>{y.titulo=z.titulo,y.director=z.director||"",y.duracion_min=z.duracion_min||0,y.genero=z.genero||"",y.poster_url=z.poster_url||"",y.sinopsis=z.sinopsis||"",c.value=z.id,t.value="manual",l.value=!0},X=async z=>{if(confirm("Ests seguro de eliminar esta pelcula?"))try{const{error:N}=await we.from("peliculas").delete().eq("id",z);if(N)throw N;alert("Pelcula eliminada correctamente"),await x(),await C()}catch(N){console.error("Error eliminando pelcula:",N),alert("Error al eliminar la pelcula")}},F=()=>{y.titulo="",y.director="",y.duracion_min=0,y.genero="",y.poster_url="",y.sinopsis="",l.value=!1,c.value=null,s.value=[],n.value=""},k=(z,N)=>{const[De,q]=z.split(":").map(Number),Ie=new Date;return Ie.setHours(De||0,q||0,0),Ie.setMinutes(Ie.getMinutes()+N),Ie.toTimeString().slice(0,5)},W=()=>{const{fecha:z,hora_inicio:N,sala_id:De,pelicula_id:q}=m;if(!z||!N||!De||!q)return!0;const Ie=d.value.find(K=>K.id===q);if(!Ie||!Ie.duracion_min)return!0;const tt=new Date(`${z}T${N}`),L=new Date(tt.getTime()+Ie.duracion_min*6e4);for(const K of h.value)if(K.fecha===z&&K.sala_id===De){const ee=new Date(`${K.fecha}T${K.hora_inicio}`),se=new Date(`${K.fecha}T${K.hora_fin}`);if(tt<se&&L>ee){const Se=p.value.find(A=>A.id===De)?.nombre||"esta sala";return u.value=`Ya existe una funcin programada en ${Se} que se solapa con este horario`,!1}}return u.value="",!0},Z=async()=>{if(W())try{const z=d.value.find(Ie=>Ie.id===m.pelicula_id);if(!z||!z.duracion_min){alert("Error: No se pudo obtener la duracin de la pelcula");return}const N=k(m.hora_inicio,z.duracion_min),De={pelicula_id:m.pelicula_id,sala_id:m.sala_id,fecha:m.fecha,hora_inicio:m.hora_inicio,hora_fin:N},{error:q}=await we.from("funciones").insert([De]);if(q)throw q;alert("Funcin programada correctamente"),await w(),await C(),me()}catch(z){console.error("Error guardando funcin:",z),alert("Error al programar la funcin")}},ue=async z=>{if(confirm("Ests seguro de eliminar esta funcin?"))try{const{error:N}=await we.from("funciones").delete().eq("id",z);if(N)throw N;alert("Funcin eliminada correctamente"),await w(),await C()}catch(N){console.error("Error eliminando funcin:",N),alert("Error al eliminar la funcin")}},me=()=>{m.pelicula_id="",m.sala_id="",m.fecha="",m.hora_inicio="",m.hora_fin="",u.value=""},he=z=>d.value.find(N=>N.id===z)?.titulo||"Pelcula no encontrada",wt=z=>p.value.find(N=>N.id===z)?.nombre||"Sala no encontrada",_t=z=>new Date(z+"T00:00:00").toLocaleDateString("es-ES",{weekday:"short",year:"numeric",month:"short",day:"numeric"});return(z,N)=>{const De=Xt("RouterLink");return R(),P("div",Dm,[N[42]||(N[42]=v("div",{class:"bg-[#8B0000] text-white shadow-lg"},[v("div",{class:"container mx-auto px-6 py-6"},[v("h1",{class:"text-3xl font-bold"},"Panel de Administracin - Cine ULEAM"),v("p",{class:"text-gray-200 mt-1"},"Gestin de cartelera y funciones")])],-1)),v("div",km,[v("div",Mm,[ye(De,{to:"/admin/notificaciones",class:"inline-flex items-center gap-2 bg-[#8B0000] text-white px-6 py-3 rounded-xl font-semibold shadow-md hover:bg-[#A52A2A] transition-all duration-200"},{default:Te(()=>[...N[17]||(N[17]=[v("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1),be(" Ver Sugerencias ",-1)])]),_:1})]),v("div",Bm,[v("div",Lm,[v("div",Fm,[v("div",null,[N[18]||(N[18]=v("p",{class:"text-gray-500 text-sm font-medium"},"Reservas Hoy",-1)),v("p",Um,V(f.reservasHoy),1)]),v("button",{onClick:C,class:"text-[#8B0000] hover:text-[#A52A2A] transition-colors",title:"Actualizar estadsticas"},[...N[19]||(N[19]=[v("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])])])]),v("div",jm,[v("div",$m,[v("div",null,[N[20]||(N[20]=v("p",{class:"text-gray-500 text-sm font-medium"},"Pelculas Activas",-1)),v("p",Vm,V(f.peliculasActivas),1)])])])]),v("div",Hm,[v("div",Gm,[v("nav",Wm,[v("button",{onClick:N[0]||(N[0]=q=>e.value="peliculas"),class:At(["px-6 py-4 text-sm font-medium border-b-2 transition-colors",e.value==="peliculas"?"border-[#8B0000] text-[#8B0000]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Gestin de Pelculas ",2),v("button",{onClick:N[1]||(N[1]=q=>e.value="funciones"),class:At(["px-6 py-4 text-sm font-medium border-b-2 transition-colors",e.value==="funciones"?"border-[#8B0000] text-[#8B0000]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Programacin de Horarios ",2)])]),v("div",qm,[e.value==="peliculas"?(R(),P("div",zm,[v("div",Km,[N[28]||(N[28]=v("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Aadir Nueva Pelcula",-1)),v("div",Xm,[v("button",{onClick:N[2]||(N[2]=q=>t.value="api"),class:At(["flex-1 py-3 px-4 rounded-lg font-medium transition-all",t.value==="api"?"bg-[#8B0000] text-white shadow-lg":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"])}," Buscar en OMDb API ",2),v("button",{onClick:N[3]||(N[3]=q=>t.value="manual"),class:At(["flex-1 py-3 px-4 rounded-lg font-medium transition-all",t.value==="manual"?"bg-[#8B0000] text-white shadow-lg":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"])}," Ingresar Manualmente ",2)]),t.value==="api"?(R(),P("div",Ym,[v("div",Zm,[Ee(v("input",{"onUpdate:modelValue":N[4]||(N[4]=q=>n.value=q),type:"text",placeholder:"Buscar pelcula por ttulo...",class:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent",onKeyup:Id(E,["enter"])},null,544),[[We,n.value]]),v("button",{onClick:E,disabled:i.value||o.value,class:"bg-[#8B0000] text-white px-6 py-3 rounded-lg font-medium hover:bg-[#A52A2A] transition-colors disabled:opacity-50"},V(i.value?"Buscando...":"Buscar"),9,Jm)]),o.value?(R(),P("div",Qm,[...N[21]||(N[21]=[v("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-700"},null,-1),be(" Traduciendo sinopsis al espaol... ",-1)])])):re("",!0),s.value.length>0?(R(),P("div",ex,[(R(!0),P(at,null,Qt(s.value,q=>(R(),P("div",{key:q.imdbID,class:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-lg transition-shadow cursor-pointer",onClick:Ie=>D(q)},[v("div",rx,[v("img",{src:q.Poster!=="N/A"?q.Poster:"/placeholder-movie.jpg",alt:q.Title,class:"w-20 h-28 object-cover rounded"},null,8,nx),v("div",ix,[v("h4",ox,V(q.Title),1),v("p",ax,V(q.Year),1),v("p",sx,V(q.Type),1)])])],8,tx))),128))])):re("",!0)])):re("",!0),t.value==="manual"||l.value?(R(),P("div",lx,[v("div",ux,[v("div",null,[N[22]||(N[22]=v("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Ttulo *",-1)),Ee(v("input",{"onUpdate:modelValue":N[5]||(N[5]=q=>y.titulo=q),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent"},null,512),[[We,y.titulo]])]),v("div",null,[N[23]||(N[23]=v("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Director *",-1)),Ee(v("input",{"onUpdate:modelValue":N[6]||(N[6]=q=>y.director=q),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent"},null,512),[[We,y.director]])]),v("div",null,[N[24]||(N[24]=v("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Duracin (min) *",-1)),Ee(v("input",{"onUpdate:modelValue":N[7]||(N[7]=q=>y.duracion_min=q),type:"number",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent"},null,512),[[We,y.duracion_min]])]),v("div",null,[N[25]||(N[25]=v("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Gnero *",-1)),Ee(v("input",{"onUpdate:modelValue":N[8]||(N[8]=q=>y.genero=q),type:"text",required:"",placeholder:"Ej: Accin, Drama, Comedia",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent"},null,512),[[We,y.genero]])]),v("div",cx,[N[26]||(N[26]=v("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"URL del Pster",-1)),Ee(v("input",{"onUpdate:modelValue":N[9]||(N[9]=q=>y.poster_url=q),type:"url",placeholder:"https://...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent"},null,512),[[We,y.poster_url]])]),v("div",fx,[N[27]||(N[27]=v("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Sinopsis *",-1)),Ee(v("textarea",{"onUpdate:modelValue":N[10]||(N[10]=q=>y.sinopsis=q),rows:"4",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent"},null,512),[[We,y.sinopsis]])])]),v("div",{class:"flex gap-4"},[v("button",{onClick:M,class:"bg-[#8B0000] text-white px-6 py-3 rounded-lg font-medium hover:bg-[#A52A2A] transition-colors"}," Guardar Pelcula "),v("button",{onClick:F,class:"bg-gray-300 text-gray-700 px-6 py-3 rounded-lg font-medium hover:bg-gray-400 transition-colors"}," Cancelar ")])])):re("",!0)]),v("div",null,[N[33]||(N[33]=v("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Cartelera Actual",-1)),a.value?(R(),P("div",dx,[...N[29]||(N[29]=[v("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#8B0000]"},null,-1),v("p",{class:"ml-4 text-gray-600"},"Cargando pelculas...",-1)])])):d.value.length===0?(R(),P("div",hx,[N[30]||(N[30]=v("svg",{class:"mx-auto h-12 w-12 text-blue-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"})],-1)),N[31]||(N[31]=v("h3",{class:"text-lg font-semibold text-gray-700 mb-2"},"No hay pelculas en la cartelera",-1)),N[32]||(N[32]=v("p",{class:"text-gray-600 mb-4"},"Agrega tu primera pelcula usando el formulario de arriba",-1)),v("button",{onClick:N[11]||(N[11]=q=>{t.value="api",e.value="peliculas"}),class:"bg-[#8B0000] text-white px-6 py-2 rounded-lg font-medium hover:bg-[#A52A2A] transition-colors"}," Agregar Pelcula ")])):(R(),P("div",px,[(R(!0),P(at,null,Qt(d.value,q=>(R(),P("div",{key:q.id,class:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-xl transition-shadow"},[v("img",{src:q.poster_url||"https://via.placeholder.com/300x450?text=Sin+Poster",alt:q.titulo,class:"w-full h-64 object-cover",onError:N[12]||(N[12]=Ie=>Ie.target.src="https://via.placeholder.com/300x450?text=Sin+Poster")},null,40,vx),v("div",gx,[v("h4",yx,V(q.titulo),1),v("p",mx,V(q.duracion_min)+" min",1),v("p",xx,V(q.genero),1),v("p",wx,V(q.sinopsis),1),v("div",_x,[v("button",{onClick:Ie=>j(q),class:"flex-1 bg-[#8B0000] text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-600 transition-colors"}," Editar ",8,bx),v("button",{onClick:Ie=>X(q.id),class:"flex-1 bg-[#8B0000] text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-red-600 transition-colors"}," Eliminar ",8,Ex)])])]))),128))]))])])):re("",!0),e.value==="funciones"?(R(),P("div",Ax,[v("div",Cx,[N[40]||(N[40]=v("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Programar Nueva Funcin",-1)),v("div",Sx,[v("div",Ix,[v("div",null,[N[35]||(N[35]=v("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Pelcula *",-1)),Ee(v("select",{"onUpdate:modelValue":N[13]||(N[13]=q=>m.pelicula_id=q),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent"},[N[34]||(N[34]=v("option",{value:""},"Seleccionar pelcula...",-1)),(R(!0),P(at,null,Qt(d.value,q=>(R(),P("option",{key:q.id,value:q.id},V(q.titulo),9,Ox))),128))],512),[[Hr,m.pelicula_id]])]),v("div",null,[N[36]||(N[36]=v("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Fecha *",-1)),Ee(v("input",{"onUpdate:modelValue":N[14]||(N[14]=q=>m.fecha=q),type:"date",required:"",min:g.value,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent"},null,8,Tx),[[We,m.fecha]])]),v("div",null,[N[37]||(N[37]=v("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Hora de Inicio *",-1)),Ee(v("input",{"onUpdate:modelValue":N[15]||(N[15]=q=>m.hora_inicio=q),type:"time",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent"},null,512),[[We,m.hora_inicio]])]),v("div",null,[N[39]||(N[39]=v("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Sala *",-1)),Ee(v("select",{"onUpdate:modelValue":N[16]||(N[16]=q=>m.sala_id=q),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent"},[N[38]||(N[38]=v("option",{value:""},"Seleccionar sala...",-1)),(R(!0),P(at,null,Qt(p.value,q=>(R(),P("option",{key:q.id,value:q.id},V(q.nombre)+" (Capacidad: "+V(q.capacidad)+") ",9,Rx))),128))],512),[[Hr,m.sala_id]])])]),u.value?(R(),P("div",Px,V(u.value),1)):re("",!0),v("div",{class:"flex gap-4"},[v("button",{onClick:Z,class:"bg-[#8B0000] text-white px-6 py-3 rounded-lg font-medium hover:bg-[#A52A2A] transition-colors"}," Programar Funcin "),v("button",{onClick:me,class:"bg-gray-300 text-gray-700 px-6 py-3 rounded-lg font-medium hover:bg-gray-400 transition-colors"}," Cancelar ")])])]),v("div",null,[N[41]||(N[41]=v("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Funciones Programadas",-1)),v("div",Nx,[(R(!0),P(at,null,Qt(h.value,q=>(R(),P("div",{key:q.id,class:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow"},[v("div",Dx,[v("div",kx,[v("h4",Mx,V(he(q.pelicula_id)),1),v("div",Bx,[v("span",null,V(_t(q.fecha)),1),v("span",null,V(q.hora_inicio)+" - "+V(q.hora_fin),1),v("span",null,V(wt(q.sala_id)),1)])]),v("div",Lx,[v("button",{onClick:Ie=>ue(q.id),class:"bg-red-500 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-red-600 transition-colors"},"  Eliminar ",8,Fx)])])]))),128))])])])):re("",!0)])])])])}}}),jx=Yi(Ux,[["__scopeId","data-v-d50222f2"]]),$x={class:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100"},Vx={class:"container mx-auto px-4 sm:px-6 lg:px-8 py-12"},Hx={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-12"},Gx={class:"bg-white rounded-2xl shadow-lg p-6 mb-8"},Wx={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},qx={class:"relative"},zx={key:0,class:"text-center py-20"},Kx={key:1,class:"bg-red-50 border border-red-200 rounded-2xl p-8 text-center"},Xx={class:"text-red-700 text-lg mb-4"},Yx={key:2,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},Zx={class:"relative group overflow-hidden aspect-[2/3]"},Jx=["src","alt"],Qx={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-80 transition-all duration-300 flex flex-col items-center justify-center gap-3 opacity-0 group-hover:opacity-100"},ew=["onClick"],tw=["onClick"],rw={class:"p-5"},nw={class:"text-xl font-bold text-gray-900 mb-3 line-clamp-2"},iw={class:"flex flex-wrap gap-2 mb-3"},ow={key:0,class:"text-xs bg-gray-100 text-gray-700 px-3 py-1 rounded-full"},aw={key:0,class:"mb-3"},sw={class:"inline-block bg-[#8B0000] text-white text-xs px-3 py-1 rounded-full font-semibold"},lw={key:1,class:"text-sm text-gray-600 line-clamp-3 mb-3"},uw={key:2,class:"text-sm text-gray-500"},cw={key:3,class:"text-center py-20"},fw={class:"grid grid-cols-1 md:grid-cols-5 gap-6 p-8"},dw={class:"md:col-span-2"},hw=["src","alt"],pw={class:"md:col-span-3 space-y-4"},vw={class:"text-3xl font-extrabold text-gray-900"},gw={class:"flex flex-wrap gap-2"},yw={key:0,class:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg text-sm"},mw={key:0},xw={class:"ml-2 inline-block bg-[#8B0000] text-white px-3 py-1 rounded-full text-sm"},ww={key:1,class:"text-gray-700"},_w={key:2},bw={class:"text-gray-600 leading-relaxed"},Ew={class:"pt-4"},Aw=xt({__name:"Cartelera",setup(r){const e=si(),t=Q([]),n=Q(!0),i=Q(null),o=Q(null),a=Q(""),s=Q(""),l=async()=>{try{n.value=!0,i.value=null;const{data:h,error:p}=await we.from("peliculas").select("*").order("titulo",{ascending:!0});if(p)throw p;t.value=h||[]}catch(h){i.value="Error al cargar las pelculas. Por favor, intenta de nuevo.",console.error("Error:",h)}finally{n.value=!1}},u=Ne(()=>t.value.filter(h=>{const p=h.titulo.toLowerCase().includes(a.value.toLowerCase()),y=!s.value||h.genero===s.value;return p&&y})),c=h=>{o.value=h},f=()=>{o.value=null},d=h=>{if(!localStorage.getItem("userId")){alert("Debes iniciar sesin para hacer una reserva"),e.push("/login");return}e.push({path:"/generar-qr",query:{pelicula_id:h.id}}),f()};return un(()=>{l()}),(h,p)=>{const y=Xt("RouterLink");return R(),P("div",$x,[v("div",Vx,[v("div",Hx,[p[5]||(p[5]=v("div",{class:"text-center md:text-left"},[v("h1",{class:"text-4xl md:text-5xl font-extrabold text-gray-900 mb-3"}," Cartelera de Pelculas "),v("p",{class:"text-lg text-gray-600"}," Descubre las pelculas en cartelera ")],-1)),ye(y,{to:"/sugerencia",class:"inline-flex items-center justify-center gap-2 bg-[#8B0000] text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:bg-[#A52A2A] hover:scale-105 transition-all duration-200"},{default:Te(()=>[...p[4]||(p[4]=[v("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),be(" Crear sugerencia ",-1)])]),_:1})]),v("div",Gx,[v("div",Wx,[v("div",null,[p[7]||(p[7]=v("label",{for:"genero",class:"block text-sm font-medium text-gray-700 mb-2"}," Gnero ",-1)),Ee(v("select",{id:"genero","onUpdate:modelValue":p[0]||(p[0]=m=>s.value=m),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200"},[...p[6]||(p[6]=[Qn('<option value="">Todos los generos</option><option value="Accin">Accin</option><option value="Comedia">Comedia</option><option value="Drama">Drama</option><option value="Terror">Terror</option><option value="Ciencia Ficcin">Ciencia Ficcin</option><option value="Romance">Romance</option><option value="Aventura">Aventura</option>',8)])],512),[[Hr,s.value]])]),v("div",null,[p[9]||(p[9]=v("label",{for:"busqueda",class:"block text-sm font-medium text-gray-700 mb-2"}," Buscar pelcula ",-1)),v("div",qx,[p[8]||(p[8]=v("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[v("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),Ee(v("input",{id:"busqueda",type:"text","onUpdate:modelValue":p[1]||(p[1]=m=>a.value=m),placeholder:"Buscar por ttulo...",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200"},null,512),[[We,a.value]])])])])]),n.value?(R(),P("div",zx,[...p[10]||(p[10]=[v("div",{class:"inline-block animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-[#8B0000]"},null,-1),v("p",{class:"mt-4 text-lg text-gray-600"},"Cargando pelculas...",-1)])])):i.value?(R(),P("div",Kx,[p[11]||(p[11]=v("svg",{class:"mx-auto h-12 w-12 text-red-500 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),v("p",Xx,V(i.value),1),v("button",{onClick:l,class:"bg-[#8B0000] text-white px-6 py-3 rounded-lg font-semibold hover:bg-[#A52A2A] hover:scale-105 transition-all duration-200"}," Reintentar ")])):u.value.length>0?(R(),P("div",Yx,[(R(!0),P(at,null,Qt(u.value,m=>(R(),P("div",{key:m.id,class:"bg-white rounded-2xl shadow-lg overflow-hidden transform hover:-translate-y-2 hover:shadow-2xl transition-all duration-300"},[v("div",Zx,[v("img",{src:m.poster_url||"https://via.placeholder.com/300x450?text=Sin+Poster",alt:m.titulo,class:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"},null,8,Jx),v("div",Qx,[v("button",{onClick:g=>c(m),class:"bg-white text-gray-900 px-6 py-2 rounded-lg font-semibold hover:bg-gray-100 transition-all duration-200 transform hover:scale-105"}," Ver Detalles ",8,ew),v("button",{onClick:g=>d(m),class:"bg-[#8B0000] text-white px-6 py-2 rounded-lg font-semibold hover:bg-[#A52A2A] transition-all duration-200 transform hover:scale-105"}," Reservar ",8,tw)])]),v("div",rw,[v("h3",nw,V(m.titulo),1),v("div",iw,[m.duracion_min?(R(),P("span",ow,V(m.duracion_min)+" min ",1)):re("",!0)]),m.genero?(R(),P("div",aw,[v("span",sw,V(m.genero),1)])):re("",!0),m.sinopsis?(R(),P("p",lw,V(m.sinopsis),1)):re("",!0),m.director?(R(),P("div",uw,[p[12]||(p[12]=v("span",{class:"font-semibold"},"Director:",-1)),be(" "+V(m.director),1)])):re("",!0)])]))),128))])):(R(),P("div",cw,[...p[13]||(p[13]=[v("svg",{class:"mx-auto h-24 w-24 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"})],-1),v("p",{class:"text-xl text-gray-500"},"No se encontraron pelculas",-1),v("p",{class:"text-gray-400 mt-2"},"Intenta ajustar los filtros de bsqueda",-1)])]))]),o.value?(R(),P("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:f},[v("div",{class:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto relative shadow-2xl",onClick:p[3]||(p[3]=ai(()=>{},["stop"]))},[v("button",{onClick:f,class:"absolute top-4 right-4 bg-[#8B0000] text-white w-10 h-10 rounded-full flex items-center justify-center hover:bg-[#A52A2A] transition-all duration-200 z-10 shadow-lg"},[...p[14]||(p[14]=[v("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),v("div",fw,[v("div",dw,[v("img",{src:o.value.poster_url||"https://via.placeholder.com/300x450?text=Sin+Poster",alt:o.value.titulo,class:"w-full rounded-xl shadow-lg"},null,8,hw)]),v("div",pw,[v("h2",vw,V(o.value.titulo),1),v("div",gw,[o.value.duracion_min?(R(),P("span",yw,V(o.value.duracion_min)+" min ",1)):re("",!0)]),o.value.genero?(R(),P("div",mw,[p[15]||(p[15]=v("span",{class:"text-sm font-semibold text-gray-700"},"Gnero:",-1)),v("span",xw,V(o.value.genero),1)])):re("",!0),o.value.director?(R(),P("div",ww,[p[16]||(p[16]=v("span",{class:"font-semibold"},"Director:",-1)),be(" "+V(o.value.director),1)])):re("",!0),o.value.sinopsis?(R(),P("div",_w,[p[17]||(p[17]=v("h3",{class:"text-xl font-bold text-gray-900 mb-2"},"Sinopsis",-1)),v("p",bw,V(o.value.sinopsis),1)])):re("",!0),v("div",Ew,[v("button",{onClick:p[2]||(p[2]=m=>d(o.value)),class:"w-full bg-[#8B0000] text-white px-8 py-4 rounded-xl font-semibold text-lg hover:bg-[#A52A2A] hover:scale-105 transition-all duration-200 shadow-lg"}," Reservar Entradas ")])])])])])):re("",!0)])}}}),Cw={class:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-12"},Sw={class:"container mx-auto px-4 sm:px-6 lg:px-8"},Iw={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-10"},Ow={class:"bg-white rounded-2xl shadow-xl p-6 md:p-10 space-y-8"},Tw={class:"grid grid-cols-1 lg:grid-cols-4 gap-4"},Rw={class:"lg:col-span-2"},Pw={class:"flex flex-col sm:flex-row gap-3"},Nw=["disabled"],Dw=["value"],kw=["value"],Mw={key:0,class:"mt-4 text-sm text-gray-500"},Bw={key:0,class:"py-10 text-center"},Lw={key:1,class:"py-8 px-6 bg-red-50 border border-red-200 rounded-2xl text-red-700"},Fw={class:"text-sm"},Uw={key:2},jw={key:0,class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4"},$w=["value"],Vw={class:"space-y-2"},Hw={class:"text-lg font-semibold text-gray-900"},Gw={class:"flex flex-wrap gap-2 text-xs text-gray-600"},Ww={key:0,class:"bg-gray-100 px-2.5 py-1 rounded-full"},qw={key:1,class:"bg-yellow-100 text-yellow-800 px-2.5 py-1 rounded-full font-semibold"},zw={key:2,class:"bg-gray-100 px-2.5 py-1 rounded-full"},Kw={key:0,class:"text-sm text-gray-500 line-clamp-3"},Xw={key:1,class:"mt-6 text-center"},Yw=["disabled"],Zw={key:2,class:"py-10 text-center border-2 border-dashed border-gray-200 rounded-2xl"},Jw={key:0,class:"text-gray-500"},Qw={key:1,class:"text-gray-500"},e_={class:"space-y-4"},t_={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl"},r_={key:1,class:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-xl"},n_=["disabled"],cc="34e63b5b",fc="https://www.omdbapi.com/",i_=xt({__name:"Sugerencia",setup(r){const e=Q([]),t=Q(!1),n=Q(!1),i=Q(null),o=Q(""),a=Q(""),s=Q(""),l=Q(""),u=Q([]),c=Q([]),f=Q(0),d=Q(0),h=Q(""),p=Q(""),y=Q(!1),m=Q(""),g=Q(""),x=()=>{u.value=[],c.value=[]},w=()=>{const F=new Set,k=new Set;e.value.forEach(W=>{W.genero&&W.genero.split(",").map(Z=>Z.trim()).filter(Boolean).forEach(Z=>F.add(Z)),W.clasificacion&&k.add(W.clasificacion)}),u.value=Array.from(F).sort(),c.value=Array.from(k).sort()},_=(F,k)=>{const W=F&&F.Response!=="False"?F:null,Z=W?.imdbID||k?.imdbID,ue=W?.Title||k?.Title;if(!Z||!ue)return null;const he=(W?.Runtime||"").match(/(\d+)/),wt=W?.Genre&&W.Genre!=="N/A"?W.Genre:void 0,_t=W?.Rated&&W.Rated!=="N/A"?W.Rated:void 0,z=W?.Plot&&W.Plot!=="N/A"?W.Plot:void 0,N=he?Number(he[1]):void 0,De=W?.Poster&&W.Poster!=="N/A"?W.Poster:k?.Poster&&k.Poster!=="N/A"?k.Poster:void 0;return{id:Z,titulo:ue,genero:wt,clasificacion:_t,sinopsis:z,duracion_min:N,poster_url:De}},C=async F=>{const k=o.value.trim(),W=`${fc}?s=${encodeURIComponent(k)}&type=movie&page=${F}&apikey=${cc}`,Z=await fetch(W);if(!Z.ok)throw new Error("No se pudo consultar la API externa.");const ue=await Z.json();if(ue.Response==="False")throw new Error(ue.Error||"No se encontraron resultados con ese ttulo.");return f.value=parseInt(ue.totalResults,10)||(Array.isArray(ue.Search)?ue.Search.length:0),(await Promise.all((ue.Search||[]).map(async he=>{try{const _t=await(await fetch(`${fc}?i=${he.imdbID}&plot=short&apikey=${cc}`)).json();return _(_t,he)}catch(wt){return console.warn("No se pudo obtener detalle de la pelcula:",wt),_(null,he)}}))).filter(he=>!!he)},E=async(F=!0)=>{if(m.value="",g.value="",i.value=null,o.value.trim().length<3){i.value="Ingresa al menos 3 caracteres para buscar una pelcula.",e.value=[],x();return}F?(t.value=!0,e.value=[],h.value="",a.value="",s.value="",l.value="",f.value=0,d.value=0,x()):n.value=!0;try{const W=F?1:d.value+1,Z=await C(W);if(F)e.value=Z;else{const ue=new Set(e.value.map(me=>me.id));Z.forEach(me=>{ue.has(me.id)||e.value.push(me)})}d.value=W,w(),e.value.length||(i.value="No se encontraron pelculas con ese ttulo. Intenta con otra bsqueda.")}catch(W){console.error("Error al buscar pelculas en la API:",W),i.value=W.message||"No se pudo obtener informacin de la API. Intenta nuevamente."}finally{F?t.value=!1:n.value=!1}},I=async()=>{n.value||t.value||e.value.length>=f.value||await E(!1)},D=Ne(()=>e.value.filter(F=>{const k=!a.value||F.titulo.toLowerCase().includes(a.value.toLowerCase()),W=!s.value||F.genero?.split(",").map(ue=>ue.trim().toLowerCase()).includes(s.value.toLowerCase()),Z=!l.value||F.clasificacion===l.value;return k&&W&&Z})),M=Ne(()=>!e.value.length||f.value===0?!1:e.value.length<f.value),j=Ne(()=>{if(!e.value.length)return"";const F=f.value||e.value.length;return`Mostrando ${D.value.length} de ${F} resultados disponibles`}),X=async()=>{if(m.value="",g.value="",!h.value){m.value="Selecciona la pelcula que deseas sugerir.";return}const F=localStorage.getItem("userId"),k=localStorage.getItem("userName")||"Usuario",W=localStorage.getItem("userRole");if(!F){m.value="Necesitas iniciar sesin con tu cuenta institucional para enviar una sugerencia.";return}if(W!=="estudiante"){m.value="Solo los estudiantes pueden enviar sugerencias.";return}const Z=e.value.find(ue=>ue.id===h.value);if(!Z){m.value="La pelcula seleccionada ya no est disponible. Intenta nuevamente.";return}y.value=!0;try{const ue=p.value.trim(),me=[`Pelcula sugerida: ${Z.titulo}`,Z.genero?`Gnero: ${Z.genero}`:null,Z.clasificacion?`Clasificacin: ${Z.clasificacion}`:null,ue?`Comentario del estudiante: ${ue}`:"Sin comentario adicional.",`Enviada por: ${k}`].filter(Boolean).join(`
`),{error:he}=await we.from("notificaciones").insert([{usuario_id:F,titulo:"Sugerencia de pelcula",mensaje:me,tipo:"recomendacion",leida:!1}]);if(he)throw he;g.value="Listo! Tu sugerencia fue enviada al equipo administrador.",p.value="",h.value=""}catch(ue){console.error("Error al enviar la sugerencia:",ue),m.value=ue.message||"No se pudo enviar la sugerencia. Intenta nuevamente."}finally{y.value=!1}};return(F,k)=>{const W=Xt("RouterLink");return R(),P("div",Cw,[v("div",Sw,[v("div",Iw,[k[10]||(k[10]=v("div",null,[v("h1",{class:"text-3xl md:text-4xl font-extrabold text-gray-900"},"Enviar sugerencia"),v("p",{class:"mt-2 text-gray-600 max-w-2xl"}," Selecciona la pelcula que deseas sugerir para la cartelera y agrega un mensaje opcional para el administrador. ")],-1)),ye(W,{to:"/cartelera",class:"inline-flex items-center gap-2 bg-white border border-gray-200 text-gray-700 px-5 py-3 rounded-xl font-semibold shadow-sm hover:bg-gray-50 transition-all duration-200"},{default:Te(()=>[...k[9]||(k[9]=[v("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),be(" Volver a la cartelera ",-1)])]),_:1})]),v("div",Ow,[v("section",null,[k[18]||(k[18]=v("h2",{class:"text-xl font-bold text-gray-900 mb-4"},"Buscar y filtrar pelculas",-1)),v("div",Tw,[v("div",Rw,[k[11]||(k[11]=v("label",{for:"busquedaApi",class:"block text-sm font-medium text-gray-700 mb-2"},"Buscar pelcula en la API",-1)),v("div",Pw,[Ee(v("input",{id:"busquedaApi","onUpdate:modelValue":k[0]||(k[0]=Z=>o.value=Z),type:"text",placeholder:"Ingresa al menos 3 caracteres",class:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200",onKeyup:k[1]||(k[1]=Id(Z=>E(!0),["enter"]))},null,544),[[We,o.value]]),v("button",{type:"button",onClick:k[2]||(k[2]=Z=>E(!0)),disabled:t.value||o.value.trim().length<3,class:"inline-flex items-center justify-center bg-[#8B0000] text-white px-6 py-3 rounded-lg font-semibold hover:bg-[#A52A2A] transition-all duration-200 disabled:opacity-60 disabled:cursor-not-allowed"},V(t.value?"Buscando...":"Buscar en la API"),9,Nw)]),k[12]||(k[12]=v("p",{class:"text-sm text-gray-500 mt-2"},'Utiliza palabras clave (ej. "Spider-Man", "Interestelar").',-1))]),v("div",null,[k[13]||(k[13]=v("label",{for:"filtroTitulo",class:"block text-sm font-medium text-gray-700 mb-2"},"Filtrar resultados",-1)),Ee(v("input",{id:"filtroTitulo","onUpdate:modelValue":k[3]||(k[3]=Z=>a.value=Z),type:"text",placeholder:"Filtrar por ttulo cargado",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200"},null,512),[[We,a.value]])]),v("div",null,[k[15]||(k[15]=v("label",{for:"genero",class:"block text-sm font-medium text-gray-700 mb-2"},"Gnero",-1)),Ee(v("select",{id:"genero","onUpdate:modelValue":k[4]||(k[4]=Z=>s.value=Z),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200"},[k[14]||(k[14]=v("option",{value:""},"Todos los gneros",-1)),(R(!0),P(at,null,Qt(u.value,Z=>(R(),P("option",{key:Z,value:Z},V(Z),9,Dw))),128))],512),[[Hr,s.value]])]),v("div",null,[k[17]||(k[17]=v("label",{for:"clasificacion",class:"block text-sm font-medium text-gray-700 mb-2"},"Clasificacin",-1)),Ee(v("select",{id:"clasificacion","onUpdate:modelValue":k[5]||(k[5]=Z=>l.value=Z),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200"},[k[16]||(k[16]=v("option",{value:""},"Todas las clasificaciones",-1)),(R(!0),P(at,null,Qt(c.value,Z=>(R(),P("option",{key:Z,value:Z},V(Z),9,kw))),128))],512),[[Hr,l.value]])])]),j.value?(R(),P("p",Mw,V(j.value),1)):re("",!0)]),v("section",null,[k[21]||(k[21]=v("h2",{class:"text-xl font-bold text-gray-900 mb-4"},"Selecciona la pelcula",-1)),t.value?(R(),P("div",Bw,[...k[19]||(k[19]=[v("div",{class:"inline-block animate-spin rounded-full h-14 w-14 border-t-4 border-b-4 border-[#8B0000]"},null,-1),v("p",{class:"mt-4 text-gray-500"},"Buscando pelculas en la API...",-1)])])):i.value?(R(),P("div",Lw,[k[20]||(k[20]=v("p",{class:"font-semibold mb-3"},"No fue posible cargar las pelculas.",-1)),v("p",Fw,V(i.value),1),v("button",{onClick:k[6]||(k[6]=Z=>E(!0)),class:"mt-4 bg-[#8B0000] text-white px-5 py-3 rounded-lg font-semibold hover:bg-[#A52A2A] transition-colors"}," Reintentar ")])):(R(),P("div",Uw,[D.value.length?(R(),P("div",jw,[(R(!0),P(at,null,Qt(D.value,Z=>(R(),P("label",{key:Z.id,class:"flex items-start gap-4 border border-gray-200 rounded-2xl p-4 cursor-pointer hover:border-[#8B0000] transition-colors"},[Ee(v("input",{type:"radio",name:"pelicula",class:"mt-1 h-4 w-4 text-[#8B0000] focus:ring-[#8B0000]",value:Z.id,"onUpdate:modelValue":k[7]||(k[7]=ue=>h.value=ue)},null,8,$w),[[Cd,h.value]]),v("div",Vw,[v("p",Hw,V(Z.titulo),1),v("div",Gw,[Z.genero?(R(),P("span",Ww,V(Z.genero),1)):re("",!0),Z.clasificacion?(R(),P("span",qw,V(Z.clasificacion),1)):re("",!0),Z.duracion_min?(R(),P("span",zw,V(Z.duracion_min)+" min",1)):re("",!0)]),Z.sinopsis?(R(),P("p",Kw,V(Z.sinopsis),1)):re("",!0)])]))),128))])):re("",!0),D.value.length&&M.value?(R(),P("div",Xw,[v("button",{type:"button",onClick:I,disabled:n.value,class:"inline-flex items-center justify-center bg-gray-100 text-gray-800 px-6 py-3 rounded-lg font-semibold hover:bg-gray-200 transition-all duration-200 disabled:opacity-60 disabled:cursor-not-allowed"},V(n.value?"Cargando ms...":"Cargar ms resultados"),9,Yw)])):(R(),P("div",Zw,[e.value.length===0?(R(),P("p",Jw,'Ingresa un ttulo en el buscador superior y presiona "Buscar en la API".')):(R(),P("p",Qw,"No encontramos pelculas que coincidan con los filtros seleccionados."))]))]))]),v("section",null,[k[22]||(k[22]=v("h2",{class:"text-xl font-bold text-gray-900 mb-4"},"Mensaje para el administrador",-1)),Ee(v("textarea",{"onUpdate:modelValue":k[8]||(k[8]=Z=>p.value=Z),rows:"4",placeholder:"Cuntanos por qu te gustara ver esta pelcula o agrega detalles adicionales (opcional)",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200"},null,512),[[We,p.value]])]),v("div",e_,[m.value?(R(),P("div",t_,V(m.value),1)):re("",!0),g.value?(R(),P("div",r_,V(g.value),1)):re("",!0),v("button",{onClick:X,disabled:y.value,class:"w-full md:w-auto bg-[#8B0000] text-white px-8 py-3 rounded-xl font-semibold hover:bg-[#A52A2A] transition-all duration-200 disabled:opacity-60 disabled:cursor-not-allowed"},V(y.value?"Enviando sugerencia...":"Enviar sugerencia"),9,n_)])])])])}}}),o_=Yi(i_,[["__scopeId","data-v-c7841074"]]);var Bn={},La,dc;function a_(){return dc||(dc=1,La=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),La}var Fa={},zr={},hc;function On(){if(hc)return zr;hc=1;let r;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return zr.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17},zr.getSymbolTotalCodewords=function(n){return e[n]},zr.getBCHDigit=function(t){let n=0;for(;t!==0;)n++,t>>>=1;return n},zr.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');r=n},zr.isKanjiModeEnabled=function(){return typeof r<"u"},zr.toSJIS=function(n){return r(n)},zr}var Ua={},pc;function Rl(){return pc||(pc=1,(function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+t)}}r.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},r.from=function(n,i){if(r.isValid(n))return n;try{return e(n)}catch{return i}}})(Ua)),Ua}var ja,vc;function s_(){if(vc)return ja;vc=1;function r(){this.buffer=[],this.length=0}return r.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},ja=r,ja}var $a,gc;function l_(){if(gc)return $a;gc=1;function r(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return r.prototype.set=function(e,t,n,i){const o=e*this.size+t;this.data[o]=n,i&&(this.reservedBit[o]=!0)},r.prototype.get=function(e,t){return this.data[e*this.size+t]},r.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},r.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},$a=r,$a}var Va={},yc;function u_(){return yc||(yc=1,(function(r){const e=On().getSymbolSize;r.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,o=e(n),a=o===145?26:Math.ceil((o-13)/(2*i-2))*2,s=[o-7];for(let l=1;l<i-1;l++)s[l]=s[l-1]-a;return s.push(6),s.reverse()},r.getPositions=function(n){const i=[],o=r.getRowColCoords(n),a=o.length;for(let s=0;s<a;s++)for(let l=0;l<a;l++)s===0&&l===0||s===0&&l===a-1||s===a-1&&l===0||i.push([o[s],o[l]]);return i}})(Va)),Va}var Ha={},mc;function c_(){if(mc)return Ha;mc=1;const r=On().getSymbolSize,e=7;return Ha.getPositions=function(n){const i=r(n);return[[0,0],[i-e,0],[0,i-e]]},Ha}var Ga={},xc;function f_(){return xc||(xc=1,(function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};r.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},r.from=function(i){return r.isValid(i)?parseInt(i,10):void 0},r.getPenaltyN1=function(i){const o=i.size;let a=0,s=0,l=0,u=null,c=null;for(let f=0;f<o;f++){s=l=0,u=c=null;for(let d=0;d<o;d++){let h=i.get(f,d);h===u?s++:(s>=5&&(a+=e.N1+(s-5)),u=h,s=1),h=i.get(d,f),h===c?l++:(l>=5&&(a+=e.N1+(l-5)),c=h,l=1)}s>=5&&(a+=e.N1+(s-5)),l>=5&&(a+=e.N1+(l-5))}return a},r.getPenaltyN2=function(i){const o=i.size;let a=0;for(let s=0;s<o-1;s++)for(let l=0;l<o-1;l++){const u=i.get(s,l)+i.get(s,l+1)+i.get(s+1,l)+i.get(s+1,l+1);(u===4||u===0)&&a++}return a*e.N2},r.getPenaltyN3=function(i){const o=i.size;let a=0,s=0,l=0;for(let u=0;u<o;u++){s=l=0;for(let c=0;c<o;c++)s=s<<1&2047|i.get(u,c),c>=10&&(s===1488||s===93)&&a++,l=l<<1&2047|i.get(c,u),c>=10&&(l===1488||l===93)&&a++}return a*e.N3},r.getPenaltyN4=function(i){let o=0;const a=i.data.length;for(let l=0;l<a;l++)o+=i.data[l];return Math.abs(Math.ceil(o*100/a/5)-10)*e.N4};function t(n,i,o){switch(n){case r.Patterns.PATTERN000:return(i+o)%2===0;case r.Patterns.PATTERN001:return i%2===0;case r.Patterns.PATTERN010:return o%3===0;case r.Patterns.PATTERN011:return(i+o)%3===0;case r.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(o/3))%2===0;case r.Patterns.PATTERN101:return i*o%2+i*o%3===0;case r.Patterns.PATTERN110:return(i*o%2+i*o%3)%2===0;case r.Patterns.PATTERN111:return(i*o%3+(i+o)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}r.applyMask=function(i,o){const a=o.size;for(let s=0;s<a;s++)for(let l=0;l<a;l++)o.isReserved(l,s)||o.xor(l,s,t(i,l,s))},r.getBestMask=function(i,o){const a=Object.keys(r.Patterns).length;let s=0,l=1/0;for(let u=0;u<a;u++){o(u),r.applyMask(u,i);const c=r.getPenaltyN1(i)+r.getPenaltyN2(i)+r.getPenaltyN3(i)+r.getPenaltyN4(i);r.applyMask(u,i),c<l&&(l=c,s=u)}return s}})(Ga)),Ga}var ho={},wc;function D0(){if(wc)return ho;wc=1;const r=Rl(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return ho.getBlocksCount=function(i,o){switch(o){case r.L:return e[(i-1)*4+0];case r.M:return e[(i-1)*4+1];case r.Q:return e[(i-1)*4+2];case r.H:return e[(i-1)*4+3];default:return}},ho.getTotalCodewordsCount=function(i,o){switch(o){case r.L:return t[(i-1)*4+0];case r.M:return t[(i-1)*4+1];case r.Q:return t[(i-1)*4+2];case r.H:return t[(i-1)*4+3];default:return}},ho}var Wa={},gi={},_c;function d_(){if(_c)return gi;_c=1;const r=new Uint8Array(512),e=new Uint8Array(256);return(function(){let n=1;for(let i=0;i<255;i++)r[i]=n,e[n]=i,n<<=1,n&256&&(n^=285);for(let i=255;i<512;i++)r[i]=r[i-255]})(),gi.log=function(n){if(n<1)throw new Error("log("+n+")");return e[n]},gi.exp=function(n){return r[n]},gi.mul=function(n,i){return n===0||i===0?0:r[e[n]+e[i]]},gi}var bc;function h_(){return bc||(bc=1,(function(r){const e=d_();r.mul=function(n,i){const o=new Uint8Array(n.length+i.length-1);for(let a=0;a<n.length;a++)for(let s=0;s<i.length;s++)o[a+s]^=e.mul(n[a],i[s]);return o},r.mod=function(n,i){let o=new Uint8Array(n);for(;o.length-i.length>=0;){const a=o[0];for(let l=0;l<i.length;l++)o[l]^=e.mul(i[l],a);let s=0;for(;s<o.length&&o[s]===0;)s++;o=o.slice(s)}return o},r.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let o=0;o<n;o++)i=r.mul(i,new Uint8Array([1,e.exp(o)]));return i}})(Wa)),Wa}var qa,Ec;function p_(){if(Ec)return qa;Ec=1;const r=h_();function e(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(n){this.degree=n,this.genPoly=r.generateECPolynomial(this.degree)},e.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(n.length+this.degree);i.set(n);const o=r.mod(i,this.genPoly),a=this.degree-o.length;if(a>0){const s=new Uint8Array(this.degree);return s.set(o,a),s}return o},qa=e,qa}var za={},Ka={},Xa={},Ac;function k0(){return Ac||(Ac=1,Xa.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),Xa}var Cr={},Cc;function M0(){if(Cc)return Cr;Cc=1;const r="[0-9]+",e="[A-Z $%*+\\-./:]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+`)(?:.|[\r
]))+`;Cr.KANJI=new RegExp(t,"g"),Cr.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Cr.BYTE=new RegExp(n,"g"),Cr.NUMERIC=new RegExp(r,"g"),Cr.ALPHANUMERIC=new RegExp(e,"g");const i=new RegExp("^"+t+"$"),o=new RegExp("^"+r+"$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Cr.testKanji=function(l){return i.test(l)},Cr.testNumeric=function(l){return o.test(l)},Cr.testAlphanumeric=function(l){return a.test(l)},Cr}var Sc;function Tn(){return Sc||(Sc=1,(function(r){const e=k0(),t=M0();r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(o,a){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!e.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?o.ccBits[0]:a<27?o.ccBits[1]:o.ccBits[2]},r.getBestModeForData=function(o){return t.testNumeric(o)?r.NUMERIC:t.testAlphanumeric(o)?r.ALPHANUMERIC:t.testKanji(o)?r.KANJI:r.BYTE},r.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},r.isValid=function(o){return o&&o.bit&&o.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+i)}}r.from=function(o,a){if(r.isValid(o))return o;try{return n(o)}catch{return a}}})(Ka)),Ka}var Ic;function v_(){return Ic||(Ic=1,(function(r){const e=On(),t=D0(),n=Rl(),i=Tn(),o=k0(),a=7973,s=e.getBCHDigit(a);function l(d,h,p){for(let y=1;y<=40;y++)if(h<=r.getCapacity(y,p,d))return y}function u(d,h){return i.getCharCountIndicator(d,h)+4}function c(d,h){let p=0;return d.forEach(function(y){const m=u(y.mode,h);p+=m+y.getBitsLength()}),p}function f(d,h){for(let p=1;p<=40;p++)if(c(d,p)<=r.getCapacity(p,h,i.MIXED))return p}r.from=function(h,p){return o.isValid(h)?parseInt(h,10):p},r.getCapacity=function(h,p,y){if(!o.isValid(h))throw new Error("Invalid QR Code version");typeof y>"u"&&(y=i.BYTE);const m=e.getSymbolTotalCodewords(h),g=t.getTotalCodewordsCount(h,p),x=(m-g)*8;if(y===i.MIXED)return x;const w=x-u(y,h);switch(y){case i.NUMERIC:return Math.floor(w/10*3);case i.ALPHANUMERIC:return Math.floor(w/11*2);case i.KANJI:return Math.floor(w/13);case i.BYTE:default:return Math.floor(w/8)}},r.getBestVersionForData=function(h,p){let y;const m=n.from(p,n.M);if(Array.isArray(h)){if(h.length>1)return f(h,m);if(h.length===0)return 1;y=h[0]}else y=h;return l(y.mode,y.getLength(),m)},r.getEncodedBits=function(h){if(!o.isValid(h)||h<7)throw new Error("Invalid QR Code version");let p=h<<12;for(;e.getBCHDigit(p)-s>=0;)p^=a<<e.getBCHDigit(p)-s;return h<<12|p}})(za)),za}var Ya={},Oc;function g_(){if(Oc)return Ya;Oc=1;const r=On(),e=1335,t=21522,n=r.getBCHDigit(e);return Ya.getEncodedBits=function(o,a){const s=o.bit<<3|a;let l=s<<10;for(;r.getBCHDigit(l)-n>=0;)l^=e<<r.getBCHDigit(l)-n;return(s<<10|l)^t},Ya}var Za={},Ja,Tc;function y_(){if(Tc)return Ja;Tc=1;const r=Tn();function e(t){this.mode=r.NUMERIC,this.data=t.toString()}return e.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(n){let i,o,a;for(i=0;i+3<=this.data.length;i+=3)o=this.data.substr(i,3),a=parseInt(o,10),n.put(a,10);const s=this.data.length-i;s>0&&(o=this.data.substr(i),a=parseInt(o,10),n.put(a,s*3+1))},Ja=e,Ja}var Qa,Rc;function m_(){if(Rc)return Qa;Rc=1;const r=Tn(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function t(n){this.mode=r.ALPHANUMERIC,this.data=n}return t.getBitsLength=function(i){return 11*Math.floor(i/2)+6*(i%2)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(i){let o;for(o=0;o+2<=this.data.length;o+=2){let a=e.indexOf(this.data[o])*45;a+=e.indexOf(this.data[o+1]),i.put(a,11)}this.data.length%2&&i.put(e.indexOf(this.data[o]),6)},Qa=t,Qa}var es,Pc;function x_(){if(Pc)return es;Pc=1;const r=Tn();function e(t){this.mode=r.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}return e.getBitsLength=function(n){return n*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(t){for(let n=0,i=this.data.length;n<i;n++)t.put(this.data[n],8)},es=e,es}var ts,Nc;function w_(){if(Nc)return ts;Nc=1;const r=Tn(),e=On();function t(n){this.mode=r.KANJI,this.data=n}return t.getBitsLength=function(i){return i*13},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(n){let i;for(i=0;i<this.data.length;i++){let o=e.toSJIS(this.data[i]);if(o>=33088&&o<=40956)o-=33088;else if(o>=57408&&o<=60351)o-=49472;else throw new Error("Invalid SJIS character: "+this.data[i]+`
Make sure your charset is UTF-8`);o=(o>>>8&255)*192+(o&255),n.put(o,13)}},ts=t,ts}var rs={exports:{}},Dc;function __(){return Dc||(Dc=1,(function(r){var e={single_source_shortest_paths:function(t,n,i){var o={},a={};a[n]=0;var s=e.PriorityQueue.make();s.push(n,0);for(var l,u,c,f,d,h,p,y,m;!s.empty();){l=s.pop(),u=l.value,f=l.cost,d=t[u]||{};for(c in d)d.hasOwnProperty(c)&&(h=d[c],p=f+h,y=a[c],m=typeof a[c]>"u",(m||y>p)&&(a[c]=p,s.push(c,p),o[c]=u))}if(typeof i<"u"&&typeof a[i]>"u"){var g=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(g)}return o},extract_shortest_path_from_predecessor_list:function(t,n){for(var i=[],o=n;o;)i.push(o),t[o],o=t[o];return i.reverse(),i},find_path:function(t,n,i){var o=e.single_source_shortest_paths(t,n,i);return e.extract_shortest_path_from_predecessor_list(o,i)},PriorityQueue:{make:function(t){var n=e.PriorityQueue,i={},o;t=t||{};for(o in n)n.hasOwnProperty(o)&&(i[o]=n[o]);return i.queue=[],i.sorter=t.sorter||n.default_sorter,i},default_sorter:function(t,n){return t.cost-n.cost},push:function(t,n){var i={value:t,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=e})(rs)),rs.exports}var kc;function b_(){return kc||(kc=1,(function(r){const e=Tn(),t=y_(),n=m_(),i=x_(),o=w_(),a=M0(),s=On(),l=__();function u(g){return unescape(encodeURIComponent(g)).length}function c(g,x,w){const _=[];let C;for(;(C=g.exec(w))!==null;)_.push({data:C[0],index:C.index,mode:x,length:C[0].length});return _}function f(g){const x=c(a.NUMERIC,e.NUMERIC,g),w=c(a.ALPHANUMERIC,e.ALPHANUMERIC,g);let _,C;return s.isKanjiModeEnabled()?(_=c(a.BYTE,e.BYTE,g),C=c(a.KANJI,e.KANJI,g)):(_=c(a.BYTE_KANJI,e.BYTE,g),C=[]),x.concat(w,_,C).sort(function(I,D){return I.index-D.index}).map(function(I){return{data:I.data,mode:I.mode,length:I.length}})}function d(g,x){switch(x){case e.NUMERIC:return t.getBitsLength(g);case e.ALPHANUMERIC:return n.getBitsLength(g);case e.KANJI:return o.getBitsLength(g);case e.BYTE:return i.getBitsLength(g)}}function h(g){return g.reduce(function(x,w){const _=x.length-1>=0?x[x.length-1]:null;return _&&_.mode===w.mode?(x[x.length-1].data+=w.data,x):(x.push(w),x)},[])}function p(g){const x=[];for(let w=0;w<g.length;w++){const _=g[w];switch(_.mode){case e.NUMERIC:x.push([_,{data:_.data,mode:e.ALPHANUMERIC,length:_.length},{data:_.data,mode:e.BYTE,length:_.length}]);break;case e.ALPHANUMERIC:x.push([_,{data:_.data,mode:e.BYTE,length:_.length}]);break;case e.KANJI:x.push([_,{data:_.data,mode:e.BYTE,length:u(_.data)}]);break;case e.BYTE:x.push([{data:_.data,mode:e.BYTE,length:u(_.data)}])}}return x}function y(g,x){const w={},_={start:{}};let C=["start"];for(let E=0;E<g.length;E++){const I=g[E],D=[];for(let M=0;M<I.length;M++){const j=I[M],X=""+E+M;D.push(X),w[X]={node:j,lastCount:0},_[X]={};for(let F=0;F<C.length;F++){const k=C[F];w[k]&&w[k].node.mode===j.mode?(_[k][X]=d(w[k].lastCount+j.length,j.mode)-d(w[k].lastCount,j.mode),w[k].lastCount+=j.length):(w[k]&&(w[k].lastCount=j.length),_[k][X]=d(j.length,j.mode)+4+e.getCharCountIndicator(j.mode,x))}}C=D}for(let E=0;E<C.length;E++)_[C[E]].end=0;return{map:_,table:w}}function m(g,x){let w;const _=e.getBestModeForData(g);if(w=e.from(x,_),w!==e.BYTE&&w.bit<_.bit)throw new Error('"'+g+'" cannot be encoded with mode '+e.toString(w)+`.
 Suggested mode is: `+e.toString(_));switch(w===e.KANJI&&!s.isKanjiModeEnabled()&&(w=e.BYTE),w){case e.NUMERIC:return new t(g);case e.ALPHANUMERIC:return new n(g);case e.KANJI:return new o(g);case e.BYTE:return new i(g)}}r.fromArray=function(x){return x.reduce(function(w,_){return typeof _=="string"?w.push(m(_,null)):_.data&&w.push(m(_.data,_.mode)),w},[])},r.fromString=function(x,w){const _=f(x,s.isKanjiModeEnabled()),C=p(_),E=y(C,w),I=l.find_path(E.map,"start","end"),D=[];for(let M=1;M<I.length-1;M++)D.push(E.table[I[M]].node);return r.fromArray(h(D))},r.rawSplit=function(x){return r.fromArray(f(x,s.isKanjiModeEnabled()))}})(Za)),Za}var Mc;function E_(){if(Mc)return Fa;Mc=1;const r=On(),e=Rl(),t=s_(),n=l_(),i=u_(),o=c_(),a=f_(),s=D0(),l=p_(),u=v_(),c=g_(),f=Tn(),d=b_();function h(E,I){const D=E.size,M=o.getPositions(I);for(let j=0;j<M.length;j++){const X=M[j][0],F=M[j][1];for(let k=-1;k<=7;k++)if(!(X+k<=-1||D<=X+k))for(let W=-1;W<=7;W++)F+W<=-1||D<=F+W||(k>=0&&k<=6&&(W===0||W===6)||W>=0&&W<=6&&(k===0||k===6)||k>=2&&k<=4&&W>=2&&W<=4?E.set(X+k,F+W,!0,!0):E.set(X+k,F+W,!1,!0))}}function p(E){const I=E.size;for(let D=8;D<I-8;D++){const M=D%2===0;E.set(D,6,M,!0),E.set(6,D,M,!0)}}function y(E,I){const D=i.getPositions(I);for(let M=0;M<D.length;M++){const j=D[M][0],X=D[M][1];for(let F=-2;F<=2;F++)for(let k=-2;k<=2;k++)F===-2||F===2||k===-2||k===2||F===0&&k===0?E.set(j+F,X+k,!0,!0):E.set(j+F,X+k,!1,!0)}}function m(E,I){const D=E.size,M=u.getEncodedBits(I);let j,X,F;for(let k=0;k<18;k++)j=Math.floor(k/3),X=k%3+D-8-3,F=(M>>k&1)===1,E.set(j,X,F,!0),E.set(X,j,F,!0)}function g(E,I,D){const M=E.size,j=c.getEncodedBits(I,D);let X,F;for(X=0;X<15;X++)F=(j>>X&1)===1,X<6?E.set(X,8,F,!0):X<8?E.set(X+1,8,F,!0):E.set(M-15+X,8,F,!0),X<8?E.set(8,M-X-1,F,!0):X<9?E.set(8,15-X-1+1,F,!0):E.set(8,15-X-1,F,!0);E.set(M-8,8,1,!0)}function x(E,I){const D=E.size;let M=-1,j=D-1,X=7,F=0;for(let k=D-1;k>0;k-=2)for(k===6&&k--;;){for(let W=0;W<2;W++)if(!E.isReserved(j,k-W)){let Z=!1;F<I.length&&(Z=(I[F]>>>X&1)===1),E.set(j,k-W,Z),X--,X===-1&&(F++,X=7)}if(j+=M,j<0||D<=j){j-=M,M=-M;break}}}function w(E,I,D){const M=new t;D.forEach(function(W){M.put(W.mode.bit,4),M.put(W.getLength(),f.getCharCountIndicator(W.mode,E)),W.write(M)});const j=r.getSymbolTotalCodewords(E),X=s.getTotalCodewordsCount(E,I),F=(j-X)*8;for(M.getLengthInBits()+4<=F&&M.put(0,4);M.getLengthInBits()%8!==0;)M.putBit(0);const k=(F-M.getLengthInBits())/8;for(let W=0;W<k;W++)M.put(W%2?17:236,8);return _(M,E,I)}function _(E,I,D){const M=r.getSymbolTotalCodewords(I),j=s.getTotalCodewordsCount(I,D),X=M-j,F=s.getBlocksCount(I,D),k=M%F,W=F-k,Z=Math.floor(M/F),ue=Math.floor(X/F),me=ue+1,he=Z-ue,wt=new l(he);let _t=0;const z=new Array(F),N=new Array(F);let De=0;const q=new Uint8Array(E.buffer);for(let ee=0;ee<F;ee++){const se=ee<W?ue:me;z[ee]=q.slice(_t,_t+se),N[ee]=wt.encode(z[ee]),_t+=se,De=Math.max(De,se)}const Ie=new Uint8Array(M);let tt=0,L,K;for(L=0;L<De;L++)for(K=0;K<F;K++)L<z[K].length&&(Ie[tt++]=z[K][L]);for(L=0;L<he;L++)for(K=0;K<F;K++)Ie[tt++]=N[K][L];return Ie}function C(E,I,D,M){let j;if(Array.isArray(E))j=d.fromArray(E);else if(typeof E=="string"){let Z=I;if(!Z){const ue=d.rawSplit(E);Z=u.getBestVersionForData(ue,D)}j=d.fromString(E,Z||40)}else throw new Error("Invalid data");const X=u.getBestVersionForData(j,D);if(!X)throw new Error("The amount of data is too big to be stored in a QR Code");if(!I)I=X;else if(I<X)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+X+`.
`);const F=w(I,D,j),k=r.getSymbolSize(I),W=new n(k);return h(W,I),p(W),y(W,I),g(W,D,0),I>=7&&m(W,I),x(W,F),isNaN(M)&&(M=a.getBestMask(W,g.bind(null,W,D))),a.applyMask(M,W),g(W,D,M),{modules:W,version:I,errorCorrectionLevel:D,maskPattern:M,segments:j}}return Fa.create=function(I,D){if(typeof I>"u"||I==="")throw new Error("No input text");let M=e.M,j,X;return typeof D<"u"&&(M=e.from(D.errorCorrectionLevel,e.M),j=u.from(D.version),X=a.from(D.maskPattern),D.toSJISFunc&&r.setToSJISFunction(D.toSJISFunc)),C(I,j,M,X)},Fa}var ns={},is={},Bc;function B0(){return Bc||(Bc=1,(function(r){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let n=t.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+t);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(o){return[o,o]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}r.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,o=n.width&&n.width>=21?n.width:void 0,a=n.scale||4;return{width:o,scale:o?4:a,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},r.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},r.getImageWidth=function(n,i){const o=r.getScale(n,i);return Math.floor((n+i.margin*2)*o)},r.qrToImageData=function(n,i,o){const a=i.modules.size,s=i.modules.data,l=r.getScale(a,o),u=Math.floor((a+o.margin*2)*l),c=o.margin*l,f=[o.color.light,o.color.dark];for(let d=0;d<u;d++)for(let h=0;h<u;h++){let p=(d*u+h)*4,y=o.color.light;if(d>=c&&h>=c&&d<u-c&&h<u-c){const m=Math.floor((d-c)/l),g=Math.floor((h-c)/l);y=f[s[m*a+g]?1:0]}n[p++]=y.r,n[p++]=y.g,n[p++]=y.b,n[p]=y.a}}})(is)),is}var Lc;function A_(){return Lc||(Lc=1,(function(r){const e=B0();function t(i,o,a){i.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=a,o.width=a,o.style.height=a+"px",o.style.width=a+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(o,a,s){let l=s,u=a;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),a||(u=n()),l=e.getOptions(l);const c=e.getImageWidth(o.modules.size,l),f=u.getContext("2d"),d=f.createImageData(c,c);return e.qrToImageData(d.data,o,l),t(f,u,c),f.putImageData(d,0,0),u},r.renderToDataURL=function(o,a,s){let l=s;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),l||(l={});const u=r.render(o,a,l),c=l.type||"image/png",f=l.rendererOpts||{};return u.toDataURL(c,f.quality)}})(ns)),ns}var os={},Fc;function C_(){if(Fc)return os;Fc=1;const r=B0();function e(i,o){const a=i.a/255,s=o+'="'+i.hex+'"';return a<1?s+" "+o+'-opacity="'+a.toFixed(2).slice(1)+'"':s}function t(i,o,a){let s=i+o;return typeof a<"u"&&(s+=" "+a),s}function n(i,o,a){let s="",l=0,u=!1,c=0;for(let f=0;f<i.length;f++){const d=Math.floor(f%o),h=Math.floor(f/o);!d&&!u&&(u=!0),i[f]?(c++,f>0&&d>0&&i[f-1]||(s+=u?t("M",d+a,.5+h+a):t("m",l,0),l=0,u=!1),d+1<o&&i[f+1]||(s+=t("h",c),c=0)):l++}return s}return os.render=function(o,a,s){const l=r.getOptions(a),u=o.modules.size,c=o.modules.data,f=u+l.margin*2,d=l.color.light.a?"<path "+e(l.color.light,"fill")+' d="M0 0h'+f+"v"+f+'H0z"/>':"",h="<path "+e(l.color.dark,"stroke")+' d="'+n(c,u,l.margin)+'"/>',p='viewBox="0 0 '+f+" "+f+'"',m='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+p+' shape-rendering="crispEdges">'+d+h+`</svg>
`;return typeof s=="function"&&s(null,m),m},os}var Uc;function S_(){if(Uc)return Bn;Uc=1;const r=a_(),e=E_(),t=A_(),n=C_();function i(o,a,s,l,u){const c=[].slice.call(arguments,1),f=c.length,d=typeof c[f-1]=="function";if(!d&&!r())throw new Error("Callback required as last argument");if(d){if(f<2)throw new Error("Too few arguments provided");f===2?(u=s,s=a,a=l=void 0):f===3&&(a.getContext&&typeof u>"u"?(u=l,l=void 0):(u=l,l=s,s=a,a=void 0))}else{if(f<1)throw new Error("Too few arguments provided");return f===1?(s=a,a=l=void 0):f===2&&!a.getContext&&(l=s,s=a,a=void 0),new Promise(function(h,p){try{const y=e.create(s,l);h(o(y,a,l))}catch(y){p(y)}})}try{const h=e.create(s,l);u(null,o(h,a,l))}catch(h){u(h)}}return Bn.create=e.create,Bn.toCanvas=i.bind(null,t.render),Bn.toDataURL=i.bind(null,t.renderToDataURL),Bn.toString=i.bind(null,function(o,a,s){return n.render(o,s)}),Bn}var I_=S_();const O_=f0(I_),T_={class:"min-h-screen bg-gray-50 py-8"},R_={class:"container mx-auto px-4 max-w-2xl"},P_={class:"bg-white rounded-xl shadow-lg p-8"},N_={class:"text-3xl font-bold text-[#8B0000] mb-2 text-center"},D_={key:0,class:"text-center text-gray-600 mb-6"},k_={key:1,class:"space-y-6"},M_={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-6"},B_={class:"space-y-2 text-sm"},L_={class:"text-gray-900"},F_={class:"text-gray-900"},U_={key:0},j_={class:"text-gray-900"},$_={key:1,class:"bg-gradient-to-r from-[#8B0000] to-[#A52A2A] rounded-lg p-6 text-white"},V_={class:"flex gap-4 items-center"},H_=["src","alt"],G_={class:"flex-1"},W_={class:"font-bold text-xl mb-2"},q_={class:"text-sm space-y-1 opacity-90"},z_={key:0},K_={key:1},X_=["value"],Y_=["disabled"],Z_=["value"],J_={key:0,class:"text-sm text-gray-500 mt-1"},Q_={key:1,class:"text-sm text-orange-600 mt-1"},eb=["disabled"],tb={key:2,class:"space-y-6"},rb={class:"bg-gray-50 rounded-lg p-6 space-y-3"},nb={class:"grid grid-cols-2 gap-3 text-sm"},ib={class:"col-span-2"},ob={class:"text-gray-900"},ab={class:"col-span-2"},sb={class:"text-gray-900"},lb={key:0,class:"col-span-2"},ub={class:"text-gray-900"},cb={class:"col-span-2"},fb={class:"text-gray-900"},db={class:"text-gray-900"},hb={class:"text-gray-900"},pb={class:"text-gray-900"},vb={class:"text-gray-900 text-xs"},gb={class:"bg-white border-4 border-[#8B0000] rounded-lg p-8 flex justify-center"},yb={class:"space-y-3"},mb=xt({__name:"GeneradorQR",setup(r){const e=si(),t=Gv(),n=Q(null),i=Q(!1),o=Q(""),a=Q(null),s=Q([]),l=Q([]),u=Q({pelicula_id:"",funcion_id:"",asientos:1}),c=Ne(()=>a.value&&u.value.pelicula_id!==""&&u.value.funcion_id!==""&&u.value.asientos>0),f=Ne(()=>u.value.pelicula_id?l.value.filter(C=>C.pelicula_id===u.value.pelicula_id):[]),d=Ne(()=>s.value.find(C=>C.id===u.value.pelicula_id)),h=Ne(()=>l.value.find(C=>C.id===u.value.funcion_id));un(async()=>{await p(),await y(),await m();const C=t.query.pelicula_id;C&&(u.value.pelicula_id=C)});const p=async()=>{const C=localStorage.getItem("userId");if(!C){alert("Debes iniciar sesin para generar un cdigo QR"),e.push("/login");return}try{const{data:E,error:I}=await we.from("usuarios").select("*").eq("id",C).single();if(I)throw I;a.value=E}catch(E){console.error("Error obteniendo usuario:",E),alert("Error al cargar informacin del usuario"),e.push("/login")}},y=async()=>{try{const{data:C,error:E}=await we.from("peliculas").select("*").order("titulo",{ascending:!0});if(E)throw E;s.value=C||[]}catch(C){console.error("Error cargando pelculas:",C)}},m=async()=>{try{const{data:C,error:E}=await we.from("funciones").select("*").gte("fecha",new Date().toISOString().split("T")[0]).order("fecha",{ascending:!0});if(E)throw E;l.value=C||[]}catch(C){console.error("Error cargando funciones:",C)}},g=async()=>{if(!a.value){alert("Debes iniciar sesin para generar un cdigo QR"),e.push("/login");return}try{console.log("Iniciando generacin de QR...");const{data:C,error:E}=await we.from("reservas").insert({usuario_id:a.value.id,funcion_id:u.value.funcion_id,asientos:u.value.asientos,estado:"activa"}).select().single();if(E)throw console.error("Error creando reserva:",E),E;console.log("Reserva creada:",C),o.value=C.id;const I={reserva_id:C.id,usuario_id:a.value.id,nombre:a.value.nombre,correo:a.value.correo,carrera:a.value.carrera||"",pelicula:d.value?.titulo,fecha:h.value?.fecha,hora:h.value?.hora_inicio,asientos:u.value.asientos,creado_en:new Date().toISOString()},D=JSON.stringify(I);console.log("Datos del QR:",I),console.log("String del QR:",D);const{error:M}=await we.from("tickets_qr").insert({reserva_id:C.id,codigo_qr:D,estado:"activo",fecha_generacion:new Date().toISOString()});if(M)throw console.error("Error guardando ticket:",M),M;if(console.log("Ticket guardado en BD"),i.value=!0,await ra(),await new Promise(j=>setTimeout(j,100)),!n.value)throw console.error("Canvas no encontrado en el DOM despus de nextTick"),new Error("No se pudo encontrar el elemento canvas");console.log("Canvas encontrado, generando QR visual..."),await O_.toCanvas(n.value,D,{width:300,margin:2,color:{dark:"#8B0000",light:"#FFFFFF"}}),console.log(" QR generado exitosamente en el canvas"),alert(" Reserva creada y QR generado exitosamente!")}catch(C){console.error("Error generando QR:",C),alert("Error al generar el cdigo QR: "+C.message),i.value=!1,o.value=""}},x=()=>{if(n.value){const C=document.createElement("a");C.download=`ticket-${o.value}.png`,C.href=n.value.toDataURL(),C.click()}},w=()=>{u.value={pelicula_id:"",funcion_id:"",asientos:1},i.value=!1,o.value=""},_=C=>C?new Date(C+"T00:00:00").toLocaleDateString("es-ES",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"";return(C,E)=>(R(),P("div",T_,[v("div",R_,[v("div",P_,[v("h1",N_,"  "+V(i.value?"Tu Cdigo QR":"Completa tu Reserva"),1),i.value?re("",!0):(R(),P("p",D_,V(d.value?`Has seleccionado: ${d.value.titulo}`:"Selecciona una pelcula y funcin"),1)),i.value?(R(),P("div",tb,[E[24]||(E[24]=v("div",{class:"bg-green-50 border border-green-200 rounded-lg p-4 text-center"},[v("p",{class:"text-green-800 font-medium"},"  QR Generado Exitosamente! ")],-1)),v("div",rb,[E[23]||(E[23]=v("h3",{class:"font-bold text-lg text-gray-800 mb-4"}," Informacin de la Reserva",-1)),v("div",nb,[v("div",ib,[E[15]||(E[15]=v("span",{class:"font-medium text-gray-700"},"Nombre:",-1)),v("p",ob,V(a.value?.nombre),1)]),v("div",ab,[E[16]||(E[16]=v("span",{class:"font-medium text-gray-700"},"Correo:",-1)),v("p",sb,V(a.value?.correo),1)]),a.value?.carrera?(R(),P("div",lb,[E[17]||(E[17]=v("span",{class:"font-medium text-gray-700"},"Carrera:",-1)),v("p",ub,V(a.value.carrera),1)])):re("",!0),v("div",cb,[E[18]||(E[18]=v("span",{class:"font-medium text-gray-700"},"Pelcula:",-1)),v("p",fb,V(d.value?.titulo),1)]),v("div",null,[E[19]||(E[19]=v("span",{class:"font-medium text-gray-700"},"Fecha:",-1)),v("p",db,V(_(h.value?.fecha||"")),1)]),v("div",null,[E[20]||(E[20]=v("span",{class:"font-medium text-gray-700"},"Hora:",-1)),v("p",hb,V(h.value?.hora_inicio),1)]),v("div",null,[E[21]||(E[21]=v("span",{class:"font-medium text-gray-700"},"Asientos:",-1)),v("p",pb,V(u.value.asientos),1)]),v("div",null,[E[22]||(E[22]=v("span",{class:"font-medium text-gray-700"},"ID Reserva:",-1)),v("p",vb,V(o.value),1)])])]),v("div",gb,[v("canvas",{ref_key:"qrCanvas",ref:n,class:"max-w-full"},null,512)]),v("div",yb,[v("button",{onClick:x,class:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors shadow-lg hover:shadow-xl transform hover:scale-105"},"  Descargar QR "),v("button",{onClick:E[4]||(E[4]=I=>jr(e).push("/cartelera")),class:"w-full bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors"},"  Ver Ms Pelculas "),v("button",{onClick:w,class:"w-full bg-gray-500 text-white py-3 rounded-lg font-semibold hover:bg-gray-600 transition-colors"},"  Generar Nueva Reserva ")]),E[25]||(E[25]=v("div",{class:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm text-blue-800"},[v("p",{class:"font-medium mb-2"}," Instrucciones:"),v("ul",{class:"list-disc list-inside space-y-1"},[v("li",null,"Descarga o guarda una captura del cdigo QR"),v("li",null,"Presenta este QR en la entrada del cine"),v("li",null,"El personal escanear tu cdigo para validar tu entrada"),v("li",null,"Llega 15 minutos antes del inicio de la funcin")])],-1))])):(R(),P("div",k_,[a.value?(R(),P("div",M_,[E[8]||(E[8]=v("h3",{class:"font-bold text-lg text-gray-800 mb-4"}," Tu Informacin",-1)),v("div",B_,[v("div",null,[E[5]||(E[5]=v("span",{class:"font-medium text-gray-700"},"Nombre:",-1)),v("p",L_,V(a.value.nombre),1)]),v("div",null,[E[6]||(E[6]=v("span",{class:"font-medium text-gray-700"},"Correo:",-1)),v("p",F_,V(a.value.correo),1)]),a.value.carrera?(R(),P("div",U_,[E[7]||(E[7]=v("span",{class:"font-medium text-gray-700"},"Carrera:",-1)),v("p",j_,V(a.value.carrera),1)])):re("",!0)])])):re("",!0),d.value?(R(),P("div",$_,[v("div",V_,[d.value.poster_url?(R(),P("img",{key:0,src:d.value.poster_url,alt:d.value.titulo,class:"w-20 h-28 object-cover rounded-lg shadow-lg"},null,8,H_)):re("",!0),v("div",G_,[v("h3",W_," "+V(d.value.titulo),1),v("div",q_,[d.value.duracion_min?(R(),P("p",z_," "+V(d.value.duracion_min)+" min",1)):re("",!0),d.value.genero?(R(),P("p",K_," "+V(d.value.genero),1)):re("",!0)])])])])):re("",!0),v("div",null,[E[10]||(E[10]=v("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Pelcula * ",-1)),Ee(v("select",{"onUpdate:modelValue":E[0]||(E[0]=I=>u.value.pelicula_id=I),required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent"},[E[9]||(E[9]=v("option",{value:""},"Seleccionar pelcula...",-1)),(R(!0),P(at,null,Qt(s.value,I=>(R(),P("option",{key:I.id,value:I.id},V(I.titulo),9,X_))),128))],512),[[Hr,u.value.pelicula_id]])]),v("div",null,[E[12]||(E[12]=v("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Funcin (Fecha y Hora) * ",-1)),Ee(v("select",{"onUpdate:modelValue":E[1]||(E[1]=I=>u.value.funcion_id=I),required:"",disabled:!u.value.pelicula_id,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent disabled:opacity-50"},[E[11]||(E[11]=v("option",{value:""},"Seleccionar funcin...",-1)),(R(!0),P(at,null,Qt(f.value,I=>(R(),P("option",{key:I.id,value:I.id},"  "+V(_(I.fecha))+" -  "+V(I.hora_inicio),9,Z_))),128))],8,Y_),[[Hr,u.value.funcion_id]]),u.value.pelicula_id?f.value.length===0?(R(),P("p",Q_,"  No hay funciones disponibles para esta pelcula ")):re("",!0):(R(),P("p",J_," Primero selecciona una pelcula "))]),v("div",null,[E[13]||(E[13]=v("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Nmero de Asientos * ",-1)),Ee(v("input",{"onUpdate:modelValue":E[2]||(E[2]=I=>u.value.asientos=I),type:"number",min:"1",max:"10",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent",placeholder:"1"},null,512),[[We,u.value.asientos,void 0,{number:!0}]]),E[14]||(E[14]=v("p",{class:"text-sm text-gray-500 mt-1"},"Mximo 10 asientos por reserva",-1))]),v("button",{onClick:g,disabled:!c.value,class:"w-full bg-[#8B0000] text-white py-4 rounded-lg font-semibold text-lg hover:bg-[#A52A2A] transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl transform hover:scale-105 transition-all"},"  Generar Mi Cdigo QR ",8,eb),v("button",{onClick:E[3]||(E[3]=I=>jr(e).push("/cartelera")),class:"w-full bg-gray-200 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-300 transition-colors"},"  Volver a Cartelera ")]))])])]))}}),xb=Yi(mb,[["__scopeId","data-v-2b0c1691"]]);function wb(r,e){var t=Object.setPrototypeOf;t?t(r,e):r.__proto__=e}function _b(r,e){e===void 0&&(e=r.constructor);var t=Error.captureStackTrace;t&&t(r,e)}var bb=(function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Eb=(function(r){bb(e,r);function e(t,n){var i=this.constructor,o=r.call(this,t,n)||this;return Object.defineProperty(o,"name",{value:i.name,enumerable:!1,configurable:!0}),wb(o,i.prototype),_b(o),o}return e})(Error),Ab=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Yt=(function(r){Ab(e,r);function e(t){t===void 0&&(t=void 0);var n=r.call(this,t)||this;return n.message=t,n}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e})(Eb),Cb=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),st=(function(r){Cb(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ArgumentException",e})(Yt),Sb=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),fe=(function(r){Sb(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e})(Yt),L0=(function(){function r(e){if(this.binarizer=e,e===null)throw new fe("Binarizer must be non-null.")}return r.prototype.getWidth=function(){return this.binarizer.getWidth()},r.prototype.getHeight=function(){return this.binarizer.getHeight()},r.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},r.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},r.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},r.prototype.crop=function(e,t,n,i){var o=this.binarizer.getLuminanceSource().crop(e,t,n,i);return new r(this.binarizer.createBinarizer(o))},r.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},r.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new r(this.binarizer.createBinarizer(e))},r.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new r(this.binarizer.createBinarizer(e))},r.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},r})(),Ib=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),ut=(function(r){Ib(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e})(Yt),Ob=(function(){function r(e){this.source=e}return r.prototype.getLuminanceSource=function(){return this.source},r.prototype.getWidth=function(){return this.source.getWidth()},r.prototype.getHeight=function(){return this.source.getHeight()},r})(),Ze=(function(){function r(){}return r.arraycopy=function(e,t,n,i,o){for(;o--;)n[i++]=e[t++]},r.currentTimeMillis=function(){return Date.now()},r})(),Tb=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Pl=(function(r){Tb(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e})(Yt),Rb=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),jc=(function(r){Rb(e,r);function e(t,n){t===void 0&&(t=void 0),n===void 0&&(n=void 0);var i=r.call(this,n)||this;return i.index=t,i.message=n,i}return e.kind="ArrayIndexOutOfBoundsException",e})(Pl),Pb=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yt=(function(){function r(){}return r.fill=function(e,t){for(var n=0,i=e.length;n<i;n++)e[n]=t},r.fillWithin=function(e,t,n,i){r.rangeCheck(e.length,t,n);for(var o=t;o<n;o++)e[o]=i},r.rangeCheck=function(e,t,n){if(t>n)throw new fe("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new jc(t);if(n>e)throw new jc(n)},r.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},r.create=function(e,t,n){var i=Array.from({length:e});return i.map(function(o){return Array.from({length:t}).fill(n)})},r.createInt32Array=function(e,t,n){var i=Array.from({length:e});return i.map(function(o){return Int32Array.from({length:t}).fill(n)})},r.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0},r.hashCode=function(e){var t,n;if(e===null)return 0;var i=1;try{for(var o=Pb(e),a=o.next();!a.done;a=o.next()){var s=a.value;i=31*i+s}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i},r.fillUint8Array=function(e,t){for(var n=0;n!==e.length;n++)e[n]=t},r.copyOf=function(e,t){return e.slice(0,t)},r.copyOfUint8Array=function(e,t){if(e.length<=t){var n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)},r.copyOfRange=function(e,t,n){var i=n-t,o=new Int32Array(i);return Ze.arraycopy(e,t,o,0,i),o},r.binarySearch=function(e,t,n){n===void 0&&(n=r.numberComparator);for(var i=0,o=e.length-1;i<=o;){var a=o+i>>1,s=n(t,e[a]);if(s>0)i=a+1;else if(s<0)o=a-1;else return a}return-i-1},r.numberComparator=function(e,t){return e-t},r})(),Ce=(function(){function r(){}return r.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var n=31;return t=e<<16,t!==0&&(n-=16,e=t),t=e<<8,t!==0&&(n-=8,e=t),t=e<<4,t!==0&&(n-=4,e=t),t=e<<2,t!==0&&(n-=2,e=t),n-(e<<1>>>31)},r.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},r.toHexString=function(e){return e.toString(16)},r.toBinaryString=function(e){return String(parseInt(String(e),2))},r.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},r.truncDivision=function(e,t){return Math.trunc(e/t)},r.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},r.MIN_VALUE_32_BITS=-2147483648,r.MAX_VALUE=Number.MAX_SAFE_INTEGER,r})(),Ct=(function(){function r(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=r.makeArray(e):this.bits=t)}return r.prototype.getSize=function(){return this.size},r.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},r.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=r.makeArray(e);Ze.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},r.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},r.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},r.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},r.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,i=Math.floor(e/32),o=n[i];o&=~((1<<(e&31))-1);for(var a=n.length;o===0;){if(++i===a)return t;o=n[i]}var s=i*32+Ce.numberOfTrailingZeros(o);return s>t?t:s},r.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,i=Math.floor(e/32),o=~n[i];o&=~((1<<(e&31))-1);for(var a=n.length;o===0;){if(++i===a)return t;o=~n[i]}var s=i*32+Ce.numberOfTrailingZeros(o);return s>t?t:s},r.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},r.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new fe;if(t!==e){t--;for(var n=Math.floor(e/32),i=Math.floor(t/32),o=this.bits,a=n;a<=i;a++){var s=a>n?0:e&31,l=a<i?31:t&31,u=(2<<l)-(1<<s);o[a]|=u}}},r.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,n=0;n<e;n++)t[n]=0},r.prototype.isRange=function(e,t,n){if(t<e||e<0||t>this.size)throw new fe;if(t===e)return!0;t--;for(var i=Math.floor(e/32),o=Math.floor(t/32),a=this.bits,s=i;s<=o;s++){var l=s>i?0:e&31,u=s<o?31:t&31,c=(2<<u)-(1<<l)&4294967295;if((a[s]&c)!==(n?c:0))return!1}return!0},r.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},r.prototype.appendBits=function(e,t){if(t<0||t>32)throw new fe("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var n=t;n>0;n--)this.appendBit((e>>n-1&1)===1)},r.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var n=0;n<t;n++)this.appendBit(e.get(n))},r.prototype.xor=function(e){if(this.size!==e.size)throw new fe("Sizes don't match");for(var t=this.bits,n=0,i=t.length;n<i;n++)t[n]^=e.bits[n]},r.prototype.toBytes=function(e,t,n,i){for(var o=0;o<i;o++){for(var a=0,s=0;s<8;s++)this.get(e)&&(a|=1<<7-s),e++;t[n+o]=a}},r.prototype.getBitArray=function(){return this.bits},r.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,i=this.bits,o=0;o<n;o++){var a=i[o];a=a>>1&1431655765|(a&1431655765)<<1,a=a>>2&858993459|(a&858993459)<<2,a=a>>4&252645135|(a&252645135)<<4,a=a>>8&16711935|(a&16711935)<<8,a=a>>16&65535|(a&65535)<<16,e[t-o]=a}if(this.size!==n*32){for(var s=n*32-this.size,l=e[0]>>>s,o=1;o<n;o++){var u=e[o];l|=u<<32-s,e[o-1]=l,l=u>>>s}e[n-1]=l}this.bits=e},r.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.size===t.size&&yt.equals(this.bits,t.bits)},r.prototype.hashCode=function(){return 31*this.size+yt.hashCode(this.bits)},r.prototype.toString=function(){for(var e="",t=0,n=this.size;t<n;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},r.prototype.clone=function(){return new r(this.size,this.bits.slice())},r.prototype.toArray=function(){for(var e=[],t=0,n=this.size;t<n;t++)e.push(this.get(t));return e},r})(),Gs;(function(r){r[r.OTHER=0]="OTHER",r[r.PURE_BARCODE=1]="PURE_BARCODE",r[r.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",r[r.TRY_HARDER=3]="TRY_HARDER",r[r.CHARACTER_SET=4]="CHARACTER_SET",r[r.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",r[r.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",r[r.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",r[r.ASSUME_GS1=8]="ASSUME_GS1",r[r.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",r[r.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",r[r.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(Gs||(Gs={}));const Je=Gs;var Nb=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Y=(function(r){Nb(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e})(Yt),Db=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ve;(function(r){r[r.Cp437=0]="Cp437",r[r.ISO8859_1=1]="ISO8859_1",r[r.ISO8859_2=2]="ISO8859_2",r[r.ISO8859_3=3]="ISO8859_3",r[r.ISO8859_4=4]="ISO8859_4",r[r.ISO8859_5=5]="ISO8859_5",r[r.ISO8859_6=6]="ISO8859_6",r[r.ISO8859_7=7]="ISO8859_7",r[r.ISO8859_8=8]="ISO8859_8",r[r.ISO8859_9=9]="ISO8859_9",r[r.ISO8859_10=10]="ISO8859_10",r[r.ISO8859_11=11]="ISO8859_11",r[r.ISO8859_13=12]="ISO8859_13",r[r.ISO8859_14=13]="ISO8859_14",r[r.ISO8859_15=14]="ISO8859_15",r[r.ISO8859_16=15]="ISO8859_16",r[r.SJIS=16]="SJIS",r[r.Cp1250=17]="Cp1250",r[r.Cp1251=18]="Cp1251",r[r.Cp1252=19]="Cp1252",r[r.Cp1256=20]="Cp1256",r[r.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",r[r.UTF8=22]="UTF8",r[r.ASCII=23]="ASCII",r[r.Big5=24]="Big5",r[r.GB18030=25]="GB18030",r[r.EUC_KR=26]="EUC_KR"})(Ve||(Ve={}));var gt=(function(){function r(e,t,n){for(var i,o,a=[],s=3;s<arguments.length;s++)a[s-3]=arguments[s];this.valueIdentifier=e,this.name=n,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=a,r.VALUE_IDENTIFIER_TO_ECI.set(e,this),r.NAME_TO_ECI.set(n,this);for(var l=this.values,u=0,c=l.length;u!==c;u++){var f=l[u];r.VALUES_TO_ECI.set(f,this)}try{for(var d=Db(a),h=d.next();!h.done;h=d.next()){var p=h.value;r.NAME_TO_ECI.set(p,this)}}catch(y){i={error:y}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}}return r.prototype.getValueIdentifier=function(){return this.valueIdentifier},r.prototype.getName=function(){return this.name},r.prototype.getValue=function(){return this.values[0]},r.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new Y("incorect value");var t=r.VALUES_TO_ECI.get(e);if(t===void 0)throw new Y("incorect value");return t},r.getCharacterSetECIByName=function(e){var t=r.NAME_TO_ECI.get(e);if(t===void 0)throw new Y("incorect value");return t},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.getName()===t.getName()},r.VALUE_IDENTIFIER_TO_ECI=new Map,r.VALUES_TO_ECI=new Map,r.NAME_TO_ECI=new Map,r.Cp437=new r(Ve.Cp437,Int32Array.from([0,2]),"Cp437"),r.ISO8859_1=new r(Ve.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),r.ISO8859_2=new r(Ve.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),r.ISO8859_3=new r(Ve.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),r.ISO8859_4=new r(Ve.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),r.ISO8859_5=new r(Ve.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),r.ISO8859_6=new r(Ve.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),r.ISO8859_7=new r(Ve.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),r.ISO8859_8=new r(Ve.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),r.ISO8859_9=new r(Ve.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),r.ISO8859_10=new r(Ve.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),r.ISO8859_11=new r(Ve.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),r.ISO8859_13=new r(Ve.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),r.ISO8859_14=new r(Ve.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),r.ISO8859_15=new r(Ve.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),r.ISO8859_16=new r(Ve.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),r.SJIS=new r(Ve.SJIS,20,"SJIS","Shift_JIS"),r.Cp1250=new r(Ve.Cp1250,21,"Cp1250","windows-1250"),r.Cp1251=new r(Ve.Cp1251,22,"Cp1251","windows-1251"),r.Cp1252=new r(Ve.Cp1252,23,"Cp1252","windows-1252"),r.Cp1256=new r(Ve.Cp1256,24,"Cp1256","windows-1256"),r.UnicodeBigUnmarked=new r(Ve.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),r.UTF8=new r(Ve.UTF8,26,"UTF8","UTF-8"),r.ASCII=new r(Ve.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),r.Big5=new r(Ve.Big5,28,"Big5"),r.GB18030=new r(Ve.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),r.EUC_KR=new r(Ve.EUC_KR,30,"EUC_KR","EUC-KR"),r})(),kb=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Co=(function(r){kb(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e})(Yt),ur=(function(){function r(){}return r.decode=function(e,t){var n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},r.shouldDecodeOnFallback=function(e){return!r.isBrowser()&&e==="ISO-8859-1"},r.encode=function(e,t){var n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},r.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},r.encodingName=function(e){return typeof e=="string"?e:e.getName()},r.encodingCharacterSet=function(e){return e instanceof gt?e:gt.getCharacterSetECIByName(e)},r.decodeFallback=function(e,t){var n=this.encodingCharacterSet(t);if(r.isDecodeFallbackSupported(n)){for(var i="",o=0,a=e.length;o<a;o++){var s=e[o].toString(16);s.length<2&&(s="0"+s),i+="%"+s}return decodeURIComponent(i)}if(n.equals(gt.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Co("Encoding "+this.encodingName(t)+" not supported by fallback.")},r.isDecodeFallbackSupported=function(e){return e.equals(gt.UTF8)||e.equals(gt.ISO8859_1)||e.equals(gt.ASCII)},r.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),n=t.split(""),i=[],o=0;o<n.length;o++)i.push(n[o].charCodeAt(0));return new Uint8Array(i)},r})(),Re=(function(){function r(){}return r.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var n=t?t.getName():this.ISO88591;return ur.decode(new Uint8Array([e]),n)},r.guessEncoding=function(e,t){if(t!=null&&t.get(Je.CHARACTER_SET)!==void 0)return t.get(Je.CHARACTER_SET).toString();for(var n=e.length,i=!0,o=!0,a=!0,s=0,l=0,u=0,c=0,f=0,d=0,h=0,p=0,y=0,m=0,g=0,x=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,w=0;w<n&&(i||o||a);w++){var _=e[w]&255;a&&(s>0?(_&128)===0?a=!1:s--:(_&128)!==0&&((_&64)===0?a=!1:(s++,(_&32)===0?l++:(s++,(_&16)===0?u++:(s++,(_&8)===0?c++:a=!1))))),i&&(_>127&&_<160?i=!1:_>159&&(_<192||_===215||_===247)&&g++),o&&(f>0?_<64||_===127||_>252?o=!1:f--:_===128||_===160||_>239?o=!1:_>160&&_<224?(d++,p=0,h++,h>y&&(y=h)):_>127?(f++,h=0,p++,p>m&&(m=p)):(h=0,p=0))}return a&&s>0&&(a=!1),o&&f>0&&(o=!1),a&&(x||l+u+c>0)?r.UTF8:o&&(r.ASSUME_SHIFT_JIS||y>=3||m>=3)?r.SHIFT_JIS:i&&o?y===2&&d===2||g*10>=n?r.SHIFT_JIS:r.ISO88591:i?r.ISO88591:o?r.SHIFT_JIS:a?r.UTF8:r.PLATFORM_DEFAULT_ENCODING},r.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=-1;function o(s,l,u,c,f,d){if(s==="%%")return"%";if(t[++i]!==void 0){s=c?parseInt(c.substr(1)):void 0;var h=f?parseInt(f.substr(1)):void 0,p;switch(d){case"s":p=t[i];break;case"c":p=t[i][0];break;case"f":p=parseFloat(t[i]).toFixed(s);break;case"p":p=parseFloat(t[i]).toPrecision(s);break;case"e":p=parseFloat(t[i]).toExponential(s);break;case"x":p=parseInt(t[i]).toString(h||16);break;case"d":p=parseFloat(parseInt(t[i],h||10).toPrecision(s)).toFixed(0);break}p=typeof p=="object"?JSON.stringify(p):(+p).toString(h);for(var y=parseInt(u),m=u&&u[0]+""=="0"?"0":" ";p.length<y;)p=l!==void 0?p+m:m+p;return p}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,o)},r.getBytes=function(e,t){return ur.encode(e,t)},r.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},r.getCharAt=function(e){return String.fromCharCode(e)},r.SHIFT_JIS=gt.SJIS.getName(),r.GB2312="GB2312",r.ISO88591=gt.ISO8859_1.getName(),r.EUC_JP="EUC_JP",r.UTF8=gt.UTF8.getName(),r.PLATFORM_DEFAULT_ENCODING=r.UTF8,r.ASSUME_SHIFT_JIS=!1,r})(),Ae=(function(){function r(e){e===void 0&&(e=""),this.value=e}return r.prototype.enableDecoding=function(e){return this.encoding=e,this},r.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Re.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},r.prototype.appendChars=function(e,t,n){for(var i=t;t<t+n;i++)this.append(e[i]);return this},r.prototype.length=function(){return this.value.length},r.prototype.charAt=function(e){return this.value.charAt(e)},r.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},r.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},r.prototype.substring=function(e,t){return this.value.substring(e,t)},r.prototype.setLengthToZero=function(){this.value=""},r.prototype.toString=function(){return this.value},r.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},r})(),Nr=(function(){function r(e,t,n,i){if(this.width=e,this.height=t,this.rowSize=n,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new fe("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return r.parseFromBooleanArray=function(e){for(var t=e.length,n=e[0].length,i=new r(n,t),o=0;o<t;o++)for(var a=e[o],s=0;s<n;s++)a[s]&&i.set(s,o);return i},r.parseFromString=function(e,t,n){if(e===null)throw new fe("stringRepresentation cannot be null");for(var i=new Array(e.length),o=0,a=0,s=-1,l=0,u=0;u<e.length;)if(e.charAt(u)===`
`||e.charAt(u)==="\r"){if(o>a){if(s===-1)s=o-a;else if(o-a!==s)throw new fe("row lengths do not match");a=o,l++}u++}else if(e.substring(u,u+t.length)===t)u+=t.length,i[o]=!0,o++;else if(e.substring(u,u+n.length)===n)u+=n.length,i[o]=!1,o++;else throw new fe("illegal character encountered: "+e.substring(u));if(o>a){if(s===-1)s=o-a;else if(o-a!==s)throw new fe("row lengths do not match");l++}for(var c=new r(s,l),f=0;f<o;f++)i[f]&&c.set(Math.floor(f%s),Math.floor(f/s));return c},r.prototype.get=function(e,t){var n=t*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},r.prototype.set=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},r.prototype.unset=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},r.prototype.flip=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},r.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new fe("input matrix dimensions do not match");for(var t=new Ct(Math.floor(this.width/32)+1),n=this.rowSize,i=this.bits,o=0,a=this.height;o<a;o++)for(var s=o*n,l=e.getRow(o,t).getBitArray(),u=0;u<n;u++)i[s+u]^=l[u]},r.prototype.clear=function(){for(var e=this.bits,t=e.length,n=0;n<t;n++)e[n]=0},r.prototype.setRegion=function(e,t,n,i){if(t<0||e<0)throw new fe("Left and top must be nonnegative");if(i<1||n<1)throw new fe("Height and width must be at least 1");var o=e+n,a=t+i;if(a>this.height||o>this.width)throw new fe("The region must fit inside the matrix");for(var s=this.rowSize,l=this.bits,u=t;u<a;u++)for(var c=u*s,f=e;f<o;f++)l[c+Math.floor(f/32)]|=1<<(f&31)&4294967295},r.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new Ct(this.width):t.clear();for(var n=this.rowSize,i=this.bits,o=e*n,a=0;a<n;a++)t.setBulk(a*32,i[o+a]);return t},r.prototype.setRow=function(e,t){Ze.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},r.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),n=new Ct(e),i=new Ct(e),o=0,a=Math.floor((t+1)/2);o<a;o++)n=this.getRow(o,n),i=this.getRow(t-1-o,i),n.reverse(),i.reverse(),this.setRow(o,i),this.setRow(t-1-o,n)},r.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,n=this.rowSize,i=this.bits,o=e,a=t,s=-1,l=-1,u=0;u<t;u++)for(var c=0;c<n;c++){var f=i[u*n+c];if(f!==0){if(u<a&&(a=u),u>l&&(l=u),c*32<o){for(var d=0;(f<<31-d&4294967295)===0;)d++;c*32+d<o&&(o=c*32+d)}if(c*32+31>s){for(var d=31;!(f>>>d);)d--;c*32+d>s&&(s=c*32+d)}}}return s<o||l<a?null:Int32Array.from([o,a,s-o+1,l-a+1])},r.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,n=0;n<t.length&&t[n]===0;)n++;if(n===t.length)return null;for(var i=n/e,o=n%e*32,a=t[n],s=0;(a<<31-s&4294967295)===0;)s++;return o+=s,Int32Array.from([o,i])},r.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,n=t.length-1;n>=0&&t[n]===0;)n--;if(n<0)return null;for(var i=Math.floor(n/e),o=Math.floor(n%e)*32,a=t[n],s=31;!(a>>>s);)s--;return o+=s,Int32Array.from([o,i])},r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.getRowSize=function(){return this.rowSize},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&yt.equals(this.bits,t.bits)},r.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+yt.hashCode(this.bits),e},r.prototype.toString=function(e,t,n){return e===void 0&&(e="X "),t===void 0&&(t="  "),n===void 0&&(n=`
`),this.buildToString(e,t,n)},r.prototype.buildToString=function(e,t,n){for(var i=new Ae,o=0,a=this.height;o<a;o++){for(var s=0,l=this.width;s<l;s++)i.append(this.get(s,o)?e:t);i.append(n)}return i.toString()},r.prototype.clone=function(){return new r(this.width,this.height,this.rowSize,this.bits.slice())},r})(),Mb=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),B=(function(r){Mb(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e})(Yt),Bb=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Lb=(function(r){Bb(e,r);function e(t){var n=r.call(this,t)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(t,n){var i=this.getLuminanceSource(),o=i.getWidth();n==null||n.getSize()<o?n=new Ct(o):n.clear(),this.initArrays(o);for(var a=i.getRow(t,this.luminances),s=this.buckets,l=0;l<o;l++)s[(a[l]&255)>>e.LUMINANCE_SHIFT]++;var u=e.estimateBlackPoint(s);if(o<3)for(var l=0;l<o;l++)(a[l]&255)<u&&n.set(l);else for(var c=a[0]&255,f=a[1]&255,l=1;l<o-1;l++){var d=a[l+1]&255;(f*4-c-d)/2<u&&n.set(l),c=f,f=d}return n},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),n=t.getWidth(),i=t.getHeight(),o=new Nr(n,i);this.initArrays(n);for(var a=this.buckets,s=1;s<5;s++)for(var l=Math.floor(i*s/5),u=t.getRow(l,this.luminances),c=Math.floor(n*4/5),f=Math.floor(n/5);f<c;f++){var d=u[f]&255;a[d>>e.LUMINANCE_SHIFT]++}for(var h=e.estimateBlackPoint(a),p=t.getMatrix(),s=0;s<i;s++)for(var y=s*n,f=0;f<n;f++){var d=p[y+f]&255;d<h&&o.set(f,s)}return o},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var n=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)n[i]=0},e.estimateBlackPoint=function(t){for(var n=t.length,i=0,o=0,a=0,s=0;s<n;s++)t[s]>a&&(o=s,a=t[s]),t[s]>i&&(i=t[s]);for(var l=0,u=0,s=0;s<n;s++){var c=s-o,f=t[s]*c*c;f>u&&(l=s,u=f)}if(o>l){var d=o;o=l,l=d}if(l-o<=n/16)throw new B;for(var h=l-1,p=-1,s=l-1;s>o;s--){var y=s-o,f=y*y*(l-s)*(i-t[s]);f>p&&(h=s,p=f)}return h<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e})(Ob),Fb=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),F0=(function(r){Fb(e,r);function e(t){var n=r.call(this,t)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),n=t.getWidth(),i=t.getHeight();if(n>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var o=t.getMatrix(),a=n>>e.BLOCK_SIZE_POWER;(n&e.BLOCK_SIZE_MASK)!==0&&a++;var s=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&s++;var l=e.calculateBlackPoints(o,a,s,n,i),u=new Nr(n,i);e.calculateThresholdForBlock(o,a,s,n,i,l,u),this.matrix=u}else this.matrix=r.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,n,i,o,a,s,l){for(var u=a-e.BLOCK_SIZE,c=o-e.BLOCK_SIZE,f=0;f<i;f++){var d=f<<e.BLOCK_SIZE_POWER;d>u&&(d=u);for(var h=e.cap(f,2,i-3),p=0;p<n;p++){var y=p<<e.BLOCK_SIZE_POWER;y>c&&(y=c);for(var m=e.cap(p,2,n-3),g=0,x=-2;x<=2;x++){var w=s[h+x];g+=w[m-2]+w[m-1]+w[m]+w[m+1]+w[m+2]}var _=g/25;e.thresholdBlock(t,y,d,_,o,l)}}},e.cap=function(t,n,i){return t<n?n:t>i?i:t},e.thresholdBlock=function(t,n,i,o,a,s){for(var l=0,u=i*a+n;l<e.BLOCK_SIZE;l++,u+=a)for(var c=0;c<e.BLOCK_SIZE;c++)(t[u+c]&255)<=o&&s.set(n+c,i+l)},e.calculateBlackPoints=function(t,n,i,o,a){for(var s=a-e.BLOCK_SIZE,l=o-e.BLOCK_SIZE,u=new Array(i),c=0;c<i;c++){u[c]=new Int32Array(n);var f=c<<e.BLOCK_SIZE_POWER;f>s&&(f=s);for(var d=0;d<n;d++){var h=d<<e.BLOCK_SIZE_POWER;h>l&&(h=l);for(var p=0,y=255,m=0,g=0,x=f*o+h;g<e.BLOCK_SIZE;g++,x+=o){for(var w=0;w<e.BLOCK_SIZE;w++){var _=t[x+w]&255;p+=_,_<y&&(y=_),_>m&&(m=_)}if(m-y>e.MIN_DYNAMIC_RANGE)for(g++,x+=o;g<e.BLOCK_SIZE;g++,x+=o)for(var w=0;w<e.BLOCK_SIZE;w++)p+=t[x+w]&255}var C=p>>e.BLOCK_SIZE_POWER*2;if(m-y<=e.MIN_DYNAMIC_RANGE&&(C=y/2,c>0&&d>0)){var E=(u[c-1][d]+2*u[c][d-1]+u[c-1][d-1])/4;y<E&&(C=E)}u[c][d]=C}}return u},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e})(Lb),Zi=(function(){function r(e,t){this.width=e,this.height=t}return r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.isCropSupported=function(){return!1},r.prototype.crop=function(e,t,n,i){throw new Co("This luminance source does not support cropping.")},r.prototype.isRotateSupported=function(){return!1},r.prototype.rotateCounterClockwise=function(){throw new Co("This luminance source does not support rotation by 90 degrees.")},r.prototype.rotateCounterClockwise45=function(){throw new Co("This luminance source does not support rotation by 45 degrees.")},r.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new Ae,n=0;n<this.height;n++){for(var i=this.getRow(n,e),o=0;o<this.width;o++){var a=i[o]&255,s=void 0;a<64?s="#":a<128?s="+":a<192?s=".":s=" ",t.append(s)}t.append(`
`)}return t.toString()},r})(),Ub=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),da=(function(r){Ub(e,r);function e(t){var n=r.call(this,t.getWidth(),t.getHeight())||this;return n.delegate=t,n}return e.prototype.getRow=function(t,n){for(var i=this.delegate.getRow(t,n),o=this.getWidth(),a=0;a<o;a++)i[a]=255-(i[a]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(n),o=0;o<n;o++)i[o]=255-(t[o]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,n,i,o){return new e(this.delegate.crop(t,n,i,o))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e})(Zi),jb=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),$b=(function(r){jb(e,r);function e(t,n){n===void 0&&(n=!1);var i=r.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,n),i}return e.makeBufferFromCanvasImageData=function(t,n){n===void 0&&(n=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,n)},e.toGrayscaleBuffer=function(t,n,i,o){o===void 0&&(o=!1);var a=new Uint8ClampedArray(n*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!o)for(var s=0,l=0,u=t.length;s<u;s+=4,l++){var c=void 0,f=t[s+3];if(f===0)c=255;else{var d=t[s],h=t[s+1],p=t[s+2];c=306*d+601*h+117*p+512>>10}a[l]=c}else for(var s=0,l=0,y=t.length;s<y;s+=4,l++){var c=void 0,f=t[s+3];if(f===0)c=255;else{var d=t[s],h=t[s+1],p=t[s+2];c=306*d+601*h+117*p+512>>10}a[l]=255-c}return a},e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new fe("Requested row is outside the image: "+t);var i=this.getWidth(),o=t*i;return n===null?n=this.buffer.slice(o,o+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(o,o+i))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,i,o){return r.prototype.crop.call(this,t,n,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var n=this.getTempCanvasElement(),i=n.getContext("2d"),o=t*e.DEGREE_TO_RADIANS,a=this.canvas.width,s=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(o))*a+Math.abs(Math.sin(o))*s),u=Math.ceil(Math.abs(Math.sin(o))*a+Math.abs(Math.cos(o))*s);return n.width=l,n.height=u,i.translate(l/2,u/2),i.rotate(o),i.drawImage(this.canvas,a/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new da(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e})(Zi),Vb=(function(){function r(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}return r.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},r})(),Ft=function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(c){try{u(n.next(c))}catch(f){a(f)}}function l(c){try{u(n.throw(c))}catch(f){a(f)}}function u(c){c.done?o(c.value):i(c.value).then(s,l)}u((n=n.apply(r,e||[])).next())})},Ut=function(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(c){u=[6,c],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Hb=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ci=(function(){function r(e,t,n){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(r.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),r.prototype.listVideoInputDevices=function(){return Ft(this,void 0,void 0,function(){var e,t,n,i,o,a,s,l,u,c,f,d;return Ut(this,function(h){switch(h.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),t=[];try{for(n=Hb(e),i=n.next();!i.done;i=n.next())o=i.value,a=o.kind==="video"?"videoinput":o.kind,a==="videoinput"&&(s=o.deviceId||o.id,l=o.label||"Video device "+(t.length+1),u=o.groupId,c={deviceId:s,label:l,kind:a,groupId:u},t.push(c))}catch(p){f={error:p}}finally{try{i&&!i.done&&(d=n.return)&&d.call(n)}finally{if(f)throw f.error}}return[2,t]}})})},r.prototype.getVideoInputDevices=function(){return Ft(this,void 0,void 0,function(){var e;return Ut(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(n){return new Vb(n.deviceId,n.label)})]}})})},r.prototype.findDeviceById=function(e){return Ft(this,void 0,void 0,function(){var t;return Ut(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=n.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},r.prototype.decodeFromInputVideoDevice=function(e,t){return Ft(this,void 0,void 0,function(){return Ut(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,n.sent()]}})})},r.prototype.decodeOnceFromVideoDevice=function(e,t){return Ft(this,void 0,void 0,function(){var n,i;return Ut(this,function(o){switch(o.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},i={video:n},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,o.sent()]}})})},r.prototype.decodeOnceFromConstraints=function(e,t){return Ft(this,void 0,void 0,function(){var n;return Ut(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=i.sent(),[4,this.decodeOnceFromStream(n,t)];case 2:return[2,i.sent()]}})})},r.prototype.decodeOnceFromStream=function(e,t){return Ft(this,void 0,void 0,function(){var n,i;return Ut(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return n=o.sent(),[4,this.decodeOnce(n)];case 2:return i=o.sent(),[2,i]}})})},r.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,n){return Ft(this,void 0,void 0,function(){return Ut(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,n)];case 1:return[2,i.sent()]}})})},r.prototype.decodeFromVideoDevice=function(e,t,n){return Ft(this,void 0,void 0,function(){var i,o;return Ut(this,function(a){switch(a.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,t,n)];case 1:return[2,a.sent()]}})})},r.prototype.decodeFromConstraints=function(e,t,n){return Ft(this,void 0,void 0,function(){var i;return Ut(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=o.sent(),[4,this.decodeFromStream(i,t,n)];case 2:return[2,o.sent()]}})})},r.prototype.decodeFromStream=function(e,t,n){return Ft(this,void 0,void 0,function(){var i;return Ut(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=o.sent(),[4,this.decodeContinuously(i,n)];case 2:return[2,o.sent()]}})})},r.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},r.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},r.prototype.attachStreamToVideo=function(e,t){return Ft(this,void 0,void 0,function(){var n;return Ut(this,function(i){switch(i.label){case 0:return n=this.prepareVideoElement(t),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return i.sent(),[2,n]}})})},r.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(n,i){return t.playVideoOnLoad(e,function(){return n()})})},r.prototype.playVideoOnLoad=function(e,t){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},r.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},r.prototype.tryPlayVideo=function(e){return Ft(this,void 0,void 0,function(){return Ut(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},r.prototype.getMediaElement=function(e,t){var n=document.getElementById(e);if(!n)throw new st("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new st("element with id '"+e+"' must be an "+t+" element");return n},r.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new st("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},r.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new st("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},r.prototype.decodeFromVideoContinuously=function(e,t,n){if(e===void 0&&t===void 0)throw new st("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)},r.prototype.decodeFromImageElement=function(e){if(!e)throw new st("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var n;return this.isImageLoaded(t)?n=this.decodeOnce(t,!1,!0):n=this._decodeOnLoadImage(t),n},r.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},r.prototype.decodeFromVideoElementContinuously=function(e,t){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)},r.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new st("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},r.prototype.decodeFromImageUrl=function(e){if(!e)throw new st("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var n=this._decodeOnLoadImage(t);return t.src=e,n},r.prototype.decodeFromVideoUrl=function(e){if(!e)throw new st("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n},r.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new st("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(n,t);return n.src=e,i},r.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(n,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(n,i)},e.addEventListener("load",t.imageLoadedListener)})},r.prototype._decodeOnLoadVideo=function(e){return Ft(this,void 0,void 0,function(){return Ut(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},r.prototype._decodeOnLoadVideoContinuously=function(e,t){return Ft(this,void 0,void 0,function(){return Ut(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,t),[2]}})})},r.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},r.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},r.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},r.prototype.decodeOnce=function(e,t,n){var i=this;t===void 0&&(t=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var o=function(a,s){if(i._stopAsyncDecode){s(new B("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var l=i.decode(e);a(l)}catch(d){var u=t&&d instanceof B,c=d instanceof ut||d instanceof Y,f=c&&n;if(u||f)return setTimeout(o,i._timeBetweenDecodingAttempts,a,s);s(d)}};return new Promise(function(a,s){return o(a,s)})},r.prototype.decodeContinuously=function(e,t){var n=this;this._stopContinuousDecode=!1;var i=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var o=n.decode(e);t(o,null),setTimeout(i,n.timeBetweenScansMillis)}catch(l){t(null,l);var a=l instanceof ut||l instanceof Y,s=l instanceof B;(a||s)&&setTimeout(i,n._timeBetweenDecodingAttempts)}};i()},r.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},r.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),i=new $b(n,t),o=new F0(i);return new L0(o)},r.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),n=void 0;try{n=t.getContext("2d",{willReadFrequently:!0})}catch{n=t.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},r.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},r.prototype.drawFrameOnCanvas=function(e,t,n){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},r.prototype.drawImageOnCanvas=function(e,t,n){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},r.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},r.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),n,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=i+"px",t.width=n,t.height=i,t},r.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},r.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},r.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},r.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},r.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},r.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},r.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},r})(),Lt=(function(){function r(e,t,n,i,o,a){n===void 0&&(n=t==null?0:8*t.length),a===void 0&&(a=Ze.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=i,this.format=o,this.timestamp=a,this.text=e,this.rawBytes=t,n==null?this.numBits=t==null?0:8*t.length:this.numBits=n,this.resultPoints=i,this.format=o,this.resultMetadata=null,a==null?this.timestamp=Ze.currentTimeMillis():this.timestamp=a}return r.prototype.getText=function(){return this.text},r.prototype.getRawBytes=function(){return this.rawBytes},r.prototype.getNumBits=function(){return this.numBits},r.prototype.getResultPoints=function(){return this.resultPoints},r.prototype.getBarcodeFormat=function(){return this.format},r.prototype.getResultMetadata=function(){return this.resultMetadata},r.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},r.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},r.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(t.length+e.length);Ze.arraycopy(t,0,n,0,t.length),Ze.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}},r.prototype.getTimestamp=function(){return this.timestamp},r.prototype.toString=function(){return this.text},r})(),Ws;(function(r){r[r.AZTEC=0]="AZTEC",r[r.CODABAR=1]="CODABAR",r[r.CODE_39=2]="CODE_39",r[r.CODE_93=3]="CODE_93",r[r.CODE_128=4]="CODE_128",r[r.DATA_MATRIX=5]="DATA_MATRIX",r[r.EAN_8=6]="EAN_8",r[r.EAN_13=7]="EAN_13",r[r.ITF=8]="ITF",r[r.MAXICODE=9]="MAXICODE",r[r.PDF_417=10]="PDF_417",r[r.QR_CODE=11]="QR_CODE",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ws||(Ws={}));const ce=Ws;var qs;(function(r){r[r.OTHER=0]="OTHER",r[r.ORIENTATION=1]="ORIENTATION",r[r.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",r[r.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",r[r.ISSUE_NUMBER=4]="ISSUE_NUMBER",r[r.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",r[r.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",r[r.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",r[r.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",r[r.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",r[r.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(qs||(qs={}));const Tt=qs;var ha=(function(){function r(e,t,n,i,o,a){o===void 0&&(o=-1),a===void 0&&(a=-1),this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=i,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=a,this.numBits=e==null?0:8*e.length}return r.prototype.getRawBytes=function(){return this.rawBytes},r.prototype.getNumBits=function(){return this.numBits},r.prototype.setNumBits=function(e){this.numBits=e},r.prototype.getText=function(){return this.text},r.prototype.getByteSegments=function(){return this.byteSegments},r.prototype.getECLevel=function(){return this.ecLevel},r.prototype.getErrorsCorrected=function(){return this.errorsCorrected},r.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},r.prototype.getErasures=function(){return this.erasures},r.prototype.setErasures=function(e){this.erasures=e},r.prototype.getOther=function(){return this.other},r.prototype.setOther=function(e){this.other=e},r.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},r.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},r.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},r})(),bi=(function(){function r(){}return r.prototype.exp=function(e){return this.expTable[e]},r.prototype.log=function(e){if(e===0)throw new fe;return this.logTable[e]},r.addOrSubtract=function(e,t){return e^t},r})(),rn=(function(){function r(e,t){if(t.length===0)throw new fe;this.field=e;var n=t.length;if(n>1&&t[0]===0){for(var i=1;i<n&&t[i]===0;)i++;i===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-i),Ze.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return r.prototype.getCoefficients=function(){return this.coefficients},r.prototype.getDegree=function(){return this.coefficients.length-1},r.prototype.isZero=function(){return this.coefficients[0]===0},r.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},r.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,n;if(e===1){n=0;for(var i=0,o=t.length;i!==o;i++){var a=t[i];n=bi.addOrSubtract(n,a)}return n}n=t[0];for(var s=t.length,l=this.field,i=1;i<s;i++)n=bi.addOrSubtract(l.multiply(e,n),t[i]);return n},r.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new fe("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,n=e.coefficients;if(t.length>n.length){var i=t;t=n,n=i}var o=new Int32Array(n.length),a=n.length-t.length;Ze.arraycopy(n,0,o,0,a);for(var s=a;s<n.length;s++)o[s]=bi.addOrSubtract(t[s-a],n[s]);return new r(this.field,o)},r.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new fe("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,n=t.length,i=e.coefficients,o=i.length,a=new Int32Array(n+o-1),s=this.field,l=0;l<n;l++)for(var u=t[l],c=0;c<o;c++)a[l+c]=bi.addOrSubtract(a[l+c],s.multiply(u,i[c]));return new r(s,a)},r.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,n=this.field,i=new Int32Array(t),o=this.coefficients,a=0;a<t;a++)i[a]=n.multiply(o[a],e);return new r(n,i)},r.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new fe;if(t===0)return this.field.getZero();for(var n=this.coefficients,i=n.length,o=new Int32Array(i+e),a=this.field,s=0;s<i;s++)o[s]=a.multiply(n[s],t);return new r(a,o)},r.prototype.divide=function(e){if(!this.field.equals(e.field))throw new fe("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new fe("Divide by 0");for(var t=this.field,n=t.getZero(),i=this,o=e.getCoefficient(e.getDegree()),a=t.inverse(o);i.getDegree()>=e.getDegree()&&!i.isZero();){var s=i.getDegree()-e.getDegree(),l=t.multiply(i.getCoefficient(i.getDegree()),a),u=e.multiplyByMonomial(s,l),c=t.buildMonomial(s,l);n=n.addOrSubtract(c),i=i.addOrSubtract(u)}return[n,i]},r.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),t===0||n!==1){var i=this.field.log(n);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},r})(),Gb=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),U0=(function(r){Gb(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ArithmeticException",e})(Yt),Wb=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Kt=(function(r){Wb(e,r);function e(t,n,i){var o=r.call(this)||this;o.primitive=t,o.size=n,o.generatorBase=i;for(var a=new Int32Array(n),s=1,l=0;l<n;l++)a[l]=s,s*=2,s>=n&&(s^=t,s&=n-1);o.expTable=a;for(var u=new Int32Array(n),l=0;l<n-1;l++)u[a[l]]=l;return o.logTable=u,o.zero=new rn(o,Int32Array.from([0])),o.one=new rn(o,Int32Array.from([1])),o}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,n){if(t<0)throw new fe;if(n===0)return this.zero;var i=new Int32Array(t+1);return i[0]=n,new rn(this,i)},e.prototype.inverse=function(t){if(t===0)throw new U0;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,n){return t===0||n===0?0:this.expTable[(this.logTable[t]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Ce.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e})(bi),qb=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),po=(function(r){qb(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ReedSolomonException",e})(Yt),zb=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Ji=(function(r){zb(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IllegalStateException",e})(Yt),pa=(function(){function r(e){this.field=e}return r.prototype.decode=function(e,t){for(var n=this.field,i=new rn(n,e),o=new Int32Array(t),a=!0,s=0;s<t;s++){var l=i.evaluateAt(n.exp(s+n.getGeneratorBase()));o[o.length-1-s]=l,l!==0&&(a=!1)}if(!a)for(var u=new rn(n,o),c=this.runEuclideanAlgorithm(n.buildMonomial(t,1),u,t),f=c[0],d=c[1],h=this.findErrorLocations(f),p=this.findErrorMagnitudes(d,h),s=0;s<h.length;s++){var y=e.length-1-n.log(h[s]);if(y<0)throw new po("Bad error location");e[y]=Kt.addOrSubtract(e[y],p[s])}},r.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var o=this.field,a=e,s=t,l=o.getZero(),u=o.getOne();s.getDegree()>=(n/2|0);){var c=a,f=l;if(a=s,l=u,a.isZero())throw new po("r_{i-1} was zero");s=c;for(var d=o.getZero(),h=a.getCoefficient(a.getDegree()),p=o.inverse(h);s.getDegree()>=a.getDegree()&&!s.isZero();){var y=s.getDegree()-a.getDegree(),m=o.multiply(s.getCoefficient(s.getDegree()),p);d=d.addOrSubtract(o.buildMonomial(y,m)),s=s.addOrSubtract(a.multiplyByMonomial(y,m))}if(u=d.multiply(l).addOrSubtract(f),s.getDegree()>=a.getDegree())throw new Ji("Division algorithm failed to reduce polynomial?")}var g=u.getCoefficient(0);if(g===0)throw new po("sigmaTilde(0) was zero");var x=o.inverse(g),w=u.multiplyScalar(x),_=s.multiplyScalar(x);return[w,_]},r.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(t),i=0,o=this.field,a=1;a<o.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(n[i]=o.inverse(a),i++);if(i!==t)throw new po("Error locator degree does not match number of roots");return n},r.prototype.findErrorMagnitudes=function(e,t){for(var n=t.length,i=new Int32Array(n),o=this.field,a=0;a<n;a++){for(var s=o.inverse(t[a]),l=1,u=0;u<n;u++)if(a!==u){var c=o.multiply(t[u],s),f=(c&1)===0?c|1:c&-2;l=o.multiply(l,f)}i[a]=o.multiply(e.evaluateAt(s),o.inverse(l)),o.getGeneratorBase()!==0&&(i[a]=o.multiply(i[a],s))}return i},r})(),St;(function(r){r[r.UPPER=0]="UPPER",r[r.LOWER=1]="LOWER",r[r.MIXED=2]="MIXED",r[r.DIGIT=3]="DIGIT",r[r.PUNCT=4]="PUNCT",r[r.BINARY=5]="BINARY"})(St||(St={}));var $c=(function(){function r(){}return r.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),n=this.extractBits(t),i=this.correctBits(n),o=r.convertBoolArrayToByteArray(i),a=r.getEncodedData(i),s=new ha(o,a,null,null);return s.setNumBits(i.length),s},r.highLevelDecode=function(e){return this.getEncodedData(e)},r.getEncodedData=function(e){for(var t=e.length,n=St.UPPER,i=St.UPPER,o="",a=0;a<t;)if(i===St.BINARY){if(t-a<5)break;var s=r.readCode(e,a,5);if(a+=5,s===0){if(t-a<11)break;s=r.readCode(e,a,11)+31,a+=11}for(var l=0;l<s;l++){if(t-a<8){a=t;break}var u=r.readCode(e,a,8);o+=Re.castAsNonUtf8Char(u),a+=8}i=n}else{var c=i===St.DIGIT?4:5;if(t-a<c)break;var u=r.readCode(e,a,c);a+=c;var f=r.getCharacter(i,u);f.startsWith("CTRL_")?(n=i,i=r.getTable(f.charAt(5)),f.charAt(6)==="L"&&(n=i)):(o+=f,i=n)}return o},r.getTable=function(e){switch(e){case"L":return St.LOWER;case"P":return St.PUNCT;case"M":return St.MIXED;case"D":return St.DIGIT;case"B":return St.BINARY;case"U":default:return St.UPPER}},r.getCharacter=function(e,t){switch(e){case St.UPPER:return r.UPPER_TABLE[t];case St.LOWER:return r.LOWER_TABLE[t];case St.MIXED:return r.MIXED_TABLE[t];case St.PUNCT:return r.PUNCT_TABLE[t];case St.DIGIT:return r.DIGIT_TABLE[t];default:throw new Ji("Bad table")}},r.prototype.correctBits=function(e){var t,n;this.ddata.getNbLayers()<=2?(n=6,t=Kt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=Kt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=Kt.AZTEC_DATA_10):(n=12,t=Kt.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),o=e.length/n;if(o<i)throw new Y;for(var a=e.length%n,s=new Int32Array(o),l=0;l<o;l++,a+=n)s[l]=r.readCode(e,a,n);try{var u=new pa(t);u.decode(s,o-i)}catch(m){throw new Y(m)}for(var c=(1<<n)-1,f=0,l=0;l<i;l++){var d=s[l];if(d===0||d===c)throw new Y;(d===1||d===c-1)&&f++}for(var h=new Array(i*n-f),p=0,l=0;l<i;l++){var d=s[l];if(d===1||d===c-1)h.fill(d>1,p,p+n-1),p+=n-1;else for(var y=n-1;y>=0;--y)h[p++]=(d&1<<y)!==0}return h},r.prototype.extractBits=function(e){var t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),i=(t?11:14)+n*4,o=new Int32Array(i),a=new Array(this.totalBitsInLayer(n,t));if(t)for(var s=0;s<o.length;s++)o[s]=s;else for(var l=i+1+2*Ce.truncDivision(Ce.truncDivision(i,2)-1,15),u=i/2,c=Ce.truncDivision(l,2),s=0;s<u;s++){var f=s+Ce.truncDivision(s,15);o[u-s-1]=c-f-1,o[u+s]=c+f+1}for(var s=0,d=0;s<n;s++){for(var h=(n-s)*4+(t?9:12),p=s*2,y=i-1-p,m=0;m<h;m++)for(var g=m*2,x=0;x<2;x++)a[d+g+x]=e.get(o[p+x],o[p+m]),a[d+2*h+g+x]=e.get(o[p+m],o[y-x]),a[d+4*h+g+x]=e.get(o[y-x],o[y-m]),a[d+6*h+g+x]=e.get(o[y-m],o[p+x]);d+=h*8}return a},r.readCode=function(e,t,n){for(var i=0,o=t;o<t+n;o++)i<<=1,e[o]&&(i|=1);return i},r.readByte=function(e,t){var n=e.length-t;return n>=8?r.readCode(e,t,8):r.readCode(e,t,n)<<8-n},r.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),n=0;n<t.length;n++)t[n]=r.readByte(e,8*n);return t},r.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},r.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],r.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],r.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],r.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],r.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],r})(),ke=(function(){function r(){}return r.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},r.distance=function(e,t,n,i){var o=e-n,a=t-i;return Math.sqrt(o*o+a*a)},r.sum=function(e){for(var t=0,n=0,i=e.length;n!==i;n++){var o=e[n];t+=o}return t},r})(),zs=(function(){function r(){}return r.floatToIntBits=function(e){return e},r.MAX_VALUE=Number.MAX_SAFE_INTEGER,r})(),oe=(function(){function r(e,t){this.x=e,this.y=t}return r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r.prototype.equals=function(e){if(e instanceof r){var t=e;return this.x===t.x&&this.y===t.y}return!1},r.prototype.hashCode=function(){return 31*zs.floatToIntBits(this.x)+zs.floatToIntBits(this.y)},r.prototype.toString=function(){return"("+this.x+","+this.y+")"},r.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),o,a,s;if(n>=t&&n>=i?(a=e[0],o=e[1],s=e[2]):i>=n&&i>=t?(a=e[1],o=e[0],s=e[2]):(a=e[2],o=e[0],s=e[1]),this.crossProductZ(o,a,s)<0){var l=o;o=s,s=l}e[0]=o,e[1]=a,e[2]=s},r.distance=function(e,t){return ke.distance(e.x,e.y,t.x,t.y)},r.crossProductZ=function(e,t,n){var i=t.x,o=t.y;return(n.x-i)*(e.y-o)-(n.y-o)*(e.x-i)},r})(),Nl=(function(){function r(e,t){this.bits=e,this.points=t}return r.prototype.getBits=function(){return this.bits},r.prototype.getPoints=function(){return this.points},r})(),Kb=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Xb=(function(r){Kb(e,r);function e(t,n,i,o,a){var s=r.call(this,t,n)||this;return s.compact=i,s.nbDatablocks=o,s.nbLayers=a,s}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e})(Nl),Ks=(function(){function r(e,t,n,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=r.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var o=t/2|0;if(this.leftInit=n-o,this.rightInit=n+o,this.upInit=i-o,this.downInit=i+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new B}return r.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,n=this.upInit,i=this.downInit,o=!1,a=!0,s=!1,l=!1,u=!1,c=!1,f=!1,d=this.width,h=this.height;a;){a=!1;for(var p=!0;(p||!l)&&t<d;)p=this.containsBlackPoint(n,i,t,!1),p?(t++,a=!0,l=!0):l||t++;if(t>=d){o=!0;break}for(var y=!0;(y||!u)&&i<h;)y=this.containsBlackPoint(e,t,i,!0),y?(i++,a=!0,u=!0):u||i++;if(i>=h){o=!0;break}for(var m=!0;(m||!c)&&e>=0;)m=this.containsBlackPoint(n,i,e,!1),m?(e--,a=!0,c=!0):c||e--;if(e<0){o=!0;break}for(var g=!0;(g||!f)&&n>=0;)g=this.containsBlackPoint(e,t,n,!0),g?(n--,a=!0,f=!0):f||n--;if(n<0){o=!0;break}a&&(s=!0)}if(!o&&s){for(var x=t-e,w=null,_=1;w===null&&_<x;_++)w=this.getBlackPointOnSegment(e,i-_,e+_,i);if(w==null)throw new B;for(var C=null,_=1;C===null&&_<x;_++)C=this.getBlackPointOnSegment(e,n+_,e+_,n);if(C==null)throw new B;for(var E=null,_=1;E===null&&_<x;_++)E=this.getBlackPointOnSegment(t,n+_,t-_,n);if(E==null)throw new B;for(var I=null,_=1;I===null&&_<x;_++)I=this.getBlackPointOnSegment(t,i-_,t-_,i);if(I==null)throw new B;return this.centerEdges(I,w,E,C)}else throw new B},r.prototype.getBlackPointOnSegment=function(e,t,n,i){for(var o=ke.round(ke.distance(e,t,n,i)),a=(n-e)/o,s=(i-t)/o,l=this.image,u=0;u<o;u++){var c=ke.round(e+u*a),f=ke.round(t+u*s);if(l.get(c,f))return new oe(c,f)}return null},r.prototype.centerEdges=function(e,t,n,i){var o=e.getX(),a=e.getY(),s=t.getX(),l=t.getY(),u=n.getX(),c=n.getY(),f=i.getX(),d=i.getY(),h=r.CORR;return o<this.width/2?[new oe(f-h,d+h),new oe(s+h,l+h),new oe(u-h,c-h),new oe(o+h,a-h)]:[new oe(f+h,d+h),new oe(s+h,l-h),new oe(u-h,c+h),new oe(o-h,a-h)]},r.prototype.containsBlackPoint=function(e,t,n,i){var o=this.image;if(i){for(var a=e;a<=t;a++)if(o.get(a,n))return!0}else for(var s=e;s<=t;s++)if(o.get(n,s))return!0;return!1},r.INIT_SIZE=10,r.CORR=1,r})(),Vc=(function(){function r(){}return r.checkAndNudgePoints=function(e,t){for(var n=e.getWidth(),i=e.getHeight(),o=!0,a=0;a<t.length&&o;a+=2){var s=Math.floor(t[a]),l=Math.floor(t[a+1]);if(s<-1||s>n||l<-1||l>i)throw new B;o=!1,s===-1?(t[a]=0,o=!0):s===n&&(t[a]=n-1,o=!0),l===-1?(t[a+1]=0,o=!0):l===i&&(t[a+1]=i-1,o=!0)}o=!0;for(var a=t.length-2;a>=0&&o;a-=2){var s=Math.floor(t[a]),l=Math.floor(t[a+1]);if(s<-1||s>n||l<-1||l>i)throw new B;o=!1,s===-1?(t[a]=0,o=!0):s===n&&(t[a]=n-1,o=!0),l===-1?(t[a+1]=0,o=!0):l===i&&(t[a+1]=i-1,o=!0)}},r})(),j0=(function(){function r(e,t,n,i,o,a,s,l,u){this.a11=e,this.a21=t,this.a31=n,this.a12=i,this.a22=o,this.a32=a,this.a13=s,this.a23=l,this.a33=u}return r.quadrilateralToQuadrilateral=function(e,t,n,i,o,a,s,l,u,c,f,d,h,p,y,m){var g=r.quadrilateralToSquare(e,t,n,i,o,a,s,l),x=r.squareToQuadrilateral(u,c,f,d,h,p,y,m);return x.times(g)},r.prototype.transformPoints=function(e){for(var t=e.length,n=this.a11,i=this.a12,o=this.a13,a=this.a21,s=this.a22,l=this.a23,u=this.a31,c=this.a32,f=this.a33,d=0;d<t;d+=2){var h=e[d],p=e[d+1],y=o*h+l*p+f;e[d]=(n*h+a*p+u)/y,e[d+1]=(i*h+s*p+c)/y}},r.prototype.transformPointsWithValues=function(e,t){for(var n=this.a11,i=this.a12,o=this.a13,a=this.a21,s=this.a22,l=this.a23,u=this.a31,c=this.a32,f=this.a33,d=e.length,h=0;h<d;h++){var p=e[h],y=t[h],m=o*p+l*y+f;e[h]=(n*p+a*y+u)/m,t[h]=(i*p+s*y+c)/m}},r.squareToQuadrilateral=function(e,t,n,i,o,a,s,l){var u=e-n+o-s,c=t-i+a-l;if(u===0&&c===0)return new r(n-e,o-n,e,i-t,a-i,t,0,0,1);var f=n-o,d=s-o,h=i-a,p=l-a,y=f*p-d*h,m=(u*p-d*c)/y,g=(f*c-u*h)/y;return new r(n-e+m*n,s-e+g*s,e,i-t+m*i,l-t+g*l,t,m,g,1)},r.quadrilateralToSquare=function(e,t,n,i,o,a,s,l){return r.squareToQuadrilateral(e,t,n,i,o,a,s,l).buildAdjoint()},r.prototype.buildAdjoint=function(){return new r(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},r.prototype.times=function(e){return new r(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},r})(),Yb=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Zb=(function(r){Yb(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,n,i,o,a,s,l,u,c,f,d,h,p,y,m,g,x,w,_){var C=j0.quadrilateralToQuadrilateral(o,a,s,l,u,c,f,d,h,p,y,m,g,x,w,_);return this.sampleGridWithTransform(t,n,i,C)},e.prototype.sampleGridWithTransform=function(t,n,i,o){if(n<=0||i<=0)throw new B;for(var a=new Nr(n,i),s=new Float32Array(2*n),l=0;l<i;l++){for(var u=s.length,c=l+.5,f=0;f<u;f+=2)s[f]=f/2+.5,s[f+1]=c;o.transformPoints(s),Vc.checkAndNudgePoints(t,s);try{for(var f=0;f<u;f+=2)t.get(Math.floor(s[f]),Math.floor(s[f+1]))&&a.set(f/2,l)}catch{throw new B}}return a},e})(Vc),Dl=(function(){function r(){}return r.setGridSampler=function(e){r.gridSampler=e},r.getInstance=function(){return r.gridSampler},r.gridSampler=new Zb,r})(),qt=(function(){function r(e,t){this.x=e,this.y=t}return r.prototype.toResultPoint=function(){return new oe(this.getX(),this.getY())},r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r})(),Jb=(function(){function r(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return r.prototype.detect=function(){return this.detectMirror(!1)},r.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){var i=n[0];n[0]=n[2],n[2]=i}this.extractParameters(n);var o=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),a=this.getMatrixCornerPoints(n);return new Xb(o,a,this.compact,this.nbDataBlocks,this.nbLayers)},r.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new B;var t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);for(var i=0,o=0;o<4;o++){var a=n[(this.shift+o)%4];this.compact?(i<<=7,i+=a>>1&127):(i<<=10,i+=(a>>2&992)+(a>>1&31))}var s=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(s>>6)+1,this.nbDataBlocks=(s&63)+1):(this.nbLayers=(s>>11)+1,this.nbDataBlocks=(s&2047)+1)},r.prototype.getRotation=function(e,t){var n=0;e.forEach(function(o,a,s){var l=(o>>t-2<<1)+(o&1);n=(n<<3)+l}),n=((n&1)<<11)+(n>>1);for(var i=0;i<4;i++)if(Ce.bitCount(n^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new B},r.prototype.getCorrectedParameterData=function(e,t){var n,i;t?(n=7,i=2):(n=10,i=4);for(var o=n-i,a=new Int32Array(n),s=n-1;s>=0;--s)a[s]=e&15,e>>=4;try{var l=new pa(Kt.AZTEC_PARAM);l.decode(a,o)}catch{throw new B}for(var u=0,s=0;s<i;s++)u=(u<<4)+a[s];return u},r.prototype.getBullsEyeCorners=function(e){var t=e,n=e,i=e,o=e,a=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var s=this.getFirstDifferent(t,a,1,-1),l=this.getFirstDifferent(n,a,1,1),u=this.getFirstDifferent(i,a,-1,1),c=this.getFirstDifferent(o,a,-1,-1);if(this.nbCenterLayers>2){var f=this.distancePoint(c,s)*this.nbCenterLayers/(this.distancePoint(o,t)*(this.nbCenterLayers+2));if(f<.75||f>1.25||!this.isWhiteOrBlackRectangle(s,l,u,c))break}t=s,n=l,i=u,o=c,a=!a}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new B;this.compact=this.nbCenterLayers===5;var d=new oe(t.getX()+.5,t.getY()-.5),h=new oe(n.getX()+.5,n.getY()+.5),p=new oe(i.getX()-.5,i.getY()+.5),y=new oe(o.getX()-.5,o.getY()-.5);return this.expandSquare([d,h,p,y],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},r.prototype.getMatrixCenter=function(){var e,t,n,i;try{var o=new Ks(this.image).detect();e=o[0],t=o[1],n=o[2],i=o[3]}catch{var a=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new qt(a+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new qt(a+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new qt(a-7,s+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new qt(a-7,s-7),!1,-1,-1).toResultPoint()}var l=ke.round((e.getX()+i.getX()+t.getX()+n.getX())/4),u=ke.round((e.getY()+i.getY()+t.getY()+n.getY())/4);try{var o=new Ks(this.image,15,l,u).detect();e=o[0],t=o[1],n=o[2],i=o[3]}catch{e=this.getFirstDifferent(new qt(l+7,u-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new qt(l+7,u+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new qt(l-7,u+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new qt(l-7,u-7),!1,-1,-1).toResultPoint()}return l=ke.round((e.getX()+i.getX()+t.getX()+n.getX())/4),u=ke.round((e.getY()+i.getY()+t.getY()+n.getY())/4),new qt(l,u)},r.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},r.prototype.sampleGrid=function(e,t,n,i,o){var a=Dl.getInstance(),s=this.getDimension(),l=s/2-this.nbCenterLayers,u=s/2+this.nbCenterLayers;return a.sampleGrid(e,s,s,l,l,u,l,u,u,l,u,t.getX(),t.getY(),n.getX(),n.getY(),i.getX(),i.getY(),o.getX(),o.getY())},r.prototype.sampleLine=function(e,t,n){for(var i=0,o=this.distanceResultPoint(e,t),a=o/n,s=e.getX(),l=e.getY(),u=a*(t.getX()-e.getX())/o,c=a*(t.getY()-e.getY())/o,f=0;f<n;f++)this.image.get(ke.round(s+f*u),ke.round(l+f*c))&&(i|=1<<n-f-1);return i},r.prototype.isWhiteOrBlackRectangle=function(e,t,n,i){var o=3;e=new qt(e.getX()-o,e.getY()+o),t=new qt(t.getX()-o,t.getY()-o),n=new qt(n.getX()+o,n.getY()-o),i=new qt(i.getX()+o,i.getY()+o);var a=this.getColor(i,e);if(a===0)return!1;var s=this.getColor(e,t);return s!==a||(s=this.getColor(t,n),s!==a)?!1:(s=this.getColor(n,i),s===a)},r.prototype.getColor=function(e,t){for(var n=this.distancePoint(e,t),i=(t.getX()-e.getX())/n,o=(t.getY()-e.getY())/n,a=0,s=e.getX(),l=e.getY(),u=this.image.get(e.getX(),e.getY()),c=Math.ceil(n),f=0;f<c;f++)s+=i,l+=o,this.image.get(ke.round(s),ke.round(l))!==u&&a++;var d=a/n;return d>.1&&d<.9?0:d<=.1===u?1:-1},r.prototype.getFirstDifferent=function(e,t,n,i){for(var o=e.getX()+n,a=e.getY()+i;this.isValid(o,a)&&this.image.get(o,a)===t;)o+=n,a+=i;for(o-=n,a-=i;this.isValid(o,a)&&this.image.get(o,a)===t;)o+=n;for(o-=n;this.isValid(o,a)&&this.image.get(o,a)===t;)a+=i;return a-=i,new qt(o,a)},r.prototype.expandSquare=function(e,t,n){var i=n/(2*t),o=e[0].getX()-e[2].getX(),a=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,l=(e[0].getY()+e[2].getY())/2,u=new oe(s+i*o,l+i*a),c=new oe(s-i*o,l-i*a);o=e[1].getX()-e[3].getX(),a=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,l=(e[1].getY()+e[3].getY())/2;var f=new oe(s+i*o,l+i*a),d=new oe(s-i*o,l-i*a),h=[u,f,c,d];return h},r.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},r.prototype.isValidPoint=function(e){var t=ke.round(e.getX()),n=ke.round(e.getY());return this.isValid(t,n)},r.prototype.distancePoint=function(e,t){return ke.distance(e.getX(),e.getY(),t.getX(),t.getY())},r.prototype.distanceResultPoint=function(e,t){return ke.distance(e.getX(),e.getY(),t.getX(),t.getY())},r.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Ce.truncDivision(this.nbLayers-4,8)+1)+15},r})(),Vo=(function(){function r(){}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n=null,i=new Jb(e.getBlackMatrix()),o=null,a=null;try{var s=i.detectMirror(!1);o=s.getPoints(),this.reportFoundResultPoints(t,o),a=new $c().decode(s)}catch(f){n=f}if(a==null)try{var s=i.detectMirror(!0);o=s.getPoints(),this.reportFoundResultPoints(t,o),a=new $c().decode(s)}catch(f){throw n??f}var l=new Lt(a.getText(),a.getRawBytes(),a.getNumBits(),o,ce.AZTEC,Ze.currentTimeMillis()),u=a.getByteSegments();u!=null&&l.putMetadata(Tt.BYTE_SEGMENTS,u);var c=a.getECLevel();return c!=null&&l.putMetadata(Tt.ERROR_CORRECTION_LEVEL,c),l},r.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var n=e.get(Je.NEED_RESULT_POINT_CALLBACK);n!=null&&t.forEach(function(i,o,a){n.foundPossibleResultPoint(i)})}},r.prototype.reset=function(){},r})(),Qb=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){Qb(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new Vo,t)||this}return e})(ci);var mt=(function(){function r(){}return r.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var n=t&&t.get(Je.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),o=this.doDecode(i,t),a=o.getResultMetadata(),s=270;a!==null&&a.get(Tt.ORIENTATION)===!0&&(s=s+a.get(Tt.ORIENTATION)%360),o.putMetadata(Tt.ORIENTATION,s);var l=o.getResultPoints();if(l!==null)for(var u=i.getHeight(),c=0;c<l.length;c++)l[c]=new oe(u-l[c].getY()-1,l[c].getX());return o}else throw new B}},r.prototype.reset=function(){},r.prototype.doDecode=function(e,t){var n=e.getWidth(),i=e.getHeight(),o=new Ct(n),a=t&&t.get(Je.TRY_HARDER)===!0,s=Math.max(1,i>>(a?8:5)),l;a?l=i:l=15;for(var u=Math.trunc(i/2),c=0;c<l;c++){var f=Math.trunc((c+1)/2),d=(c&1)===0,h=u+s*(d?f:-f);if(h<0||h>=i)break;try{o=e.getBlackRow(h,o)}catch{continue}for(var p=function(x){if(x===1&&(o.reverse(),t&&t.get(Je.NEED_RESULT_POINT_CALLBACK)===!0)){var w=new Map;t.forEach(function(E,I){return w.set(I,E)}),w.delete(Je.NEED_RESULT_POINT_CALLBACK),t=w}try{var _=y.decodeRow(h,o,t);if(x===1){_.putMetadata(Tt.ORIENTATION,180);var C=_.getResultPoints();C!==null&&(C[0]=new oe(n-C[0].getX()-1,C[0].getY()),C[1]=new oe(n-C[1].getX()-1,C[1].getY()))}return{value:_}}catch{}},y=this,m=0;m<2;m++){var g=p(m);if(typeof g=="object")return g.value}}throw new B},r.recordPattern=function(e,t,n){for(var i=n.length,o=0;o<i;o++)n[o]=0;var a=e.getSize();if(t>=a)throw new B;for(var s=!e.get(t),l=0,u=t;u<a;){if(e.get(u)!==s)n[l]++;else{if(++l===i)break;n[l]=1,s=!s}u++}if(!(l===i||l===i-1&&u===a))throw new B},r.recordPatternInReverse=function(e,t,n){for(var i=n.length,o=e.get(t);t>0&&i>=0;)e.get(--t)!==o&&(i--,o=!o);if(i>=0)throw new B;r.recordPattern(e,t+1,n)},r.patternMatchVariance=function(e,t,n){for(var i=e.length,o=0,a=0,s=0;s<i;s++)o+=e[s],a+=t[s];if(o<a)return Number.POSITIVE_INFINITY;var l=o/a;n*=l;for(var u=0,c=0;c<i;c++){var f=e[c],d=t[c]*l,h=f>d?f-d:d-f;if(h>n)return Number.POSITIVE_INFINITY;u+=h}return u/o},r})(),e3=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Hc=(function(r){e3(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var n=t.getSize(),i=t.getNextSet(0),o=0,a=Int32Array.from([0,0,0,0,0,0]),s=i,l=!1,u=6,c=i;c<n;c++)if(t.get(c)!==l)a[o]++;else{if(o===u-1){for(var f=e.MAX_AVG_VARIANCE,d=-1,h=e.CODE_START_A;h<=e.CODE_START_C;h++){var p=mt.patternMatchVariance(a,e.CODE_PATTERNS[h],e.MAX_INDIVIDUAL_VARIANCE);p<f&&(f=p,d=h)}if(d>=0&&t.isRange(Math.max(0,s-(c-s)/2),s,!1))return Int32Array.from([s,c,d]);s+=a[0]+a[1],a=a.slice(2,a.length),a[o-1]=0,a[o]=0,o--}else o++;a[o]=1,l=!l}throw new B},e.decodeCode=function(t,n,i){mt.recordPattern(t,i,n);for(var o=e.MAX_AVG_VARIANCE,a=-1,s=0;s<e.CODE_PATTERNS.length;s++){var l=e.CODE_PATTERNS[s],u=this.patternMatchVariance(n,l,e.MAX_INDIVIDUAL_VARIANCE);u<o&&(o=u,a=s)}if(a>=0)return a;throw new B},e.prototype.decodeRow=function(t,n,i){var o=i&&i.get(Je.ASSUME_GS1)===!0,a=e.findStartPattern(n),s=a[2],l=0,u=new Uint8Array(20);u[l++]=s;var c;switch(s){case e.CODE_START_A:c=e.CODE_CODE_A;break;case e.CODE_START_B:c=e.CODE_CODE_B;break;case e.CODE_START_C:c=e.CODE_CODE_C;break;default:throw new Y}for(var f=!1,d=!1,h="",p=a[0],y=a[1],m=Int32Array.from([0,0,0,0,0,0]),g=0,x=0,w=s,_=0,C=!0,E=!1,I=!1;!f;){var D=d;switch(d=!1,g=x,x=e.decodeCode(n,m,y),u[l++]=x,x!==e.CODE_STOP&&(C=!0),x!==e.CODE_STOP&&(_++,w+=_*x),p=y,y+=m.reduce(function(me,he){return me+he},0),x){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new Y}switch(c){case e.CODE_CODE_A:if(x<64)I===E?h+=String.fromCharCode(32+x):h+=String.fromCharCode(32+x+128),I=!1;else if(x<96)I===E?h+=String.fromCharCode(x-64):h+=String.fromCharCode(x+64),I=!1;else switch(x!==e.CODE_STOP&&(C=!1),x){case e.CODE_FNC_1:o&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!E&&I?(E=!0,I=!1):E&&I?(E=!1,I=!1):I=!0;break;case e.CODE_SHIFT:d=!0,c=e.CODE_CODE_B;break;case e.CODE_CODE_B:c=e.CODE_CODE_B;break;case e.CODE_CODE_C:c=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_B:if(x<96)I===E?h+=String.fromCharCode(32+x):h+=String.fromCharCode(32+x+128),I=!1;else switch(x!==e.CODE_STOP&&(C=!1),x){case e.CODE_FNC_1:o&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!E&&I?(E=!0,I=!1):E&&I?(E=!1,I=!1):I=!0;break;case e.CODE_SHIFT:d=!0,c=e.CODE_CODE_A;break;case e.CODE_CODE_A:c=e.CODE_CODE_A;break;case e.CODE_CODE_C:c=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_C:if(x<100)x<10&&(h+="0"),h+=x;else switch(x!==e.CODE_STOP&&(C=!1),x){case e.CODE_FNC_1:o&&(h.length===0?h+="]C1":h+="");break;case e.CODE_CODE_A:c=e.CODE_CODE_A;break;case e.CODE_CODE_B:c=e.CODE_CODE_B;break;case e.CODE_STOP:f=!0;break}break}D&&(c=c===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var M=y-p;if(y=n.getNextUnset(y),!n.isRange(y,Math.min(n.getSize(),y+(y-p)/2),!1))throw new B;if(w-=_*g,w%103!==g)throw new ut;var j=h.length;if(j===0)throw new B;j>0&&C&&(c===e.CODE_CODE_C?h=h.substring(0,j-2):h=h.substring(0,j-1));for(var X=(a[1]+a[0])/2,F=p+M/2,k=u.length,W=new Uint8Array(k),Z=0;Z<k;Z++)W[Z]=u[Z];var ue=[new oe(X,t),new oe(F,t)];return new Lt(h,W,0,ue,ce.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e})(mt),t3=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),as=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gc=(function(r){t3(e,r);function e(t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var i=r.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=n,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,n,i){var o,a,s,l,u=this.counters;u.fill(0),this.decodeRowResult="";var c=e.findAsteriskPattern(n,u),f=n.getNextSet(c[1]),d=n.getSize(),h,p;do{e.recordPattern(n,f,u);var y=e.toNarrowWidePattern(u);if(y<0)throw new B;h=e.patternToChar(y),this.decodeRowResult+=h,p=f;try{for(var m=(o=void 0,as(u)),g=m.next();!g.done;g=m.next()){var x=g.value;f+=x}}catch(k){o={error:k}}finally{try{g&&!g.done&&(a=m.return)&&a.call(m)}finally{if(o)throw o.error}}f=n.getNextSet(f)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var w=0;try{for(var _=as(u),C=_.next();!C.done;C=_.next()){var x=C.value;w+=x}}catch(k){s={error:k}}finally{try{C&&!C.done&&(l=_.return)&&l.call(_)}finally{if(s)throw s.error}}var E=f-p-w;if(f!==d&&E*2<w)throw new B;if(this.usingCheckDigit){for(var I=this.decodeRowResult.length-1,D=0,M=0;M<I;M++)D+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(M));if(this.decodeRowResult.charAt(I)!==e.ALPHABET_STRING.charAt(D%43))throw new ut;this.decodeRowResult=this.decodeRowResult.substring(0,I)}if(this.decodeRowResult.length===0)throw new B;var j;this.extendedMode?j=e.decodeExtended(this.decodeRowResult):j=this.decodeRowResult;var X=(c[1]+c[0])/2,F=p+w/2;return new Lt(j,null,0,[new oe(X,t),new oe(F,t)],ce.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,n){for(var i=t.getSize(),o=t.getNextSet(0),a=0,s=o,l=!1,u=n.length,c=o;c<i;c++)if(t.get(c)!==l)n[a]++;else{if(a===u-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,s-Math.floor((c-s)/2)),s,!1))return[s,c];s+=n[0]+n[1],n.copyWithin(0,2,2+a-1),n[a-1]=0,n[a]=0,a--}else a++;n[a]=1,l=!l}throw new B},e.toNarrowWidePattern=function(t){var n,i,o=t.length,a=0,s;do{var l=2147483647;try{for(var u=(n=void 0,as(t)),c=u.next();!c.done;c=u.next()){var f=c.value;f<l&&f>a&&(l=f)}}catch(y){n={error:y}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}a=l,s=0;for(var d=0,h=0,p=0;p<o;p++){var f=t[p];f>a&&(h|=1<<o-1-p,s++,d+=f)}if(s===3){for(var p=0;p<o&&s>0;p++){var f=t[p];if(f>a&&(s--,f*2>=d))return-1}return h}}while(s>3);return-1},e.patternToChar=function(t){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===t)return e.ALPHABET_STRING.charAt(n);if(t===e.ASTERISK_ENCODING)return"*";throw new B},e.decodeExtended=function(t){for(var n=t.length,i="",o=0;o<n;o++){var a=t.charAt(o);if(a==="+"||a==="$"||a==="%"||a==="/"){var s=t.charAt(o+1),l="\0";switch(a){case"+":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new Y;break;case"$":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new Y;break;case"%":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s==="X"||s==="Y"||s==="Z")l="";else throw new Y;break;case"/":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new Y;break}i+=l,o++}else i+=a}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e})(mt),r3=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),ss=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Wc=(function(r){r3(e,r);function e(){var t=r.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,n,i){var o,a,s,l,u=this.findAsteriskPattern(n),c=n.getNextSet(u[1]),f=n.getSize(),d=this.counters;d.fill(0),this.decodeRowResult="";var h,p;do{e.recordPattern(n,c,d);var y=this.toPattern(d);if(y<0)throw new B;h=this.patternToChar(y),this.decodeRowResult+=h,p=c;try{for(var m=(o=void 0,ss(d)),g=m.next();!g.done;g=m.next()){var x=g.value;c+=x}}catch(M){o={error:M}}finally{try{g&&!g.done&&(a=m.return)&&a.call(m)}finally{if(o)throw o.error}}c=n.getNextSet(c)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var w=0;try{for(var _=ss(d),C=_.next();!C.done;C=_.next()){var x=C.value;w+=x}}catch(M){s={error:M}}finally{try{C&&!C.done&&(l=_.return)&&l.call(_)}finally{if(s)throw s.error}}if(c===f||!n.get(c))throw new B;if(this.decodeRowResult.length<2)throw new B;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var E=this.decodeExtended(this.decodeRowResult),I=(u[1]+u[0])/2,D=p+w/2;return new Lt(E,null,0,[new oe(I,t),new oe(D,t)],ce.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var n=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var o=this.counters,a=i,s=!1,l=o.length,u=0,c=i;c<n;c++)if(t.get(c)!==s)o[u]++;else{if(u===l-1){if(this.toPattern(o)===e.ASTERISK_ENCODING)return new Int32Array([a,c]);a+=o[0]+o[1],o.copyWithin(0,2,2+u-1),o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,s=!s}throw new B},e.prototype.toPattern=function(t){var n,i,o=0;try{for(var a=ss(t),s=a.next();!s.done;s=a.next()){var l=s.value;o+=l}}catch(p){n={error:p}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}for(var u=0,c=t.length,f=0;f<c;f++){var d=Math.round(t[f]*9/o);if(d<1||d>4)return-1;if((f&1)===0)for(var h=0;h<d;h++)u=u<<1|1;else u<<=d}return u},e.prototype.patternToChar=function(t){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===t)return e.ALPHABET_STRING.charAt(n);throw new B},e.prototype.decodeExtended=function(t){for(var n=t.length,i="",o=0;o<n;o++){var a=t.charAt(o);if(a>="a"&&a<="d"){if(o>=n-1)throw new Y;var s=t.charAt(o+1),l="\0";switch(a){case"d":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new Y;break;case"a":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new Y;break;case"b":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s>="X"&&s<="Z")l="";else throw new Y;break;case"c":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new Y;break}i+=l,o++}else i+=a}return i},e.prototype.checkChecksums=function(t){var n=t.length;this.checkOneChecksum(t,n-2,20),this.checkOneChecksum(t,n-1,15)},e.prototype.checkOneChecksum=function(t,n,i){for(var o=1,a=0,s=n-1;s>=0;s--)a+=o*e.ALPHABET_STRING.indexOf(t.charAt(s)),++o>i&&(o=1);if(t.charAt(n)!==e.ALPHABET_STRING[a%47])throw new ut},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e})(mt),n3=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),i3=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qc=(function(r){n3(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,n,i){var o,a,s=this.decodeStart(n),l=this.decodeEnd(n),u=new Ae;e.decodeMiddle(n,s[1],l[0],u);var c=u.toString(),f=null;i!=null&&(f=i.get(Je.ALLOWED_LENGTHS)),f==null&&(f=e.DEFAULT_ALLOWED_LENGTHS);var d=c.length,h=!1,p=0;try{for(var y=i3(f),m=y.next();!m.done;m=y.next()){var g=m.value;if(d===g){h=!0;break}g>p&&(p=g)}}catch(_){o={error:_}}finally{try{m&&!m.done&&(a=y.return)&&a.call(y)}finally{if(o)throw o.error}}if(!h&&d>p&&(h=!0),!h)throw new Y;var x=[new oe(s[1],t),new oe(l[0],t)],w=new Lt(c,null,0,x,ce.ITF,new Date().getTime());return w},e.decodeMiddle=function(t,n,i,o){var a=new Int32Array(10),s=new Int32Array(5),l=new Int32Array(5);for(a.fill(0),s.fill(0),l.fill(0);n<i;){mt.recordPattern(t,n,a);for(var u=0;u<5;u++){var c=2*u;s[u]=a[c],l[u]=a[c+1]}var f=e.decodeDigit(s);o.append(f.toString()),f=this.decodeDigit(l),o.append(f.toString()),a.forEach(function(d){n+=d})}},e.prototype.decodeStart=function(t){var n=e.skipWhiteSpace(t),i=e.findGuardPattern(t,n,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,n){var i=this.narrowLineWidth*10;i=i<n?i:n;for(var o=n-1;i>0&&o>=0&&!t.get(o);o--)i--;if(i!==0)throw new B},e.skipWhiteSpace=function(t){var n=t.getSize(),i=t.getNextSet(0);if(i===n)throw new B;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var n=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,n,e.END_PATTERN_REVERSED[0])}catch(a){a instanceof B&&(i=e.findGuardPattern(t,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var o=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-o,i}finally{t.reverse()}},e.findGuardPattern=function(t,n,i){var o=i.length,a=new Int32Array(o),s=t.getSize(),l=!1,u=0,c=n;a.fill(0);for(var f=n;f<s;f++)if(t.get(f)!==l)a[u]++;else{if(u===o-1){if(mt.patternMatchVariance(a,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[c,f];c+=a[0]+a[1],Ze.arraycopy(a,2,a,0,u-1),a[u-1]=0,a[u]=0,u--}else u++;a[u]=1,l=!l}throw new B},e.decodeDigit=function(t){for(var n=e.MAX_AVG_VARIANCE,i=-1,o=e.PATTERNS.length,a=0;a<o;a++){var s=e.PATTERNS[a],l=mt.patternMatchVariance(t,s,e.MAX_INDIVIDUAL_VARIANCE);l<n?(n=l,i=a):l===n&&(i=-1)}if(i>=0)return i%10;throw new B},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e})(mt),o3=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),ii=(function(r){o3(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var n=!1,i,o=0,a=Int32Array.from([0,0,0]);!n;){a=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,o,!1,this.START_END_PATTERN,a);var s=i[0];o=i[1];var l=s-(o-s);l>=0&&(n=t.isRange(l,s,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var n=t.length;if(n===0)return!1;var i=parseInt(t.charAt(n-1),10);return e.getStandardUPCEANChecksum(t.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(t){for(var n=t.length,i=0,o=n-1;o>=0;o-=2){var a=t.charAt(o).charCodeAt(0)-48;if(a<0||a>9)throw new Y;i+=a}i*=3;for(var o=n-2;o>=0;o-=2){var a=t.charAt(o).charCodeAt(0)-48;if(a<0||a>9)throw new Y;i+=a}return(1e3-i)%10},e.decodeEnd=function(t,n){return e.findGuardPattern(t,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,n,i,o){return this.findGuardPattern(t,n,i,o,new Int32Array(o.length))},e.findGuardPattern=function(t,n,i,o,a){var s=t.getSize();n=i?t.getNextUnset(n):t.getNextSet(n);for(var l=0,u=n,c=o.length,f=i,d=n;d<s;d++)if(t.get(d)!==f)a[l]++;else{if(l===c-1){if(mt.patternMatchVariance(a,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([u,d]);u+=a[0]+a[1];for(var h=a.slice(2,a.length),p=0;p<l-1;p++)a[p]=h[p];a[l-1]=0,a[l]=0,l--}else l++;a[l]=1,f=!f}throw new B},e.decodeDigit=function(t,n,i,o){this.recordPattern(t,i,n);for(var a=this.MAX_AVG_VARIANCE,s=-1,l=o.length,u=0;u<l;u++){var c=o[u],f=mt.patternMatchVariance(n,c,e.MAX_INDIVIDUAL_VARIANCE);f<a&&(a=f,s=u)}if(s>=0)return s;throw new B},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e})(mt),a3=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s3=(function(){function r(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return r.prototype.decodeRow=function(e,t,n){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,n,i),a=i.toString(),s=r.parseExtensionString(a),l=[new oe((n[0]+n[1])/2,e),new oe(o,e)],u=new Lt(a,null,0,l,ce.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&u.putAllMetadata(s),u},r.prototype.decodeMiddle=function(e,t,n){var i,o,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=e.getSize(),l=t[1],u=0,c=0;c<5&&l<s;c++){var f=ii.decodeDigit(e,a,l,ii.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var d=(i=void 0,a3(a)),h=d.next();!h.done;h=d.next()){var p=h.value;l+=p}}catch(m){i={error:m}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}f>=10&&(u|=1<<4-c),c!==4&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(n.length!==5)throw new B;var y=this.determineCheckDigit(u);if(r.extensionChecksum(n.toString())!==y)throw new B;return l},r.extensionChecksum=function(e){for(var t=e.length,n=0,i=t-2;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;n*=3;for(var i=t-1;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;return n*=3,n%10},r.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new B},r.parseExtensionString=function(e){if(e.length!==5)return null;var t=r.parseExtension5String(e);return t==null?null:new Map([[Tt.SUGGESTED_PRICE,t]])},r.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var n=parseInt(e.substring(1)),i=(n/100).toString(),o=n%100,a=o<10?"0"+o:o.toString();return t+i+"."+a},r})(),l3=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},u3=(function(){function r(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return r.prototype.decodeRow=function(e,t,n){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,n,i),a=i.toString(),s=r.parseExtensionString(a),l=[new oe((n[0]+n[1])/2,e),new oe(o,e)],u=new Lt(a,null,0,l,ce.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&u.putAllMetadata(s),u},r.prototype.decodeMiddle=function(e,t,n){var i,o,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=e.getSize(),l=t[1],u=0,c=0;c<2&&l<s;c++){var f=ii.decodeDigit(e,a,l,ii.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var d=(i=void 0,l3(a)),h=d.next();!h.done;h=d.next()){var p=h.value;l+=p}}catch(y){i={error:y}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}f>=10&&(u|=1<<1-c),c!==1&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(n.length!==2)throw new B;if(parseInt(n.toString())%4!==u)throw new B;return l},r.parseExtensionString=function(e){return e.length!==2?null:new Map([[Tt.ISSUE_NUMBER,parseInt(e)]])},r})(),c3=(function(){function r(){}return r.decodeRow=function(e,t,n){var i=ii.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var o=new s3;return o.decodeRow(e,t,i)}catch{var a=new u3;return a.decodeRow(e,t,i)}},r.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),r})(),f3=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),vt=(function(r){f3(e,r);function e(){var t=r.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(s){return Int32Array.from(s)});for(var n=10;n<20;n++){for(var i=e.L_PATTERNS[n-10],o=new Int32Array(i.length),a=0;a<i.length;a++)o[a]=i[i.length-a-1];e.L_AND_G_PATTERNS[n]=o}return t}return e.prototype.decodeRow=function(t,n,i){var o=e.findStartGuardPattern(n),a=i==null?null:i.get(Je.NEED_RESULT_POINT_CALLBACK);if(a!=null){var s=new oe((o[0]+o[1])/2,t);a.foundPossibleResultPoint(s)}var l=this.decodeMiddle(n,o,this.decodeRowStringBuffer),u=l.rowOffset,c=l.resultString;if(a!=null){var f=new oe(u,t);a.foundPossibleResultPoint(f)}var d=e.decodeEnd(n,u);if(a!=null){var h=new oe((d[0]+d[1])/2,t);a.foundPossibleResultPoint(h)}var p=d[1],y=p+(p-d[0]);if(y>=n.getSize()||!n.isRange(p,y,!1))throw new B;var m=c.toString();if(m.length<8)throw new Y;if(!e.checkChecksum(m))throw new ut;var g=(o[1]+o[0])/2,x=(d[1]+d[0])/2,w=this.getBarcodeFormat(),_=[new oe(g,t),new oe(x,t)],C=new Lt(m,null,0,_,w,new Date().getTime()),E=0;try{var I=c3.decodeRow(t,n,d[1]);C.putMetadata(Tt.UPC_EAN_EXTENSION,I.getText()),C.putAllMetadata(I.getResultMetadata()),C.addResultPoints(I.getResultPoints()),E=I.getText().length}catch{}var D=i==null?null:i.get(Je.ALLOWED_EAN_EXTENSIONS);if(D!=null){var M=!1;for(var j in D)if(E.toString()===j){M=!0;break}if(!M)throw new B}return w===ce.EAN_13||ce.UPC_A,C},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var n=t.length;if(n===0)return!1;var i=parseInt(t.charAt(n-1),10);return e.getStandardUPCEANChecksum(t.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(t){for(var n=t.length,i=0,o=n-1;o>=0;o-=2){var a=t.charAt(o).charCodeAt(0)-48;if(a<0||a>9)throw new Y;i+=a}i*=3;for(var o=n-2;o>=0;o-=2){var a=t.charAt(o).charCodeAt(0)-48;if(a<0||a>9)throw new Y;i+=a}return(1e3-i)%10},e.decodeEnd=function(t,n){return e.findGuardPattern(t,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e})(ii),d3=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),zc=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xs=(function(r){d3(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,n,i){var o,a,s,l,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var c=t.getSize(),f=n[1],d=0,h=0;h<6&&f<c;h++){var p=vt.decodeDigit(t,u,f,vt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+p%10);try{for(var y=(o=void 0,zc(u)),m=y.next();!m.done;m=y.next()){var g=m.value;f+=g}}catch(C){o={error:C}}finally{try{m&&!m.done&&(a=y.return)&&a.call(y)}finally{if(o)throw o.error}}p>=10&&(d|=1<<5-h)}i=e.determineFirstDigit(i,d);var x=vt.findGuardPattern(t,f,!0,vt.MIDDLE_PATTERN,new Int32Array(vt.MIDDLE_PATTERN.length).fill(0));f=x[1];for(var h=0;h<6&&f<c;h++){var p=vt.decodeDigit(t,u,f,vt.L_PATTERNS);i+=String.fromCharCode(48+p);try{for(var w=(s=void 0,zc(u)),_=w.next();!_.done;_=w.next()){var g=_.value;f+=g}}catch(I){s={error:I}}finally{try{_&&!_.done&&(l=w.return)&&l.call(w)}finally{if(s)throw s.error}}}return{rowOffset:f,resultString:i}},e.prototype.getBarcodeFormat=function(){return ce.EAN_13},e.determineFirstDigit=function(t,n){for(var i=0;i<10;i++)if(n===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new B},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e})(vt),h3=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Kc=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xc=(function(r){h3(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,n,i){var o,a,s,l,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var c=t.getSize(),f=n[1],d=0;d<4&&f<c;d++){var h=vt.decodeDigit(t,u,f,vt.L_PATTERNS);i+=String.fromCharCode(48+h);try{for(var p=(o=void 0,Kc(u)),y=p.next();!y.done;y=p.next()){var m=y.value;f+=m}}catch(_){o={error:_}}finally{try{y&&!y.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}}var g=vt.findGuardPattern(t,f,!0,vt.MIDDLE_PATTERN,new Int32Array(vt.MIDDLE_PATTERN.length).fill(0));f=g[1];for(var d=0;d<4&&f<c;d++){var h=vt.decodeDigit(t,u,f,vt.L_PATTERNS);i+=String.fromCharCode(48+h);try{for(var x=(s=void 0,Kc(u)),w=x.next();!w.done;w=x.next()){var m=w.value;f+=m}}catch(E){s={error:E}}finally{try{w&&!w.done&&(l=x.return)&&l.call(x)}finally{if(s)throw s.error}}}return{rowOffset:f,resultString:i}},e.prototype.getBarcodeFormat=function(){return ce.EAN_8},e})(vt),p3=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Yc=(function(r){p3(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.ean13Reader=new Xs,t}return e.prototype.getBarcodeFormat=function(){return ce.UPC_A},e.prototype.decode=function(t,n){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,n,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,n,i))},e.prototype.decodeMiddle=function(t,n,i){return this.ean13Reader.decodeMiddle(t,n,i)},e.prototype.maybeReturnResult=function(t){var n=t.getText();if(n.charAt(0)==="0"){var i=new Lt(n.substring(1),null,null,t.getResultPoints(),ce.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new B},e.prototype.reset=function(){this.ean13Reader.reset()},e})(vt),v3=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),g3=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Zc=(function(r){v3(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,n,i){var o,a,s=this.decodeMiddleCounters.map(function(m){return m});s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var l=t.getSize(),u=n[1],c=0,f=0;f<6&&u<l;f++){var d=e.decodeDigit(t,s,u,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+d%10);try{for(var h=(o=void 0,g3(s)),p=h.next();!p.done;p=h.next()){var y=p.value;u+=y}}catch(m){o={error:m}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}d>=10&&(c|=1<<5-f)}return e.determineNumSysAndCheckDigit(new Ae(i),c),u},e.prototype.decodeEnd=function(t,n){return e.findGuardPatternWithoutCounters(t,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return vt.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,n){for(var i=0;i<=1;i++)for(var o=0;o<10;o++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][o]){t.insert(0,"0"+i),t.append("0"+o);return}throw B.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return ce.UPC_E},e.convertUPCEtoUPCA=function(t){var n=t.slice(1,7).split("").map(function(a){return a.charCodeAt(0)}),i=new Ae;i.append(t.charAt(0));var o=n[5];switch(o){case 0:case 1:case 2:i.appendChars(n,0,2),i.append(o),i.append("0000"),i.appendChars(n,2,3);break;case 3:i.appendChars(n,0,3),i.append("00000"),i.appendChars(n,3,2);break;case 4:i.appendChars(n,0,4),i.append("00000"),i.append(n[4]);break;default:i.appendChars(n,0,5),i.append("0000"),i.append(o);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e})(vt),y3=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Jc=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ls=(function(r){y3(e,r);function e(t){var n=r.call(this)||this,i=t==null?null:t.get(Je.POSSIBLE_FORMATS),o=[];return i!=null&&(i.indexOf(ce.EAN_13)>-1&&o.push(new Xs),i.indexOf(ce.UPC_A)>-1&&o.push(new Yc),i.indexOf(ce.EAN_8)>-1&&o.push(new Xc),i.indexOf(ce.UPC_E)>-1&&o.push(new Zc)),o.length===0&&(o.push(new Xs),o.push(new Yc),o.push(new Xc),o.push(new Zc)),n.readers=o,n}return e.prototype.decodeRow=function(t,n,i){var o,a;try{for(var s=Jc(this.readers),l=s.next();!l.done;l=s.next()){var u=l.value;try{var c=u.decodeRow(t,n,i),f=c.getBarcodeFormat()===ce.EAN_13&&c.getText().charAt(0)==="0",d=i==null?null:i.get(Je.POSSIBLE_FORMATS),h=d==null||d.includes(ce.UPC_A);if(f&&h){var p=c.getRawBytes(),y=new Lt(c.getText().substring(1),p,p?p.length:null,c.getResultPoints(),ce.UPC_A);return y.putAllMetadata(c.getResultMetadata()),y}return c}catch{}}}catch(m){o={error:m}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}throw new B},e.prototype.reset=function(){var t,n;try{for(var i=Jc(this.readers),o=i.next();!o.done;o=i.next()){var a=o.value;a.reset()}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e})(mt),m3=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),x3=(function(r){m3(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,n,i){var o=this.getValidRowData(n);if(!o)throw new B;var a=this.codaBarDecodeRow(o.row);if(!a)throw new B;return new Lt(a,null,0,[new oe(o.left,t),new oe(o.right,t)],ce.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var n=t.toArray(),i=n.indexOf(!0);if(i===-1)return null;var o=n.lastIndexOf(!0);if(o<=i)return null;n=n.slice(i,o+1);for(var a=[],s=n[0],l=1,u=1;u<n.length;u++)n[u]===s?l++:(s=n[u],a.push(l),l=1);return a.push(l),a.length<23&&(a.length+1)%8!==0?null:{row:a,left:i,right:o}},e.prototype.codaBarDecodeRow=function(t){for(var n=[],i=Math.ceil(t.reduce(function(l,u){return(l+u)/2},0));t.length>0;){var o=t.splice(0,8).splice(0,7),a=o.map(function(l){return l<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[a]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[a])}var s=n.join("");return this.validCodaBarString(s)?s:null},e.prototype.validCodaBarString=function(t){var n=/^[A-D].{1,}[A-D]$/;return n.test(t)},e})(mt),w3=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),_3=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xn=(function(r){w3(e,r);function e(){var t=r.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,n){for(var i=0;i<n.length;i++)if(mt.patternMatchVariance(t,n[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new B},e.count=function(t){return ke.sum(new Int32Array(t))},e.increment=function(t,n){for(var i=0,o=n[0],a=1;a<t.length;a++)n[a]>o&&(o=n[a],i=a);t[i]++},e.decrement=function(t,n){for(var i=0,o=n[0],a=1;a<t.length;a++)n[a]<o&&(o=n[a],i=a);t[i]--},e.isFinderPattern=function(t){var n,i,o=t[0]+t[1],a=o+t[2]+t[3],s=o/a;if(s>=e.MIN_FINDER_PATTERN_RATIO&&s<=e.MAX_FINDER_PATTERN_RATIO){var l=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var c=_3(t),f=c.next();!f.done;f=c.next()){var d=f.value;d>u&&(u=d),d<l&&(l=d)}}catch(h){n={error:h}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return u<10*l}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e})(mt),Ho=(function(){function r(e,t){this.value=e,this.checksumPortion=t}return r.prototype.getValue=function(){return this.value},r.prototype.getChecksumPortion=function(){return this.checksumPortion},r.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},r.prototype.hashCode=function(){return this.value^this.checksumPortion},r})(),$0=(function(){function r(e,t,n,i,o){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new oe(n,o)),this.resultPoints.push(new oe(i,o))}return r.prototype.getValue=function(){return this.value},r.prototype.getStartEnd=function(){return this.startEnd},r.prototype.getResultPoints=function(){return this.resultPoints},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.prototype.hashCode=function(){return this.value},r})(),b3=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vn=(function(){function r(){}return r.getRSSvalue=function(e,t,n){var i,o,a=0;try{for(var s=b3(e),l=s.next();!l.done;l=s.next()){var u=l.value;a+=u}}catch(x){i={error:x}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}for(var c=0,f=0,d=e.length,h=0;h<d-1;h++){var p=void 0;for(p=1,f|=1<<h;p<e[h];p++,f&=~(1<<h)){var y=r.combins(a-p-1,d-h-2);if(n&&f===0&&a-p-(d-h-1)>=d-h-1&&(y-=r.combins(a-p-(d-h),d-h-2)),d-h-1>1){for(var m=0,g=a-p-(d-h-2);g>t;g--)m+=r.combins(a-p-g-1,d-h-3);y-=m*(d-1-h)}else a-p>t&&y--;c+=y}a-=p}return c},r.combins=function(e,t){var n,i;e-t>t?(i=t,n=e-t):(i=e-t,n=t);for(var o=1,a=1,s=e;s>n;s--)o*=s,a<=i&&(o/=a,a++);for(;a<=i;)o/=a,a++;return o},r})(),E3=(function(){function r(){}return r.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var n=12*t,i=new Ct(n),o=0,a=e[0],s=a.getRightChar().getValue(),l=11;l>=0;--l)(s&1<<l)!==0&&i.set(o),o++;for(var l=1;l<e.length;++l){for(var u=e[l],c=u.getLeftChar().getValue(),f=11;f>=0;--f)(c&1<<f)!==0&&i.set(o),o++;if(u.getRightChar()!==null)for(var d=u.getRightChar().getValue(),f=11;f>=0;--f)(d&1<<f)!==0&&i.set(o),o++}return i},r})(),vn=(function(){function r(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return r.prototype.getDecodedInformation=function(){return this.decodedInformation},r.prototype.isFinished=function(){return this.finished},r})(),kl=(function(){function r(e){this.newPosition=e}return r.prototype.getNewPosition=function(){return this.newPosition},r})(),A3=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),fr=(function(r){A3(e,r);function e(t,n){var i=r.call(this,t)||this;return i.value=n,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e})(kl),C3=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),gn=(function(r){C3(e,r);function e(t,n,i){var o=r.call(this,t)||this;return i?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=n,o}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e})(kl),S3=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Ln=(function(r){S3(e,r);function e(t,n,i){var o=r.call(this,t)||this;if(n<0||n>10||i<0||i>10)throw new Y;return o.firstDigit=n,o.secondDigit=i,o}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e})(kl),vo=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},I3=(function(){function r(){}return r.parseFieldsInGeneralPurpose=function(e){var t,n,i,o,a,s,l,u;if(!e)return null;if(e.length<2)throw new B;var c=e.substring(0,2);try{for(var f=vo(r.TWO_DIGIT_DATA_LENGTH),d=f.next();!d.done;d=f.next()){var h=d.value;if(h[0]===c)return h[1]===r.VARIABLE_LENGTH?r.processVariableAI(2,h[2],e):r.processFixedAI(2,h[1],e)}}catch(E){t={error:E}}finally{try{d&&!d.done&&(n=f.return)&&n.call(f)}finally{if(t)throw t.error}}if(e.length<3)throw new B;var p=e.substring(0,3);try{for(var y=vo(r.THREE_DIGIT_DATA_LENGTH),m=y.next();!m.done;m=y.next()){var h=m.value;if(h[0]===p)return h[1]===r.VARIABLE_LENGTH?r.processVariableAI(3,h[2],e):r.processFixedAI(3,h[1],e)}}catch(E){i={error:E}}finally{try{m&&!m.done&&(o=y.return)&&o.call(y)}finally{if(i)throw i.error}}try{for(var g=vo(r.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),x=g.next();!x.done;x=g.next()){var h=x.value;if(h[0]===p)return h[1]===r.VARIABLE_LENGTH?r.processVariableAI(4,h[2],e):r.processFixedAI(4,h[1],e)}}catch(E){a={error:E}}finally{try{x&&!x.done&&(s=g.return)&&s.call(g)}finally{if(a)throw a.error}}if(e.length<4)throw new B;var w=e.substring(0,4);try{for(var _=vo(r.FOUR_DIGIT_DATA_LENGTH),C=_.next();!C.done;C=_.next()){var h=C.value;if(h[0]===w)return h[1]===r.VARIABLE_LENGTH?r.processVariableAI(4,h[2],e):r.processFixedAI(4,h[1],e)}}catch(E){l={error:E}}finally{try{C&&!C.done&&(u=_.return)&&u.call(_)}finally{if(l)throw l.error}}throw new B},r.processFixedAI=function(e,t,n){if(n.length<e)throw new B;var i=n.substring(0,e);if(n.length<e+t)throw new B;var o=n.substring(e,e+t),a=n.substring(e+t),s="("+i+")"+o,l=r.parseFieldsInGeneralPurpose(a);return l==null?s:s+l},r.processVariableAI=function(e,t,n){var i=n.substring(0,e),o;n.length<e+t?o=n.length:o=e+t;var a=n.substring(e,o),s=n.substring(o),l="("+i+")"+a,u=r.parseFieldsInGeneralPurpose(s);return u==null?l:l+u},r.VARIABLE_LENGTH=[],r.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",r.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",r.VARIABLE_LENGTH,20],["22",r.VARIABLE_LENGTH,29],["30",r.VARIABLE_LENGTH,8],["37",r.VARIABLE_LENGTH,8],["90",r.VARIABLE_LENGTH,30],["91",r.VARIABLE_LENGTH,30],["92",r.VARIABLE_LENGTH,30],["93",r.VARIABLE_LENGTH,30],["94",r.VARIABLE_LENGTH,30],["95",r.VARIABLE_LENGTH,30],["96",r.VARIABLE_LENGTH,30],["97",r.VARIABLE_LENGTH,3],["98",r.VARIABLE_LENGTH,30],["99",r.VARIABLE_LENGTH,30]],r.THREE_DIGIT_DATA_LENGTH=[["240",r.VARIABLE_LENGTH,30],["241",r.VARIABLE_LENGTH,30],["242",r.VARIABLE_LENGTH,6],["250",r.VARIABLE_LENGTH,30],["251",r.VARIABLE_LENGTH,30],["253",r.VARIABLE_LENGTH,17],["254",r.VARIABLE_LENGTH,20],["400",r.VARIABLE_LENGTH,30],["401",r.VARIABLE_LENGTH,30],["402",17],["403",r.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",r.VARIABLE_LENGTH,20],["421",r.VARIABLE_LENGTH,15],["422",3],["423",r.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],r.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",r.VARIABLE_LENGTH,15],["391",r.VARIABLE_LENGTH,18],["392",r.VARIABLE_LENGTH,15],["393",r.VARIABLE_LENGTH,18],["703",r.VARIABLE_LENGTH,30]],r.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",r.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",r.VARIABLE_LENGTH,20],["8003",r.VARIABLE_LENGTH,30],["8004",r.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",r.VARIABLE_LENGTH,30],["8008",r.VARIABLE_LENGTH,12],["8018",18],["8020",r.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",r.VARIABLE_LENGTH,70],["8200",r.VARIABLE_LENGTH,70]],r})(),So=(function(){function r(e){this.buffer=new Ae,this.information=e}return r.prototype.decodeAllCodes=function(e,t){var n=t,i=null;do{var o=this.decodeGeneralPurposeField(n,i),a=I3.parseFieldsInGeneralPurpose(o.getNewString());if(a!=null&&e.append(a),o.isRemaining()?i=""+o.getRemainingValue():i=null,n===o.getNewPosition())break;n=o.getNewPosition()}while(!0);return e.toString()},r.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},r.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new Ln(this.information.getSize(),Ln.FNC1,Ln.FNC1):new Ln(this.information.getSize(),t-1,Ln.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),i=(n-8)/11,o=(n-8)%11;return new Ln(e+7,i,o)},r.prototype.extractNumericValueFromBitArray=function(e,t){return r.extractNumericValueFromBitArray(this.information,e,t)},r.extractNumericValueFromBitArray=function(e,t,n){for(var i=0,o=0;o<n;++o)e.get(t+o)&&(i|=1<<n-o-1);return i},r.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new gn(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new gn(this.current.getPosition(),this.buffer.toString())},r.prototype.parseBlocks=function(){var e,t;do{var n=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=n!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},r.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new gn(this.current.getPosition(),this.buffer.toString()):t=new gn(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new vn(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new gn(this.current.getPosition(),this.buffer.toString());return new vn(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new vn(!1)},r.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new gn(this.current.getPosition(),this.buffer.toString());return new vn(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new vn(!1)},r.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new gn(this.current.getPosition(),this.buffer.toString());return new vn(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new vn(!1)},r.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},r.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new fr(e+5,fr.FNC1);if(t>=5&&t<15)return new fr(e+5,"0"+(t-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new fr(e+7,""+(n+1));if(n>=90&&n<116)return new fr(e+7,""+(n+7));var i=this.extractNumericValueFromBitArray(e,8),o;switch(i){case 232:o="!";break;case 233:o='"';break;case 234:o="%";break;case 235:o="&";break;case 236:o="'";break;case 237:o="(";break;case 238:o=")";break;case 239:o="*";break;case 240:o="+";break;case 241:o=",";break;case 242:o="-";break;case 243:o=".";break;case 244:o="/";break;case 245:o=":";break;case 246:o=";";break;case 247:o="<";break;case 248:o="=";break;case 249:o=">";break;case 250:o="?";break;case 251:o="_";break;case 252:o=" ";break;default:throw new Y}return new fr(e+8,o)},r.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},r.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new fr(e+5,fr.FNC1);if(t>=5&&t<15)return new fr(e+5,"0"+(t-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new fr(e+6,""+(n+33));var i;switch(n){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Ji("Decoding invalid alphanumeric value: "+n)}return new fr(e+6,i)},r.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},r.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},r.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},r})(),V0=(function(){function r(e){this.information=e,this.generalDecoder=new So(e)}return r.prototype.getInformation=function(){return this.information},r.prototype.getGeneralDecoder=function(){return this.generalDecoder},r})(),O3=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),gr=(function(r){O3(e,r);function e(t){return r.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,n){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,n,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,n,i){for(var o=0;o<4;++o){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*o,10);a/100===0&&t.append("0"),a/10===0&&t.append("0"),t.append(a)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,n){for(var i=0,o=0;o<13;o++){var a=t.charAt(o+n).charCodeAt(0)-48;i+=(o&1)===0?3*a:a}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e})(V0),T3=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),R3=(function(r){T3(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Ae;t.append("(01)");var n=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e})(gr),P3=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),N3=(function(r){P3(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Ae;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e})(V0),D3=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Io=(function(r){D3(e,r);function e(t){return r.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,n,i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n,i);this.addWeightCode(t,o);for(var a=this.checkWeight(o),s=1e5,l=0;l<5;++l)a/s===0&&t.append("0"),s/=10;t.append(a)},e})(gr),k3=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),H0=(function(r){k3(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+Io.GTIN_SIZE+e.WEIGHT_SIZE)throw new B;var t=new Ae;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+Io.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e})(Io),M3=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),B3=(function(r){M3(e,r);function e(t){return r.call(this,t)||this}return e.prototype.addWeightCode=function(t,n){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e})(H0),L3=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),F3=(function(r){L3(e,r);function e(t){return r.call(this,t)||this}return e.prototype.addWeightCode=function(t,n){n<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e})(H0),U3=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),j3=(function(r){U3(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+gr.GTIN_SIZE)throw new B;var t=new Ae;this.encodeCompressedGtin(t,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+gr.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(n),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+gr.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e})(gr),$3=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),V3=(function(r){$3(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+gr.GTIN_SIZE)throw new B;var t=new Ae;this.encodeCompressedGtin(t,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+gr.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(n),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+gr.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var o=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+gr.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(o.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e})(gr),H3=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Kr=(function(r){H3(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.dateCode=i,o.firstAIdigits=n,o}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new B;var t=new Ae;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,n){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var o=i%32;i/=32;var a=i%12+1;i/=12;var s=i;s/10===0&&t.append("0"),t.append(s),a/10===0&&t.append("0"),t.append(a),o/10===0&&t.append("0"),t.append(o)}},e.prototype.addWeightCode=function(t,n){t.append("("),t.append(this.firstAIdigits),t.append(n/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e})(Io);function G3(r){try{if(r.get(1))return new R3(r);if(!r.get(2))return new N3(r);var e=So.extractNumericValueFromBitArray(r,1,4);switch(e){case 4:return new B3(r);case 5:return new F3(r)}var t=So.extractNumericValueFromBitArray(r,1,5);switch(t){case 12:return new j3(r);case 13:return new V3(r)}var n=So.extractNumericValueFromBitArray(r,1,7);switch(n){case 56:return new Kr(r,"310","11");case 57:return new Kr(r,"320","11");case 58:return new Kr(r,"310","13");case 59:return new Kr(r,"320","13");case 60:return new Kr(r,"310","15");case 61:return new Kr(r,"320","15");case 62:return new Kr(r,"310","17");case 63:return new Kr(r,"320","17")}}catch(i){throw console.log(i),new Ji("unknown decoder: "+r)}}var Qc=(function(){function r(e,t,n,i){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=i}return r.prototype.mayBeLast=function(){return this.maybeLast},r.prototype.getLeftChar=function(){return this.leftchar},r.prototype.getRightChar=function(){return this.rightchar},r.prototype.getFinderPattern=function(){return this.finderpattern},r.prototype.mustBeLast=function(){return this.rightchar==null},r.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},r.equals=function(e,t){return e instanceof r?r.equalsOrNull(e.leftchar,t.leftchar)&&r.equalsOrNull(e.rightchar,t.rightchar)&&r.equalsOrNull(e.finderpattern,t.finderpattern):!1},r.equalsOrNull=function(e,t){return e===null?t===null:r.equals(e,t)},r.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},r})(),W3=(function(){function r(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}return r.prototype.getPairs=function(){return this.pairs},r.prototype.getRowNumber=function(){return this.rowNumber},r.prototype.isReversed=function(){return this.wasReversed},r.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},r.prototype.toString=function(){return"{ "+this.pairs+" }"},r.prototype.equals=function(e,t){return e instanceof r?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},r.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var n;return e.forEach(function(i,o){t.forEach(function(a){i.getLeftChar().getValue()===a.getLeftChar().getValue()&&i.getRightChar().getValue()===a.getRightChar().getValue()&&i.getFinderPatter().getValue()===a.getFinderPatter().getValue()&&(n=!0)})}),n}},r})(),q3=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Xr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},z3=(function(r){q3(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,n,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,n){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,t))}catch(s){if(s instanceof B){if(!this.pairs.length)throw new B;i=!0}}if(this.checkChecksum())return this.pairs;var o;if(this.rows.length?o=!0:o=!1,this.storeRow(t,!1),o){var a=this.checkRowsBoolean(!1);if(a!=null||(a=this.checkRowsBoolean(!0),a!=null))return a}throw new B},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(t,n){for(var i,o,a=n;a<this.rows.length;a++){var s=this.rows[a];this.pairs.length=0;try{for(var l=(i=void 0,Xr(t)),u=l.next();!u.done;u=l.next()){var c=u.value;this.pairs.push(c.getPairs())}}catch(d){i={error:d}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}if(this.pairs.push(s.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var f=new Array(t);f.push(s);try{return this.checkRows(f,a+1)}catch(d){console.log(d)}}}throw new B},e.isValidSequence=function(t){var n,i;try{for(var o=Xr(e.FINDER_PATTERN_SEQUENCES),a=o.next();!a.done;a=o.next()){var s=a.value;if(!(t.length>s.length)){for(var l=!0,u=0;u<t.length;u++)if(t[u].getFinderPattern().getValue()!==s[u]){l=!1;break}if(l)return!0}}}catch(c){n={error:c}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(t,n){for(var i=0,o=!1,a=!1;i<this.rows.length;){var s=this.rows[i];if(s.getRowNumber()>t){a=s.isEquivalent(this.pairs);break}o=s.isEquivalent(this.pairs),i++}a||o||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new W3(this.pairs,t,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,n){var i,o,a,s,l,u;try{for(var c=Xr(n),f=c.next();!f.done;f=c.next()){var d=f.value;if(d.getPairs().length!==t.length){var h=!0;try{for(var p=(a=void 0,Xr(d.getPairs())),y=p.next();!y.done;y=p.next()){var m=y.value,g=!1;try{for(var x=(l=void 0,Xr(t)),w=x.next();!w.done;w=x.next()){var _=w.value;if(Qc.equals(m,_)){g=!0;break}}}catch(C){l={error:C}}finally{try{w&&!w.done&&(u=x.return)&&u.call(x)}finally{if(l)throw l.error}}g||(h=!1)}}catch(C){a={error:C}}finally{try{y&&!y.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}}}}catch(C){i={error:C}}finally{try{f&&!f.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,n){var i,o,a,s,l,u;try{for(var c=Xr(n),f=c.next();!f.done;f=c.next()){var d=f.value,h=!0;try{for(var p=(a=void 0,Xr(t)),y=p.next();!y.done;y=p.next()){var m=y.value,g=!1;try{for(var x=(l=void 0,Xr(d.getPairs())),w=x.next();!w.done;w=x.next()){var _=w.value;if(m.equals(_)){g=!0;break}}}catch(C){l={error:C}}finally{try{w&&!w.done&&(u=x.return)&&u.call(x)}finally{if(l)throw l.error}}if(!g){h=!1;break}}}catch(C){a={error:C}}finally{try{y&&!y.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}if(h)return!0}}catch(C){i={error:C}}finally{try{f&&!f.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var n=E3.buildBitArray(t),i=G3(n),o=i.parseInformation(),a=t[0].getFinderPattern().getResultPoints(),s=t[t.length-1].getFinderPattern().getResultPoints(),l=[a[0],a[1],s[0],s[1]];return new Lt(o,null,null,l,ce.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),n=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var o=i.getChecksumPortion(),a=2,s=1;s<this.pairs.size();++s){var l=this.pairs.get(s);o+=l.getLeftChar().getChecksumPortion(),a++;var u=l.getRightChar();u!=null&&(o+=u.getChecksumPortion(),a++)}o%=211;var c=211*(a-4)+o;return c===n.getValue()},e.getNextSecondBar=function(t,n){var i;return t.get(n)?(i=t.getNextUnset(n),i=t.getNextSet(i)):(i=t.getNextSet(n),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,n,i){var o=n.length%2===0;this.startFromEven&&(o=!o);var a,s=!0,l=-1;do this.findNextPair(t,n,l),a=this.parseFoundFinderPattern(t,i,o),a===null?l=e.getNextSecondBar(t,this.startEnd[0]):s=!1;while(s);var u=this.decodeDataCharacter(t,a,o,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new B;var c;try{c=this.decodeDataCharacter(t,a,o,!1)}catch(f){c=null,console.log(f)}return new Qc(u,c,a,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,n,i){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var a=t.getSize(),s;if(i>=0)s=i;else if(this.isEmptyPair(n))s=0;else{var l=n[n.length-1];s=l.getFinderPattern().getStartEnd()[1]}var u=n.length%2!==0;this.startFromEven&&(u=!u);for(var c=!1;s<a&&(c=!t.get(s),!!c);)s++;for(var f=0,d=s,h=s;h<a;h++)if(t.get(h)!==c)o[f]++;else{if(f===3){if(u&&e.reverseCounters(o),e.isFinderPattern(o)){this.startEnd[0]=d,this.startEnd[1]=h;return}u&&e.reverseCounters(o),d+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,f--}else f++;o[f]=1,c=!c}throw new B},e.reverseCounters=function(t){for(var n=t.length,i=0;i<n/2;++i){var o=t[i];t[i]=t[n-i-1],t[n-i-1]=o}},e.prototype.parseFoundFinderPattern=function(t,n,i){var o,a,s;if(i){for(var l=this.startEnd[0]-1;l>=0&&!t.get(l);)l--;l++,o=this.startEnd[0]-l,a=l,s=this.startEnd[1]}else a=this.startEnd[0],s=t.getNextUnset(this.startEnd[1]+1),o=s-this.startEnd[1];var u=this.getDecodeFinderCounters();Ze.arraycopy(u,0,u,1,u.length-1),u[0]=o;var c;try{c=this.parseFinderValue(u,e.FINDER_PATTERNS)}catch{return null}return new $0(c,[a,s],a,s,n)},e.prototype.decodeDataCharacter=function(t,n,i,o){for(var a=this.getDataCharacterCounters(),s=0;s<a.length;s++)a[s]=0;if(o)e.recordPatternInReverse(t,n.getStartEnd()[0],a);else{e.recordPattern(t,n.getStartEnd()[1],a);for(var l=0,u=a.length-1;l<u;l++,u--){var c=a[l];a[l]=a[u],a[u]=c}}var f=17,d=ke.sum(new Int32Array(a))/f,h=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(d-h)/h>.3)throw new B;for(var p=this.getOddCounts(),y=this.getEvenCounts(),m=this.getOddRoundingErrors(),g=this.getEvenRoundingErrors(),l=0;l<a.length;l++){var x=1*a[l]/d,w=x+.5;if(w<1){if(x<.3)throw new B;w=1}else if(w>8){if(x>8.7)throw new B;w=8}var _=l/2;(l&1)===0?(p[_]=w,m[_]=x-w):(y[_]=w,g[_]=x-w)}this.adjustOddEvenCounts(f);for(var C=4*n.getValue()+(i?0:2)+(o?0:1)-1,E=0,I=0,l=p.length-1;l>=0;l--){if(e.isNotA1left(n,i,o)){var D=e.WEIGHTS[C][2*l];I+=p[l]*D}E+=p[l]}for(var M=0,l=y.length-1;l>=0;l--)if(e.isNotA1left(n,i,o)){var D=e.WEIGHTS[C][2*l+1];M+=y[l]*D}var j=I+M;if((E&1)!==0||E>13||E<4)throw new B;var X=(13-E)/2,F=e.SYMBOL_WIDEST[X],k=9-F,W=Vn.getRSSvalue(p,F,!0),Z=Vn.getRSSvalue(y,k,!1),ue=e.EVEN_TOTAL_SUBSET[X],me=e.GSUM[X],he=W*ue+Z+me;return new Ho(he,j)},e.isNotA1left=function(t,n,i){return!(t.getValue()===0&&n&&i)},e.prototype.adjustOddEvenCounts=function(t){var n=ke.sum(new Int32Array(this.getOddCounts())),i=ke.sum(new Int32Array(this.getEvenCounts())),o=!1,a=!1;n>13?a=!0:n<4&&(o=!0);var s=!1,l=!1;i>13?l=!0:i<4&&(s=!0);var u=n+i-t,c=(n&1)===1,f=(i&1)===0;if(u===1)if(c){if(f)throw new B;a=!0}else{if(!f)throw new B;l=!0}else if(u===-1)if(c){if(f)throw new B;o=!0}else{if(!f)throw new B;s=!0}else if(u===0){if(c){if(!f)throw new B;n<i?(o=!0,l=!0):(a=!0,s=!0)}else if(f)throw new B}else throw new B;if(o){if(a)throw new B;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(l)throw new B;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e})(xn),K3=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),X3=(function(r){K3(e,r);function e(t,n,i){var o=r.call(this,t,n)||this;return o.count=0,o.finderPattern=i,o}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e})(Ho),Y3=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),us=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ef=(function(r){Y3(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,n,i){var o,a,s,l,u=this.decodePair(n,!1,t,i);e.addOrTally(this.possibleLeftPairs,u),n.reverse();var c=this.decodePair(n,!0,t,i);e.addOrTally(this.possibleRightPairs,c),n.reverse();try{for(var f=us(this.possibleLeftPairs),d=f.next();!d.done;d=f.next()){var h=d.value;if(h.getCount()>1)try{for(var p=(s=void 0,us(this.possibleRightPairs)),y=p.next();!y.done;y=p.next()){var m=y.value;if(m.getCount()>1&&e.checkChecksum(h,m))return e.constructResult(h,m)}}catch(g){s={error:g}}finally{try{y&&!y.done&&(l=p.return)&&l.call(p)}finally{if(s)throw s.error}}}}catch(g){o={error:g}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(o)throw o.error}}throw new B},e.addOrTally=function(t,n){var i,o;if(n!=null){var a=!1;try{for(var s=us(t),l=s.next();!l.done;l=s.next()){var u=l.value;if(u.getValue()===n.getValue()){u.incrementCount(),a=!0;break}}}catch(c){i={error:c}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}a||t.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,n){for(var i=4537077*t.getValue()+n.getValue(),o=new String(i).toString(),a=new Ae,s=13-o.length;s>0;s--)a.append("0");a.append(o);for(var l=0,s=0;s<13;s++){var u=a.charAt(s).charCodeAt(0)-48;l+=(s&1)===0?3*u:u}l=10-l%10,l===10&&(l=0),a.append(l.toString());var c=t.getFinderPattern().getResultPoints(),f=n.getFinderPattern().getResultPoints();return new Lt(a.toString(),null,0,[c[0],c[1],f[0],f[1]],ce.RSS_14,new Date().getTime())},e.checkChecksum=function(t,n){var i=(t.getChecksumPortion()+16*n.getChecksumPortion())%79,o=9*t.getFinderPattern().getValue()+n.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,i===o},e.prototype.decodePair=function(t,n,i,o){try{var a=this.findFinderPattern(t,n),s=this.parseFoundFinderPattern(t,i,n,a),l=o==null?null:o.get(Je.NEED_RESULT_POINT_CALLBACK);if(l!=null){var u=(a[0]+a[1])/2;n&&(u=t.getSize()-1-u),l.foundPossibleResultPoint(new oe(u,i))}var c=this.decodeDataCharacter(t,s,!0),f=this.decodeDataCharacter(t,s,!1);return new X3(1597*c.getValue()+f.getValue(),c.getChecksumPortion()+4*f.getChecksumPortion(),s)}catch{return null}},e.prototype.decodeDataCharacter=function(t,n,i){for(var o=this.getDataCharacterCounters(),a=0;a<o.length;a++)o[a]=0;if(i)mt.recordPatternInReverse(t,n.getStartEnd()[0],o);else{mt.recordPattern(t,n.getStartEnd()[1]+1,o);for(var s=0,l=o.length-1;s<l;s++,l--){var u=o[s];o[s]=o[l],o[l]=u}}for(var c=i?16:15,f=ke.sum(new Int32Array(o))/c,d=this.getOddCounts(),h=this.getEvenCounts(),p=this.getOddRoundingErrors(),y=this.getEvenRoundingErrors(),s=0;s<o.length;s++){var m=o[s]/f,g=Math.floor(m+.5);g<1?g=1:g>8&&(g=8);var x=Math.floor(s/2);(s&1)===0?(d[x]=g,p[x]=m-g):(h[x]=g,y[x]=m-g)}this.adjustOddEvenCounts(i,c);for(var w=0,_=0,s=d.length-1;s>=0;s--)_*=9,_+=d[s],w+=d[s];for(var C=0,E=0,s=h.length-1;s>=0;s--)C*=9,C+=h[s],E+=h[s];var I=_+3*C;if(i){if((w&1)!==0||w>12||w<4)throw new B;var D=(12-w)/2,M=e.OUTSIDE_ODD_WIDEST[D],j=9-M,X=Vn.getRSSvalue(d,M,!1),F=Vn.getRSSvalue(h,j,!0),k=e.OUTSIDE_EVEN_TOTAL_SUBSET[D],W=e.OUTSIDE_GSUM[D];return new Ho(X*k+F+W,I)}else{if((E&1)!==0||E>10||E<4)throw new B;var D=(10-E)/2,M=e.INSIDE_ODD_WIDEST[D],j=9-M,X=Vn.getRSSvalue(d,M,!0),F=Vn.getRSSvalue(h,j,!1),Z=e.INSIDE_ODD_TOTAL_SUBSET[D],W=e.INSIDE_GSUM[D];return new Ho(F*Z+X+W,I)}},e.prototype.findFinderPattern=function(t,n){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var o=t.getSize(),a=!1,s=0;s<o&&(a=!t.get(s),n!==a);)s++;for(var l=0,u=s,c=s;c<o;c++)if(t.get(c)!==a)i[l]++;else{if(l===3){if(xn.isFinderPattern(i))return[u,c];u+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,l--}else l++;i[l]=1,a=!a}throw new B},e.prototype.parseFoundFinderPattern=function(t,n,i,o){for(var a=t.get(o[0]),s=o[0]-1;s>=0&&a!==t.get(s);)s--;s++;var l=o[0]-s,u=this.getDecodeFinderCounters(),c=new Int32Array(u.length);Ze.arraycopy(u,0,c,1,u.length-1),c[0]=l;var f=this.parseFinderValue(c,e.FINDER_PATTERNS),d=s,h=o[1];return i&&(d=t.getSize()-1-d,h=t.getSize()-1-h),new $0(f,[s,o[1]],d,h,n)},e.prototype.adjustOddEvenCounts=function(t,n){var i=ke.sum(new Int32Array(this.getOddCounts())),o=ke.sum(new Int32Array(this.getEvenCounts())),a=!1,s=!1,l=!1,u=!1;t?(i>12?s=!0:i<4&&(a=!0),o>12?u=!0:o<4&&(l=!0)):(i>11?s=!0:i<5&&(a=!0),o>10?u=!0:o<4&&(l=!0));var c=i+o-n,f=(i&1)===(t?1:0),d=(o&1)===1;if(c===1)if(f){if(d)throw new B;s=!0}else{if(!d)throw new B;u=!0}else if(c===-1)if(f){if(d)throw new B;a=!0}else{if(!d)throw new B;l=!0}else if(c===0){if(f){if(!d)throw new B;i<o?(a=!0,u=!0):(s=!0,l=!0)}else if(d)throw new B}else throw new B;if(a){if(s)throw new B;xn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&xn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(u)throw new B;xn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&xn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e})(xn),Z3=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Hn=(function(r){Z3(e,r);function e(t){var n=r.call(this)||this;n.readers=[];var i=t?t.get(Je.POSSIBLE_FORMATS):null,o=t&&t.get(Je.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,a=t&&t.get(Je.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(ce.EAN_13)||i.includes(ce.UPC_A)||i.includes(ce.EAN_8)||i.includes(ce.UPC_E))&&n.readers.push(new ls(t)),i.includes(ce.CODE_39)&&n.readers.push(new Gc(o,a)),i.includes(ce.CODE_93)&&n.readers.push(new Wc),i.includes(ce.CODE_128)&&n.readers.push(new Hc),i.includes(ce.ITF)&&n.readers.push(new qc),i.includes(ce.CODABAR)&&n.readers.push(new x3),i.includes(ce.RSS_14)&&n.readers.push(new ef),i.includes(ce.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new z3))),n.readers.length===0&&(n.readers.push(new ls(t)),n.readers.push(new Gc),n.readers.push(new Wc),n.readers.push(new ls(t)),n.readers.push(new Hc),n.readers.push(new qc),n.readers.push(new ef)),n}return e.prototype.decodeRow=function(t,n,i){for(var o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(t,n,i)}catch{}throw new B},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e})(mt),J3=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){J3(e,r);function e(t,n){return t===void 0&&(t=500),r.call(this,new Hn(n),t,n)||this}return e})(ci);var tf=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Le=(function(){function r(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}return r.prototype.getECCodewords=function(){return this.ecCodewords},r.prototype.getECBlocks=function(){return this.ecBlocks},r})(),Me=(function(){function r(e,t){this.count=e,this.dataCodewords=t}return r.prototype.getCount=function(){return this.count},r.prototype.getDataCodewords=function(){return this.dataCodewords},r})(),Q3=(function(){function r(e,t,n,i,o,a){var s,l;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=o,this.ecBlocks=a;var u=0,c=a.getECCodewords(),f=a.getECBlocks();try{for(var d=tf(f),h=d.next();!h.done;h=d.next()){var p=h.value;u+=p.getCount()*(p.getDataCodewords()+c)}}catch(y){s={error:y}}finally{try{h&&!h.done&&(l=d.return)&&l.call(d)}finally{if(s)throw s.error}}this.totalCodewords=u}return r.prototype.getVersionNumber=function(){return this.versionNumber},r.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},r.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},r.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},r.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},r.prototype.getTotalCodewords=function(){return this.totalCodewords},r.prototype.getECBlocks=function(){return this.ecBlocks},r.getVersionForDimensions=function(e,t){var n,i;if((e&1)!==0||(t&1)!==0)throw new Y;try{for(var o=tf(r.VERSIONS),a=o.next();!a.done;a=o.next()){var s=a.value;if(s.symbolSizeRows===e&&s.symbolSizeColumns===t)return s}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}throw new Y},r.prototype.toString=function(){return""+this.versionNumber},r.buildVersions=function(){return[new r(1,10,10,8,8,new Le(5,new Me(1,3))),new r(2,12,12,10,10,new Le(7,new Me(1,5))),new r(3,14,14,12,12,new Le(10,new Me(1,8))),new r(4,16,16,14,14,new Le(12,new Me(1,12))),new r(5,18,18,16,16,new Le(14,new Me(1,18))),new r(6,20,20,18,18,new Le(18,new Me(1,22))),new r(7,22,22,20,20,new Le(20,new Me(1,30))),new r(8,24,24,22,22,new Le(24,new Me(1,36))),new r(9,26,26,24,24,new Le(28,new Me(1,44))),new r(10,32,32,14,14,new Le(36,new Me(1,62))),new r(11,36,36,16,16,new Le(42,new Me(1,86))),new r(12,40,40,18,18,new Le(48,new Me(1,114))),new r(13,44,44,20,20,new Le(56,new Me(1,144))),new r(14,48,48,22,22,new Le(68,new Me(1,174))),new r(15,52,52,24,24,new Le(42,new Me(2,102))),new r(16,64,64,14,14,new Le(56,new Me(2,140))),new r(17,72,72,16,16,new Le(36,new Me(4,92))),new r(18,80,80,18,18,new Le(48,new Me(4,114))),new r(19,88,88,20,20,new Le(56,new Me(4,144))),new r(20,96,96,22,22,new Le(68,new Me(4,174))),new r(21,104,104,24,24,new Le(56,new Me(6,136))),new r(22,120,120,18,18,new Le(68,new Me(6,175))),new r(23,132,132,20,20,new Le(62,new Me(8,163))),new r(24,144,144,22,22,new Le(62,new Me(8,156),new Me(2,155))),new r(25,8,18,6,16,new Le(7,new Me(1,5))),new r(26,8,32,6,14,new Le(11,new Me(1,10))),new r(27,12,26,10,24,new Le(14,new Me(1,16))),new r(28,12,36,10,16,new Le(18,new Me(1,22))),new r(29,16,36,14,16,new Le(24,new Me(1,32))),new r(30,16,48,14,22,new Le(28,new Me(1,49)))]},r.VERSIONS=r.buildVersions(),r})(),e4=(function(){function r(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new Y;this.version=r.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Nr(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return r.prototype.getVersion=function(){return this.version},r.readVersion=function(e){var t=e.getHeight(),n=e.getWidth();return Q3.getVersionForDimensions(t,n)},r.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,n=4,i=0,o=this.mappingBitMatrix.getHeight(),a=this.mappingBitMatrix.getWidth(),s=!1,l=!1,u=!1,c=!1;do if(n===o&&i===0&&!s)e[t++]=this.readCorner1(o,a)&255,n-=2,i+=2,s=!0;else if(n===o-2&&i===0&&(a&3)!==0&&!l)e[t++]=this.readCorner2(o,a)&255,n-=2,i+=2,l=!0;else if(n===o+4&&i===2&&(a&7)===0&&!u)e[t++]=this.readCorner3(o,a)&255,n-=2,i+=2,u=!0;else if(n===o-2&&i===0&&(a&7)===4&&!c)e[t++]=this.readCorner4(o,a)&255,n-=2,i+=2,c=!0;else{do n<o&&i>=0&&!this.readMappingMatrix.get(i,n)&&(e[t++]=this.readUtah(n,i,o,a)&255),n-=2,i+=2;while(n>=0&&i<a);n+=1,i+=3;do n>=0&&i<a&&!this.readMappingMatrix.get(i,n)&&(e[t++]=this.readUtah(n,i,o,a)&255),n+=2,i-=2;while(n<o&&i>=0);n+=3,i+=1}while(n<o||i<a);if(t!==this.version.getTotalCodewords())throw new Y;return e},r.prototype.readModule=function(e,t,n,i){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},r.prototype.readUtah=function(e,t,n,i){var o=0;return this.readModule(e-2,t-2,n,i)&&(o|=1),o<<=1,this.readModule(e-2,t-1,n,i)&&(o|=1),o<<=1,this.readModule(e-1,t-2,n,i)&&(o|=1),o<<=1,this.readModule(e-1,t-1,n,i)&&(o|=1),o<<=1,this.readModule(e-1,t,n,i)&&(o|=1),o<<=1,this.readModule(e,t-2,n,i)&&(o|=1),o<<=1,this.readModule(e,t-1,n,i)&&(o|=1),o<<=1,this.readModule(e,t,n,i)&&(o|=1),o},r.prototype.readCorner1=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},r.prototype.readCorner2=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},r.prototype.readCorner3=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},r.prototype.readCorner4=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},r.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new fe("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),a=t/i|0,s=n/o|0,l=a*i,u=s*o,c=new Nr(u,l),f=0;f<a;++f)for(var d=f*i,h=0;h<s;++h)for(var p=h*o,y=0;y<i;++y)for(var m=f*(i+2)+1+y,g=d+y,x=0;x<o;++x){var w=h*(o+2)+1+x;if(e.get(w,m)){var _=p+x;c.set(_,g)}}return c},r})(),rf=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},t4=(function(){function r(e,t){this.numDataCodewords=e,this.codewords=t}return r.getDataBlocks=function(e,t){var n,i,o,a,s=t.getECBlocks(),l=0,u=s.getECBlocks();try{for(var c=rf(u),f=c.next();!f.done;f=c.next()){var d=f.value;l+=d.getCount()}}catch(W){n={error:W}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}var h=new Array(l),p=0;try{for(var y=rf(u),m=y.next();!m.done;m=y.next())for(var d=m.value,g=0;g<d.getCount();g++){var x=d.getDataCodewords(),w=s.getECCodewords()+x;h[p++]=new r(x,new Uint8Array(w))}}catch(W){o={error:W}}finally{try{m&&!m.done&&(a=y.return)&&a.call(y)}finally{if(o)throw o.error}}for(var _=h[0].codewords.length,C=_-s.getECCodewords(),E=C-1,I=0,g=0;g<E;g++)for(var D=0;D<p;D++)h[D].codewords[g]=e[I++];for(var M=t.getVersionNumber()===24,j=M?8:p,D=0;D<j;D++)h[D].codewords[C-1]=e[I++];for(var X=h[0].codewords.length,g=C;g<X;g++)for(var D=0;D<p;D++){var F=M?(D+8)%p:D,k=M&&F>7?g-1:g;h[F].codewords[k]=e[I++]}if(I!==e.length)throw new fe;return h},r.prototype.getNumDataCodewords=function(){return this.numDataCodewords},r.prototype.getCodewords=function(){return this.codewords},r})(),G0=(function(){function r(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return r.prototype.getBitOffset=function(){return this.bitOffset},r.prototype.getByteOffset=function(){return this.byteOffset},r.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new fe(""+e);var t=0,n=this.bitOffset,i=this.byteOffset,o=this.bytes;if(n>0){var a=8-n,s=e<a?e:a,l=a-s,u=255>>8-s<<l;t=(o[i]&u)>>l,e-=s,n+=s,n===8&&(n=0,i++)}if(e>0){for(;e>=8;)t=t<<8|o[i]&255,i++,e-=8;if(e>0){var l=8-e,u=255>>l<<l;t=t<<e|(o[i]&u)>>l,n+=e}}return this.bitOffset=n,this.byteOffset=i,t},r.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},r})(),ht;(function(r){r[r.PAD_ENCODE=0]="PAD_ENCODE",r[r.ASCII_ENCODE=1]="ASCII_ENCODE",r[r.C40_ENCODE=2]="C40_ENCODE",r[r.TEXT_ENCODE=3]="TEXT_ENCODE",r[r.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",r[r.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",r[r.BASE256_ENCODE=6]="BASE256_ENCODE"})(ht||(ht={}));var r4=(function(){function r(){}return r.decode=function(e){var t=new G0(e),n=new Ae,i=new Ae,o=new Array,a=ht.ASCII_ENCODE;do if(a===ht.ASCII_ENCODE)a=this.decodeAsciiSegment(t,n,i);else{switch(a){case ht.C40_ENCODE:this.decodeC40Segment(t,n);break;case ht.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case ht.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case ht.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case ht.BASE256_ENCODE:this.decodeBase256Segment(t,n,o);break;default:throw new Y}a=ht.ASCII_ENCODE}while(a!==ht.PAD_ENCODE&&t.available()>0);return i.length()>0&&n.append(i.toString()),new ha(e,n.toString(),o.length===0?null:o,null)},r.decodeAsciiSegment=function(e,t,n){var i=!1;do{var o=e.readBits(8);if(o===0)throw new Y;if(o<=128)return i&&(o+=128),t.append(String.fromCharCode(o-1)),ht.ASCII_ENCODE;if(o===129)return ht.PAD_ENCODE;if(o<=229){var a=o-130;a<10&&t.append("0"),t.append(""+a)}else switch(o){case 230:return ht.C40_ENCODE;case 231:return ht.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),n.insert(0,"");break;case 237:t.append("[)>06"),n.insert(0,"");break;case 238:return ht.ANSIX12_ENCODE;case 239:return ht.TEXT_ENCODE;case 240:return ht.EDIFACT_ENCODE;case 241:break;default:if(o!==254||e.available()!==0)throw new Y;break}}while(e.available()>0);return ht.ASCII_ENCODE},r.decodeC40Segment=function(e,t){var n=!1,i=[],o=0;do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),i);for(var s=0;s<3;s++){var l=i[s];switch(o){case 0:if(l<3)o=l+1;else if(l<this.C40_BASIC_SET_CHARS.length){var u=this.C40_BASIC_SET_CHARS[l];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u)}else throw new Y;break;case 1:n?(t.append(String.fromCharCode(l+128)),n=!1):t.append(String.fromCharCode(l)),o=0;break;case 2:if(l<this.C40_SHIFT2_SET_CHARS.length){var u=this.C40_SHIFT2_SET_CHARS[l];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u)}else switch(l){case 27:t.append("");break;case 30:n=!0;break;default:throw new Y}o=0;break;case 3:n?(t.append(String.fromCharCode(l+224)),n=!1):t.append(String.fromCharCode(l+96)),o=0;break;default:throw new Y}}}while(e.available()>0)},r.decodeTextSegment=function(e,t){var n=!1,i=[],o=0;do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),i);for(var s=0;s<3;s++){var l=i[s];switch(o){case 0:if(l<3)o=l+1;else if(l<this.TEXT_BASIC_SET_CHARS.length){var u=this.TEXT_BASIC_SET_CHARS[l];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u)}else throw new Y;break;case 1:n?(t.append(String.fromCharCode(l+128)),n=!1):t.append(String.fromCharCode(l)),o=0;break;case 2:if(l<this.TEXT_SHIFT2_SET_CHARS.length){var u=this.TEXT_SHIFT2_SET_CHARS[l];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u)}else switch(l){case 27:t.append("");break;case 30:n=!0;break;default:throw new Y}o=0;break;case 3:if(l<this.TEXT_SHIFT3_SET_CHARS.length){var u=this.TEXT_SHIFT3_SET_CHARS[l];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u),o=0}else throw new Y;break;default:throw new Y}}}while(e.available()>0)},r.decodeAnsiX12Segment=function(e,t){var n=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),n);for(var o=0;o<3;o++){var a=n[o];switch(a){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(a<14)t.append(String.fromCharCode(a+44));else if(a<40)t.append(String.fromCharCode(a+51));else throw new Y;break}}}while(e.available()>0)},r.parseTwoBytes=function(e,t,n){var i=(e<<8)+t-1,o=Math.floor(i/1600);n[0]=o,i-=o*1600,o=Math.floor(i/40),n[1]=o,n[2]=i-o*40},r.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var i=e.readBits(6);if(i===31){var o=8-e.getBitOffset();o!==8&&e.readBits(o);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},r.decodeBase256Segment=function(e,t,n){var i=1+e.getByteOffset(),o=this.unrandomize255State(e.readBits(8),i++),a;if(o===0?a=e.available()/8|0:o<250?a=o:a=250*(o-249)+this.unrandomize255State(e.readBits(8),i++),a<0)throw new Y;for(var s=new Uint8Array(a),l=0;l<a;l++){if(e.available()<8)throw new Y;s[l]=this.unrandomize255State(e.readBits(8),i++)}n.push(s);try{t.append(ur.decode(s,Re.ISO88591))}catch(u){throw new Ji("Platform does not support required encoding: "+u.message)}},r.unrandomize255State=function(e,t){var n=149*t%255+1,i=e-n;return i>=0?i:i+256},r.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],r.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],r.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],r.TEXT_SHIFT2_SET_CHARS=r.C40_SHIFT2_SET_CHARS,r.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],r})(),n4=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i4=(function(){function r(){this.rsDecoder=new pa(Kt.DATA_MATRIX_FIELD_256)}return r.prototype.decode=function(e){var t,n,i=new e4(e),o=i.getVersion(),a=i.readCodewords(),s=t4.getDataBlocks(a,o),l=0;try{for(var u=n4(s),c=u.next();!c.done;c=u.next()){var f=c.value;l+=f.getNumDataCodewords()}}catch(w){t={error:w}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}for(var d=new Uint8Array(l),h=s.length,p=0;p<h;p++){var y=s[p],m=y.getCodewords(),g=y.getNumDataCodewords();this.correctErrors(m,g);for(var x=0;x<g;x++)d[x*h+p]=m[x]}return r4.decode(d)},r.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new ut}for(var i=0;i<t;i++)e[i]=n[i]},r})(),o4=(function(){function r(e){this.image=e,this.rectangleDetector=new Ks(this.image)}return r.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new B;t=this.shiftToModuleCenter(t);var n=t[0],i=t[1],o=t[2],a=t[3],s=this.transitionsBetween(n,a)+1,l=this.transitionsBetween(o,a)+1;(s&1)===1&&(s+=1),(l&1)===1&&(l+=1),4*s<7*l&&4*l<7*s&&(s=l=Math.max(s,l));var u=r.sampleGrid(this.image,n,i,o,a,s,l);return new Nl(u,[n,i,o,a])},r.shiftPoint=function(e,t,n){var i=(t.getX()-e.getX())/(n+1),o=(t.getY()-e.getY())/(n+1);return new oe(e.getX()+i,e.getY()+o)},r.moveAway=function(e,t,n){var i=e.getX(),o=e.getY();return i<t?i-=1:i+=1,o<n?o-=1:o+=1,new oe(i,o)},r.prototype.detectSolid1=function(e){var t=e[0],n=e[1],i=e[3],o=e[2],a=this.transitionsBetween(t,n),s=this.transitionsBetween(n,i),l=this.transitionsBetween(i,o),u=this.transitionsBetween(o,t),c=a,f=[o,t,n,i];return c>s&&(c=s,f[0]=t,f[1]=n,f[2]=i,f[3]=o),c>l&&(c=l,f[0]=n,f[1]=i,f[2]=o,f[3]=t),c>u&&(f[0]=i,f[1]=o,f[2]=t,f[3]=n),f},r.prototype.detectSolid2=function(e){var t=e[0],n=e[1],i=e[2],o=e[3],a=this.transitionsBetween(t,o),s=r.shiftPoint(n,i,(a+1)*4),l=r.shiftPoint(i,n,(a+1)*4),u=this.transitionsBetween(s,t),c=this.transitionsBetween(l,o);return u<c?(e[0]=t,e[1]=n,e[2]=i,e[3]=o):(e[0]=n,e[1]=i,e[2]=o,e[3]=t),e},r.prototype.correctTopRight=function(e){var t=e[0],n=e[1],i=e[2],o=e[3],a=this.transitionsBetween(t,o),s=this.transitionsBetween(n,o),l=r.shiftPoint(t,n,(s+1)*4),u=r.shiftPoint(i,n,(a+1)*4);a=this.transitionsBetween(l,o),s=this.transitionsBetween(u,o);var c=new oe(o.getX()+(i.getX()-n.getX())/(a+1),o.getY()+(i.getY()-n.getY())/(a+1)),f=new oe(o.getX()+(t.getX()-n.getX())/(s+1),o.getY()+(t.getY()-n.getY())/(s+1));if(!this.isValid(c))return this.isValid(f)?f:null;if(!this.isValid(f))return c;var d=this.transitionsBetween(l,c)+this.transitionsBetween(u,c),h=this.transitionsBetween(l,f)+this.transitionsBetween(u,f);return d>h?c:f},r.prototype.shiftToModuleCenter=function(e){var t=e[0],n=e[1],i=e[2],o=e[3],a=this.transitionsBetween(t,o)+1,s=this.transitionsBetween(i,o)+1,l=r.shiftPoint(t,n,s*4),u=r.shiftPoint(i,n,a*4);a=this.transitionsBetween(l,o)+1,s=this.transitionsBetween(u,o)+1,(a&1)===1&&(a+=1),(s&1)===1&&(s+=1);var c=(t.getX()+n.getX()+i.getX()+o.getX())/4,f=(t.getY()+n.getY()+i.getY()+o.getY())/4;t=r.moveAway(t,c,f),n=r.moveAway(n,c,f),i=r.moveAway(i,c,f),o=r.moveAway(o,c,f);var d,h;return l=r.shiftPoint(t,n,s*4),l=r.shiftPoint(l,o,a*4),d=r.shiftPoint(n,t,s*4),d=r.shiftPoint(d,i,a*4),u=r.shiftPoint(i,o,s*4),u=r.shiftPoint(u,n,a*4),h=r.shiftPoint(o,i,s*4),h=r.shiftPoint(h,t,a*4),[l,d,u,h]},r.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},r.sampleGrid=function(e,t,n,i,o,a,s){var l=Dl.getInstance();return l.sampleGrid(e,a,s,.5,.5,a-.5,.5,a-.5,s-.5,.5,s-.5,t.getX(),t.getY(),o.getX(),o.getY(),i.getX(),i.getY(),n.getX(),n.getY())},r.prototype.transitionsBetween=function(e,t){var n=Math.trunc(e.getX()),i=Math.trunc(e.getY()),o=Math.trunc(t.getX()),a=Math.trunc(t.getY()),s=Math.abs(a-i)>Math.abs(o-n);if(s){var l=n;n=i,i=l,l=o,o=a,a=l}for(var u=Math.abs(o-n),c=Math.abs(a-i),f=-u/2,d=i<a?1:-1,h=n<o?1:-1,p=0,y=this.image.get(s?i:n,s?n:i),m=n,g=i;m!==o;m+=h){var x=this.image.get(s?g:m,s?m:g);if(x!==y&&(p++,y=x),f+=c,f>0){if(g===a)break;g+=d,f-=u}}return p},r})(),Go=(function(){function r(){this.decoder=new i4}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n,i;if(t!=null&&t.has(Je.PURE_BARCODE)){var o=r.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(o),i=r.NO_POINTS}else{var a=new o4(e.getBlackMatrix()).detect();n=this.decoder.decode(a.getBits()),i=a.getPoints()}var s=n.getRawBytes(),l=new Lt(n.getText(),s,8*s.length,i,ce.DATA_MATRIX,Ze.currentTimeMillis()),u=n.getByteSegments();u!=null&&l.putMetadata(Tt.BYTE_SEGMENTS,u);var c=n.getECLevel();return c!=null&&l.putMetadata(Tt.ERROR_CORRECTION_LEVEL,c),l},r.prototype.reset=function(){},r.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t==null||n==null)throw new B;var i=this.moduleSize(t,e),o=t[1],a=n[1],s=t[0],l=n[0],u=(l-s+1)/i,c=(a-o+1)/i;if(u<=0||c<=0)throw new B;var f=i/2;o+=f,s+=f;for(var d=new Nr(u,c),h=0;h<c;h++)for(var p=o+h*i,y=0;y<u;y++)e.get(s+y*i,p)&&d.set(y,h);return d},r.moduleSize=function(e,t){for(var n=t.getWidth(),i=e[0],o=e[1];i<n&&t.get(i,o);)i++;if(i===n)throw new B;var a=i-e[0];if(a===0)throw new B;return a},r.NO_POINTS=[],r})(),a4=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){a4(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new Go,t)||this}return e})(ci);var Gn;(function(r){r[r.L=0]="L",r[r.M=1]="M",r[r.Q=2]="Q",r[r.H=3]="H"})(Gn||(Gn={}));var s4=(function(){function r(e,t,n){this.value=e,this.stringValue=t,this.bits=n,r.FOR_BITS.set(n,this),r.FOR_VALUE.set(e,this)}return r.prototype.getValue=function(){return this.value},r.prototype.getBits=function(){return this.bits},r.fromString=function(e){switch(e){case"L":return r.L;case"M":return r.M;case"Q":return r.Q;case"H":return r.H;default:throw new st(e+"not available")}},r.prototype.toString=function(){return this.stringValue},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.forBits=function(e){if(e<0||e>=r.FOR_BITS.size)throw new fe;return r.FOR_BITS.get(e)},r.FOR_BITS=new Map,r.FOR_VALUE=new Map,r.L=new r(Gn.L,"L",1),r.M=new r(Gn.M,"M",0),r.Q=new r(Gn.Q,"Q",3),r.H=new r(Gn.H,"H",2),r})(),l4=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},W0=(function(){function r(e){this.errorCorrectionLevel=s4.forBits(e>>3&3),this.dataMask=e&7}return r.numBitsDiffering=function(e,t){return Ce.bitCount(e^t)},r.decodeFormatInformation=function(e,t){var n=r.doDecodeFormatInformation(e,t);return n!==null?n:r.doDecodeFormatInformation(e^r.FORMAT_INFO_MASK_QR,t^r.FORMAT_INFO_MASK_QR)},r.doDecodeFormatInformation=function(e,t){var n,i,o=Number.MAX_SAFE_INTEGER,a=0;try{for(var s=l4(r.FORMAT_INFO_DECODE_LOOKUP),l=s.next();!l.done;l=s.next()){var u=l.value,c=u[0];if(c===e||c===t)return new r(u[1]);var f=r.numBitsDiffering(e,c);f<o&&(a=u[1],o=f),e!==t&&(f=r.numBitsDiffering(t,c),f<o&&(a=u[1],o=f))}}catch(d){n={error:d}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return o<=3?new r(a):null},r.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},r.prototype.getDataMask=function(){return this.dataMask},r.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},r.FORMAT_INFO_MASK_QR=21522,r.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],r})(),u4=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},T=(function(){function r(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return r.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},r.prototype.getNumBlocks=function(){var e,t,n=0,i=this.ecBlocks;try{for(var o=u4(i),a=o.next();!a.done;a=o.next()){var s=a.value;n+=s.getCount()}}catch(l){e={error:l}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n},r.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},r.prototype.getECBlocks=function(){return this.ecBlocks},r})(),b=(function(){function r(e,t){this.count=e,this.dataCodewords=t}return r.prototype.getCount=function(){return this.count},r.prototype.getDataCodewords=function(){return this.dataCodewords},r})(),c4=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Sn=(function(){function r(e,t){for(var n,i,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=o;var s=0,l=o[0].getECCodewordsPerBlock(),u=o[0].getECBlocks();try{for(var c=c4(u),f=c.next();!f.done;f=c.next()){var d=f.value;s+=d.getCount()*(d.getDataCodewords()+l)}}catch(h){n={error:h}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}this.totalCodewords=s}return r.prototype.getVersionNumber=function(){return this.versionNumber},r.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},r.prototype.getTotalCodewords=function(){return this.totalCodewords},r.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},r.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},r.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new Y;try{return this.getVersionForNumber((e-17)/4)}catch{throw new Y}},r.getVersionForNumber=function(e){if(e<1||e>40)throw new fe;return r.VERSIONS[e-1]},r.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,n=0,i=0;i<r.VERSION_DECODE_INFO.length;i++){var o=r.VERSION_DECODE_INFO[i];if(o===e)return r.getVersionForNumber(i+7);var a=W0.numBitsDiffering(e,o);a<t&&(n=i+7,t=a)}return t<=3?r.getVersionForNumber(n):null},r.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new Nr(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,i=0;i<n;i++)for(var o=this.alignmentPatternCenters[i]-2,a=0;a<n;a++)i===0&&(a===0||a===n-1)||i===n-1&&a===0||t.setRegion(this.alignmentPatternCenters[a]-2,o,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},r.prototype.toString=function(){return""+this.versionNumber},r.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),r.VERSIONS=[new r(1,new Int32Array(0),new T(7,new b(1,19)),new T(10,new b(1,16)),new T(13,new b(1,13)),new T(17,new b(1,9))),new r(2,Int32Array.from([6,18]),new T(10,new b(1,34)),new T(16,new b(1,28)),new T(22,new b(1,22)),new T(28,new b(1,16))),new r(3,Int32Array.from([6,22]),new T(15,new b(1,55)),new T(26,new b(1,44)),new T(18,new b(2,17)),new T(22,new b(2,13))),new r(4,Int32Array.from([6,26]),new T(20,new b(1,80)),new T(18,new b(2,32)),new T(26,new b(2,24)),new T(16,new b(4,9))),new r(5,Int32Array.from([6,30]),new T(26,new b(1,108)),new T(24,new b(2,43)),new T(18,new b(2,15),new b(2,16)),new T(22,new b(2,11),new b(2,12))),new r(6,Int32Array.from([6,34]),new T(18,new b(2,68)),new T(16,new b(4,27)),new T(24,new b(4,19)),new T(28,new b(4,15))),new r(7,Int32Array.from([6,22,38]),new T(20,new b(2,78)),new T(18,new b(4,31)),new T(18,new b(2,14),new b(4,15)),new T(26,new b(4,13),new b(1,14))),new r(8,Int32Array.from([6,24,42]),new T(24,new b(2,97)),new T(22,new b(2,38),new b(2,39)),new T(22,new b(4,18),new b(2,19)),new T(26,new b(4,14),new b(2,15))),new r(9,Int32Array.from([6,26,46]),new T(30,new b(2,116)),new T(22,new b(3,36),new b(2,37)),new T(20,new b(4,16),new b(4,17)),new T(24,new b(4,12),new b(4,13))),new r(10,Int32Array.from([6,28,50]),new T(18,new b(2,68),new b(2,69)),new T(26,new b(4,43),new b(1,44)),new T(24,new b(6,19),new b(2,20)),new T(28,new b(6,15),new b(2,16))),new r(11,Int32Array.from([6,30,54]),new T(20,new b(4,81)),new T(30,new b(1,50),new b(4,51)),new T(28,new b(4,22),new b(4,23)),new T(24,new b(3,12),new b(8,13))),new r(12,Int32Array.from([6,32,58]),new T(24,new b(2,92),new b(2,93)),new T(22,new b(6,36),new b(2,37)),new T(26,new b(4,20),new b(6,21)),new T(28,new b(7,14),new b(4,15))),new r(13,Int32Array.from([6,34,62]),new T(26,new b(4,107)),new T(22,new b(8,37),new b(1,38)),new T(24,new b(8,20),new b(4,21)),new T(22,new b(12,11),new b(4,12))),new r(14,Int32Array.from([6,26,46,66]),new T(30,new b(3,115),new b(1,116)),new T(24,new b(4,40),new b(5,41)),new T(20,new b(11,16),new b(5,17)),new T(24,new b(11,12),new b(5,13))),new r(15,Int32Array.from([6,26,48,70]),new T(22,new b(5,87),new b(1,88)),new T(24,new b(5,41),new b(5,42)),new T(30,new b(5,24),new b(7,25)),new T(24,new b(11,12),new b(7,13))),new r(16,Int32Array.from([6,26,50,74]),new T(24,new b(5,98),new b(1,99)),new T(28,new b(7,45),new b(3,46)),new T(24,new b(15,19),new b(2,20)),new T(30,new b(3,15),new b(13,16))),new r(17,Int32Array.from([6,30,54,78]),new T(28,new b(1,107),new b(5,108)),new T(28,new b(10,46),new b(1,47)),new T(28,new b(1,22),new b(15,23)),new T(28,new b(2,14),new b(17,15))),new r(18,Int32Array.from([6,30,56,82]),new T(30,new b(5,120),new b(1,121)),new T(26,new b(9,43),new b(4,44)),new T(28,new b(17,22),new b(1,23)),new T(28,new b(2,14),new b(19,15))),new r(19,Int32Array.from([6,30,58,86]),new T(28,new b(3,113),new b(4,114)),new T(26,new b(3,44),new b(11,45)),new T(26,new b(17,21),new b(4,22)),new T(26,new b(9,13),new b(16,14))),new r(20,Int32Array.from([6,34,62,90]),new T(28,new b(3,107),new b(5,108)),new T(26,new b(3,41),new b(13,42)),new T(30,new b(15,24),new b(5,25)),new T(28,new b(15,15),new b(10,16))),new r(21,Int32Array.from([6,28,50,72,94]),new T(28,new b(4,116),new b(4,117)),new T(26,new b(17,42)),new T(28,new b(17,22),new b(6,23)),new T(30,new b(19,16),new b(6,17))),new r(22,Int32Array.from([6,26,50,74,98]),new T(28,new b(2,111),new b(7,112)),new T(28,new b(17,46)),new T(30,new b(7,24),new b(16,25)),new T(24,new b(34,13))),new r(23,Int32Array.from([6,30,54,78,102]),new T(30,new b(4,121),new b(5,122)),new T(28,new b(4,47),new b(14,48)),new T(30,new b(11,24),new b(14,25)),new T(30,new b(16,15),new b(14,16))),new r(24,Int32Array.from([6,28,54,80,106]),new T(30,new b(6,117),new b(4,118)),new T(28,new b(6,45),new b(14,46)),new T(30,new b(11,24),new b(16,25)),new T(30,new b(30,16),new b(2,17))),new r(25,Int32Array.from([6,32,58,84,110]),new T(26,new b(8,106),new b(4,107)),new T(28,new b(8,47),new b(13,48)),new T(30,new b(7,24),new b(22,25)),new T(30,new b(22,15),new b(13,16))),new r(26,Int32Array.from([6,30,58,86,114]),new T(28,new b(10,114),new b(2,115)),new T(28,new b(19,46),new b(4,47)),new T(28,new b(28,22),new b(6,23)),new T(30,new b(33,16),new b(4,17))),new r(27,Int32Array.from([6,34,62,90,118]),new T(30,new b(8,122),new b(4,123)),new T(28,new b(22,45),new b(3,46)),new T(30,new b(8,23),new b(26,24)),new T(30,new b(12,15),new b(28,16))),new r(28,Int32Array.from([6,26,50,74,98,122]),new T(30,new b(3,117),new b(10,118)),new T(28,new b(3,45),new b(23,46)),new T(30,new b(4,24),new b(31,25)),new T(30,new b(11,15),new b(31,16))),new r(29,Int32Array.from([6,30,54,78,102,126]),new T(30,new b(7,116),new b(7,117)),new T(28,new b(21,45),new b(7,46)),new T(30,new b(1,23),new b(37,24)),new T(30,new b(19,15),new b(26,16))),new r(30,Int32Array.from([6,26,52,78,104,130]),new T(30,new b(5,115),new b(10,116)),new T(28,new b(19,47),new b(10,48)),new T(30,new b(15,24),new b(25,25)),new T(30,new b(23,15),new b(25,16))),new r(31,Int32Array.from([6,30,56,82,108,134]),new T(30,new b(13,115),new b(3,116)),new T(28,new b(2,46),new b(29,47)),new T(30,new b(42,24),new b(1,25)),new T(30,new b(23,15),new b(28,16))),new r(32,Int32Array.from([6,34,60,86,112,138]),new T(30,new b(17,115)),new T(28,new b(10,46),new b(23,47)),new T(30,new b(10,24),new b(35,25)),new T(30,new b(19,15),new b(35,16))),new r(33,Int32Array.from([6,30,58,86,114,142]),new T(30,new b(17,115),new b(1,116)),new T(28,new b(14,46),new b(21,47)),new T(30,new b(29,24),new b(19,25)),new T(30,new b(11,15),new b(46,16))),new r(34,Int32Array.from([6,34,62,90,118,146]),new T(30,new b(13,115),new b(6,116)),new T(28,new b(14,46),new b(23,47)),new T(30,new b(44,24),new b(7,25)),new T(30,new b(59,16),new b(1,17))),new r(35,Int32Array.from([6,30,54,78,102,126,150]),new T(30,new b(12,121),new b(7,122)),new T(28,new b(12,47),new b(26,48)),new T(30,new b(39,24),new b(14,25)),new T(30,new b(22,15),new b(41,16))),new r(36,Int32Array.from([6,24,50,76,102,128,154]),new T(30,new b(6,121),new b(14,122)),new T(28,new b(6,47),new b(34,48)),new T(30,new b(46,24),new b(10,25)),new T(30,new b(2,15),new b(64,16))),new r(37,Int32Array.from([6,28,54,80,106,132,158]),new T(30,new b(17,122),new b(4,123)),new T(28,new b(29,46),new b(14,47)),new T(30,new b(49,24),new b(10,25)),new T(30,new b(24,15),new b(46,16))),new r(38,Int32Array.from([6,32,58,84,110,136,162]),new T(30,new b(4,122),new b(18,123)),new T(28,new b(13,46),new b(32,47)),new T(30,new b(48,24),new b(14,25)),new T(30,new b(42,15),new b(32,16))),new r(39,Int32Array.from([6,26,54,82,110,138,166]),new T(30,new b(20,117),new b(4,118)),new T(28,new b(40,47),new b(7,48)),new T(30,new b(43,24),new b(22,25)),new T(30,new b(10,15),new b(67,16))),new r(40,Int32Array.from([6,30,58,86,114,142,170]),new T(30,new b(19,118),new b(6,119)),new T(28,new b(18,47),new b(31,48)),new T(30,new b(34,24),new b(34,25)),new T(30,new b(20,15),new b(61,16)))],r})(),bt;(function(r){r[r.DATA_MASK_000=0]="DATA_MASK_000",r[r.DATA_MASK_001=1]="DATA_MASK_001",r[r.DATA_MASK_010=2]="DATA_MASK_010",r[r.DATA_MASK_011=3]="DATA_MASK_011",r[r.DATA_MASK_100=4]="DATA_MASK_100",r[r.DATA_MASK_101=5]="DATA_MASK_101",r[r.DATA_MASK_110=6]="DATA_MASK_110",r[r.DATA_MASK_111=7]="DATA_MASK_111"})(bt||(bt={}));var nf=(function(){function r(e,t){this.value=e,this.isMasked=t}return r.prototype.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var i=0;i<t;i++)this.isMasked(n,i)&&e.flip(i,n)},r.values=new Map([[bt.DATA_MASK_000,new r(bt.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[bt.DATA_MASK_001,new r(bt.DATA_MASK_001,function(e,t){return(e&1)===0})],[bt.DATA_MASK_010,new r(bt.DATA_MASK_010,function(e,t){return t%3===0})],[bt.DATA_MASK_011,new r(bt.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[bt.DATA_MASK_100,new r(bt.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[bt.DATA_MASK_101,new r(bt.DATA_MASK_101,function(e,t){return e*t%6===0})],[bt.DATA_MASK_110,new r(bt.DATA_MASK_110,function(e,t){return e*t%6<3})],[bt.DATA_MASK_111,new r(bt.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),r})(),f4=(function(){function r(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new Y;this.bitMatrix=e}return r.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var i=this.bitMatrix.getHeight(),o=0,a=i-7,n=i-1;n>=a;n--)o=this.copyBit(8,n,o);for(var t=i-8;t<i;t++)o=this.copyBit(t,8,o);if(this.parsedFormatInfo=W0.decodeFormatInformation(e,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Y},r.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Sn.getVersionForNumber(t);for(var n=0,i=e-11,o=5;o>=0;o--)for(var a=e-9;a>=i;a--)n=this.copyBit(a,o,n);var s=Sn.decodeVersionInformation(n);if(s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;n=0;for(var a=5;a>=0;a--)for(var o=e-9;o>=i;o--)n=this.copyBit(a,o,n);if(s=Sn.decodeVersionInformation(n),s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;throw new Y},r.prototype.copyBit=function(e,t,n){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?n<<1|1:n<<1},r.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),n=nf.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,i);for(var o=t.buildFunctionPattern(),a=!0,s=new Uint8Array(t.getTotalCodewords()),l=0,u=0,c=0,f=i-1;f>0;f-=2){f===6&&f--;for(var d=0;d<i;d++)for(var h=a?i-1-d:d,p=0;p<2;p++)o.get(f-p,h)||(c++,u<<=1,this.bitMatrix.get(f-p,h)&&(u|=1),c===8&&(s[l++]=u,c=0,u=0));a=!a}if(l!==t.getTotalCodewords())throw new Y;return s},r.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=nf.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},r.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},r.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,n=e.getWidth();t<n;t++)for(var i=t+1,o=e.getHeight();i<o;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},r})(),of=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},d4=(function(){function r(e,t){this.numDataCodewords=e,this.codewords=t}return r.getDataBlocks=function(e,t,n){var i,o,a,s;if(e.length!==t.getTotalCodewords())throw new fe;var l=t.getECBlocksForLevel(n),u=0,c=l.getECBlocks();try{for(var f=of(c),d=f.next();!d.done;d=f.next()){var h=d.value;u+=h.getCount()}}catch(k){i={error:k}}finally{try{d&&!d.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}var p=new Array(u),y=0;try{for(var m=of(c),g=m.next();!g.done;g=m.next())for(var h=g.value,x=0;x<h.getCount();x++){var w=h.getDataCodewords(),_=l.getECCodewordsPerBlock()+w;p[y++]=new r(w,new Uint8Array(_))}}catch(k){a={error:k}}finally{try{g&&!g.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}for(var C=p[0].codewords.length,E=p.length-1;E>=0;){var I=p[E].codewords.length;if(I===C)break;E--}E++;for(var D=C-l.getECCodewordsPerBlock(),M=0,x=0;x<D;x++)for(var j=0;j<y;j++)p[j].codewords[x]=e[M++];for(var j=E;j<y;j++)p[j].codewords[D]=e[M++];for(var X=p[0].codewords.length,x=D;x<X;x++)for(var j=0;j<y;j++){var F=j<E?x:x+1;p[j].codewords[F]=e[M++]}return p},r.prototype.getNumDataCodewords=function(){return this.numDataCodewords},r.prototype.getCodewords=function(){return this.codewords},r})(),ir;(function(r){r[r.TERMINATOR=0]="TERMINATOR",r[r.NUMERIC=1]="NUMERIC",r[r.ALPHANUMERIC=2]="ALPHANUMERIC",r[r.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",r[r.BYTE=4]="BYTE",r[r.ECI=5]="ECI",r[r.KANJI=6]="KANJI",r[r.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",r[r.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",r[r.HANZI=9]="HANZI"})(ir||(ir={}));var et=(function(){function r(e,t,n,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=i,r.FOR_BITS.set(i,this),r.FOR_VALUE.set(e,this)}return r.forBits=function(e){var t=r.FOR_BITS.get(e);if(t===void 0)throw new fe;return t},r.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),n;return t<=9?n=0:t<=26?n=1:n=2,this.characterCountBitsForVersions[n]},r.prototype.getValue=function(){return this.value},r.prototype.getBits=function(){return this.bits},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.prototype.toString=function(){return this.stringValue},r.FOR_BITS=new Map,r.FOR_VALUE=new Map,r.TERMINATOR=new r(ir.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),r.NUMERIC=new r(ir.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),r.ALPHANUMERIC=new r(ir.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),r.STRUCTURED_APPEND=new r(ir.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),r.BYTE=new r(ir.BYTE,"BYTE",Int32Array.from([8,16,16]),4),r.ECI=new r(ir.ECI,"ECI",Int32Array.from([0,0,0]),7),r.KANJI=new r(ir.KANJI,"KANJI",Int32Array.from([8,10,12]),8),r.FNC1_FIRST_POSITION=new r(ir.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),r.FNC1_SECOND_POSITION=new r(ir.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),r.HANZI=new r(ir.HANZI,"HANZI",Int32Array.from([8,10,12]),13),r})(),h4=(function(){function r(){}return r.decode=function(e,t,n,i){var o=new G0(e),a=new Ae,s=new Array,l=-1,u=-1;try{var c=null,f=!1,d=void 0;do{if(o.available()<4)d=et.TERMINATOR;else{var h=o.readBits(4);d=et.forBits(h)}switch(d){case et.TERMINATOR:break;case et.FNC1_FIRST_POSITION:case et.FNC1_SECOND_POSITION:f=!0;break;case et.STRUCTURED_APPEND:if(o.available()<16)throw new Y;l=o.readBits(8),u=o.readBits(8);break;case et.ECI:var p=r.parseECIValue(o);if(c=gt.getCharacterSetECIByValue(p),c===null)throw new Y;break;case et.HANZI:var y=o.readBits(4),m=o.readBits(d.getCharacterCountBits(t));y===r.GB2312_SUBSET&&r.decodeHanziSegment(o,a,m);break;default:var g=o.readBits(d.getCharacterCountBits(t));switch(d){case et.NUMERIC:r.decodeNumericSegment(o,a,g);break;case et.ALPHANUMERIC:r.decodeAlphanumericSegment(o,a,g,f);break;case et.BYTE:r.decodeByteSegment(o,a,g,c,s,i);break;case et.KANJI:r.decodeKanjiSegment(o,a,g);break;default:throw new Y}break}}while(d!==et.TERMINATOR)}catch{throw new Y}return new ha(e,a.toString(),s.length===0?null:s,n===null?null:n.toString(),l,u)},r.decodeHanziSegment=function(e,t,n){if(n*13>e.available())throw new Y;for(var i=new Uint8Array(2*n),o=0;n>0;){var a=e.readBits(13),s=a/96<<8&4294967295|a%96;s<959?s+=41377:s+=42657,i[o]=s>>8&255,i[o+1]=s&255,o+=2,n--}try{t.append(ur.decode(i,Re.GB2312))}catch(l){throw new Y(l)}},r.decodeKanjiSegment=function(e,t,n){if(n*13>e.available())throw new Y;for(var i=new Uint8Array(2*n),o=0;n>0;){var a=e.readBits(13),s=a/192<<8&4294967295|a%192;s<7936?s+=33088:s+=49472,i[o]=s>>8,i[o+1]=s,o+=2,n--}try{t.append(ur.decode(i,Re.SHIFT_JIS))}catch(l){throw new Y(l)}},r.decodeByteSegment=function(e,t,n,i,o,a){if(8*n>e.available())throw new Y;for(var s=new Uint8Array(n),l=0;l<n;l++)s[l]=e.readBits(8);var u;i===null?u=Re.guessEncoding(s,a):u=i.getName();try{t.append(ur.decode(s,u))}catch(c){throw new Y(c)}o.push(s)},r.toAlphaNumericChar=function(e){if(e>=r.ALPHANUMERIC_CHARS.length)throw new Y;return r.ALPHANUMERIC_CHARS[e]},r.decodeAlphanumericSegment=function(e,t,n,i){for(var o=t.length();n>1;){if(e.available()<11)throw new Y;var a=e.readBits(11);t.append(r.toAlphaNumericChar(Math.floor(a/45))),t.append(r.toAlphaNumericChar(a%45)),n-=2}if(n===1){if(e.available()<6)throw new Y;t.append(r.toAlphaNumericChar(e.readBits(6)))}if(i)for(var s=o;s<t.length();s++)t.charAt(s)==="%"&&(s<t.length()-1&&t.charAt(s+1)==="%"?t.deleteCharAt(s+1):t.setCharAt(s,""))},r.decodeNumericSegment=function(e,t,n){for(;n>=3;){if(e.available()<10)throw new Y;var i=e.readBits(10);if(i>=1e3)throw new Y;t.append(r.toAlphaNumericChar(Math.floor(i/100))),t.append(r.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(r.toAlphaNumericChar(i%10)),n-=3}if(n===2){if(e.available()<7)throw new Y;var o=e.readBits(7);if(o>=100)throw new Y;t.append(r.toAlphaNumericChar(Math.floor(o/10))),t.append(r.toAlphaNumericChar(o%10))}else if(n===1){if(e.available()<4)throw new Y;var a=e.readBits(4);if(a>=10)throw new Y;t.append(r.toAlphaNumericChar(a))}},r.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var n=e.readBits(8);return(t&63)<<8&4294967295|n}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new Y},r.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",r.GB2312_SUBSET=1,r})(),q0=(function(){function r(e){this.mirrored=e}return r.prototype.isMirrored=function(){return this.mirrored},r.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},r})(),af=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},p4=(function(){function r(){this.rsDecoder=new pa(Kt.QR_CODE_FIELD_256)}return r.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(Nr.parseFromBooleanArray(e),t)},r.prototype.decodeBitMatrix=function(e,t){var n=new f4(e),i=null;try{return this.decodeBitMatrixParser(n,t)}catch(a){i=a}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var o=this.decodeBitMatrixParser(n,t);return o.setOther(new q0(!0)),o}catch(a){throw i!==null?i:a}},r.prototype.decodeBitMatrixParser=function(e,t){var n,i,o,a,s=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),c=d4.getDataBlocks(u,s,l),f=0;try{for(var d=af(c),h=d.next();!h.done;h=d.next()){var p=h.value;f+=p.getNumDataCodewords()}}catch(E){n={error:E}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}var y=new Uint8Array(f),m=0;try{for(var g=af(c),x=g.next();!x.done;x=g.next()){var p=x.value,w=p.getCodewords(),_=p.getNumDataCodewords();this.correctErrors(w,_);for(var C=0;C<_;C++)y[m++]=w[C]}}catch(E){o={error:E}}finally{try{x&&!x.done&&(a=g.return)&&a.call(g)}finally{if(o)throw o.error}}return h4.decode(y,s,l,t)},r.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new ut}for(var i=0;i<t;i++)e[i]=n[i]},r})(),v4=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),g4=(function(r){v4(e,r);function e(t,n,i){var o=r.call(this,t,n)||this;return o.estimatedModuleSize=i,o}return e.prototype.aboutEquals=function(t,n,i){if(Math.abs(n-this.getY())<=t&&Math.abs(i-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,n,i){var o=(this.getX()+n)/2,a=(this.getY()+t)/2,s=(this.estimatedModuleSize+i)/2;return new e(o,a,s)},e})(oe),y4=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},m4=(function(){function r(e,t,n,i,o,a,s){this.image=e,this.startX=t,this.startY=n,this.width=i,this.height=o,this.moduleSize=a,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return r.prototype.find=function(){for(var e=this.startX,t=this.height,n=this.width,i=e+n,o=this.startY+t/2,a=new Int32Array(3),s=this.image,l=0;l<t;l++){var u=o+((l&1)===0?Math.floor((l+1)/2):-Math.floor((l+1)/2));a[0]=0,a[1]=0,a[2]=0;for(var c=e;c<i&&!s.get(c,u);)c++;for(var f=0;c<i;){if(s.get(c,u))if(f===1)a[1]++;else if(f===2){if(this.foundPatternCross(a)){var d=this.handlePossibleCenter(a,u,c);if(d!==null)return d}a[0]=a[2],a[1]=1,a[2]=0,f=1}else a[++f]++;else f===1&&f++,a[f]++;c++}if(this.foundPatternCross(a)){var d=this.handlePossibleCenter(a,u,i);if(d!==null)return d}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new B},r.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},r.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,n=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=n)return!1;return!0},r.prototype.crossCheckVertical=function(e,t,n,i){var o=this.image,a=o.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var l=e;l>=0&&o.get(t,l)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&!o.get(t,l)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<a&&o.get(t,l)&&s[1]<=n;)s[1]++,l++;if(l===a||s[1]>n)return NaN;for(;l<a&&!o.get(t,l)&&s[2]<=n;)s[2]++,l++;if(s[2]>n)return NaN;var u=s[0]+s[1]+s[2];return 5*Math.abs(u-i)>=2*i?NaN:this.foundPatternCross(s)?r.centerFromEnd(s,l):NaN},r.prototype.handlePossibleCenter=function(e,t,n){var i,o,a=e[0]+e[1]+e[2],s=r.centerFromEnd(e,n),l=this.crossCheckVertical(t,s,2*e[1],a);if(!isNaN(l)){var u=(e[0]+e[1]+e[2])/3;try{for(var c=y4(this.possibleCenters),f=c.next();!f.done;f=c.next()){var d=f.value;if(d.aboutEquals(u,l,s))return d.combineEstimate(l,s,u)}}catch(p){i={error:p}}finally{try{f&&!f.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}var h=new g4(s,l,u);this.possibleCenters.push(h),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(h)}return null},r})(),x4=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),w4=(function(r){x4(e,r);function e(t,n,i,o){var a=r.call(this,t,n)||this;return a.estimatedModuleSize=i,a.count=o,o===void 0&&(a.count=1),a}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,n,i){if(Math.abs(n-this.getY())<=t&&Math.abs(i-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,n,i){var o=this.count+1,a=(this.count*this.getX()+n)/o,s=(this.count*this.getY()+t)/o,l=(this.count*this.estimatedModuleSize+i)/o;return new e(a,s,l,o)},e})(oe),_4=(function(){function r(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return r.prototype.getBottomLeft=function(){return this.bottomLeft},r.prototype.getTopLeft=function(){return this.topLeft},r.prototype.getTopRight=function(){return this.topRight},r})(),yi=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},b4=(function(){function r(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return r.prototype.getImage=function(){return this.image},r.prototype.getPossibleCenters=function(){return this.possibleCenters},r.prototype.find=function(e){var t=e!=null&&e.get(Je.TRY_HARDER)!==void 0,n=e!=null&&e.get(Je.PURE_BARCODE)!==void 0,i=this.image,o=i.getHeight(),a=i.getWidth(),s=Math.floor(3*o/(4*r.MAX_MODULES));(s<r.MIN_SKIP||t)&&(s=r.MIN_SKIP);for(var l=!1,u=new Int32Array(5),c=s-1;c<o&&!l;c+=s){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;for(var f=0,d=0;d<a;d++)if(i.get(d,c))(f&1)===1&&f++,u[f]++;else if((f&1)===0)if(f===4)if(r.foundPatternCross(u)){var h=this.handlePossibleCenter(u,c,d,n);if(h===!0)if(s=2,this.hasSkipped===!0)l=this.haveMultiplyConfirmedCenters();else{var p=this.findRowSkip();p>u[2]&&(c+=p-u[2]-s,d=a-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;continue}f=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;else u[++f]++;else u[f]++;if(r.foundPatternCross(u)){var h=this.handlePossibleCenter(u,c,a,n);h===!0&&(s=u[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}}var y=this.selectBestPatterns();return oe.orderBestPatterns(y),new _4(y)},r.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},r.foundPatternCross=function(e){for(var t=0,n=0;n<5;n++){var i=e[n];if(i===0)return!1;t+=i}if(t<7)return!1;var o=t/7,a=o/2;return Math.abs(o-e[0])<a&&Math.abs(o-e[1])<a&&Math.abs(3*o-e[2])<3*a&&Math.abs(o-e[3])<a&&Math.abs(o-e[4])<a},r.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},r.prototype.crossCheckDiagonal=function(e,t,n,i){for(var o=this.getCrossCheckStateCount(),a=0,s=this.image;e>=a&&t>=a&&s.get(t-a,e-a);)o[2]++,a++;if(e<a||t<a)return!1;for(;e>=a&&t>=a&&!s.get(t-a,e-a)&&o[1]<=n;)o[1]++,a++;if(e<a||t<a||o[1]>n)return!1;for(;e>=a&&t>=a&&s.get(t-a,e-a)&&o[0]<=n;)o[0]++,a++;if(o[0]>n)return!1;var l=s.getHeight(),u=s.getWidth();for(a=1;e+a<l&&t+a<u&&s.get(t+a,e+a);)o[2]++,a++;if(e+a>=l||t+a>=u)return!1;for(;e+a<l&&t+a<u&&!s.get(t+a,e+a)&&o[3]<n;)o[3]++,a++;if(e+a>=l||t+a>=u||o[3]>=n)return!1;for(;e+a<l&&t+a<u&&s.get(t+a,e+a)&&o[4]<n;)o[4]++,a++;if(o[4]>=n)return!1;var c=o[0]+o[1]+o[2]+o[3]+o[4];return Math.abs(c-i)<2*i&&r.foundPatternCross(o)},r.prototype.crossCheckVertical=function(e,t,n,i){for(var o=this.image,a=o.getHeight(),s=this.getCrossCheckStateCount(),l=e;l>=0&&o.get(t,l);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!o.get(t,l)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&o.get(t,l)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<a&&o.get(t,l);)s[2]++,l++;if(l===a)return NaN;for(;l<a&&!o.get(t,l)&&s[3]<n;)s[3]++,l++;if(l===a||s[3]>=n)return NaN;for(;l<a&&o.get(t,l)&&s[4]<n;)s[4]++,l++;if(s[4]>=n)return NaN;var u=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(u-i)>=2*i?NaN:r.foundPatternCross(s)?r.centerFromEnd(s,l):NaN},r.prototype.crossCheckHorizontal=function(e,t,n,i){for(var o=this.image,a=o.getWidth(),s=this.getCrossCheckStateCount(),l=e;l>=0&&o.get(l,t);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!o.get(l,t)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&o.get(l,t)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<a&&o.get(l,t);)s[2]++,l++;if(l===a)return NaN;for(;l<a&&!o.get(l,t)&&s[3]<n;)s[3]++,l++;if(l===a||s[3]>=n)return NaN;for(;l<a&&o.get(l,t)&&s[4]<n;)s[4]++,l++;if(s[4]>=n)return NaN;var u=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(u-i)>=i?NaN:r.foundPatternCross(s)?r.centerFromEnd(s,l):NaN},r.prototype.handlePossibleCenter=function(e,t,n,i){var o=e[0]+e[1]+e[2]+e[3]+e[4],a=r.centerFromEnd(e,n),s=this.crossCheckVertical(t,Math.floor(a),e[2],o);if(!isNaN(s)&&(a=this.crossCheckHorizontal(Math.floor(a),Math.floor(s),e[2],o),!isNaN(a)&&(!i||this.crossCheckDiagonal(Math.floor(s),Math.floor(a),e[2],o)))){for(var l=o/7,u=!1,c=this.possibleCenters,f=0,d=c.length;f<d;f++){var h=c[f];if(h.aboutEquals(l,s,a)){c[f]=h.combineEstimate(s,a,l),u=!0;break}}if(!u){var p=new w4(a,s,l);c.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return!0}return!1},r.prototype.findRowSkip=function(){var e,t,n=this.possibleCenters.length;if(n<=1)return 0;var i=null;try{for(var o=yi(this.possibleCenters),a=o.next();!a.done;a=o.next()){var s=a.value;if(s.getCount()>=r.CENTER_QUORUM)if(i==null)i=s;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-s.getX())-Math.abs(i.getY()-s.getY()))/2)}}catch(l){e={error:l}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return 0},r.prototype.haveMultiplyConfirmedCenters=function(){var e,t,n,i,o=0,a=0,s=this.possibleCenters.length;try{for(var l=yi(this.possibleCenters),u=l.next();!u.done;u=l.next()){var c=u.value;c.getCount()>=r.CENTER_QUORUM&&(o++,a+=c.getEstimatedModuleSize())}}catch(y){e={error:y}}finally{try{u&&!u.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}if(o<3)return!1;var f=a/s,d=0;try{for(var h=yi(this.possibleCenters),p=h.next();!p.done;p=h.next()){var c=p.value;d+=Math.abs(c.getEstimatedModuleSize()-f)}}catch(y){n={error:y}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}return d<=.05*a},r.prototype.selectBestPatterns=function(){var e,t,n,i,o=this.possibleCenters.length;if(o<3)throw new B;var a=this.possibleCenters,s;if(o>3){var l=0,u=0;try{for(var c=yi(this.possibleCenters),f=c.next();!f.done;f=c.next()){var d=f.value,h=d.getEstimatedModuleSize();l+=h,u+=h*h}}catch(C){e={error:C}}finally{try{f&&!f.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}s=l/o;var p=Math.sqrt(u/o-s*s);a.sort(function(C,E){var I=Math.abs(E.getEstimatedModuleSize()-s),D=Math.abs(C.getEstimatedModuleSize()-s);return I<D?-1:I>D?1:0});for(var y=Math.max(.2*s,p),m=0;m<a.length&&a.length>3;m++){var g=a[m];Math.abs(g.getEstimatedModuleSize()-s)>y&&(a.splice(m,1),m--)}}if(a.length>3){var l=0;try{for(var x=yi(a),w=x.next();!w.done;w=x.next()){var _=w.value;l+=_.getEstimatedModuleSize()}}catch(E){n={error:E}}finally{try{w&&!w.done&&(i=x.return)&&i.call(x)}finally{if(n)throw n.error}}s=l/a.length,a.sort(function(E,I){if(I.getCount()===E.getCount()){var D=Math.abs(I.getEstimatedModuleSize()-s),M=Math.abs(E.getEstimatedModuleSize()-s);return D<M?1:D>M?-1:0}else return I.getCount()-E.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]},r.CENTER_QUORUM=2,r.MIN_SKIP=3,r.MAX_MODULES=57,r})(),E4=(function(){function r(e){this.image=e}return r.prototype.getImage=function(){return this.image},r.prototype.getResultPointCallback=function(){return this.resultPointCallback},r.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Je.NEED_RESULT_POINT_CALLBACK);var t=new b4(this.image,this.resultPointCallback),n=t.find(e);return this.processFinderPatternInfo(n)},r.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),n=e.getTopRight(),i=e.getBottomLeft(),o=this.calculateModuleSize(t,n,i);if(o<1)throw new B("No pattern found in proccess finder.");var a=r.computeDimension(t,n,i,o),s=Sn.getProvisionalVersionForDimension(a),l=s.getDimensionForVersion()-7,u=null;if(s.getAlignmentPatternCenters().length>0)for(var c=n.getX()-t.getX()+i.getX(),f=n.getY()-t.getY()+i.getY(),d=1-3/l,h=Math.floor(t.getX()+d*(c-t.getX())),p=Math.floor(t.getY()+d*(f-t.getY())),y=4;y<=16;y<<=1)try{u=this.findAlignmentInRegion(o,h,p,y);break}catch(w){if(!(w instanceof B))throw w}var m=r.createTransform(t,n,i,u,a),g=r.sampleGrid(this.image,m,a),x;return u===null?x=[i,t,n]:x=[i,t,n,u],new Nl(g,x)},r.createTransform=function(e,t,n,i,o){var a=o-3.5,s,l,u,c;return i!==null?(s=i.getX(),l=i.getY(),u=a-3,c=u):(s=t.getX()-e.getX()+n.getX(),l=t.getY()-e.getY()+n.getY(),u=a,c=a),j0.quadrilateralToQuadrilateral(3.5,3.5,a,3.5,u,c,3.5,a,e.getX(),e.getY(),t.getX(),t.getY(),s,l,n.getX(),n.getY())},r.sampleGrid=function(e,t,n){var i=Dl.getInstance();return i.sampleGridWithTransform(e,n,n,t)},r.computeDimension=function(e,t,n,i){var o=ke.round(oe.distance(e,t)/i),a=ke.round(oe.distance(e,n)/i),s=Math.floor((o+a)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new B("Dimensions could be not found.")}return s},r.prototype.calculateModuleSize=function(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2},r.prototype.calculateModuleSizeOneWay=function(e,t){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?i/7:isNaN(i)?n/7:(n+i)/14},r.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,n,i){var o=this.sizeOfBlackWhiteBlackRun(e,t,n,i),a=1,s=e-(n-e);s<0?(a=e/(e-s),s=0):s>=this.image.getWidth()&&(a=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);var l=Math.floor(t-(i-t)*a);return a=1,l<0?(a=t/(t-l),l=0):l>=this.image.getHeight()&&(a=(this.image.getHeight()-1-t)/(l-t),l=this.image.getHeight()-1),s=Math.floor(e+(s-e)*a),o+=this.sizeOfBlackWhiteBlackRun(e,t,s,l),o-1},r.prototype.sizeOfBlackWhiteBlackRun=function(e,t,n,i){var o=Math.abs(i-t)>Math.abs(n-e);if(o){var a=e;e=t,t=a,a=n,n=i,i=a}for(var s=Math.abs(n-e),l=Math.abs(i-t),u=-s/2,c=e<n?1:-1,f=t<i?1:-1,d=0,h=n+c,p=e,y=t;p!==h;p+=c){var m=o?y:p,g=o?p:y;if(d===1===this.image.get(m,g)){if(d===2)return ke.distance(p,y,e,t);d++}if(u+=l,u>0){if(y===i)break;y+=f,u-=s}}return d===2?ke.distance(n+c,i,e,t):NaN},r.prototype.findAlignmentInRegion=function(e,t,n,i){var o=Math.floor(i*e),a=Math.max(0,t-o),s=Math.min(this.image.getWidth()-1,t+o);if(s-a<e*3)throw new B("Alignment top exceeds estimated module size.");var l=Math.max(0,n-o),u=Math.min(this.image.getHeight()-1,n+o);if(u-l<e*3)throw new B("Alignment bottom exceeds estimated module size.");var c=new m4(this.image,a,l,s-a,u-l,e,this.resultPointCallback);return c.find()},r})(),Wo=(function(){function r(){this.decoder=new p4}return r.prototype.getDecoder=function(){return this.decoder},r.prototype.decode=function(e,t){var n,i;if(t!=null&&t.get(Je.PURE_BARCODE)!==void 0){var o=r.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(o,t),i=r.NO_POINTS}else{var a=new E4(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(a.getBits(),t),i=a.getPoints()}n.getOther()instanceof q0&&n.getOther().applyMirroredCorrection(i);var s=new Lt(n.getText(),n.getRawBytes(),void 0,i,ce.QR_CODE,void 0),l=n.getByteSegments();l!==null&&s.putMetadata(Tt.BYTE_SEGMENTS,l);var u=n.getECLevel();return u!==null&&s.putMetadata(Tt.ERROR_CORRECTION_LEVEL,u),n.hasStructuredAppend()&&(s.putMetadata(Tt.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),s.putMetadata(Tt.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),s},r.prototype.reset=function(){},r.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t===null||n===null)throw new B;var i=this.moduleSize(t,e),o=t[1],a=n[1],s=t[0],l=n[0];if(s>=l||o>=a)throw new B;if(a-o!==l-s&&(l=s+(a-o),l>=e.getWidth()))throw new B;var u=Math.round((l-s+1)/i),c=Math.round((a-o+1)/i);if(u<=0||c<=0)throw new B;if(c!==u)throw new B;var f=Math.floor(i/2);o+=f,s+=f;var d=s+Math.floor((u-1)*i)-l;if(d>0){if(d>f)throw new B;s-=d}var h=o+Math.floor((c-1)*i)-a;if(h>0){if(h>f)throw new B;o-=h}for(var p=new Nr(u,c),y=0;y<c;y++)for(var m=o+Math.floor(y*i),g=0;g<u;g++)e.get(s+Math.floor(g*i),m)&&p.set(g,y);return p},r.moduleSize=function(e,t){for(var n=t.getHeight(),i=t.getWidth(),o=e[0],a=e[1],s=!0,l=0;o<i&&a<n;){if(s!==t.get(o,a)){if(++l===5)break;s=!s}o++,a++}if(o===i||a===n)throw new B;return(o-e[0])/7},r.NO_POINTS=new Array,r})(),A4=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pe=(function(){function r(){}return r.prototype.PDF417Common=function(){},r.getBitCountSum=function(e){return ke.sum(e)},r.toIntArray=function(e){var t,n;if(e==null||!e.length)return r.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),o=0;try{for(var a=A4(e),s=a.next();!s.done;s=a.next()){var l=s.value;i[o++]=l}}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i},r.getCodeword=function(e){var t=yt.binarySearch(r.SYMBOL_TABLE,e&262143);return t<0?-1:(r.CODEWORD_TABLE[t]-1)%r.NUMBER_OF_CODEWORDS},r.NUMBER_OF_CODEWORDS=929,r.MAX_CODEWORDS_IN_BARCODE=r.NUMBER_OF_CODEWORDS-1,r.MIN_ROWS_IN_BARCODE=3,r.MAX_ROWS_IN_BARCODE=90,r.MODULES_IN_CODEWORD=17,r.MODULES_IN_STOP_PATTERN=18,r.BARS_IN_MODULE=8,r.EMPTY_INT_ARRAY=new Int32Array([]),r.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),r.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),r})(),C4=(function(){function r(e,t){this.bits=e,this.points=t}return r.prototype.getBits=function(){return this.bits},r.prototype.getPoints=function(){return this.points},r})(),S4=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},I4=(function(){function r(){}return r.detectMultiple=function(e,t,n){var i=e.getBlackMatrix(),o=r.detect(n,i);return o.length||(i=i.clone(),i.rotate180(),o=r.detect(n,i)),new C4(i,o)},r.detect=function(e,t){for(var n,i,o=new Array,a=0,s=0,l=!1;a<t.getHeight();){var u=r.findVertices(t,a,s);if(u[0]==null&&u[3]==null){if(!l)break;l=!1,s=0;try{for(var c=(n=void 0,S4(o)),f=c.next();!f.done;f=c.next()){var d=f.value;d[1]!=null&&(a=Math.trunc(Math.max(a,d[1].getY()))),d[3]!=null&&(a=Math.max(a,Math.trunc(d[3].getY())))}}catch(h){n={error:h}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}a+=r.ROW_STEP;continue}if(l=!0,o.push(u),!e)break;u[2]!=null?(s=Math.trunc(u[2].getX()),a=Math.trunc(u[2].getY())):(s=Math.trunc(u[4].getX()),a=Math.trunc(u[4].getY()))}return o},r.findVertices=function(e,t,n){var i=e.getHeight(),o=e.getWidth(),a=new Array(8);return r.copyToResult(a,r.findRowsWithPattern(e,i,o,t,n,r.START_PATTERN),r.INDEXES_START_PATTERN),a[4]!=null&&(n=Math.trunc(a[4].getX()),t=Math.trunc(a[4].getY())),r.copyToResult(a,r.findRowsWithPattern(e,i,o,t,n,r.STOP_PATTERN),r.INDEXES_STOP_PATTERN),a},r.copyToResult=function(e,t,n){for(var i=0;i<n.length;i++)e[n[i]]=t[i]},r.findRowsWithPattern=function(e,t,n,i,o,a){for(var s=new Array(4),l=!1,u=new Int32Array(a.length);i<t;i+=r.ROW_STEP){var c=r.findGuardPattern(e,o,i,n,!1,a,u);if(c!=null){for(;i>0;){var f=r.findGuardPattern(e,o,--i,n,!1,a,u);if(f!=null)c=f;else{i++;break}}s[0]=new oe(c[0],i),s[1]=new oe(c[1],i),l=!0;break}}var d=i+1;if(l){for(var h=0,f=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);d<t;d++){var c=r.findGuardPattern(e,f[0],d,n,!1,a,u);if(c!=null&&Math.abs(f[0]-c[0])<r.MAX_PATTERN_DRIFT&&Math.abs(f[1]-c[1])<r.MAX_PATTERN_DRIFT)f=c,h=0;else{if(h>r.SKIPPED_ROW_COUNT_MAX)break;h++}}d-=h+1,s[2]=new oe(f[0],d),s[3]=new oe(f[1],d)}return d-i<r.BARCODE_MIN_HEIGHT&&yt.fill(s,null),s},r.findGuardPattern=function(e,t,n,i,o,a,s){yt.fillWithin(s,0,s.length,0);for(var l=t,u=0;e.get(l,n)&&l>0&&u++<r.MAX_PIXEL_DRIFT;)l--;for(var c=l,f=0,d=a.length,h=o;c<i;c++){var p=e.get(c,n);if(p!==h)s[f]++;else{if(f===d-1){if(r.patternMatchVariance(s,a,r.MAX_INDIVIDUAL_VARIANCE)<r.MAX_AVG_VARIANCE)return new Int32Array([l,c]);l+=s[0]+s[1],Ze.arraycopy(s,2,s,0,f-1),s[f-1]=0,s[f]=0,f--}else f++;s[f]=1,h=!h}}return f===d-1&&r.patternMatchVariance(s,a,r.MAX_INDIVIDUAL_VARIANCE)<r.MAX_AVG_VARIANCE?new Int32Array([l,c-1]):null},r.patternMatchVariance=function(e,t,n){for(var i=e.length,o=0,a=0,s=0;s<i;s++)o+=e[s],a+=t[s];if(o<a)return 1/0;var l=o/a;n*=l;for(var u=0,c=0;c<i;c++){var f=e[c],d=t[c]*l,h=f>d?f-d:d-f;if(h>n)return 1/0;u+=h}return u/o},r.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),r.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),r.MAX_AVG_VARIANCE=.42,r.MAX_INDIVIDUAL_VARIANCE=.8,r.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),r.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),r.MAX_PIXEL_DRIFT=3,r.MAX_PATTERN_DRIFT=5,r.SKIPPED_ROW_COUNT_MAX=25,r.ROW_STEP=5,r.BARCODE_MIN_HEIGHT=10,r})(),O4=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},An=(function(){function r(e,t){if(t.length===0)throw new fe;this.field=e;var n=t.length;if(n>1&&t[0]===0){for(var i=1;i<n&&t[i]===0;)i++;i===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-i),Ze.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return r.prototype.getCoefficients=function(){return this.coefficients},r.prototype.getDegree=function(){return this.coefficients.length-1},r.prototype.isZero=function(){return this.coefficients[0]===0},r.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},r.prototype.evaluateAt=function(e){var t,n;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var o=O4(this.coefficients),a=o.next();!a.done;a=o.next()){var s=a.value;i=this.field.add(i,s)}}catch(f){t={error:f}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i}for(var l=this.coefficients[0],u=this.coefficients.length,c=1;c<u;c++)l=this.field.add(this.field.multiply(e,l),this.coefficients[c]);return l},r.prototype.add=function(e){if(!this.field.equals(e.field))throw new fe("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,n=e.coefficients;if(t.length>n.length){var i=t;t=n,n=i}var o=new Int32Array(n.length),a=n.length-t.length;Ze.arraycopy(n,0,o,0,a);for(var s=a;s<n.length;s++)o[s]=this.field.add(t[s-a],n[s]);return new r(this.field,o)},r.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new fe("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},r.prototype.multiply=function(e){return e instanceof r?this.multiplyOther(e):this.multiplyScalar(e)},r.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new fe("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new r(this.field,new Int32Array([0]));for(var t=this.coefficients,n=t.length,i=e.coefficients,o=i.length,a=new Int32Array(n+o-1),s=0;s<n;s++)for(var l=t[s],u=0;u<o;u++)a[s+u]=this.field.add(a[s+u],this.field.multiply(l,i[u]));return new r(this.field,a)},r.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new r(this.field,t)},r.prototype.multiplyScalar=function(e){if(e===0)return new r(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,n=new Int32Array(t),i=0;i<t;i++)n[i]=this.field.multiply(this.coefficients[i],e);return new r(this.field,n)},r.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new fe;if(t===0)return new r(this.field,new Int32Array([0]));for(var n=this.coefficients.length,i=new Int32Array(n+e),o=0;o<n;o++)i[o]=this.field.multiply(this.coefficients[o],t);return new r(this.field,i)},r.prototype.toString=function(){for(var e=new Ae,t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(t===0||n!==1)&&e.append(n),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},r})(),T4=(function(){function r(){}return r.prototype.add=function(e,t){return(e+t)%this.modulus},r.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},r.prototype.exp=function(e){return this.expTable[e]},r.prototype.log=function(e){if(e===0)throw new fe;return this.logTable[e]},r.prototype.inverse=function(e){if(e===0)throw new U0;return this.expTable[this.modulus-this.logTable[e]-1]},r.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},r.prototype.getSize=function(){return this.modulus},r.prototype.equals=function(e){return e===this},r})(),R4=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),P4=(function(r){R4(e,r);function e(t,n){var i=r.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var o=1,a=0;a<t;a++)i.expTable[a]=o,o=o*n%t;for(var a=0;a<t-1;a++)i.logTable[i.expTable[a]]=a;return i.zero=new An(i,new Int32Array([0])),i.one=new An(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,n){if(t<0)throw new fe;if(n===0)return this.zero;var i=new Int32Array(t+1);return i[0]=n,new An(this,i)},e.PDF417_GF=new e(Pe.NUMBER_OF_CODEWORDS,3),e})(T4),N4=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},D4=(function(){function r(){this.field=P4.PDF417_GF}return r.prototype.decode=function(e,t,n){for(var i,o,a=new An(this.field,e),s=new Int32Array(t),l=!1,u=t;u>0;u--){var c=a.evaluateAt(this.field.exp(u));s[t-u]=c,c!==0&&(l=!0)}if(!l)return 0;var f=this.field.getOne();if(n!=null)try{for(var d=N4(n),h=d.next();!h.done;h=d.next()){var p=h.value,y=this.field.exp(e.length-1-p),m=new An(this.field,new Int32Array([this.field.subtract(0,y),1]));f=f.multiply(m)}}catch(D){i={error:D}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}for(var g=new An(this.field,s),x=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),g,t),w=x[0],_=x[1],C=this.findErrorLocations(w),E=this.findErrorMagnitudes(_,w,C),u=0;u<C.length;u++){var I=e.length-1-this.field.log(C[u]);if(I<0)throw ut.getChecksumInstance();e[I]=this.field.subtract(e[I],E[u])}return C.length},r.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var o=e,a=t,s=this.field.getZero(),l=this.field.getOne();a.getDegree()>=Math.round(n/2);){var u=o,c=s;if(o=a,s=l,o.isZero())throw ut.getChecksumInstance();a=u;for(var f=this.field.getZero(),d=o.getCoefficient(o.getDegree()),h=this.field.inverse(d);a.getDegree()>=o.getDegree()&&!a.isZero();){var p=a.getDegree()-o.getDegree(),y=this.field.multiply(a.getCoefficient(a.getDegree()),h);f=f.add(this.field.buildMonomial(p,y)),a=a.subtract(o.multiplyByMonomial(p,y))}l=f.multiply(s).subtract(c).negative()}var m=l.getCoefficient(0);if(m===0)throw ut.getChecksumInstance();var g=this.field.inverse(m),x=l.multiply(g),w=a.multiply(g);return[x,w]},r.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),n=new Int32Array(t),i=0,o=1;o<this.field.getSize()&&i<t;o++)e.evaluateAt(o)===0&&(n[i]=this.field.inverse(o),i++);if(i!==t)throw ut.getChecksumInstance();return n},r.prototype.findErrorMagnitudes=function(e,t,n){for(var i=t.getDegree(),o=new Int32Array(i),a=1;a<=i;a++)o[i-a]=this.field.multiply(a,t.getCoefficient(a));for(var s=new An(this.field,o),l=n.length,u=new Int32Array(l),a=0;a<l;a++){var c=this.field.inverse(n[a]),f=this.field.subtract(0,e.evaluateAt(c)),d=this.field.inverse(s.evaluateAt(c));u[a]=this.field.multiply(f,d)}return u},r})(),Ys=(function(){function r(e,t,n,i,o){e instanceof r?this.constructor_2(e):this.constructor_1(e,t,n,i,o)}return r.prototype.constructor_1=function(e,t,n,i,o){var a=t==null||n==null,s=i==null||o==null;if(a&&s)throw new B;a?(t=new oe(0,i.getY()),n=new oe(0,o.getY())):s&&(i=new oe(e.getWidth()-1,t.getY()),o=new oe(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=i,this.bottomRight=o,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(i.getX(),o.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(n.getY(),o.getY()))},r.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},r.merge=function(e,t){return e==null?t:t==null?e:new r(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},r.prototype.addMissingRows=function(e,t,n){var i=this.topLeft,o=this.bottomLeft,a=this.topRight,s=this.bottomRight;if(e>0){var l=n?this.topLeft:this.topRight,u=Math.trunc(l.getY()-e);u<0&&(u=0);var c=new oe(l.getX(),u);n?i=c:a=c}if(t>0){var f=n?this.bottomLeft:this.bottomRight,d=Math.trunc(f.getY()+t);d>=this.image.getHeight()&&(d=this.image.getHeight()-1);var h=new oe(f.getX(),d);n?o=h:s=h}return new r(this.image,i,o,a,s)},r.prototype.getMinX=function(){return this.minX},r.prototype.getMaxX=function(){return this.maxX},r.prototype.getMinY=function(){return this.minY},r.prototype.getMaxY=function(){return this.maxY},r.prototype.getTopLeft=function(){return this.topLeft},r.prototype.getTopRight=function(){return this.topRight},r.prototype.getBottomLeft=function(){return this.bottomLeft},r.prototype.getBottomRight=function(){return this.bottomRight},r})(),k4=(function(){function r(e,t,n,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}return r.prototype.getColumnCount=function(){return this.columnCount},r.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},r.prototype.getRowCount=function(){return this.rowCount},r.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},r.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},r})(),Ml=(function(){function r(){this.buffer=""}return r.form=function(e,t){var n=-1;function i(a,s,l,u,c,f){if(a==="%%")return"%";if(t[++n]!==void 0){a=u?parseInt(u.substr(1)):void 0;var d=c?parseInt(c.substr(1)):void 0,h;switch(f){case"s":h=t[n];break;case"c":h=t[n][0];break;case"f":h=parseFloat(t[n]).toFixed(a);break;case"p":h=parseFloat(t[n]).toPrecision(a);break;case"e":h=parseFloat(t[n]).toExponential(a);break;case"x":h=parseInt(t[n]).toString(d||16);break;case"d":h=parseFloat(parseInt(t[n],d||10).toPrecision(a)).toFixed(0);break}h=typeof h=="object"?JSON.stringify(h):(+h).toString(d);for(var p=parseInt(l),y=l&&l[0]+""=="0"?"0":" ";h.length<p;)h=s!==void 0?h+y:y+h;return h}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)},r.prototype.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.buffer+=r.form(e,t)},r.prototype.toString=function(){return this.buffer},r})(),M4=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},z0=(function(){function r(e){this.boundingBox=new Ys(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return r.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var n=1;n<r.MAX_NEARBY_DISTANCE;n++){var i=this.imageRowToCodewordIndex(e)-n;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+n,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},r.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},r.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},r.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},r.prototype.getBoundingBox=function(){return this.boundingBox},r.prototype.getCodewords=function(){return this.codewords},r.prototype.toString=function(){var e,t,n=new Ml,i=0;try{for(var o=M4(this.codewords),a=o.next();!a.done;a=o.next()){var s=a.value;if(s==null){n.format("%3d:    |   %n",i++);continue}n.format("%3d: %3d|%3d%n",i++,s.getRowNumber(),s.getValue())}}catch(l){e={error:l}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n.toString()},r.MAX_NEARBY_DISTANCE=5,r})(),B4=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},L4=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Ei=(function(){function r(){this.values=new Map}return r.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},r.prototype.getValue=function(){var e,t,n=-1,i=new Array,o=function(f,d){var h={getKey:function(){return f},getValue:function(){return d}};h.getValue()>n?(n=h.getValue(),i=[],i.push(h.getKey())):h.getValue()===n&&i.push(h.getKey())};try{for(var a=B4(this.values.entries()),s=a.next();!s.done;s=a.next()){var l=L4(s.value,2),u=l[0],c=l[1];o(u,c)}}catch(f){e={error:f}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return Pe.toIntArray(i)},r.prototype.getConfidence=function(e){return this.values.get(e)},r})(),F4=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),cs=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sf=(function(r){F4(e,r);function e(t,n){var i=r.call(this,t)||this;return i._isLeft=n,i}return e.prototype.setRowNumbers=function(){var t,n;try{for(var i=cs(this.getCodewords()),o=i.next();!o.done;o=i.next()){var a=o.value;a?.setRowNumberAsRowIndicatorColumn()}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,t);for(var i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),a=this._isLeft?i.getBottomLeft():i.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(o.getY())),l=this.imageRowToCodewordIndex(Math.trunc(a.getY())),u=-1,c=1,f=0,d=s;d<l;d++)if(n[d]!=null){var h=n[d],p=h.getRowNumber()-u;if(p===0)f++;else if(p===1)c=Math.max(c,f),f=1,u=h.getRowNumber();else if(p<0||h.getRowNumber()>=t.getRowCount()||p>d)n[d]=null;else{var y=void 0;c>2?y=(c-2)*p:y=p;for(var m=y>=d,g=1;g<=y&&!m;g++)m=n[d-g]!=null;m?n[d]=null:(u=h.getRowNumber(),f=1)}}},e.prototype.getRowHeights=function(){var t,n,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var o=new Int32Array(i.getRowCount());try{for(var a=cs(this.getCodewords()),s=a.next();!s.done;s=a.next()){var l=s.value;if(l!=null){var u=l.getRowNumber();if(u>=o.length)continue;o[u]++}}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),o=this._isLeft?n.getBottomLeft():n.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(i.getY())),s=this.imageRowToCodewordIndex(Math.trunc(o.getY())),l=this.getCodewords(),u=-1,c=a;c<s;c++)if(l[c]!=null){var f=l[c];f.setRowNumberAsRowIndicatorColumn();var d=f.getRowNumber()-u;d===0||(d===1?u=f.getRowNumber():f.getRowNumber()>=t.getRowCount()?l[c]=null:u=f.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,n,i=this.getCodewords(),o=new Ei,a=new Ei,s=new Ei,l=new Ei;try{for(var u=cs(i),c=u.next();!c.done;c=u.next()){var f=c.value;if(f!=null){f.setRowNumberAsRowIndicatorColumn();var d=f.getValue()%30,h=f.getRowNumber();switch(this._isLeft||(h+=2),h%3){case 0:a.setValue(d*3+1);break;case 1:l.setValue(d/3),s.setValue(d%3);break;case 2:o.setValue(d+1);break}}}}catch(y){t={error:y}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}if(o.getValue().length===0||a.getValue().length===0||s.getValue().length===0||l.getValue().length===0||o.getValue()[0]<1||a.getValue()[0]+s.getValue()[0]<Pe.MIN_ROWS_IN_BARCODE||a.getValue()[0]+s.getValue()[0]>Pe.MAX_ROWS_IN_BARCODE)return null;var p=new k4(o.getValue()[0],a.getValue()[0],s.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(i,p),p},e.prototype.removeIncorrectCodewords=function(t,n){for(var i=0;i<t.length;i++){var o=t[i];if(t[i]!=null){var a=o.getValue()%30,s=o.getRowNumber();if(s>n.getRowCount()){t[i]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:a*3+1!==n.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(a/3)!==n.getErrorCorrectionLevel()||a%3!==n.getRowCountLowerPart())&&(t[i]=null);break;case 2:a+1!==n.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+r.prototype.toString.call(this)},e})(z0),U4=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},j4=(function(){function r(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return r.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Pe.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},r.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},r.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var n=this.detectionResultColumns[t].getCodewords(),i=0;i<n.length;i++)n[i]!=null&&(n[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,n));return e},r.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},r.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&t[n]!=null&&e[n].getRowNumber()===t[n].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var o=this.detectionResultColumns[i].getCodewords()[n];o!=null&&(o.setRowNumber(e[n].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[n]=null))}}},r.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<t.length;n++)if(t[n]!=null)for(var i=t[n].getRowNumber(),o=0,a=this.barcodeColumnCount+1;a>0&&o<this.ADJUST_ROW_NUMBER_SKIP;a--){var s=this.detectionResultColumns[a].getCodewords()[n];s!=null&&(o=r.adjustRowNumberIfValid(i,o,s),s.hasValidRowNumber()||e++)}return e},r.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),n=0;n<t.length;n++)if(t[n]!=null)for(var i=t[n].getRowNumber(),o=0,a=1;a<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;a++){var s=this.detectionResultColumns[a].getCodewords()[n];s!=null&&(o=r.adjustRowNumberIfValid(i,o,s),s.hasValidRowNumber()||e++)}return e},r.adjustRowNumberIfValid=function(e,t,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t},r.prototype.adjustRowNumbers=function(e,t,n){var i,o;if(this.detectionResultColumns[e-1]!=null){var a=n[t],s=this.detectionResultColumns[e-1].getCodewords(),l=s;this.detectionResultColumns[e+1]!=null&&(l=this.detectionResultColumns[e+1].getCodewords());var u=new Array(14);u[2]=s[t],u[3]=l[t],t>0&&(u[0]=n[t-1],u[4]=s[t-1],u[5]=l[t-1]),t>1&&(u[8]=n[t-2],u[10]=s[t-2],u[11]=l[t-2]),t<n.length-1&&(u[1]=n[t+1],u[6]=s[t+1],u[7]=l[t+1]),t<n.length-2&&(u[9]=n[t+2],u[12]=s[t+2],u[13]=l[t+2]);try{for(var c=U4(u),f=c.next();!f.done;f=c.next()){var d=f.value;if(r.adjustRowNumber(a,d))return}}catch(h){i={error:h}}finally{try{f&&!f.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}}},r.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},r.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},r.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},r.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},r.prototype.setBoundingBox=function(e){this.boundingBox=e},r.prototype.getBoundingBox=function(){return this.boundingBox},r.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},r.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},r.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new Ml,n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var o=this.detectionResultColumns[i].getCodewords()[n];if(o==null){t.format("    |   ");continue}t.format(" %3d|%3d",o.getRowNumber(),o.getValue())}t.format("%n")}return t.toString()},r})(),$4=(function(){function r(e,t,n,i){this.rowNumber=r.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(i)}return r.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},r.prototype.isValidRowNumber=function(e){return e!==r.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},r.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},r.prototype.getWidth=function(){return this.endX-this.startX},r.prototype.getStartX=function(){return this.startX},r.prototype.getEndX=function(){return this.endX},r.prototype.getBucket=function(){return this.bucket},r.prototype.getValue=function(){return this.value},r.prototype.getRowNumber=function(){return this.rowNumber},r.prototype.setRowNumber=function(e){this.rowNumber=e},r.prototype.toString=function(){return this.rowNumber+"|"+this.value},r.BARCODE_ROW_UNKNOWN=-1,r})(),V4=(function(){function r(){}return r.initialize=function(){for(var e=0;e<Pe.SYMBOL_TABLE.length;e++)for(var t=Pe.SYMBOL_TABLE[e],n=t&1,i=0;i<Pe.BARS_IN_MODULE;i++){for(var o=0;(t&1)===n;)o+=1,t>>=1;n=t&1,r.RATIOS_TABLE[e]||(r.RATIOS_TABLE[e]=new Array(Pe.BARS_IN_MODULE)),r.RATIOS_TABLE[e][Pe.BARS_IN_MODULE-i-1]=Math.fround(o/Pe.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},r.getDecodedValue=function(e){var t=r.getDecodedCodewordValue(r.sampleBitCounts(e));return t!==-1?t:r.getClosestDecodedValue(e)},r.sampleBitCounts=function(e){for(var t=ke.sum(e),n=new Int32Array(Pe.BARS_IN_MODULE),i=0,o=0,a=0;a<Pe.MODULES_IN_CODEWORD;a++){var s=t/(2*Pe.MODULES_IN_CODEWORD)+a*t/Pe.MODULES_IN_CODEWORD;o+e[i]<=s&&(o+=e[i],i++),n[i]++}return n},r.getDecodedCodewordValue=function(e){var t=r.getBitValue(e);return Pe.getCodeword(t)===-1?-1:t},r.getBitValue=function(e){for(var t=0,n=0;n<e.length;n++)for(var i=0;i<e[n];i++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)},r.getClosestDecodedValue=function(e){var t=ke.sum(e),n=new Array(Pe.BARS_IN_MODULE);if(t>1)for(var i=0;i<n.length;i++)n[i]=Math.fround(e[i]/t);var o=zs.MAX_VALUE,a=-1;this.bSymbolTableReady||r.initialize();for(var s=0;s<r.RATIOS_TABLE.length;s++){for(var l=0,u=r.RATIOS_TABLE[s],c=0;c<Pe.BARS_IN_MODULE;c++){var f=Math.fround(u[c]-n[c]);if(l+=Math.fround(f*f),l>=o)break}l<o&&(o=l,a=Pe.SYMBOL_TABLE[s])}return a},r.bSymbolTableReady=!1,r.RATIOS_TABLE=new Array(Pe.SYMBOL_TABLE.length).map(function(e){return new Array(Pe.BARS_IN_MODULE)}),r})(),H4=(function(){function r(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return r.prototype.getSegmentIndex=function(){return this.segmentIndex},r.prototype.setSegmentIndex=function(e){this.segmentIndex=e},r.prototype.getFileId=function(){return this.fileId},r.prototype.setFileId=function(e){this.fileId=e},r.prototype.getOptionalData=function(){return this.optionalData},r.prototype.setOptionalData=function(e){this.optionalData=e},r.prototype.isLastSegment=function(){return this.lastSegment},r.prototype.setLastSegment=function(e){this.lastSegment=e},r.prototype.getSegmentCount=function(){return this.segmentCount},r.prototype.setSegmentCount=function(e){this.segmentCount=e},r.prototype.getSender=function(){return this.sender||null},r.prototype.setSender=function(e){this.sender=e},r.prototype.getAddressee=function(){return this.addressee||null},r.prototype.setAddressee=function(e){this.addressee=e},r.prototype.getFileName=function(){return this.fileName},r.prototype.setFileName=function(e){this.fileName=e},r.prototype.getFileSize=function(){return this.fileSize},r.prototype.setFileSize=function(e){this.fileSize=e},r.prototype.getChecksum=function(){return this.checksum},r.prototype.setChecksum=function(e){this.checksum=e},r.prototype.getTimestamp=function(){return this.timestamp},r.prototype.setTimestamp=function(e){this.timestamp=e},r})(),lf=(function(){function r(){}return r.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},r})(),G4=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),W4=(function(r){G4(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="NullPointerException",e})(Yt),q4=(function(){function r(){}return r.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},r.prototype.writeBytesOffset=function(e,t,n){if(e==null)throw new W4;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new Pl;if(n===0)return;for(var i=0;i<n;i++)this.write(e[t+i])},r.prototype.flush=function(){},r.prototype.close=function(){},r})(),z4=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),K4=(function(r){z4(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e})(Yt),X4=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Y4=(function(r){X4(e,r);function e(t){t===void 0&&(t=32);var n=r.call(this)||this;if(n.count=0,t<0)throw new fe("Negative initial size: "+t);return n.buf=new Uint8Array(t),n}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var n=this.buf.length,i=n<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new K4;i=Ce.MAX_VALUE}this.buf=yt.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,n,i){if(n<0||n>t.length||i<0||n+i-t.length>0)throw new Pl;this.ensureCapacity(this.count+i),Ze.arraycopy(t,n,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return yt.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e})(q4),Ge;(function(r){r[r.ALPHA=0]="ALPHA",r[r.LOWER=1]="LOWER",r[r.MIXED=2]="MIXED",r[r.PUNCT=3]="PUNCT",r[r.ALPHA_SHIFT=4]="ALPHA_SHIFT",r[r.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ge||(Ge={}));function K0(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var go;function Qr(r){if(typeof go>"u"&&(go=K0()),go===null)throw new Error("BigInt is not supported!");return go(r)}function Z4(){var r=[];r[0]=Qr(1);var e=Qr(900);r[1]=e;for(var t=2;t<16;t++)r[t]=r[t-1]*e;return r}var J4=(function(){function r(){}return r.decode=function(e,t){var n=new Ae(""),i=gt.ISO8859_1;n.enableDecoding(i);for(var o=1,a=e[o++],s=new H4;o<e[0];){switch(a){case r.TEXT_COMPACTION_MODE_LATCH:o=r.textCompaction(e,o,n);break;case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:o=r.byteCompaction(a,e,i,o,n);break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[o++]);break;case r.NUMERIC_COMPACTION_MODE_LATCH:o=r.numericCompaction(e,o,n);break;case r.ECI_CHARSET:gt.getCharacterSetECIByValue(e[o++]);break;case r.ECI_GENERAL_PURPOSE:o+=2;break;case r.ECI_USER_DEFINED:o++;break;case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=r.decodeMacroBlock(e,o,s);break;case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:throw new Y;default:o--,o=r.textCompaction(e,o,n);break}if(o<e.length)a=e[o++];else throw Y.getFormatInstance()}if(n.length()===0)throw Y.getFormatInstance();var l=new ha(null,n.toString(),null,t);return l.setOther(s),l},r.decodeMacroBlock=function(e,t,n){if(t+r.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw Y.getFormatInstance();for(var i=new Int32Array(r.NUMBER_OF_SEQUENCE_CODEWORDS),o=0;o<r.NUMBER_OF_SEQUENCE_CODEWORDS;o++,t++)i[o]=e[t];n.setSegmentIndex(Ce.parseInt(r.decodeBase900toBase10(i,r.NUMBER_OF_SEQUENCE_CODEWORDS)));var a=new Ae;t=r.textCompaction(e,t,a),n.setFileId(a.toString());var s=-1;for(e[t]===r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=t+1);t<e[0];)switch(e[t]){case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case r.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new Ae;t=r.textCompaction(e,t+1,l),n.setFileName(l.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var u=new Ae;t=r.textCompaction(e,t+1,u),n.setSender(u.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var c=new Ae;t=r.textCompaction(e,t+1,c),n.setAddressee(c.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var f=new Ae;t=r.numericCompaction(e,t+1,f),n.setSegmentCount(Ce.parseInt(f.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var d=new Ae;t=r.numericCompaction(e,t+1,d),n.setTimestamp(lf.parseLong(d.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var h=new Ae;t=r.numericCompaction(e,t+1,h),n.setChecksum(Ce.parseInt(h.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var p=new Ae;t=r.numericCompaction(e,t+1,p),n.setFileSize(lf.parseLong(p.toString()));break;default:throw Y.getFormatInstance()}break;case r.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw Y.getFormatInstance()}if(s!==-1){var y=t-s;n.isLastSegment()&&y--,n.setOptionalData(yt.copyOfRange(e,s,s+y))}return t},r.textCompaction=function(e,t,n){for(var i=new Int32Array((e[0]-t)*2),o=new Int32Array((e[0]-t)*2),a=0,s=!1;t<e[0]&&!s;){var l=e[t++];if(l<r.TEXT_COMPACTION_MODE_LATCH)i[a]=l/30,i[a+1]=l%30,a+=2;else switch(l){case r.TEXT_COMPACTION_MODE_LATCH:i[a++]=r.TEXT_COMPACTION_MODE_LATCH;break;case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:t--,s=!0;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[a]=r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=e[t++],o[a]=l,a++;break}}return r.decodeTextCompaction(i,o,a,n),t},r.decodeTextCompaction=function(e,t,n,i){for(var o=Ge.ALPHA,a=Ge.ALPHA,s=0;s<n;){var l=e[s],u="";switch(o){case Ge.ALPHA:if(l<26)u=String.fromCharCode(65+l);else switch(l){case 26:u=" ";break;case r.LL:o=Ge.LOWER;break;case r.ML:o=Ge.MIXED;break;case r.PS:a=o,o=Ge.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:o=Ge.ALPHA;break}break;case Ge.LOWER:if(l<26)u=String.fromCharCode(97+l);else switch(l){case 26:u=" ";break;case r.AS:a=o,o=Ge.ALPHA_SHIFT;break;case r.ML:o=Ge.MIXED;break;case r.PS:a=o,o=Ge.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:o=Ge.ALPHA;break}break;case Ge.MIXED:if(l<r.PL)u=r.MIXED_CHARS[l];else switch(l){case r.PL:o=Ge.PUNCT;break;case 26:u=" ";break;case r.LL:o=Ge.LOWER;break;case r.AL:o=Ge.ALPHA;break;case r.PS:a=o,o=Ge.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:o=Ge.ALPHA;break}break;case Ge.PUNCT:if(l<r.PAL)u=r.PUNCT_CHARS[l];else switch(l){case r.PAL:o=Ge.ALPHA;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:o=Ge.ALPHA;break}break;case Ge.ALPHA_SHIFT:if(o=a,l<26)u=String.fromCharCode(65+l);else switch(l){case 26:u=" ";break;case r.TEXT_COMPACTION_MODE_LATCH:o=Ge.ALPHA;break}break;case Ge.PUNCT_SHIFT:if(o=a,l<r.PAL)u=r.PUNCT_CHARS[l];else switch(l){case r.PAL:o=Ge.ALPHA;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:o=Ge.ALPHA;break}break}u!==""&&i.append(u),s++}},r.byteCompaction=function(e,t,n,i,o){var a=new Y4,s=0,l=0,u=!1;switch(e){case r.BYTE_COMPACTION_MODE_LATCH:for(var c=new Int32Array(6),f=t[i++];i<t[0]&&!u;)switch(c[s++]=f,l=900*l+f,f=t[i++],f){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:i--,u=!0;break;default:if(s%5===0&&s>0){for(var d=0;d<6;++d)a.write(Number(Qr(l)>>Qr(8*(5-d))));l=0,s=0}break}i===t[0]&&f<r.TEXT_COMPACTION_MODE_LATCH&&(c[s++]=f);for(var h=0;h<s;h++)a.write(c[h]);break;case r.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!u;){var p=t[i++];if(p<r.TEXT_COMPACTION_MODE_LATCH)s++,l=900*l+p;else switch(p){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:i--,u=!0;break}if(s%5===0&&s>0){for(var d=0;d<6;++d)a.write(Number(Qr(l)>>Qr(8*(5-d))));l=0,s=0}}break}return o.append(ur.decode(a.toByteArray(),n)),i},r.numericCompaction=function(e,t,n){for(var i=0,o=!1,a=new Int32Array(r.MAX_NUMERIC_CODEWORDS);t<e[0]&&!o;){var s=e[t++];if(t===e[0]&&(o=!0),s<r.TEXT_COMPACTION_MODE_LATCH)a[i]=s,i++;else switch(s){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:t--,o=!0;break}(i%r.MAX_NUMERIC_CODEWORDS===0||s===r.NUMERIC_COMPACTION_MODE_LATCH||o)&&i>0&&(n.append(r.decodeBase900toBase10(a,i)),i=0)}return t},r.decodeBase900toBase10=function(e,t){for(var n=Qr(0),i=0;i<t;i++)n+=r.EXP900[t-i-1]*Qr(e[i]);var o=n.toString();if(o.charAt(0)!=="1")throw new Y;return o.substring(1)},r.TEXT_COMPACTION_MODE_LATCH=900,r.BYTE_COMPACTION_MODE_LATCH=901,r.NUMERIC_COMPACTION_MODE_LATCH=902,r.BYTE_COMPACTION_MODE_LATCH_6=924,r.ECI_USER_DEFINED=925,r.ECI_GENERAL_PURPOSE=926,r.ECI_CHARSET=927,r.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,r.MACRO_PDF417_TERMINATOR=922,r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,r.MAX_NUMERIC_CODEWORDS=15,r.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,r.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,r.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,r.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,r.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,r.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,r.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,r.PL=25,r.LL=27,r.AS=27,r.ML=28,r.AL=28,r.PS=29,r.PAL=29,r.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,r.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",r.EXP900=K0()?Z4():[],r.NUMBER_OF_SEQUENCE_CODEWORDS=2,r})(),mi=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Q4=(function(){function r(){}return r.decode=function(e,t,n,i,o,a,s){for(var l=new Ys(e,t,n,i,o),u=null,c=null,f,d=!0;;d=!1){if(t!=null&&(u=r.getRowIndicatorColumn(e,l,t,!0,a,s)),i!=null&&(c=r.getRowIndicatorColumn(e,l,i,!1,a,s)),f=r.merge(u,c),f==null)throw B.getNotFoundInstance();var h=f.getBoundingBox();if(d&&h!=null&&(h.getMinY()<l.getMinY()||h.getMaxY()>l.getMaxY()))l=h;else break}f.setBoundingBox(l);var p=f.getBarcodeColumnCount()+1;f.setDetectionResultColumn(0,u),f.setDetectionResultColumn(p,c);for(var y=u!=null,m=1;m<=p;m++){var g=y?m:p-m;if(f.getDetectionResultColumn(g)===void 0){var x=void 0;g===0||g===p?x=new sf(l,g===0):x=new z0(l),f.setDetectionResultColumn(g,x);for(var w=-1,_=w,C=l.getMinY();C<=l.getMaxY();C++){if(w=r.getStartColumn(f,g,C,y),w<0||w>l.getMaxX()){if(_===-1)continue;w=_}var E=r.detectCodeword(e,l.getMinX(),l.getMaxX(),y,w,C,a,s);E!=null&&(x.setCodeword(C,E),_=w,a=Math.min(a,E.getWidth()),s=Math.max(s,E.getWidth()))}}}return r.createDecoderResult(f)},r.merge=function(e,t){if(e==null&&t==null)return null;var n=r.getBarcodeMetadata(e,t);if(n==null)return null;var i=Ys.merge(r.adjustBoundingBox(e),r.adjustBoundingBox(t));return new j4(n,i)},r.adjustBoundingBox=function(e){var t,n;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var o=r.getMax(i),a=0;try{for(var s=mi(i),l=s.next();!l.done;l=s.next()){var u=l.value;if(a+=o-u,u>0)break}}catch(h){t={error:h}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}for(var c=e.getCodewords(),f=0;a>0&&c[f]==null;f++)a--;for(var d=0,f=i.length-1;f>=0&&(d+=o-i[f],!(i[f]>0));f--);for(var f=c.length-1;d>0&&c[f]==null;f--)d--;return e.getBoundingBox().addMissingRows(a,d,e.isLeft())},r.getMax=function(e){var t,n,i=-1;try{for(var o=mi(e),a=o.next();!a.done;a=o.next()){var s=a.value;i=Math.max(i,s)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i},r.getBarcodeMetadata=function(e,t){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?n:n.getColumnCount()!==i.getColumnCount()&&n.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&n.getRowCount()!==i.getRowCount()?null:n},r.getRowIndicatorColumn=function(e,t,n,i,o,a){for(var s=new sf(t,i),l=0;l<2;l++)for(var u=l===0?1:-1,c=Math.trunc(Math.trunc(n.getX())),f=Math.trunc(Math.trunc(n.getY()));f<=t.getMaxY()&&f>=t.getMinY();f+=u){var d=r.detectCodeword(e,0,e.getWidth(),i,c,f,o,a);d!=null&&(s.setCodeword(f,d),i?c=d.getStartX():c=d.getEndX())}return s},r.adjustCodewordCount=function(e,t){var n=t[0][1],i=n.getValue(),o=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-r.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(o<1||o>Pe.MAX_CODEWORDS_IN_BARCODE)throw B.getNotFoundInstance();n.setValue(o)}else i[0]!==o&&n.setValue(o)},r.createDecoderResult=function(e){var t=r.createBarcodeMatrix(e);r.adjustCodewordCount(e,t);for(var n=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),o=[],a=new Array,s=0;s<e.getBarcodeRowCount();s++)for(var l=0;l<e.getBarcodeColumnCount();l++){var u=t[s][l+1].getValue(),c=s*e.getBarcodeColumnCount()+l;u.length===0?n.push(c):u.length===1?i[c]=u[0]:(a.push(c),o.push(u))}for(var f=new Array(o.length),d=0;d<f.length;d++)f[d]=o[d];return r.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Pe.toIntArray(n),Pe.toIntArray(a),f)},r.createDecoderResultFromAmbiguousValues=function(e,t,n,i,o){for(var a=new Int32Array(i.length),s=100;s-- >0;){for(var l=0;l<a.length;l++)t[i[l]]=o[l][a[l]];try{return r.decodeCodewords(t,e,n)}catch(c){var u=c instanceof ut;if(!u)throw c}if(a.length===0)throw ut.getChecksumInstance();for(var l=0;l<a.length;l++)if(a[l]<o[l].length-1){a[l]++;break}else if(a[l]=0,l===a.length-1)throw ut.getChecksumInstance()}throw ut.getChecksumInstance()},r.createBarcodeMatrix=function(e){for(var t,n,i,o,a=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),s=0;s<a.length;s++)for(var l=0;l<a[s].length;l++)a[s][l]=new Ei;var u=0;try{for(var c=mi(e.getDetectionResultColumns()),f=c.next();!f.done;f=c.next()){var d=f.value;if(d!=null)try{for(var h=(i=void 0,mi(d.getCodewords())),p=h.next();!p.done;p=h.next()){var y=p.value;if(y!=null){var m=y.getRowNumber();if(m>=0){if(m>=a.length)continue;a[m][u].setValue(y.getValue())}}}}catch(g){i={error:g}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}u++}}catch(g){t={error:g}}finally{try{f&&!f.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return a},r.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},r.getStartColumn=function(e,t,n,i){var o,a,s=i?1:-1,l=null;if(r.isValidBarcodeColumn(e,t-s)&&(l=e.getDetectionResultColumn(t-s).getCodeword(n)),l!=null)return i?l.getEndX():l.getStartX();if(l=e.getDetectionResultColumn(t).getCodewordNearby(n),l!=null)return i?l.getStartX():l.getEndX();if(r.isValidBarcodeColumn(e,t-s)&&(l=e.getDetectionResultColumn(t-s).getCodewordNearby(n)),l!=null)return i?l.getEndX():l.getStartX();for(var u=0;r.isValidBarcodeColumn(e,t-s);){t-=s;try{for(var c=(o=void 0,mi(e.getDetectionResultColumn(t).getCodewords())),f=c.next();!f.done;f=c.next()){var d=f.value;if(d!=null)return(i?d.getEndX():d.getStartX())+s*u*(d.getEndX()-d.getStartX())}}catch(h){o={error:h}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(o)throw o.error}}u++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},r.detectCodeword=function(e,t,n,i,o,a,s,l){o=r.adjustCodewordStartColumn(e,t,n,i,o,a);var u=r.getModuleBitCount(e,t,n,i,o,a);if(u==null)return null;var c,f=ke.sum(u);if(i)c=o+f;else{for(var d=0;d<u.length/2;d++){var h=u[d];u[d]=u[u.length-1-d],u[u.length-1-d]=h}c=o,o=c-f}if(!r.checkCodewordSkew(f,s,l))return null;var p=V4.getDecodedValue(u),y=Pe.getCodeword(p);return y===-1?null:new $4(o,c,r.getCodewordBucketNumber(p),y)},r.getModuleBitCount=function(e,t,n,i,o,a){for(var s=o,l=new Int32Array(8),u=0,c=i?1:-1,f=i;(i?s<n:s>=t)&&u<l.length;)e.get(s,a)===f?(l[u]++,s+=c):(u++,f=!f);return u===l.length||s===(i?n:t)&&u===l.length-1?l:null},r.getNumberOfECCodeWords=function(e){return 2<<e},r.adjustCodewordStartColumn=function(e,t,n,i,o,a){for(var s=o,l=i?-1:1,u=0;u<2;u++){for(;(i?s>=t:s<n)&&i===e.get(s,a);){if(Math.abs(o-s)>r.CODEWORD_SKEW_SIZE)return o;s+=l}l=-l,i=!i}return s},r.checkCodewordSkew=function(e,t,n){return t-r.CODEWORD_SKEW_SIZE<=e&&e<=n+r.CODEWORD_SKEW_SIZE},r.decodeCodewords=function(e,t,n){if(e.length===0)throw Y.getFormatInstance();var i=1<<t+1,o=r.correctErrors(e,n,i);r.verifyCodewordCount(e,i);var a=J4.decode(e,""+t);return a.setErrorsCorrected(o),a.setErasures(n.length),a},r.correctErrors=function(e,t,n){if(t!=null&&t.length>n/2+r.MAX_ERRORS||n<0||n>r.MAX_EC_CODEWORDS)throw ut.getChecksumInstance();return r.errorCorrection.decode(e,n,t)},r.verifyCodewordCount=function(e,t){if(e.length<4)throw Y.getFormatInstance();var n=e[0];if(n>e.length)throw Y.getFormatInstance();if(n===0)if(t<e.length)e[0]=e.length-t;else throw Y.getFormatInstance()},r.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),n=0,i=t.length-1;!((e&1)!==n&&(n=e&1,i--,i<0));)t[i]++,e>>=1;return t},r.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},r.getCodewordBucketNumber_number=function(e){return r.getCodewordBucketNumber(r.getBitCountForCodeword(e))},r.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},r.toString=function(e){for(var t=new Ml,n=0;n<e.length;n++){t.format("Row %2d: ",n);for(var i=0;i<e[n].length;i++){var o=e[n][i];o.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}t.format("%n")}return t.toString()},r.CODEWORD_SKEW_SIZE=2,r.MAX_ERRORS=3,r.MAX_EC_CODEWORDS=512,r.errorCorrection=new D4,r})(),eE=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qo=(function(){function r(){}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n=r.decode(e,t,!1);if(n==null||n.length===0||n[0]==null)throw B.getNotFoundInstance();return n[0]},r.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return r.decode(e,t,!0)}catch(n){throw n instanceof Y||n instanceof ut?B.getNotFoundInstance():n}},r.decode=function(e,t,n){var i,o,a=new Array,s=I4.detectMultiple(e,t,n);try{for(var l=eE(s.getPoints()),u=l.next();!u.done;u=l.next()){var c=u.value,f=Q4.decode(s.getBits(),c[4],c[5],c[6],c[7],r.getMinCodewordWidth(c),r.getMaxCodewordWidth(c)),d=new Lt(f.getText(),f.getRawBytes(),void 0,c,ce.PDF_417);d.putMetadata(Tt.ERROR_CORRECTION_LEVEL,f.getECLevel());var h=f.getOther();h!=null&&d.putMetadata(Tt.PDF417_EXTRA_METADATA,h),a.push(d)}}catch(p){i={error:p}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return a.map(function(p){return p})},r.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},r.getMinWidth=function(e,t){return e==null||t==null?Ce.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},r.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(r.getMaxWidth(e[0],e[4]),r.getMaxWidth(e[6],e[2])*Pe.MODULES_IN_CODEWORD/Pe.MODULES_IN_STOP_PATTERN),Math.max(r.getMaxWidth(e[1],e[5]),r.getMaxWidth(e[7],e[3])*Pe.MODULES_IN_CODEWORD/Pe.MODULES_IN_STOP_PATTERN)))},r.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(r.getMinWidth(e[0],e[4]),r.getMinWidth(e[6],e[2])*Pe.MODULES_IN_CODEWORD/Pe.MODULES_IN_STOP_PATTERN),Math.min(r.getMinWidth(e[1],e[5]),r.getMinWidth(e[7],e[3])*Pe.MODULES_IN_CODEWORD/Pe.MODULES_IN_STOP_PATTERN)))},r.prototype.reset=function(){},r})(),tE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),uf=(function(r){tE(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ReaderException",e})(Yt),cf=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},X0=(function(){function r(){}return r.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},r.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},r.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(Je.TRY_HARDER)!==void 0,n=e==null?null:e.get(Je.POSSIBLE_FORMATS),i=new Array;if(n!=null){var o=n.some(function(a){return a===ce.UPC_A||a===ce.UPC_E||a===ce.EAN_13||a===ce.EAN_8||a===ce.CODABAR||a===ce.CODE_39||a===ce.CODE_93||a===ce.CODE_128||a===ce.ITF||a===ce.RSS_14||a===ce.RSS_EXPANDED});o&&!t&&i.push(new Hn(e)),n.includes(ce.QR_CODE)&&i.push(new Wo),n.includes(ce.DATA_MATRIX)&&i.push(new Go),n.includes(ce.AZTEC)&&i.push(new Vo),n.includes(ce.PDF_417)&&i.push(new qo),o&&t&&i.push(new Hn(e))}i.length===0&&(t||i.push(new Hn(e)),i.push(new Wo),i.push(new Go),i.push(new Vo),i.push(new qo),t&&i.push(new Hn(e))),this.readers=i},r.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var n=cf(this.readers),i=n.next();!i.done;i=n.next()){var o=i.value;o.reset()}}catch(a){e={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},r.prototype.decodeInternal=function(e){var t,n;if(this.readers===null)throw new uf("No readers where selected, nothing can be read.");try{for(var i=cf(this.readers),o=i.next();!o.done;o=i.next()){var a=o.value;try{return a.decode(e,this.hints)}catch(s){if(s instanceof uf)continue}}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}throw new B("No MultiFormat Readers were able to detect the code.")},r})(),rE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){rE(e,r);function e(t,n){t===void 0&&(t=null),n===void 0&&(n=500);var i=this,o=new X0;return o.setHints(t),i=r.call(this,o,n)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e})(ci);var nE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){nE(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new qo,t)||this}return e})(ci);var iE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){iE(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new Wo,t)||this}return e})(ci);var Zs;(function(r){r[r.ERROR_CORRECTION=0]="ERROR_CORRECTION",r[r.CHARACTER_SET=1]="CHARACTER_SET",r[r.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",r[r.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",r[r.MIN_SIZE=4]="MIN_SIZE",r[r.MAX_SIZE=5]="MAX_SIZE",r[r.MARGIN=6]="MARGIN",r[r.PDF417_COMPACT=7]="PDF417_COMPACT",r[r.PDF417_COMPACTION=8]="PDF417_COMPACTION",r[r.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",r[r.AZTEC_LAYERS=10]="AZTEC_LAYERS",r[r.QR_VERSION=11]="QR_VERSION",r[r.GS1_FORMAT=12]="GS1_FORMAT",r[r.FORCE_C40=13]="FORCE_C40"})(Zs||(Zs={}));const yo=Zs;var Y0=(function(){function r(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new rn(e,Int32Array.from([1])))}return r.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var n=t[t.length-1],i=this.field,o=t.length;o<=e;o++){var a=n.multiply(new rn(i,Int32Array.from([1,i.exp(o-1+i.getGeneratorBase())])));t.push(a),n=a}return t[e]},r.prototype.encode=function(e,t){if(t===0)throw new fe("No error correction bytes");var n=e.length-t;if(n<=0)throw new fe("No data bytes provided");var i=this.buildGenerator(t),o=new Int32Array(n);Ze.arraycopy(e,0,o,0,n);var a=new rn(this.field,o);a=a.multiplyByMonomial(t,1);for(var s=a.divide(i)[1],l=s.getCoefficients(),u=t-l.length,c=0;c<u;c++)e[n+c]=0;Ze.arraycopy(l,0,e,n+u,l.length)},r})(),Ai=(function(){function r(){}return r.applyMaskPenaltyRule1=function(e){return r.applyMaskPenaltyRule1Internal(e,!0)+r.applyMaskPenaltyRule1Internal(e,!1)},r.applyMaskPenaltyRule2=function(e){for(var t=0,n=e.getArray(),i=e.getWidth(),o=e.getHeight(),a=0;a<o-1;a++)for(var s=n[a],l=0;l<i-1;l++){var u=s[l];u===s[l+1]&&u===n[a+1][l]&&u===n[a+1][l+1]&&t++}return r.N2*t},r.applyMaskPenaltyRule3=function(e){for(var t=0,n=e.getArray(),i=e.getWidth(),o=e.getHeight(),a=0;a<o;a++)for(var s=0;s<i;s++){var l=n[a];s+6<i&&l[s]===1&&l[s+1]===0&&l[s+2]===1&&l[s+3]===1&&l[s+4]===1&&l[s+5]===0&&l[s+6]===1&&(r.isWhiteHorizontal(l,s-4,s)||r.isWhiteHorizontal(l,s+7,s+11))&&t++,a+6<o&&n[a][s]===1&&n[a+1][s]===0&&n[a+2][s]===1&&n[a+3][s]===1&&n[a+4][s]===1&&n[a+5][s]===0&&n[a+6][s]===1&&(r.isWhiteVertical(n,s,a-4,a)||r.isWhiteVertical(n,s,a+7,a+11))&&t++}return t*r.N3},r.isWhiteHorizontal=function(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(var i=t;i<n;i++)if(e[i]===1)return!1;return!0},r.isWhiteVertical=function(e,t,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(var o=n;o<i;o++)if(e[o][t]===1)return!1;return!0},r.applyMaskPenaltyRule4=function(e){for(var t=0,n=e.getArray(),i=e.getWidth(),o=e.getHeight(),a=0;a<o;a++)for(var s=n[a],l=0;l<i;l++)s[l]===1&&t++;var u=e.getHeight()*e.getWidth(),c=Math.floor(Math.abs(t*2-u)*10/u);return c*r.N4},r.getDataMaskBit=function(e,t,n){var i,o;switch(e){case 0:i=n+t&1;break;case 1:i=n&1;break;case 2:i=t%3;break;case 3:i=(n+t)%3;break;case 4:i=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:o=n*t,i=(o&1)+o%3;break;case 6:o=n*t,i=(o&1)+o%3&1;break;case 7:o=n*t,i=o%3+(n+t&1)&1;break;default:throw new fe("Invalid mask pattern: "+e)}return i===0},r.applyMaskPenaltyRule1Internal=function(e,t){for(var n=0,i=t?e.getHeight():e.getWidth(),o=t?e.getWidth():e.getHeight(),a=e.getArray(),s=0;s<i;s++){for(var l=0,u=-1,c=0;c<o;c++){var f=t?a[s][c]:a[c][s];f===u?l++:(l>=5&&(n+=r.N1+(l-5)),l=1,u=f)}l>=5&&(n+=r.N1+(l-5))}return n},r.N1=3,r.N2=3,r.N3=40,r.N4=10,r})(),oE=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aE=(function(){function r(e,t){this.width=e,this.height=t;for(var n=new Array(t),i=0;i!==t;i++)n[i]=new Uint8Array(e);this.bytes=n}return r.prototype.getHeight=function(){return this.height},r.prototype.getWidth=function(){return this.width},r.prototype.get=function(e,t){return this.bytes[t][e]},r.prototype.getArray=function(){return this.bytes},r.prototype.setNumber=function(e,t,n){this.bytes[t][e]=n},r.prototype.setBoolean=function(e,t,n){this.bytes[t][e]=n?1:0},r.prototype.clear=function(e){var t,n;try{for(var i=oE(this.bytes),o=i.next();!o.done;o=i.next()){var a=o.value;yt.fill(a,e)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var n=0,i=this.height;n<i;++n)for(var o=this.bytes[n],a=t.bytes[n],s=0,l=this.width;s<l;++s)if(o[s]!==a[s])return!1;return!0},r.prototype.toString=function(){for(var e=new Ae,t=0,n=this.height;t<n;++t){for(var i=this.bytes[t],o=0,a=this.width;o<a;++o)switch(i[o]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},r})(),Js=(function(){function r(){this.maskPattern=-1}return r.prototype.getMode=function(){return this.mode},r.prototype.getECLevel=function(){return this.ecLevel},r.prototype.getVersion=function(){return this.version},r.prototype.getMaskPattern=function(){return this.maskPattern},r.prototype.getMatrix=function(){return this.matrix},r.prototype.toString=function(){var e=new Ae;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},r.prototype.setMode=function(e){this.mode=e},r.prototype.setECLevel=function(e){this.ecLevel=e},r.prototype.setVersion=function(e){this.version=e},r.prototype.setMaskPattern=function(e){this.maskPattern=e},r.prototype.setMatrix=function(e){this.matrix=e},r.isValidMaskPattern=function(e){return e>=0&&e<r.NUM_MASK_PATTERNS},r.NUM_MASK_PATTERNS=8,r})(),sE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Qe=(function(r){sE(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="WriterException",e})(Yt),ff=(function(){function r(){}return r.clearMatrix=function(e){e.clear(255)},r.buildMatrix=function(e,t,n,i,o){r.clearMatrix(o),r.embedBasicPatterns(n,o),r.embedTypeInfo(t,i,o),r.maybeEmbedVersionInfo(n,o),r.embedDataBits(e,i,o)},r.embedBasicPatterns=function(e,t){r.embedPositionDetectionPatternsAndSeparators(t),r.embedDarkDotAtLeftBottomCorner(t),r.maybeEmbedPositionAdjustmentPatterns(e,t),r.embedTimingPatterns(t)},r.embedTypeInfo=function(e,t,n){var i=new Ct;r.makeTypeInfoBits(e,t,i);for(var o=0,a=i.getSize();o<a;++o){var s=i.get(i.getSize()-1-o),l=r.TYPE_INFO_COORDINATES[o],u=l[0],c=l[1];if(n.setBoolean(u,c,s),o<8){var f=n.getWidth()-o-1,d=8;n.setBoolean(f,d,s)}else{var f=8,d=n.getHeight()-7+(o-8);n.setBoolean(f,d,s)}}},r.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var n=new Ct;r.makeVersionInfoBits(e,n);for(var i=17,o=0;o<6;++o)for(var a=0;a<3;++a){var s=n.get(i);i--,t.setBoolean(o,t.getHeight()-11+a,s),t.setBoolean(t.getHeight()-11+a,o,s)}}},r.embedDataBits=function(e,t,n){for(var i=0,o=-1,a=n.getWidth()-1,s=n.getHeight()-1;a>0;){for(a===6&&(a-=1);s>=0&&s<n.getHeight();){for(var l=0;l<2;++l){var u=a-l;if(r.isEmpty(n.get(u,s))){var c=void 0;i<e.getSize()?(c=e.get(i),++i):c=!1,t!==255&&Ai.getDataMaskBit(t,u,s)&&(c=!c),n.setBoolean(u,s,c)}}s+=o}o=-o,s+=o,a-=2}if(i!==e.getSize())throw new Qe("Not all bits consumed: "+i+"/"+e.getSize())},r.findMSBSet=function(e){return 32-Ce.numberOfLeadingZeros(e)},r.calculateBCHCode=function(e,t){if(t===0)throw new fe("0 polynomial");var n=r.findMSBSet(t);for(e<<=n-1;r.findMSBSet(e)>=n;)e^=t<<r.findMSBSet(e)-n;return e},r.makeTypeInfoBits=function(e,t,n){if(!Js.isValidMaskPattern(t))throw new Qe("Invalid mask pattern");var i=e.getBits()<<3|t;n.appendBits(i,5);var o=r.calculateBCHCode(i,r.TYPE_INFO_POLY);n.appendBits(o,10);var a=new Ct;if(a.appendBits(r.TYPE_INFO_MASK_PATTERN,15),n.xor(a),n.getSize()!==15)throw new Qe("should not happen but we got: "+n.getSize())},r.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var n=r.calculateBCHCode(e.getVersionNumber(),r.VERSION_INFO_POLY);if(t.appendBits(n,12),t.getSize()!==18)throw new Qe("should not happen but we got: "+t.getSize())},r.isEmpty=function(e){return e===255},r.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var n=(t+1)%2;r.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),r.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}},r.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Qe;e.setNumber(8,e.getHeight()-8,1)},r.embedHorizontalSeparationPattern=function(e,t,n){for(var i=0;i<8;++i){if(!r.isEmpty(n.get(e+i,t)))throw new Qe;n.setNumber(e+i,t,0)}},r.embedVerticalSeparationPattern=function(e,t,n){for(var i=0;i<7;++i){if(!r.isEmpty(n.get(e,t+i)))throw new Qe;n.setNumber(e,t+i,0)}},r.embedPositionAdjustmentPattern=function(e,t,n){for(var i=0;i<5;++i)for(var o=r.POSITION_ADJUSTMENT_PATTERN[i],a=0;a<5;++a)n.setNumber(e+a,t+i,o[a])},r.embedPositionDetectionPattern=function(e,t,n){for(var i=0;i<7;++i)for(var o=r.POSITION_DETECTION_PATTERN[i],a=0;a<7;++a)n.setNumber(e+a,t+i,o[a])},r.embedPositionDetectionPatternsAndSeparators=function(e){var t=r.POSITION_DETECTION_PATTERN[0].length;r.embedPositionDetectionPattern(0,0,e),r.embedPositionDetectionPattern(e.getWidth()-t,0,e),r.embedPositionDetectionPattern(0,e.getWidth()-t,e);var n=8;r.embedHorizontalSeparationPattern(0,n-1,e),r.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),r.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var i=7;r.embedVerticalSeparationPattern(i,0,e),r.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),r.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},r.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,i=r.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],o=0,a=i.length;o!==a;o++){var s=i[o];if(s>=0)for(var l=0;l!==a;l++){var u=i[l];u>=0&&r.isEmpty(t.get(u,s))&&r.embedPositionAdjustmentPattern(u-2,s-2,t)}}},r.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),r.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),r.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),r.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),r.VERSION_INFO_POLY=7973,r.TYPE_INFO_POLY=1335,r.TYPE_INFO_MASK_PATTERN=21522,r})(),lE=(function(){function r(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return r.prototype.getDataBytes=function(){return this.dataBytes},r.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},r})(),df=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function r(){}return r.calculateMaskPenalty=function(e){return Ai.applyMaskPenaltyRule1(e)+Ai.applyMaskPenaltyRule2(e)+Ai.applyMaskPenaltyRule3(e)+Ai.applyMaskPenaltyRule4(e)},r.encode=function(e,t,n){n===void 0&&(n=null);var i=r.DEFAULT_BYTE_MODE_ENCODING,o=n!==null&&n.get(yo.CHARACTER_SET)!==void 0;o&&(i=n.get(yo.CHARACTER_SET).toString());var a=this.chooseMode(e,i),s=new Ct;if(a===et.BYTE&&(o||r.DEFAULT_BYTE_MODE_ENCODING!==i)){var l=gt.getCharacterSetECIByName(i);l!==void 0&&this.appendECI(l,s)}this.appendModeInfo(a,s);var u=new Ct;this.appendBytes(e,a,u,i);var c;if(n!==null&&n.get(yo.QR_VERSION)!==void 0){var f=Number.parseInt(n.get(yo.QR_VERSION).toString(),10);c=Sn.getVersionForNumber(f);var d=this.calculateBitsNeeded(a,s,u,c);if(!this.willFit(d,c,t))throw new Qe("Data too big for requested version")}else c=this.recommendVersion(t,a,s,u);var h=new Ct;h.appendBitArray(s);var p=a===et.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(p,c,a,h),h.appendBitArray(u);var y=c.getECBlocksForLevel(t),m=c.getTotalCodewords()-y.getTotalECCodewords();this.terminateBits(m,h);var g=this.interleaveWithECBytes(h,c.getTotalCodewords(),m,y.getNumBlocks()),x=new Js;x.setECLevel(t),x.setMode(a),x.setVersion(c);var w=c.getDimensionForVersion(),_=new aE(w,w),C=this.chooseMaskPattern(g,t,c,_);return x.setMaskPattern(C),ff.buildMatrix(g,t,c,C,_),x.setMatrix(_),x},r.recommendVersion=function(e,t,n,i){var o=this.calculateBitsNeeded(t,n,i,Sn.getVersionForNumber(1)),a=this.chooseVersion(o,e),s=this.calculateBitsNeeded(t,n,i,a);return this.chooseVersion(s,e)},r.calculateBitsNeeded=function(e,t,n,i){return t.getSize()+e.getCharacterCountBits(i)+n.getSize()},r.getAlphanumericCode=function(e){return e<r.ALPHANUMERIC_TABLE.length?r.ALPHANUMERIC_TABLE[e]:-1},r.chooseMode=function(e,t){if(t===void 0&&(t=null),gt.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return et.KANJI;for(var n=!1,i=!1,o=0,a=e.length;o<a;++o){var s=e.charAt(o);if(r.isDigit(s))n=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)i=!0;else return et.BYTE}return i?et.ALPHANUMERIC:n?et.NUMERIC:et.BYTE},r.isOnlyDoubleByteKanji=function(e){var t;try{t=ur.encode(e,gt.SJIS)}catch{return!1}var n=t.length;if(n%2!==0)return!1;for(var i=0;i<n;i+=2){var o=t[i]&255;if((o<129||o>159)&&(o<224||o>235))return!1}return!0},r.chooseMaskPattern=function(e,t,n,i){for(var o=Number.MAX_SAFE_INTEGER,a=-1,s=0;s<Js.NUM_MASK_PATTERNS;s++){ff.buildMatrix(e,t,n,s,i);var l=this.calculateMaskPenalty(i);l<o&&(o=l,a=s)}return a},r.chooseVersion=function(e,t){for(var n=1;n<=40;n++){var i=Sn.getVersionForNumber(n);if(r.willFit(e,i,t))return i}throw new Qe("Data too big")},r.willFit=function(e,t,n){var i=t.getTotalCodewords(),o=t.getECBlocksForLevel(n),a=o.getTotalECCodewords(),s=i-a,l=(e+7)/8;return s>=l},r.terminateBits=function(e,t){var n=e*8;if(t.getSize()>n)throw new Qe("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(var i=0;i<4&&t.getSize()<n;++i)t.appendBit(!1);var o=t.getSize()&7;if(o>0)for(var i=o;i<8;i++)t.appendBit(!1);for(var a=e-t.getSizeInBytes(),i=0;i<a;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==n)throw new Qe("Bits size does not equal capacity")},r.getNumDataBytesAndNumECBytesForBlockID=function(e,t,n,i,o,a){if(i>=n)throw new Qe("Block ID too large");var s=e%n,l=n-s,u=Math.floor(e/n),c=u+1,f=Math.floor(t/n),d=f+1,h=u-f,p=c-d;if(h!==p)throw new Qe("EC bytes mismatch");if(n!==l+s)throw new Qe("RS blocks mismatch");if(e!==(f+h)*l+(d+p)*s)throw new Qe("Total bytes mismatch");i<l?(o[0]=f,a[0]=h):(o[0]=d,a[0]=p)},r.interleaveWithECBytes=function(e,t,n,i){var o,a,s,l;if(e.getSizeInBytes()!==n)throw new Qe("Number of bits and data bytes does not match");for(var u=0,c=0,f=0,d=new Array,h=0;h<i;++h){var p=new Int32Array(1),y=new Int32Array(1);r.getNumDataBytesAndNumECBytesForBlockID(t,n,i,h,p,y);var m=p[0],g=new Uint8Array(m);e.toBytes(8*u,g,0,m);var x=r.generateECBytes(g,y[0]);d.push(new lE(g,x)),c=Math.max(c,m),f=Math.max(f,x.length),u+=p[0]}if(n!==u)throw new Qe("Data bytes does not match offset");for(var w=new Ct,h=0;h<c;++h)try{for(var _=(o=void 0,df(d)),C=_.next();!C.done;C=_.next()){var E=C.value,g=E.getDataBytes();h<g.length&&w.appendBits(g[h],8)}}catch(j){o={error:j}}finally{try{C&&!C.done&&(a=_.return)&&a.call(_)}finally{if(o)throw o.error}}for(var h=0;h<f;++h)try{for(var I=(s=void 0,df(d)),D=I.next();!D.done;D=I.next()){var E=D.value,x=E.getErrorCorrectionBytes();h<x.length&&w.appendBits(x[h],8)}}catch(j){s={error:j}}finally{try{D&&!D.done&&(l=I.return)&&l.call(I)}finally{if(s)throw s.error}}if(t!==w.getSizeInBytes())throw new Qe("Interleaving error: "+t+" and "+w.getSizeInBytes()+" differ.");return w},r.generateECBytes=function(e,t){for(var n=e.length,i=new Int32Array(n+t),o=0;o<n;o++)i[o]=e[o]&255;new Y0(Kt.QR_CODE_FIELD_256).encode(i,t);for(var a=new Uint8Array(t),o=0;o<t;o++)a[o]=i[n+o];return a},r.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},r.appendLengthInfo=function(e,t,n,i){var o=n.getCharacterCountBits(t);if(e>=1<<o)throw new Qe(e+" is bigger than "+((1<<o)-1));i.appendBits(e,o)},r.appendBytes=function(e,t,n,i){switch(t){case et.NUMERIC:r.appendNumericBytes(e,n);break;case et.ALPHANUMERIC:r.appendAlphanumericBytes(e,n);break;case et.BYTE:r.append8BitBytes(e,n,i);break;case et.KANJI:r.appendKanjiBytes(e,n);break;default:throw new Qe("Invalid mode: "+t)}},r.getDigit=function(e){return e.charCodeAt(0)-48},r.isDigit=function(e){var t=r.getDigit(e);return t>=0&&t<=9},r.appendNumericBytes=function(e,t){for(var n=e.length,i=0;i<n;){var o=r.getDigit(e.charAt(i));if(i+2<n){var a=r.getDigit(e.charAt(i+1)),s=r.getDigit(e.charAt(i+2));t.appendBits(o*100+a*10+s,10),i+=3}else if(i+1<n){var a=r.getDigit(e.charAt(i+1));t.appendBits(o*10+a,7),i+=2}else t.appendBits(o,4),i++}},r.appendAlphanumericBytes=function(e,t){for(var n=e.length,i=0;i<n;){var o=r.getAlphanumericCode(e.charCodeAt(i));if(o===-1)throw new Qe;if(i+1<n){var a=r.getAlphanumericCode(e.charCodeAt(i+1));if(a===-1)throw new Qe;t.appendBits(o*45+a,11),i+=2}else t.appendBits(o,6),i++}},r.append8BitBytes=function(e,t,n){var i;try{i=ur.encode(e,n)}catch(l){throw new Qe(l)}for(var o=0,a=i.length;o!==a;o++){var s=i[o];t.appendBits(s,8)}},r.appendKanjiBytes=function(e,t){var n;try{n=ur.encode(e,gt.SJIS)}catch(f){throw new Qe(f)}for(var i=n.length,o=0;o<i;o+=2){var a=n[o]&255,s=n[o+1]&255,l=a<<8&4294967295|s,u=-1;if(l>=33088&&l<=40956?u=l-33088:l>=57408&&l<=60351&&(u=l-49472),u===-1)throw new Qe("Invalid byte sequence");var c=(u>>8)*192+(u&255);t.appendBits(c,13)}},r.appendECI=function(e,t){t.appendBits(et.ECI.getBits(),4),t.appendBits(e.getValue(),8)},r.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),r.DEFAULT_BYTE_MODE_ENCODING=gt.UTF8.getName(),r})();var uE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){uE(e,r);function e(t,n,i,o,a,s,l,u){var c=r.call(this,s,l)||this;if(c.yuvData=t,c.dataWidth=n,c.dataHeight=i,c.left=o,c.top=a,o+s>n||a+l>i)throw new fe("Crop rectangle does not fit within image data.");return u&&c.reverseHorizontal(s,l),c}return e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new fe("Requested row is outside the image: "+t);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var o=(t+this.top)*this.dataWidth+this.left;return Ze.arraycopy(this.yuvData,o,n,0,i),n},e.prototype.getMatrix=function(){var t=this.getWidth(),n=this.getHeight();if(t===this.dataWidth&&n===this.dataHeight)return this.yuvData;var i=t*n,o=new Uint8ClampedArray(i),a=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Ze.arraycopy(this.yuvData,a,o,0,i),o;for(var s=0;s<n;s++){var l=s*t;Ze.arraycopy(this.yuvData,a,o,l,t),a+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,i,o){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+n,i,o,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*n),o=this.yuvData,a=this.top*this.dataWidth+this.left,s=0;s<n;s++){for(var l=s*t,u=0;u<t;u++){var c=o[a+u*e.THUMBNAIL_SCALE_FACTOR]&255;i[l+u]=4278190080|c*65793}a+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,n){for(var i=this.yuvData,o=0,a=this.top*this.dataWidth+this.left;o<n;o++,a+=this.dataWidth)for(var s=a+t/2,l=a,u=a+t-1;l<s;l++,u--){var c=i[l];i[l]=i[u],i[u]=c}},e.prototype.invert=function(){return new da(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Zi);var cE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){cE(e,r);function e(t,n,i,o,a,s,l){var u=r.call(this,n,i)||this;if(u.dataWidth=o,u.dataHeight=a,u.left=s,u.top=l,t.BYTES_PER_ELEMENT===4){for(var c=n*i,f=new Uint8ClampedArray(c),d=0;d<c;d++){var h=t[d],p=h>>16&255,y=h>>7&510,m=h&255;f[d]=(p+y+m)/4&255}u.luminances=f}else u.luminances=t;if(o===void 0&&(u.dataWidth=n),a===void 0&&(u.dataHeight=i),s===void 0&&(u.left=0),l===void 0&&(u.top=0),u.left+n>u.dataWidth||u.top+i>u.dataHeight)throw new fe("Crop rectangle does not fit within image data.");return u}return e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new fe("Requested row is outside the image: "+t);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var o=(t+this.top)*this.dataWidth+this.left;return Ze.arraycopy(this.luminances,o,n,0,i),n},e.prototype.getMatrix=function(){var t=this.getWidth(),n=this.getHeight();if(t===this.dataWidth&&n===this.dataHeight)return this.luminances;var i=t*n,o=new Uint8ClampedArray(i),a=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Ze.arraycopy(this.luminances,a,o,0,i),o;for(var s=0;s<n;s++){var l=s*t;Ze.arraycopy(this.luminances,a,o,l,t),a+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,i,o){return new e(this.luminances,i,o,this.dataWidth,this.dataHeight,this.left+t,this.top+n)},e.prototype.invert=function(){return new da(this)},e})(Zi);var fE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),dE=(function(r){fE(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e})(gt),hE=(function(){function r(){}return r.ISO_8859_1=gt.ISO8859_1,r})(),Qs,pE=301,vE=function(r,e){for(var t=1,n=0;n<255;n++)e[n]=t,r[t]=n,t*=2,t>=256&&(t^=pE);return{LOG:r,ALOG:e}};Qs=vE([],[]),Qs.LOG;Qs.ALOG;var hf;(function(r){r[r.FORCE_NONE=0]="FORCE_NONE",r[r.FORCE_SQUARE=1]="FORCE_SQUARE",r[r.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(hf||(hf={}));var pf=129,Z0=230,gE=231,yE=235,mE=236,xE=237,wE=238,_E=239,bE=240,fs=254,EE=254,vf="[)>05",gf="[)>06",yf="",He=0,It=1,$t=2,pt=3,Et=4,Nt=5,AE=(function(){function r(){}return r.prototype.getEncodingMode=function(){return He},r.prototype.encode=function(e){var t=yr.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),i=yr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Nt:e.writeCodeword(gE),e.signalEncoderChange(Nt);return;case It:e.writeCodeword(Z0),e.signalEncoderChange(It);return;case pt:e.writeCodeword(wE),e.signalEncoderChange(pt);break;case $t:e.writeCodeword(_E),e.signalEncoderChange($t);break;case Et:e.writeCodeword(bE),e.signalEncoderChange(Et);break;default:throw new Error("Illegal mode: "+i)}else yr.isExtendedASCII(n)?(e.writeCodeword(yE),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},r.prototype.encodeASCIIDigits=function(e,t){if(yr.isDigit(e)&&yr.isDigit(t)){var n=(e-48)*10+(t-48);return n+130}throw new Error("not digits: "+e+t)},r})(),CE=(function(){function r(){}return r.prototype.getEncodingMode=function(){return Nt},r.prototype.encode=function(e){var t=new Ae;for(t.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();t.append(n),e.pos++;var i=yr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(He);break}}var o=t.length()-1,a=1,s=e.getCodewordCount()+o+a;e.updateSymbolInfo(s);var l=e.getSymbolInfo().getDataCapacity()-s>0;if(e.hasMoreCharacters()||l)if(o<=249)t.setCharAt(0,Re.getCharAt(o));else if(o<=1555)t.setCharAt(0,Re.getCharAt(Math.floor(o/250)+249)),t.insert(1,Re.getCharAt(o%250));else throw new Error("Message length not in valid ranges: "+o);for(var u=0,n=t.length();u<n;u++)e.writeCodeword(this.randomize255State(t.charAt(u).charCodeAt(0),e.getCodewordCount()+1))},r.prototype.randomize255State=function(e,t){var n=149*t%255+1,i=e+n;return i<=255?i:i-256},r})(),Bl=(function(){function r(){}return r.prototype.getEncodingMode=function(){return It},r.prototype.encodeMaximal=function(e){for(var t=new Ae,n=0,i=e.pos,o=0;e.hasMoreCharacters();){var a=e.getCurrentChar();e.pos++,n=this.encodeChar(a,t),t.length()%3===0&&(i=e.pos,o=t.length())}if(o!==t.length()){var s=Math.floor(t.length()/3*2),l=Math.floor(e.getCodewordCount()+s+1);e.updateSymbolInfo(l);var u=e.getSymbolInfo().getDataCapacity()-l,c=Math.floor(t.length()%3);(c===2&&u!==2||c===1&&(n>3||u!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(Z0),this.handleEOD(e,t)},r.prototype.encode=function(e){for(var t=new Ae;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var i=this.encodeChar(n,t),o=Math.floor(t.length()/3)*2,a=e.getCodewordCount()+o;e.updateSymbolInfo(a);var s=e.getSymbolInfo().getDataCapacity()-a;if(!e.hasMoreCharacters()){var l=new Ae;for(t.length()%3===2&&s!==2&&(i=this.backtrackOneCharacter(e,t,l,i));t.length()%3===1&&(i>3||s!==1);)i=this.backtrackOneCharacter(e,t,l,i);break}var u=t.length();if(u%3===0){var c=yr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(c!==this.getEncodingMode()){e.signalEncoderChange(He);break}}}this.handleEOD(e,t)},r.prototype.backtrackOneCharacter=function(e,t,n,i){var o=t.length(),a=t.toString().substring(0,o-i);t.setLengthToZero(),t.append(a),e.pos--;var s=e.getCurrentChar();return i=this.encodeChar(s,n),e.resetSymbolInfo(),i},r.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var n=t.toString().substring(3);t.setLengthToZero(),t.append(n)},r.prototype.handleEOD=function(e,t){var n=Math.floor(t.length()/3*2),i=t.length()%3,o=e.getCodewordCount()+n;e.updateSymbolInfo(o);var a=e.getSymbolInfo().getDataCapacity()-o;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(fs)}else if(a===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(fs),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(a>0||e.hasMoreCharacters())&&e.writeCodeword(fs)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(He)},r.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var n=2;return n+=this.encodeChar(e-128,t),n},r.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=t/256,i=t%256,o=new Ae;return o.append(n),o.append(i),o.toString()},r})(),SE=(function(){function r(){}return r.prototype.getEncodingMode=function(){return Et},r.prototype.encode=function(e){for(var t=new Ae;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var o=t.toString().substring(4);t.setLengthToZero(),t.append(o);var a=yr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){e.signalEncoderChange(He);break}}}t.append(Re.getCharAt(31)),this.handleEOD(e,t)},r.prototype.handleEOD=function(e,t){try{var n=t.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),o=e.getRemainingCharacters();if(o>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),o<=i&&i<=2)return}if(n>4)throw new Error("Count must not exceed 4");var a=n-1,s=this.encodeToCodewords(t.toString()),l=!e.hasMoreCharacters(),u=l&&a<=2;if(a<=2){e.updateSymbolInfo(e.getCodewordCount()+a);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(u=!1,e.updateSymbolInfo(e.getCodewordCount()+s.length))}u?(e.resetSymbolInfo(),e.pos-=a):e.writeCodewords(s)}finally{e.signalEncoderChange(He)}},r.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(Re.getCharAt(e-64)):yr.illegalCharacter(Re.getCharAt(e))},r.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,o=t>=3?e.charAt(2).charCodeAt(0):0,a=t>=4?e.charAt(3).charCodeAt(0):0,s=(n<<18)+(i<<12)+(o<<6)+a,l=s>>16&255,u=s>>8&255,c=s&255,f=new Ae;return f.append(l),t>=2&&f.append(u),t>=3&&f.append(c),f.toString()},r})(),IE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),OE=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Be=(function(){function r(e,t,n,i,o,a,s,l){s===void 0&&(s=0),l===void 0&&(l=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=n,this.matrixWidth=i,this.matrixHeight=o,this.dataRegions=a,this.rsBlockData=s,this.rsBlockError=l}return r.lookup=function(e,t,n,i,o){var a,s;t===void 0&&(t=0),n===void 0&&(n=null),i===void 0&&(i=null),o===void 0&&(o=!0);try{for(var l=OE(RE),u=l.next();!u.done;u=l.next()){var c=u.value;if(!(t===1&&c.rectangular)&&!(t===2&&!c.rectangular)&&!(n!=null&&(c.getSymbolWidth()<n.getWidth()||c.getSymbolHeight()<n.getHeight()))&&!(i!=null&&(c.getSymbolWidth()>i.getWidth()||c.getSymbolHeight()>i.getHeight()))&&e<=c.dataCapacity)return c}}catch(f){a={error:f}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}if(o)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},r.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},r.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},r.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},r.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},r.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},r.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},r.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},r.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},r.prototype.getDataCapacity=function(){return this.dataCapacity},r.prototype.getErrorCodewords=function(){return this.errorCodewords},r.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},r.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},r})(),TE=(function(r){IE(e,r);function e(){return r.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e})(Be),RE=[new Be(!1,3,5,8,8,1),new Be(!1,5,7,10,10,1),new Be(!0,5,7,16,6,1),new Be(!1,8,10,12,12,1),new Be(!0,10,11,14,6,2),new Be(!1,12,12,14,14,1),new Be(!0,16,14,24,10,1),new Be(!1,18,14,16,16,1),new Be(!1,22,18,18,18,1),new Be(!0,22,18,16,10,2),new Be(!1,30,20,20,20,1),new Be(!0,32,24,16,14,2),new Be(!1,36,24,22,22,1),new Be(!1,44,28,24,24,1),new Be(!0,49,28,22,14,2),new Be(!1,62,36,14,14,4),new Be(!1,86,42,16,16,4),new Be(!1,114,48,18,18,4),new Be(!1,144,56,20,20,4),new Be(!1,174,68,22,22,4),new Be(!1,204,84,24,24,4,102,42),new Be(!1,280,112,14,14,16,140,56),new Be(!1,368,144,16,16,16,92,36),new Be(!1,456,192,18,18,16,114,48),new Be(!1,576,224,20,20,16,144,56),new Be(!1,696,272,22,22,16,174,68),new Be(!1,816,336,24,24,16,136,56),new Be(!1,1050,408,18,18,36,175,68),new Be(!1,1304,496,20,20,36,163,62),new TE],PE=(function(){function r(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(s){return s.charCodeAt(0)}),n=new Ae,i=0,o=t.length;i<o;i++){var a=String.fromCharCode(t[i]&255);if(a==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(a)}this.msg=n.toString(),this.shape=0,this.codewords=new Ae,this.newEncoding=-1}return r.prototype.setSymbolShape=function(e){this.shape=e},r.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},r.prototype.getMessage=function(){return this.msg},r.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},r.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},r.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},r.prototype.getCodewords=function(){return this.codewords},r.prototype.writeCodewords=function(e){this.codewords.append(e)},r.prototype.writeCodeword=function(e){this.codewords.append(e)},r.prototype.getCodewordCount=function(){return this.codewords.length()},r.prototype.getNewEncoding=function(){return this.newEncoding},r.prototype.signalEncoderChange=function(e){this.newEncoding=e},r.prototype.resetEncoderSignal=function(){this.newEncoding=-1},r.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},r.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},r.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},r.prototype.getSymbolInfo=function(){return this.symbolInfo},r.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Be.lookup(e,this.shape,this.minSize,this.maxSize,!0))},r.prototype.resetSymbolInfo=function(){this.symbolInfo=null},r})(),NE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),DE=(function(r){NE(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return pt},e.prototype.encode=function(t){for(var n=new Ae;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,n);var o=n.length();if(o%3===0){this.writeNextTriplet(t,n);var a=yr.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){t.signalEncoderChange(He);break}}}this.handleEOD(t,n)},e.prototype.encodeChar=function(t,n){switch(t){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:t>=48&&t<=57?n.append(t-48+4):t>=65&&t<=90?n.append(t-65+14):yr.illegalCharacter(Re.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,n){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),o=n.length();t.pos-=o,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(EE),t.getNewEncoding()<0&&t.signalEncoderChange(He)},e})(Bl),kE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),ME=(function(r){kE(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return $t},e.prototype.encodeChar=function(t,n){if(t===32)return n.append(3),1;if(t>=48&&t<=57)return n.append(t-48+4),1;if(t>=97&&t<=122)return n.append(t-97+14),1;if(t<32)return n.append(0),n.append(t),2;if(t<=47)return n.append(1),n.append(t-33),2;if(t<=64)return n.append(1),n.append(t-58+15),2;if(t>=91&&t<=95)return n.append(1),n.append(t-91+22),2;if(t===96)return n.append(2),n.append(0),2;if(t<=90)return n.append(2),n.append(t-65+1),2;if(t<=127)return n.append(2),n.append(t-123+27),2;n.append("1");var i=2;return i+=this.encodeChar(t-128,n),i},e})(Bl),yr=(function(){function r(){}return r.randomize253State=function(e){var t=149*e%253+1,n=pf+t;return n<=254?n:n-254},r.encodeHighLevel=function(e,t,n,i,o){t===void 0&&(t=0),n===void 0&&(n=null),i===void 0&&(i=null),o===void 0&&(o=!1);var a=new Bl,s=[new AE,a,new ME,new DE,new SE,new CE],l=new PE(e);l.setSymbolShape(t),l.setSizeConstraints(n,i),e.startsWith(vf)&&e.endsWith(yf)?(l.writeCodeword(mE),l.setSkipAtEnd(2),l.pos+=vf.length):e.startsWith(gf)&&e.endsWith(yf)&&(l.writeCodeword(xE),l.setSkipAtEnd(2),l.pos+=gf.length);var u=He;for(o&&(a.encodeMaximal(l),u=l.getNewEncoding(),l.resetEncoderSignal());l.hasMoreCharacters();)s[u].encode(l),l.getNewEncoding()>=0&&(u=l.getNewEncoding(),l.resetEncoderSignal());var c=l.getCodewordCount();l.updateSymbolInfo();var f=l.getSymbolInfo().getDataCapacity();c<f&&u!==He&&u!==Nt&&u!==Et&&l.writeCodeword("");var d=l.getCodewords();for(d.length()<f&&d.append(pf);d.length()<f;)d.append(this.randomize253State(d.length()+1));return l.getCodewords().toString()},r.lookAheadTest=function(e,t,n){var i=this.lookAheadTestIntern(e,t,n);if(n===pt&&i===pt){for(var o=Math.min(t+3,e.length),a=t;a<o;a++)if(!this.isNativeX12(e.charCodeAt(a)))return He}else if(n===Et&&i===Et){for(var o=Math.min(t+4,e.length),a=t;a<o;a++)if(!this.isNativeEDIFACT(e.charCodeAt(a)))return He}return i},r.lookAheadTestIntern=function(e,t,n){if(t>=e.length)return n;var i;n===He?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[n]=0);for(var o=0,a=new Uint8Array(6),s=[];;){if(t+o===e.length){yt.fill(a,0),yt.fill(s,0);var l=this.findMinimums(i,s,Ce.MAX_VALUE,a),u=this.getMinimumCount(a);if(s[He]===l)return He;if(u===1){if(a[Nt]>0)return Nt;if(a[Et]>0)return Et;if(a[$t]>0)return $t;if(a[pt]>0)return pt}return It}var c=e.charCodeAt(t+o);if(o++,this.isDigit(c)?i[He]+=.5:this.isExtendedASCII(c)?(i[He]=Math.ceil(i[He]),i[He]+=2):(i[He]=Math.ceil(i[He]),i[He]++),this.isNativeC40(c)?i[It]+=2/3:this.isExtendedASCII(c)?i[It]+=8/3:i[It]+=4/3,this.isNativeText(c)?i[$t]+=2/3:this.isExtendedASCII(c)?i[$t]+=8/3:i[$t]+=4/3,this.isNativeX12(c)?i[pt]+=2/3:this.isExtendedASCII(c)?i[pt]+=13/3:i[pt]+=10/3,this.isNativeEDIFACT(c)?i[Et]+=3/4:this.isExtendedASCII(c)?i[Et]+=17/4:i[Et]+=13/4,this.isSpecialB256(c)?i[Nt]+=4:i[Nt]++,o>=4){if(yt.fill(a,0),yt.fill(s,0),this.findMinimums(i,s,Ce.MAX_VALUE,a),s[He]<this.min(s[Nt],s[It],s[$t],s[pt],s[Et]))return He;if(s[Nt]<s[He]||s[Nt]+1<this.min(s[It],s[$t],s[pt],s[Et]))return Nt;if(s[Et]+1<this.min(s[Nt],s[It],s[$t],s[pt],s[He]))return Et;if(s[$t]+1<this.min(s[Nt],s[It],s[Et],s[pt],s[He]))return $t;if(s[pt]+1<this.min(s[Nt],s[It],s[Et],s[$t],s[He]))return pt;if(s[It]+1<this.min(s[He],s[Nt],s[Et],s[$t])){if(s[It]<s[pt])return It;if(s[It]===s[pt]){for(var f=t+o+1;f<e.length;){var d=e.charCodeAt(f);if(this.isX12TermSep(d))return pt;if(!this.isNativeX12(d))break;f++}return It}}}}},r.min=function(e,t,n,i,o){var a=Math.min(e,Math.min(t,Math.min(n,i)));return o===void 0?a:Math.min(a,o)},r.findMinimums=function(e,t,n,i){for(var o=0;o<6;o++){var a=t[o]=Math.ceil(e[o]);n>a&&(n=a,yt.fill(i,0)),n===a&&(i[o]=i[o]+1)}return n},r.getMinimumCount=function(e){for(var t=0,n=0;n<6;n++)t+=e[n];return t||0},r.isDigit=function(e){return e>=48&&e<=57},r.isExtendedASCII=function(e){return e>=128&&e<=255},r.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},r.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},r.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},r.isX12TermSep=function(e){return e===13||e===42||e===62},r.isNativeEDIFACT=function(e){return e>=32&&e<=94},r.isSpecialB256=function(e){return!1},r.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var n=e.length,i=t;i<n&&this.isDigit(e.charCodeAt(i));)i++;return i-t},r.illegalCharacter=function(e){var t=Ce.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},r})(),ds=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mf=(function(){function r(e){this.charset=e,this.name=e.name}return r.prototype.canEncode=function(e){try{return ur.encode(e,this.charset)!=null}catch{return!1}},r})(),BE=(function(){function r(e,t,n){var i,o,a,s,l,u;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(M){return new mf(dE.forName(M))}),this.encoders=[];var c=[];c.push(new mf(hE.ISO_8859_1));for(var f=t!=null&&t.name.startsWith("UTF"),d=0;d<e.length;d++){var h=!1;try{for(var p=(i=void 0,ds(c)),y=p.next();!y.done;y=p.next()){var m=y.value,g=e.charAt(d),x=g.charCodeAt(0);if(x===n||m.canEncode(g)){h=!0;break}}}catch(M){i={error:M}}finally{try{y&&!y.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}if(!h)try{for(var w=(a=void 0,ds(this.ENCODERS)),_=w.next();!_.done;_=w.next()){var m=_.value;if(m.canEncode(e.charAt(d))){c.push(m),h=!0;break}}}catch(M){a={error:M}}finally{try{_&&!_.done&&(s=w.return)&&s.call(w)}finally{if(a)throw a.error}}h||(f=!0)}if(c.length===1&&!f)this.encoders=[c[0]];else{this.encoders=[];var C=0;try{for(var E=ds(c),I=E.next();!I.done;I=E.next()){var m=I.value;this.encoders[C++]=m}}catch(M){l={error:M}}finally{try{I&&!I.done&&(u=E.return)&&u.call(E)}finally{if(l)throw l.error}}}var D=-1;if(t!=null){for(var d=0;d<this.encoders.length;d++)if(this.encoders[d]!=null&&t.name===this.encoders[d].name){D=d;break}}this.priorityEncoderIndex=D}return r.prototype.length=function(){return this.encoders.length},r.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},r.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},r.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},r.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},r.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},r.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return ur.encode(Re.getCharAt(e),this.encoders[t].name)},r})(),LE=3,FE=(function(){function r(e,t,n){this.fnc1=n;var i=new BE(e,t,n);if(i.length()===1)for(var o=0;o<this.bytes.length;o++){var a=e.charAt(o).charCodeAt(0);this.bytes[o]=a===n?1e3:a}else this.bytes=this.encodeMinimally(e,i,n)}return r.prototype.getFNC1Character=function(){return this.fnc1},r.prototype.length=function(){return this.bytes.length},r.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var n=0;n<t;n++)if(this.isECI(e+n))return!1;return!0},r.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},r.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var n=new Ae,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");n.append(this.charAt(i))}return n.toString()},r.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},r.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},r.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},r.prototype.addEdge=function(e,t,n){(e[t][n.encoderIndex]==null||e[t][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[t][n.encoderIndex]=n)},r.prototype.addEdges=function(e,t,n,i,o,a){var s=e.charAt(i).charCodeAt(0),l=0,u=t.length();t.getPriorityEncoderIndex()>=0&&(s===a||t.canEncode(s,t.getPriorityEncoderIndex()))&&(l=t.getPriorityEncoderIndex(),u=l+1);for(var c=l;c<u;c++)(s===a||t.canEncode(s,c))&&this.addEdge(n,i+1,new xf(s,t,c,o,a))},r.prototype.encodeMinimally=function(e,t,n){var i=e.length,o=new xf[i+1][t.length()];this.addEdges(e,t,o,0,null,n);for(var a=1;a<=i;a++){for(var s=0;s<t.length();s++)o[a][s]!=null&&a<i&&this.addEdges(e,t,o,a,o[a][s],n);for(var s=0;s<t.length();s++)o[a-1][s]=null}for(var l=-1,u=Ce.MAX_VALUE,s=0;s<t.length();s++)if(o[i][s]!=null){var c=o[i][s];c.cachedTotalSize<u&&(u=c.cachedTotalSize,l=s)}if(l<0)throw new Error('Failed to encode "'+e+'"');for(var f=[],d=o[i][l];d!=null;){if(d.isFNC1())f.unshift(1e3);else for(var h=t.encode(d.c,d.encoderIndex),a=h.length-1;a>=0;a--)f.unshift(h[a]&255);var p=d.previous===null?0:d.previous.encoderIndex;p!==d.encoderIndex&&f.unshift(256+t.getECIValue(d.encoderIndex)),d=d.previous}for(var y=[],a=0;a<y.length;a++)y[a]=f[a];return y},r})(),xf=(function(){function r(e,t,n,i,o){this.c=e,this.encoderSet=t,this.encoderIndex=n,this.previous=i,this.fnc1=o,this.c=e===o?1e3:e;var a=this.isFNC1()?1:t.encode(e,n).length,s=i===null?0:i.encoderIndex;s!==n&&(a+=LE),i!=null&&(a+=i.cachedTotalSize),this.cachedTotalSize=a}return r.prototype.isFNC1=function(){return this.c===1e3},r})(),UE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();var wf;(function(r){r[r.ASCII=0]="ASCII",r[r.C40=1]="C40",r[r.TEXT=2]="TEXT",r[r.X12=3]="X12",r[r.EDF=4]="EDF",r[r.B256=5]="B256"})(wf||(wf={}));(function(r){UE(e,r);function e(t,n,i,o,a){var s=r.call(this,t,n,i)||this;return s.shape=o,s.macroId=a,s}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(FE);var jE=(function(){function r(){}return r.prototype.isCompact=function(){return this.compact},r.prototype.setCompact=function(e){this.compact=e},r.prototype.getSize=function(){return this.size},r.prototype.setSize=function(e){this.size=e},r.prototype.getLayers=function(){return this.layers},r.prototype.setLayers=function(e){this.layers=e},r.prototype.getCodeWords=function(){return this.codeWords},r.prototype.setCodeWords=function(e){this.codeWords=e},r.prototype.getMatrix=function(){return this.matrix},r.prototype.setMatrix=function(e){this.matrix=e},r})(),_f=(function(){function r(){}return r.singletonList=function(e){return[e]},r.min=function(e,t){return e.sort(t)[0]},r})(),$E=(function(){function r(e){this.previous=e}return r.prototype.getPrevious=function(){return this.previous},r})(),VE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Ll=(function(r){VE(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.value=n,o.bitCount=i,o}return e.prototype.appendTo=function(t,n){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,n){return new e(this,t,n)},e.prototype.addBinaryShift=function(t,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,n)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+Ce.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e})($E),HE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),GE=(function(r){HE(e,r);function e(t,n,i){var o=r.call(this,t,0,0)||this;return o.binaryShiftStart=n,o.binaryShiftByteCount=i,o}return e.prototype.appendTo=function(t,n){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(n[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,n){return new e(this,t,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})(Ll);function WE(r,e,t){return new GE(r,e,t)}function xi(r,e,t){return new Ll(r,e,t)}var qE=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],nn=0,zo=1,or=2,J0=3,Or=4,zE=new Ll(null,0,0),hs=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],KE=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function XE(r){var e,t;try{for(var n=KE(r),i=n.next();!i.done;i=n.next()){var o=i.value;yt.fill(o,-1)}}catch(a){e={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r[nn][Or]=0,r[zo][Or]=0,r[zo][nn]=28,r[J0][Or]=0,r[or][Or]=0,r[or][nn]=15,r}var Q0=XE(yt.createInt32Array(6,6)),YE=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ZE=(function(){function r(e,t,n,i){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=i}return r.prototype.getMode=function(){return this.mode},r.prototype.getToken=function(){return this.token},r.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},r.prototype.getBitCount=function(){return this.bitCount},r.prototype.latchAndAppend=function(e,t){var n=this.bitCount,i=this.token;if(e!==this.mode){var o=hs[this.mode][e];i=xi(i,o&65535,o>>16),n+=o>>16}var a=e===or?4:5;return i=xi(i,t,a),new r(i,e,0,n+a)},r.prototype.shiftAndAppend=function(e,t){var n=this.token,i=this.mode===or?4:5;return n=xi(n,Q0[this.mode][e],i),n=xi(n,t,5),new r(n,this.mode,0,this.bitCount+i+5)},r.prototype.addBinaryShiftChar=function(e){var t=this.token,n=this.mode,i=this.bitCount;if(this.mode===Or||this.mode===or){var o=hs[n][nn];t=xi(t,o&65535,o>>16),i+=o>>16,n=nn}var a=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new r(t,n,this.binaryShiftByteCount+1,i+a);return s.binaryShiftByteCount===2078&&(s=s.endBinaryShift(e+1)),s},r.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=WE(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new r(t,this.mode,0,this.bitCount)},r.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(hs[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=r.calculateBinaryShiftCost(e)-r.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},r.prototype.toBitArray=function(e){for(var t,n,i=[],o=this.endBinaryShift(e.length).token;o!==null;o=o.getPrevious())i.unshift(o);var a=new Ct;try{for(var s=YE(i),l=s.next();!l.done;l=s.next()){var u=l.value;u.appendTo(a,e)}}catch(c){t={error:c}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return a},r.prototype.toString=function(){return Re.format("%s bits=%d bytes=%d",qE[this.mode],this.bitCount,this.binaryShiftByteCount)},r.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},r.INITIAL_STATE=new r(zE,nn,0,0),r})();function JE(r){var e=Re.getCharCode(" "),t=Re.getCharCode("."),n=Re.getCharCode(",");r[nn][e]=1;for(var i=Re.getCharCode("Z"),o=Re.getCharCode("A"),a=o;a<=i;a++)r[nn][a]=a-o+2;r[zo][e]=1;for(var s=Re.getCharCode("z"),l=Re.getCharCode("a"),a=l;a<=s;a++)r[zo][a]=a-l+2;r[or][e]=1;for(var u=Re.getCharCode("9"),c=Re.getCharCode("0"),a=c;a<=u;a++)r[or][a]=a-c+2;r[or][n]=12,r[or][t]=13;for(var f=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],d=0;d<f.length;d++)r[J0][Re.getCharCode(f[d])]=d;for(var h=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],d=0;d<h.length;d++)Re.getCharCode(h[d])>0&&(r[Or][Re.getCharCode(h[d])]=d);return r}var ps=JE(yt.createInt32Array(5,256)),mo=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},QE=(function(){function r(e){this.text=e}return r.prototype.encode=function(){for(var e=Re.getCharCode(" "),t=Re.getCharCode(`
`),n=_f.singletonList(ZE.INITIAL_STATE),i=0;i<this.text.length;i++){var o=void 0,a=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case Re.getCharCode("\r"):o=a===t?2:0;break;case Re.getCharCode("."):o=a===e?3:0;break;case Re.getCharCode(","):o=a===e?4:0;break;case Re.getCharCode(":"):o=a===e?5:0;break;default:o=0}o>0?(n=r.updateStateListForPair(n,i,o),i++):n=this.updateStateListForChar(n,i)}var s=_f.min(n,function(l,u){return l.getBitCount()-u.getBitCount()});return s.toBitArray(this.text)},r.prototype.updateStateListForChar=function(e,t){var n,i,o=[];try{for(var a=mo(e),s=a.next();!s.done;s=a.next()){var l=s.value;this.updateStateForChar(l,t,o)}}catch(u){n={error:u}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return r.simplifyStates(o)},r.prototype.updateStateForChar=function(e,t,n){for(var i=this.text[t]&255,o=ps[e.getMode()][i]>0,a=null,s=0;s<=Or;s++){var l=ps[s][i];if(l>0){if(a==null&&(a=e.endBinaryShift(t)),!o||s===e.getMode()||s===or){var u=a.latchAndAppend(s,l);n.push(u)}if(!o&&Q0[e.getMode()][s]>=0){var c=a.shiftAndAppend(s,l);n.push(c)}}}if(e.getBinaryShiftByteCount()>0||ps[e.getMode()][i]===0){var f=e.addBinaryShiftChar(t);n.push(f)}},r.updateStateListForPair=function(e,t,n){var i,o,a=[];try{for(var s=mo(e),l=s.next();!l.done;l=s.next()){var u=l.value;this.updateStateForPair(u,t,n,a)}}catch(c){i={error:c}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}return this.simplifyStates(a)},r.updateStateForPair=function(e,t,n,i){var o=e.endBinaryShift(t);if(i.push(o.latchAndAppend(Or,n)),e.getMode()!==Or&&i.push(o.shiftAndAppend(Or,n)),n===3||n===4){var a=o.latchAndAppend(or,16-n).latchAndAppend(or,1);i.push(a)}if(e.getBinaryShiftByteCount()>0){var s=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(s)}},r.simplifyStates=function(e){var t,n,i,o,a=[];try{for(var s=mo(e),l=s.next();!l.done;l=s.next()){var u=l.value,c=!0,f=function(m){if(m.isBetterThanOrEqualTo(u))return c=!1,"break";u.isBetterThanOrEqualTo(m)&&(a=a.filter(function(g){return g!==m}))};try{for(var d=(i=void 0,mo(a)),h=d.next();!h.done;h=d.next()){var p=h.value,y=f(p);if(y==="break")break}}catch(m){i={error:m}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}c&&a.push(u)}}catch(m){t={error:m}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return a},r})(),eA=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function r(){}return r.encodeBytes=function(e){return r.encode(e,r.DEFAULT_EC_PERCENT,r.DEFAULT_AZTEC_LAYERS)},r.encode=function(e,t,n){var i=new QE(e).encode(),o=Ce.truncDivision(i.getSize()*t,100)+11,a=i.getSize()+o,s,l,u,c,f;if(n!==r.DEFAULT_AZTEC_LAYERS){if(s=n<0,l=Math.abs(n),l>(s?r.MAX_NB_BITS_COMPACT:r.MAX_NB_BITS))throw new fe(Re.format("Illegal value %s for layers",n));u=r.totalBitsInLayer(l,s),c=r.WORD_SIZE[l];var d=u-u%c;if(f=r.stuffBits(i,c),f.getSize()+o>d)throw new fe("Data to large for user specified layer");if(s&&f.getSize()>c*64)throw new fe("Data to large for user specified layer")}else{c=0,f=null;for(var h=0;;h++){if(h>r.MAX_NB_BITS)throw new fe("Data too large for an Aztec code");if(s=h<=3,l=s?h+1:h,u=r.totalBitsInLayer(l,s),!(a>u)){(f==null||c!==r.WORD_SIZE[l])&&(c=r.WORD_SIZE[l],f=r.stuffBits(i,c));var d=u-u%c;if(!(s&&f.getSize()>c*64)&&f.getSize()+o<=d)break}}}var p=r.generateCheckWords(f,u,c),y=f.getSize()/c,m=r.generateModeMessage(s,l,y),g=(s?11:14)+l*4,x=new Int32Array(g),w;if(s){w=g;for(var h=0;h<x.length;h++)x[h]=h}else{w=g+1+2*Ce.truncDivision(Ce.truncDivision(g,2)-1,15);for(var _=Ce.truncDivision(g,2),C=Ce.truncDivision(w,2),h=0;h<_;h++){var E=h+Ce.truncDivision(h,15);x[_-h-1]=C-E-1,x[_+h]=C+E+1}}for(var I=new Nr(w),h=0,D=0;h<l;h++){for(var M=(l-h)*4+(s?9:12),j=0;j<M;j++)for(var X=j*2,F=0;F<2;F++)p.get(D+X+F)&&I.set(x[h*2+F],x[h*2+j]),p.get(D+M*2+X+F)&&I.set(x[h*2+j],x[g-1-h*2-F]),p.get(D+M*4+X+F)&&I.set(x[g-1-h*2-F],x[g-1-h*2-j]),p.get(D+M*6+X+F)&&I.set(x[g-1-h*2-j],x[h*2+F]);D+=M*8}if(r.drawModeMessage(I,s,w,m),s)r.drawBullsEye(I,Ce.truncDivision(w,2),5);else{r.drawBullsEye(I,Ce.truncDivision(w,2),7);for(var h=0,j=0;h<Ce.truncDivision(g,2)-1;h+=15,j+=16)for(var F=Ce.truncDivision(w,2)&1;F<w;F+=2)I.set(Ce.truncDivision(w,2)-j,F),I.set(Ce.truncDivision(w,2)+j,F),I.set(F,Ce.truncDivision(w,2)-j),I.set(F,Ce.truncDivision(w,2)+j)}var k=new jE;return k.setCompact(s),k.setSize(w),k.setLayers(l),k.setCodeWords(y),k.setMatrix(I),k},r.drawBullsEye=function(e,t,n){for(var i=0;i<n;i+=2)for(var o=t-i;o<=t+i;o++)e.set(o,t-i),e.set(o,t+i),e.set(t-i,o),e.set(t+i,o);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)},r.generateModeMessage=function(e,t,n){var i=new Ct;return e?(i.appendBits(t-1,2),i.appendBits(n-1,6),i=r.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(n-1,11),i=r.generateCheckWords(i,40,4)),i},r.drawModeMessage=function(e,t,n,i){var o=Ce.truncDivision(n,2);if(t)for(var a=0;a<7;a++){var s=o-3+a;i.get(a)&&e.set(s,o-5),i.get(a+7)&&e.set(o+5,s),i.get(20-a)&&e.set(s,o+5),i.get(27-a)&&e.set(o-5,s)}else for(var a=0;a<10;a++){var s=o-5+a+Ce.truncDivision(a,5);i.get(a)&&e.set(s,o-7),i.get(a+10)&&e.set(o+7,s),i.get(29-a)&&e.set(s,o+7),i.get(39-a)&&e.set(o-7,s)}},r.generateCheckWords=function(e,t,n){var i,o,a=e.getSize()/n,s=new Y0(r.getGF(n)),l=Ce.truncDivision(t,n),u=r.bitsToWords(e,n,l);s.encode(u,l-a);var c=t%n,f=new Ct;f.appendBits(0,c);try{for(var d=eA(Array.from(u)),h=d.next();!h.done;h=d.next()){var p=h.value;f.appendBits(p,n)}}catch(y){i={error:y}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}return f},r.bitsToWords=function(e,t,n){var i=new Int32Array(n),o,a;for(o=0,a=e.getSize()/t;o<a;o++){for(var s=0,l=0;l<t;l++)s|=e.get(o*t+l)?1<<t-l-1:0;i[o]=s}return i},r.getGF=function(e){switch(e){case 4:return Kt.AZTEC_PARAM;case 6:return Kt.AZTEC_DATA_6;case 8:return Kt.AZTEC_DATA_8;case 10:return Kt.AZTEC_DATA_10;case 12:return Kt.AZTEC_DATA_12;default:throw new fe("Unsupported word size "+e)}},r.stuffBits=function(e,t){for(var n=new Ct,i=e.getSize(),o=(1<<t)-2,a=0;a<i;a+=t){for(var s=0,l=0;l<t;l++)(a+l>=i||e.get(a+l))&&(s|=1<<t-1-l);(s&o)===o?(n.appendBits(s&o,t),a--):(s&o)===0?(n.appendBits(s|1,t),a--):n.appendBits(s,t)}return n},r.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},r.DEFAULT_EC_PERCENT=33,r.DEFAULT_AZTEC_LAYERS=0,r.MAX_NB_BITS=32,r.MAX_NB_BITS_COMPACT=4,r.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),r})();var tA=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),rA=(function(r){tA(e,r);function e(t){var n=r.call(this,t.width,t.height)||this;return n.canvas=t,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(t),n}return e.makeBufferFromCanvasImageData=function(t){var n;try{n=t.getContext("2d",{willReadFrequently:!0})}catch{n=t.getContext("2d")}if(!n)throw new Error("Couldn't get canvas context.");var i=n.getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,n,i){for(var o=new Uint8ClampedArray(n*i),a=0,s=0,l=t.length;a<l;a+=4,s++){var u=void 0,c=t[a+3];if(c===0)u=255;else{var f=t[a],d=t[a+1],h=t[a+2];u=306*f+601*d+117*h+512>>10}o[s]=u}return o},e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new fe("Requested row is outside the image: "+t);var i=this.getWidth(),o=t*i;return n===null?n=this.buffer.slice(o,o+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(o,o+i))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,i,o){return r.prototype.crop.call(this,t,n,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new da(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var i=t*e.DEGREE_TO_RADIANS,o=this.canvas.width,a=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(i))*o+Math.abs(Math.sin(i))*a),l=Math.ceil(Math.abs(Math.sin(i))*o+Math.abs(Math.cos(i))*a);n.width=s,n.height=l;var u=n.getContext("2d");if(!u)throw new Error("Could not create a Canvas Context element.");return u.translate(s/2,l/2),u.rotate(i),u.drawImage(this.canvas,o/-2,a/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.DEGREE_TO_RADIANS=Math.PI/180,e})(Zi);function eh(){return typeof navigator<"u"}function nA(){return eh()&&!!navigator.mediaDevices}function iA(){return!!(nA()&&navigator.mediaDevices.enumerateDevices)}var Wn=function(){return Wn=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Wn.apply(this,arguments)},rt=function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(c){try{u(n.next(c))}catch(f){a(f)}}function l(c){try{u(n.throw(c))}catch(f){a(f)}}function u(c){c.done?o(c.value):i(c.value).then(s,l)}u((n=n.apply(r,e||[])).next())})},nt=function(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(c){u=[6,c],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},vs=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oA={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},fi=(function(){function r(e,t,n){t===void 0&&(t=new Map),n===void 0&&(n={}),this.reader=e,this.hints=t,this.options=Wn(Wn({},oA),n)}return Object.defineProperty(r.prototype,"possibleFormats",{set:function(e){this.hints.set(Je.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),r.addVideoSource=function(e,t){try{e.srcObject=t}catch{console.error("got interrupted by new loading request")}},r.mediaStreamSetTorch=function(e,t){return rt(this,void 0,void 0,function(){return nt(this,function(n){switch(n.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return n.sent(),[2]}})})},r.mediaStreamIsTorchCompatible=function(e){var t,n,i=e.getVideoTracks();try{for(var o=vs(i),a=o.next();!a.done;a=o.next()){var s=a.value;if(r.mediaStreamIsTorchCompatibleTrack(s))return!0}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return!1},r.mediaStreamIsTorchCompatibleTrack=function(e){try{var t=e.getCapabilities();return"torch"in t}catch(n){return console.error(n),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},r.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},r.getMediaElement=function(e,t){var n=document.getElementById(e);if(!n)throw new st("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new st("element with id '".concat(e,"' must be an ").concat(t," element"));return n},r.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return r.getMediaElement(e,"video");if(!e&&typeof document<"u"){var t=document.createElement("video");return t.width=200,t.height=200,t}throw new Error("Couldn't get videoElement from videoSource!")},r.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return r.getMediaElement(e,"img");if(typeof e>"u"){var t=document.createElement("img");return t.width=200,t.height=200,t}throw new Error("Couldn't get imageElement from imageSource!")},r.prepareVideoElement=function(e){var t=r.createVideoElement(e);return t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},r.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},r.createBinaryBitmapFromCanvas=function(e){var t=new rA(e),n=new F0(t);return new L0(n)},r.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},r.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},r.createCaptureCanvas=function(e){if(!e)throw new st("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var t=document.createElement("canvas"),n=r.getMediaElementDimensions(e),i=n.width,o=n.height;return t.style.width=i+"px",t.style.height=o+"px",t.width=i,t.height=o,t},r.tryPlayVideo=function(e){return rt(this,void 0,void 0,function(){var t;return nt(this,function(n){switch(n.label){case 0:if(e?.ended)return console.error("Trying to play video that has ended."),[2,!1];if(r.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[2,!0];case 3:return t=n.sent(),console.warn("It was not possible to play the video.",t),[2,!1];case 4:return[2]}})})},r.createCanvasFromMediaElement=function(e){var t=r.createCaptureCanvas(e),n=t.getContext("2d");if(!n)throw new Error("Couldn't find Canvas 2D Context.");return r.drawImageOnCanvas(n,e),t},r.createBinaryBitmapFromMediaElem=function(e){var t=r.createCanvasFromMediaElement(e);return r.createBinaryBitmapFromCanvas(t)},r.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},r.listVideoInputDevices=function(){return rt(this,void 0,void 0,function(){var e,t,n,i,o,a,s,l,u,c,f,d;return nt(this,function(h){switch(h.label){case 0:if(!eh())throw new Error("Can't enumerate devices, navigator is not present.");if(!iA())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),t=[];try{for(n=vs(e),i=n.next();!i.done;i=n.next())o=i.value,a=o.kind==="video"?"videoinput":o.kind,a==="videoinput"&&(s=o.deviceId||o.id,l=o.label||"Video device ".concat(t.length+1),u=o.groupId,c={deviceId:s,label:l,kind:a,groupId:u},t.push(c))}catch(p){f={error:p}}finally{try{i&&!i.done&&(d=n.return)&&d.call(n)}finally{if(f)throw f.error}}return[2,t]}})})},r.findDeviceById=function(e){return rt(this,void 0,void 0,function(){var t;return nt(this,function(n){switch(n.label){case 0:return[4,r.listVideoInputDevices()];case 1:return t=n.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2]}})})},r.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},r.releaseAllStreams=function(){r.streamTracker.length!==0&&r.streamTracker.forEach(function(e){e.getTracks().forEach(function(t){return t.stop()})}),r.streamTracker=[]},r.playVideoOnLoadAsync=function(e,t){return rt(this,void 0,void 0,function(){var n;return nt(this,function(i){switch(i.label){case 0:return[4,r.tryPlayVideo(e)];case 1:return n=i.sent(),n?[2,!0]:[2,new Promise(function(o,a){var s=setTimeout(function(){r.isVideoPlaying(e)||(a(!1),e.removeEventListener("canplay",l))},t),l=function(){r.tryPlayVideo(e).then(function(u){clearTimeout(s),e.removeEventListener("canplay",l),o(u)})};e.addEventListener("canplay",l)})]}})})},r.attachStreamToVideo=function(e,t,n){return n===void 0&&(n=5e3),rt(this,void 0,void 0,function(){var i;return nt(this,function(o){switch(o.label){case 0:return i=r.prepareVideoElement(t),r.addVideoSource(i,e),[4,r.playVideoOnLoadAsync(i,n)];case 1:return o.sent(),[2,i]}})})},r._waitImageLoad=function(e){return new Promise(function(t,n){var i=1e4,o=setTimeout(function(){r.isImageLoaded(e)||(e.removeEventListener("load",a),n())},i),a=function(){clearTimeout(o),e.removeEventListener("load",a),t()};e.addEventListener("load",a)})},r.checkCallbackFnOrThrow=function(e){if(!e)throw new st("`callbackFn` is a required parameter, you cannot capture results without it.")},r.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(t){return t.stop()}),e=void 0},r.prototype.decode=function(e){var t=r.createCanvasFromMediaElement(e);return this.decodeFromCanvas(t)},r.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},r.prototype.decodeFromCanvas=function(e){var t=r.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(t)},r.prototype.decodeFromImageElement=function(e){return rt(this,void 0,void 0,function(){var t;return nt(this,function(n){switch(n.label){case 0:if(!e)throw new st("An image element must be provided.");return t=r.prepareImageElement(e),[4,this._decodeOnLoadImage(t)];case 1:return[2,n.sent()]}})})},r.prototype.decodeFromImageUrl=function(e){return rt(this,void 0,void 0,function(){var t;return nt(this,function(n){switch(n.label){case 0:if(!e)throw new st("An URL must be provided.");t=r.prepareImageElement(),t.src=e,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.decodeFromImageElement(t)];case 2:return[2,n.sent()];case 3:return r.destroyImageElement(t),[7];case 4:return[2]}})})},r.prototype.decodeFromConstraints=function(e,t,n){return rt(this,void 0,void 0,function(){var i,o;return nt(this,function(a){switch(a.label){case 0:return r.checkCallbackFnOrThrow(n),[4,this.getUserMedia(e)];case 1:i=a.sent(),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.decodeFromStream(i,t,n)];case 3:return[2,a.sent()];case 4:throw o=a.sent(),r.disposeMediaStream(i),o;case 5:return[2]}})})},r.prototype.decodeFromStream=function(e,t,n){return rt(this,void 0,void 0,function(){var i,o,a,s,l,u,c,f,d,h=this;return nt(this,function(p){switch(p.label){case 0:return r.checkCallbackFnOrThrow(n),i=this.options.tryPlayVideoTimeout,[4,r.attachStreamToVideo(e,t,i)];case 1:return o=p.sent(),a=function(){r.disposeMediaStream(e),r.cleanVideoSource(o)},s=this.scan(o,n,a),l=e.getVideoTracks(),u=Wn(Wn({},s),{stop:function(){s.stop()},streamVideoConstraintsApply:function(y,m){return rt(this,void 0,void 0,function(){var g,x,w,_,C,E,I;return nt(this,function(D){switch(D.label){case 0:g=m?l.filter(m):l,D.label=1;case 1:D.trys.push([1,6,7,8]),x=vs(g),w=x.next(),D.label=2;case 2:return w.done?[3,5]:(_=w.value,[4,_.applyConstraints(y)]);case 3:D.sent(),D.label=4;case 4:return w=x.next(),[3,2];case 5:return[3,8];case 6:return C=D.sent(),E={error:C},[3,8];case 7:try{w&&!w.done&&(I=x.return)&&I.call(x)}finally{if(E)throw E.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(y){return l.find(y).getConstraints()},streamVideoSettingsGet:function(y){return l.find(y).getSettings()},streamVideoCapabilitiesGet:function(y){return l.find(y).getCapabilities()}}),c=r.mediaStreamIsTorchCompatible(e),c&&(f=l?.find(function(y){return r.mediaStreamIsTorchCompatibleTrack(y)}),d=function(y){return rt(h,void 0,void 0,function(){return nt(this,function(m){switch(m.label){case 0:return[4,r.mediaStreamSetTorch(f,y)];case 1:return m.sent(),[2]}})})},u.switchTorch=d,u.stop=function(){return rt(h,void 0,void 0,function(){return nt(this,function(y){switch(y.label){case 0:return s.stop(),[4,d(!1)];case 1:return y.sent(),[2]}})})}),[2,u]}})})},r.prototype.decodeFromVideoDevice=function(e,t,n){return rt(this,void 0,void 0,function(){var i,o;return nt(this,function(a){switch(a.label){case 0:return r.checkCallbackFnOrThrow(n),e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,t,n)];case 1:return[2,a.sent()]}})})},r.prototype.decodeFromVideoElement=function(e,t){return rt(this,void 0,void 0,function(){var n,i;return nt(this,function(o){switch(o.label){case 0:if(r.checkCallbackFnOrThrow(t),!e)throw new st("A video element must be provided.");return n=r.prepareVideoElement(e),i=this.options.tryPlayVideoTimeout,[4,r.playVideoOnLoadAsync(n,i)];case 1:return o.sent(),[2,this.scan(n,t)]}})})},r.prototype.decodeFromVideoUrl=function(e,t){return rt(this,void 0,void 0,function(){var n,i,o,a;return nt(this,function(s){switch(s.label){case 0:if(r.checkCallbackFnOrThrow(t),!e)throw new st("An URL must be provided.");return n=r.prepareVideoElement(),n.src=e,i=function(){r.cleanVideoSource(n)},o=this.options.tryPlayVideoTimeout,[4,r.playVideoOnLoadAsync(n,o)];case 1:return s.sent(),a=this.scan(n,t,i),[2,a]}})})},r.prototype.decodeOnceFromConstraints=function(e,t){return rt(this,void 0,void 0,function(){var n;return nt(this,function(i){switch(i.label){case 0:return[4,this.getUserMedia(e)];case 1:return n=i.sent(),[4,this.decodeOnceFromStream(n,t)];case 2:return[2,i.sent()]}})})},r.prototype.decodeOnceFromStream=function(e,t){return rt(this,void 0,void 0,function(){var n,i,o;return nt(this,function(a){switch(a.label){case 0:return n=!!t,[4,r.attachStreamToVideo(e,t)];case 1:i=a.sent(),a.label=2;case 2:return a.trys.push([2,,4,5]),[4,this.scanOneResult(i)];case 3:return o=a.sent(),[2,o];case 4:return n||r.cleanVideoSource(i),[7];case 5:return[2]}})})},r.prototype.decodeOnceFromVideoDevice=function(e,t){return rt(this,void 0,void 0,function(){var n,i;return nt(this,function(o){switch(o.label){case 0:return e?n={deviceId:{exact:e}}:n={facingMode:"environment"},i={video:n},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,o.sent()]}})})},r.prototype.decodeOnceFromVideoElement=function(e){return rt(this,void 0,void 0,function(){var t,n;return nt(this,function(i){switch(i.label){case 0:if(!e)throw new st("A video element must be provided.");return t=r.prepareVideoElement(e),n=this.options.tryPlayVideoTimeout,[4,r.playVideoOnLoadAsync(t,n)];case 1:return i.sent(),[4,this.scanOneResult(t)];case 2:return[2,i.sent()]}})})},r.prototype.decodeOnceFromVideoUrl=function(e){return rt(this,void 0,void 0,function(){var t,n;return nt(this,function(i){switch(i.label){case 0:if(!e)throw new st("An URL must be provided.");t=r.prepareVideoElement(),t.src=e,n=this.decodeOnceFromVideoElement(t),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,n];case 2:return[2,i.sent()];case 3:return r.cleanVideoSource(t),[7];case 4:return[2]}})})},r.prototype.scanOneResult=function(e,t,n,i){var o=this;return t===void 0&&(t=!0),n===void 0&&(n=!0),i===void 0&&(i=!0),new Promise(function(a,s){o.scan(e,function(l,u,c){if(l){a(l),c.stop();return}if(u){if(u instanceof B&&t||u instanceof ut&&n||u instanceof Y&&i)return;c.stop(),s(u)}})})},r.prototype.scan=function(e,t,n){var i=this;r.checkCallbackFnOrThrow(t);var o=r.createCaptureCanvas(e),a;try{a=o.getContext("2d",{willReadFrequently:!0})}catch{a=o.getContext("2d")}if(!a)throw new Error("Couldn't create canvas for visual element scan.");var s=function(){a=void 0,o=void 0},l=!1,u,c=function(){l=!0,clearTimeout(u),s(),n&&n()},f={stop:c},d=function(){if(!l)try{r.drawImageOnCanvas(a,e);var h=i.decodeFromCanvas(o);t(h,void 0,f),u=setTimeout(d,i.options.delayBetweenScanSuccess)}catch(g){t(void 0,g,f);var p=g instanceof ut,y=g instanceof Y,m=g instanceof B;if(p||y||m){u=setTimeout(d,i.options.delayBetweenScanAttempts);return}s(),n&&n(g)}};return d(),f},r.prototype._decodeOnLoadImage=function(e){return rt(this,void 0,void 0,function(){var t;return nt(this,function(n){switch(n.label){case 0:return t=r.isImageLoaded(e),t?[3,2]:[4,r._waitImageLoad(e)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(e)]}})})},r.prototype.getUserMedia=function(e){return rt(this,void 0,void 0,function(){var t;return nt(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return t=n.sent(),r.streamTracker.push(t),[2,t]}})})},r.streamTracker=[],r})(),aA=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){aA(e,r);function e(t,n){return r.call(this,new Vo,t,n)||this}return e})(fi);var sA=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){sA(e,r);function e(t,n){return r.call(this,new Hn(t),t,n)||this}return e})(fi);var lA=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){lA(e,r);function e(t,n){return r.call(this,new Go,t,n)||this}return e})(fi);var uA=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),bf=(function(r){uA(e,r);function e(t,n){var i=this,o=new X0;return o.setHints(t),i=r.call(this,o,t,n)||this,i.reader=o,i}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(t){this.hints.set(Je.POSSIBLE_FORMATS,t),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e.prototype.setHints=function(t){this.hints=t,this.reader.setHints(this.hints)},e})(fi),cA=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){cA(e,r);function e(t,n){return r.call(this,new qo,t,n)||this}return e})(fi);var fA=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){fA(e,r);function e(t,n){return r.call(this,new Wo,t,n)||this}return e})(fi);const dA={class:"min-h-screen bg-gray-50 py-8"},hA={class:"container mx-auto px-4 max-w-4xl"},pA={class:"bg-white rounded-xl shadow-lg p-8"},vA={class:"flex gap-4 mb-6"},gA={key:0,class:"space-y-6"},yA={class:"relative bg-black rounded-lg overflow-hidden",style:{"aspect-ratio":"4/3"}},mA={key:0,class:"absolute inset-0 flex items-center justify-center"},xA={class:"flex gap-4"},wA={key:1,class:"space-y-6"},_A=["disabled"],bA={key:2,class:"mt-8 space-y-6"},EA={class:"text-center mb-4"},AA={class:"text-6xl"},CA={key:0,class:"bg-white rounded-lg p-6 space-y-4"},SA={class:"grid grid-cols-2 gap-4 text-sm"},IA={class:"col-span-2 md:col-span-1"},OA={class:"text-gray-900 font-semibold text-lg"},TA={class:"col-span-2 md:col-span-1"},RA={class:"text-gray-900"},PA={key:0,class:"col-span-2"},NA={class:"text-gray-900"},DA={class:"border-t pt-4"},kA={class:"grid grid-cols-2 gap-4 text-sm"},MA={class:"col-span-2"},BA={class:"text-gray-900 font-semibold"},LA={class:"text-gray-900"},FA={class:"text-gray-900"},UA={class:"text-gray-900"},jA={class:"text-gray-900 text-xs font-mono"},$A={key:0,class:"text-xs text-gray-500 text-center pt-2 border-t"},VA={key:1,class:"mt-6"},HA={key:2,class:"mt-6 bg-green-100 border border-green-300 rounded-lg p-4 text-center"},GA={class:"text-green-700 text-sm mt-1"},WA={key:3,class:"mt-8"},qA={class:"space-y-2"},zA={class:"flex justify-between items-center"},KA={class:"font-semibold"},XA={class:"text-gray-600"},YA={class:"text-xs text-gray-500 mt-1"},ZA=xt({__name:"EscanerQR",setup(r){const e=Q(null),t=Q("camara"),n=Q(!1),i=Q("");let o=null;const a=Q(null),s=Q([]),l=async()=>{try{n.value=!0,o=new bf;const m=await bf.listVideoInputDevices();if(!m||m.length===0)throw new Error("No se encontr ninguna cmara");const g=m[0];if(!g)throw new Error("No se encontr un dispositivo de cmara vlido");const x=g.deviceId;if(!e.value)throw new Error("Elemento de video no inicializado");o.decodeFromVideoDevice(x,e.value,async(w,_)=>{if(w){const C=w.getText();await f(C),u()}_&&!_.message.includes("No MultiFormat Readers")&&_.name!=="NotFoundException"&&console.error("Error en el escaneo:",_)})}catch(m){console.error("Error iniciando escaneo:",m),alert("Error al acceder a la cmara: "+m.message),n.value=!1}},u=()=>{o&&e.value&&e.value.srcObject&&(e.value.srcObject.getTracks().forEach(g=>g.stop()),e.value.srcObject=null),n.value=!1},c=async()=>{await f(i.value)},f=async m=>{try{let g;try{g=JSON.parse(m)}catch{g={reserva_id:m.trim()}}const{data:x,error:w}=await we.from("tickets_qr").select("*").eq("reserva_id",g.reserva_id).single();if(w||!x){console.error("Error buscando ticket:",w),a.value={valido:!1,mensaje:"Cdigo QR no encontrado o invlido"},p({valido:!1,nombre:"Desconocido",pelicula:"N/A",timestamp:new Date().toISOString()});return}if(x.estado==="usado"){a.value={valido:!1,mensaje:" Este cdigo QR ya ha sido utilizado"},p({valido:!1,nombre:g.nombre||"Desconocido",pelicula:g.pelicula||"N/A",timestamp:new Date().toISOString()});return}if(x.estado==="expirado"){a.value={valido:!1,mensaje:" Este cdigo QR ha expirado"},p({valido:!1,nombre:g.nombre||"Desconocido",pelicula:g.pelicula||"N/A",timestamp:new Date().toISOString()});return}a.value={valido:!0,mensaje:"Cdigo verificado correctamente",datos:g,confirmado:!1},p({valido:!0,nombre:g.nombre,pelicula:g.pelicula,timestamp:new Date().toISOString()})}catch(g){console.error("Error procesando QR:",g),a.value={valido:!1,mensaje:"Error al procesar el cdigo QR"}}},d=async()=>{if(a.value?.datos?.reserva_id)try{const{error:m}=await we.from("tickets_qr").update({estado:"usado",verificado_en:new Date().toISOString()}).eq("reserva_id",a.value.datos.reserva_id);if(m)throw console.error("Error actualizando ticket:",m),m;const{error:g}=await we.from("reservas").update({estado:"asistida"}).eq("id",a.value.datos.reserva_id);if(g)throw console.error("Error actualizando reserva:",g),g;a.value&&(a.value.confirmado=!0),alert(" Entrada confirmada exitosamente")}catch(m){console.error("Error confirmando entrada:",m),alert("Error al confirmar la entrada: "+m.message)}},h=()=>{a.value=null,i.value=""},p=m=>{s.value.unshift(m),s.value.length>10&&s.value.pop()},y=m=>m?new Date(m+"T00:00:00").toLocaleDateString("es-ES",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"";return ia(()=>{u()}),(m,g)=>(R(),P("div",dA,[v("div",hA,[v("div",pA,[g[19]||(g[19]=v("h1",{class:"text-3xl font-bold text-[#8B0000] mb-6 text-center"}," Escner de QR - Validacin de Entrada ",-1)),v("div",vA,[v("button",{onClick:g[0]||(g[0]=x=>t.value="camara"),class:At(["flex-1 py-3 px-4 rounded-lg font-medium transition-all",t.value==="camara"?"bg-[#8B0000] text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"])},"  Escanear con Cmara ",2),v("button",{onClick:g[1]||(g[1]=x=>t.value="manual"),class:At(["flex-1 py-3 px-4 rounded-lg font-medium transition-all",t.value==="manual"?"bg-[#8B0000] text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"])}," Ingreso Manual ",2)]),t.value==="camara"?(R(),P("div",gA,[g[4]||(g[4]=v("div",{class:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm text-blue-800"},[v("p",{class:"font-medium"},"Instrucciones:"),v("ul",{class:"list-disc list-inside mt-2 space-y-1"},[v("li",null,"Permite el acceso a la cmara cuando se solicite"),v("li",null,"Apunta la cmara hacia el cdigo QR"),v("li",null,"El sistema detectar y validar automticamente")])],-1)),v("div",yA,[v("video",{ref_key:"videoElement",ref:e,class:"w-full h-full object-cover",autoplay:"",playsinline:""},null,512),n.value?(R(),P("div",mA,[...g[3]||(g[3]=[v("div",{class:"border-4 border-[#8B0000] rounded-lg",style:{width:"250px",height:"250px"}},[v("div",{class:"w-full h-full border-2 border-white border-dashed animate-pulse"})],-1)])])):re("",!0)]),v("div",xA,[n.value?(R(),P("button",{key:1,onClick:u,class:"flex-1 bg-red-600 text-white py-3 rounded-lg font-semibold hover:bg-red-700 transition-colors"},"  Detener Escaneo ")):(R(),P("button",{key:0,onClick:l,class:"flex-1 bg-[#8B0000] text-white py-3 rounded-lg font-semibold hover:bg-[#A52A2A] transition-colors"}," Iniciar Escaneo "))])])):re("",!0),t.value==="manual"?(R(),P("div",wA,[v("div",null,[g[5]||(g[5]=v("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Pegar contenido del QR o ID de Reserva: ",-1)),Ee(v("textarea",{"onUpdate:modelValue":g[2]||(g[2]=x=>i.value=x),rows:"4",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent font-mono text-sm",placeholder:"Pega aqu el contenido del QR o ingresa el ID de la reserva..."},null,512),[[We,i.value]])]),v("button",{onClick:c,disabled:!i.value.trim(),class:"w-full bg-[#8B0000] text-white py-3 rounded-lg font-semibold hover:bg-[#A52A2A] transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},"  Validar Cdigo ",8,_A)])):re("",!0),a.value?(R(),P("div",bA,[v("div",{class:At(["rounded-lg p-6 border-2",a.value.valido?"bg-green-50 border-green-500":"bg-red-50 border-red-500"])},[v("div",EA,[v("span",AA,V(a.value.valido?"":""),1),v("h2",{class:At(["text-2xl font-bold mt-2",a.value.valido?"text-green-800":"text-red-800"])},V(a.value.valido?"ENTRADA VLIDA!":"ENTRADA INVLIDA"),3)]),v("p",{class:At(["text-center mb-4",a.value.valido?"text-green-700":"text-red-700"])},V(a.value.mensaje),3),a.value.valido&&a.value.datos?(R(),P("div",CA,[g[15]||(g[15]=v("h3",{class:"font-bold text-lg text-gray-800 border-b pb-2"},"  Informacin del Asistente ",-1)),v("div",SA,[v("div",IA,[g[6]||(g[6]=v("span",{class:"font-medium text-gray-600"},"Nombre:",-1)),v("p",OA,V(a.value.datos.nombre),1)]),v("div",TA,[g[7]||(g[7]=v("span",{class:"font-medium text-gray-600"},"Correo:",-1)),v("p",RA,V(a.value.datos.correo),1)]),a.value.datos.carrera?(R(),P("div",PA,[g[8]||(g[8]=v("span",{class:"font-medium text-gray-600"},"Carrera:",-1)),v("p",NA,V(a.value.datos.carrera),1)])):re("",!0)]),v("div",DA,[g[14]||(g[14]=v("h4",{class:"font-bold text-gray-800 mb-3"}," Detalles de la Funcin",-1)),v("div",kA,[v("div",MA,[g[9]||(g[9]=v("span",{class:"font-medium text-gray-600"},"Pelcula:",-1)),v("p",BA,V(a.value.datos.pelicula),1)]),v("div",null,[g[10]||(g[10]=v("span",{class:"font-medium text-gray-600"},"Fecha:",-1)),v("p",LA,V(y(a.value.datos.fecha)),1)]),v("div",null,[g[11]||(g[11]=v("span",{class:"font-medium text-gray-600"},"Hora:",-1)),v("p",FA,V(a.value.datos.hora),1)]),v("div",null,[g[12]||(g[12]=v("span",{class:"font-medium text-gray-600"},"Asientos:",-1)),v("p",UA,V(a.value.datos.asientos),1)]),v("div",null,[g[13]||(g[13]=v("span",{class:"font-medium text-gray-600"},"ID Reserva:",-1)),v("p",jA,V(a.value.datos.reserva_id),1)])])]),a.value.datos.creado_en?(R(),P("div",$A," QR generado: "+V(new Date(a.value.datos.creado_en).toLocaleString("es-ES")),1)):re("",!0)])):re("",!0),a.value.valido&&!a.value.confirmado?(R(),P("div",VA,[v("button",{onClick:d,class:"w-full bg-green-600 text-white py-4 rounded-lg font-bold text-lg hover:bg-green-700 transition-colors"},"  CONFIRMAR ENTRADA ")])):re("",!0),a.value.confirmado?(R(),P("div",HA,[g[16]||(g[16]=v("p",{class:"text-green-800 font-bold"}," Entrada confirmada exitosamente",-1)),v("p",GA,V(new Date().toLocaleString("es-ES")),1)])):re("",!0)],2),v("button",{onClick:h,class:"w-full bg-gray-500 text-white py-3 rounded-lg font-semibold hover:bg-gray-600 transition-colors"},"  Escanear Otro Cdigo ")])):re("",!0),s.value.length>0?(R(),P("div",WA,[g[18]||(g[18]=v("h3",{class:"text-lg font-bold text-gray-800 mb-4"}," Historial de Escaneos",-1)),v("div",qA,[(R(!0),P(at,null,Qt(s.value,(x,w)=>(R(),P("div",{key:w,class:At(["p-4 rounded-lg border text-sm",x.valido?"bg-green-50 border-green-200":"bg-red-50 border-red-200"])},[v("div",zA,[v("div",null,[v("span",KA,V(x.nombre||"Desconocido"),1),g[17]||(g[17]=v("span",{class:"mx-2"},"-",-1)),v("span",XA,V(x.pelicula||"N/A"),1)]),v("span",{class:At(x.valido?"text-green-600":"text-red-600")},V(x.valido?"":""),3)]),v("div",YA,V(new Date(x.timestamp).toLocaleString("es-ES")),1)],2))),128))])])):re("",!0)])])]))}}),JA=Yi(ZA,[["__scopeId","data-v-8e693ce3"]]),QA={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 py-12 px-4 sm:px-6 lg:px-8 relative z-10"},e8={class:"max-w-md w-full space-y-8 bg-white p-8 rounded-2xl shadow-2xl relative z-20"},t8={class:"space-y-4"},r8={class:"relative"},n8={key:0,class:"mt-2 text-sm text-red-600"},i8={class:"relative"},o8={class:"relative"},a8={class:"relative"},s8=["type"],l8={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},u8={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c8={class:"relative"},f8=["type"],d8={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},h8={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},p8={key:0,class:"mt-1 text-sm text-red-600"},v8={key:0,class:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg"},g8={key:1,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg"},y8=["disabled"],m8={class:"text-center"},x8=xt({__name:"AdminSecretRegister",setup(r){const e=si(),t="polloAsado2005@",n=ar({secretCode:"",fullName:"",email:"",password:"",confirmPassword:""}),i=Q(!1),o=Q(!1),a=Q(!1),s=Q(""),l=Q(""),u=Ne(()=>!!t),c=Ne(()=>n.confirmPassword.length>0&&n.password!==n.confirmPassword),f=Ne(()=>n.secretCode.length>0&&n.fullName.length>0&&n.email.length>0&&n.password.length>=6&&n.password===n.confirmPassword),d=()=>{i.value=!i.value},h=()=>{o.value=!o.value},p=()=>{n.secretCode="",n.fullName="",n.email="",n.password="",n.confirmPassword=""},y=async()=>{if(!u.value){s.value="El cdigo secreto no est configurado. Contacta al administrador.";return}if(n.secretCode!==t){s.value="Cdigo secreto incorrecto.";return}if(!f.value||c.value){s.value="Verifica los datos del formulario.";return}a.value=!0,s.value="",l.value="";try{const m=n.email.trim().toLowerCase(),{data:g}=await we.from("usuarios").select("id, correo, rol, nombre").eq("correo",m).maybeSingle(),{data:x}=await we.auth.getSession(),w=x.session;if(g){if(!w||w.user.id!==g.id){s.value="Este correo ya est registrado. Inicia sesin con esa cuenta y vuelve a intentarlo.";return}const{error:E}=await we.auth.updateUser({password:n.password,data:{full_name:n.fullName,role:"admin"}});if(E)throw E;const{error:I}=await we.from("usuarios").update({nombre:n.fullName,rol:"admin"}).eq("id",g.id);if(I)throw I;localStorage.setItem("userId",g.id),localStorage.setItem("userRole","admin"),localStorage.setItem("userName",n.fullName),l.value="Tu cuenta fue promovida a administrador! Redirigiendo al panel...",p(),setTimeout(()=>{e.push("/admin")},1500);return}const{data:_,error:C}=await we.auth.signUp({email:m,password:n.password,options:{data:{full_name:n.fullName,role:"admin"}}});if(C)throw C;if(_.user){await new Promise(D=>setTimeout(D,500));const{data:E,error:I}=await we.from("usuarios").select("*").eq("id",_.user.id).single();if(I)throw I;localStorage.setItem("userId",E.id),localStorage.setItem("userRole",E.rol),localStorage.setItem("userName",E.nombre),l.value="Cuenta administrativa creada exitosamente! Redirigiendo al panel...",p(),setTimeout(()=>{e.push("/admin")},1500)}}catch(m){console.error("Error en registro admin:",m),m?.message?.includes("already registered")?s.value="Este correo ya est registrado.":s.value=m?.message||"Error al crear la cuenta administrativa."}finally{a.value=!1}};return(m,g)=>{const x=Xt("router-link");return R(),P("div",QA,[v("div",e8,[g[15]||(g[15]=v("div",{class:"text-center"},[v("h2",{class:"text-3xl font-extrabold text-gray-900"}," Registro Privado de Administradores "),v("p",{class:"mt-2 text-sm text-gray-600"}," Acceso exclusivo. Ingresa el cdigo secreto para crear una cuenta administrativa. ")],-1)),v("form",{class:"mt-8 space-y-6",onSubmit:ai(y,["prevent"])},[v("div",t8,[v("div",null,[g[5]||(g[5]=v("label",{for:"secretCode",class:"block text-sm font-medium text-gray-700 mb-1"}," Cdigo Secreto ",-1)),v("div",r8,[Ee(v("input",{id:"secretCode","onUpdate:modelValue":g[0]||(g[0]=w=>n.secretCode=w),type:"password",required:"",class:"appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200",placeholder:"Ingresa el cdigo secreto"},null,512),[[We,n.secretCode]])]),u.value?re("",!0):(R(),P("p",n8," No se ha configurado el cdigo secreto. Contacta al administrador del sistema. "))]),v("div",null,[g[6]||(g[6]=v("label",{for:"fullName",class:"block text-sm font-medium text-gray-700 mb-1"}," Nombre Completo ",-1)),v("div",i8,[Ee(v("input",{id:"fullName","onUpdate:modelValue":g[1]||(g[1]=w=>n.fullName=w),type:"text",required:"",class:"appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200",placeholder:"Ej: Mara Martnez"},null,512),[[We,n.fullName]])])]),v("div",null,[g[7]||(g[7]=v("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-1"}," Correo Electrnico ",-1)),v("div",o8,[Ee(v("input",{id:"email","onUpdate:modelValue":g[2]||(g[2]=w=>n.email=w),type:"email",required:"",class:"appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200",placeholder:"admin@live.uleam.edu.ec"},null,512),[[We,n.email]])])]),v("div",null,[g[10]||(g[10]=v("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-1"}," Contrasea ",-1)),v("div",a8,[Ee(v("input",{id:"password","onUpdate:modelValue":g[3]||(g[3]=w=>n.password=w),type:i.value?"text":"password",required:"",minlength:"6",class:"appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200",placeholder:"Mnimo 6 caracteres"},null,8,s8),[[$i,n.password]]),v("button",{type:"button",onClick:d,class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[i.value?(R(),P("svg",u8,[...g[9]||(g[9]=[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(R(),P("svg",l8,[...g[8]||(g[8]=[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])])]),v("div",null,[g[13]||(g[13]=v("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-700 mb-1"}," Confirmar Contrasea ",-1)),v("div",c8,[Ee(v("input",{id:"confirmPassword","onUpdate:modelValue":g[4]||(g[4]=w=>n.confirmPassword=w),type:o.value?"text":"password",required:"",minlength:"6",class:"appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200",placeholder:"Repite tu contrasea"},null,8,f8),[[$i,n.confirmPassword]]),v("button",{type:"button",onClick:h,class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[o.value?(R(),P("svg",h8,[...g[12]||(g[12]=[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(R(),P("svg",d8,[...g[11]||(g[11]=[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])]),c.value?(R(),P("p",p8," Las contraseas no coinciden ")):re("",!0)])]),l.value?(R(),P("div",v8,"  "+V(l.value),1)):re("",!0),s.value?(R(),P("div",g8,"  "+V(s.value),1)):re("",!0),v("div",null,[v("button",{type:"submit",disabled:a.value||!f.value||!u.value,class:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-lg font-semibold text-white bg-[#8B0000] hover:bg-[#A52A2A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#8B0000] transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed"},V(a.value?"Creando cuenta...":"Crear Administrador"),9,y8)]),v("div",m8,[ye(x,{to:"/login",class:"text-sm font-medium text-[#8B0000] hover:text-[#A52A2A] transition duration-200"},{default:Te(()=>[...g[14]||(g[14]=[be("  Volver al inicio de sesin ",-1)])]),_:1})])],32)])])}}}),w8={class:"min-h-screen bg-gray-50"},_8={class:"bg-[#8B0000] text-white shadow-lg"},b8={class:"container mx-auto px-6 py-6"},E8={class:"flex items-center justify-between"},A8={class:"container mx-auto px-6 py-8"},C8={class:"mb-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4"},S8={class:"flex items-center gap-4"},I8=["disabled"],O8={key:0,class:"flex justify-center items-center py-12"},T8={key:1,class:"bg-white rounded-xl shadow-md p-12 text-center"},R8={class:"text-gray-600"},P8={key:2,class:"space-y-4"},N8={class:"flex items-start justify-between gap-4"},D8={class:"flex-1"},k8={class:"flex items-center gap-3 mb-2"},M8={class:"text-lg font-bold text-gray-900"},B8={key:0,class:"px-2 py-1 bg-[#8B0000] text-white text-xs font-semibold rounded-full"},L8={class:"text-gray-600 whitespace-pre-line mb-4"},F8={class:"flex items-center gap-4 text-sm text-gray-500"},U8={key:0},j8={class:"flex flex-col gap-2"},$8=["onClick","disabled"],V8=["onClick","disabled"],H8=["onClick","disabled"],G8=xt({__name:"AdminNotificaciones",setup(r){const e=Q([]),t=Q(!0),n=Q(null),i=Q(null),o=Q(null),a=Q(!1),s=Ne(()=>n.value===null?e.value:e.value.filter(m=>m.leida===n.value)),l=Ne(()=>e.value.filter(m=>!m.leida)),u=Ne(()=>e.value.filter(m=>m.leida)),c=async()=>{try{if(t.value=!0,!localStorage.getItem("userId"))throw new Error("No se encontr el ID del usuario");const{data:g,error:x}=await we.from("notificaciones").select("*").eq("tipo","recomendacion").order("enviada_en",{ascending:!1});if(x)throw x;e.value=(g||[]).map(w=>({...w,leida:w.leida||!1}))}catch(m){console.error("Error cargando notificaciones:",m),alert("Error al cargar las sugerencias: "+m.message)}finally{t.value=!1}},f=async m=>{try{i.value=m;const{error:g}=await we.from("notificaciones").update({leida:!0}).eq("id",m);if(g)throw g;const x=e.value.find(w=>w.id===m);x&&(x.leida=!0)}catch(g){console.error("Error marcando como leda:",g),alert("Error al marcar la sugerencia como leda")}finally{i.value=null}},d=async m=>{try{i.value=m;const{error:g}=await we.from("notificaciones").update({leida:!1}).eq("id",m);if(g)throw g;const x=e.value.find(w=>w.id===m);x&&(x.leida=!1)}catch(g){console.error("Error marcando como no leda:",g),alert("Error al marcar la sugerencia como no leda")}finally{i.value=null}},h=async()=>{try{a.value=!0;const m=l.value.map(x=>x.id);if(m.length===0)return;const{error:g}=await we.from("notificaciones").update({leida:!0}).in("id",m);if(g)throw g;e.value.forEach(x=>{x.leida||(x.leida=!0)})}catch(m){console.error("Error marcando todas como ledas:",m),alert("Error al marcar todas las sugerencias como ledas")}finally{a.value=!1}},p=async m=>{if(confirm("Ests seguro de eliminar esta sugerencia?"))try{o.value=m;const{error:g}=await we.from("notificaciones").delete().eq("id",m);if(g)throw g;e.value=e.value.filter(x=>x.id!==m)}catch(g){console.error("Error eliminando notificacin:",g),alert("Error al eliminar la sugerencia")}finally{o.value=null}},y=m=>{if(!m)return"Fecha no disponible";try{return new Date(m).toLocaleString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return m}};return un(()=>{c()}),(m,g)=>{const x=Xt("RouterLink");return R(),P("div",w8,[v("div",_8,[v("div",b8,[v("div",E8,[g[4]||(g[4]=v("div",null,[v("h1",{class:"text-3xl font-bold"},"Sugerencias de Pelculas"),v("p",{class:"text-gray-200 mt-1"},"Gestiona las sugerencias enviadas por los estudiantes")],-1)),ye(x,{to:"/admin",class:"inline-flex items-center gap-2 bg-white/20 hover:bg-white/30 text-white px-5 py-3 rounded-xl font-semibold transition-all duration-200"},{default:Te(()=>[...g[3]||(g[3]=[v("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),be(" Volver al Panel ",-1)])]),_:1})])])]),v("div",A8,[v("div",C8,[v("div",S8,[v("button",{onClick:g[0]||(g[0]=w=>n.value=null),class:At(["px-4 py-2 rounded-lg font-medium transition-colors",n.value===null?"bg-[#8B0000] text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"])}," Todas ("+V(e.value.length)+") ",3),v("button",{onClick:g[1]||(g[1]=w=>n.value=!1),class:At(["px-4 py-2 rounded-lg font-medium transition-colors",n.value===!1?"bg-[#8B0000] text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"])}," No ledas ("+V(l.value.length)+") ",3),v("button",{onClick:g[2]||(g[2]=w=>n.value=!0),class:At(["px-4 py-2 rounded-lg font-medium transition-colors",n.value===!0?"bg-[#8B0000] text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"])}," Ledas ("+V(u.value.length)+") ",3)]),v("button",{onClick:h,disabled:l.value.length===0||a.value,class:"px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},V(a.value?"Marcando...":"Marcar todas como ledas"),9,I8)]),t.value?(R(),P("div",O8,[...g[5]||(g[5]=[v("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#8B0000]"},null,-1),v("p",{class:"ml-4 text-gray-600"},"Cargando sugerencias...",-1)])])):s.value.length===0?(R(),P("div",T8,[g[6]||(g[6]=v("svg",{class:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1)),g[7]||(g[7]=v("h3",{class:"text-xl font-semibold text-gray-700 mb-2"},"No hay sugerencias",-1)),v("p",R8,V(n.value===!1?"No hay sugerencias sin leer":"No hay sugerencias para mostrar"),1)])):(R(),P("div",P8,[(R(!0),P(at,null,Qt(s.value,w=>(R(),P("div",{key:w.id,class:At(["bg-white rounded-xl shadow-md p-6 transition-all hover:shadow-lg",w.leida?"border-l-4 border-transparent":"border-l-4 border-[#8B0000]"])},[v("div",N8,[v("div",D8,[v("div",k8,[v("h3",M8,V(w.titulo),1),w.leida?re("",!0):(R(),P("span",B8," Nueva "))]),v("div",L8,V(w.mensaje),1),v("div",F8,[w.enviada_en?(R(),P("span",U8,[g[8]||(g[8]=v("svg",{class:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),be(" "+V(y(w.enviada_en)),1)])):re("",!0)])]),v("div",j8,[w.leida?(R(),P("button",{key:1,onClick:_=>d(w.id),disabled:i.value===w.id,class:"px-4 py-2 bg-gray-400 text-white rounded-lg text-sm font-medium hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},V(i.value===w.id?"Marcando...":"Marcar como no leda"),9,V8)):(R(),P("button",{key:0,onClick:_=>f(w.id),disabled:i.value===w.id,class:"px-4 py-2 bg-blue-500 text-white rounded-lg text-sm font-medium hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},V(i.value===w.id?"Marcando...":"Marcar como leda"),9,$8)),v("button",{onClick:_=>p(w.id),disabled:o.value===w.id,class:"px-4 py-2 bg-red-500 text-white rounded-lg text-sm font-medium hover:bg-red-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},V(o.value===w.id?"Eliminando...":"Eliminar"),9,H8)])])],2))),128))]))])])}}}),W8={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 py-12 px-4 sm:px-6 lg:px-8 relative z-10"},q8={class:"max-w-md w-full space-y-8 bg-white p-8 rounded-2xl shadow-2xl relative z-20"},z8={class:"space-y-4"},K8={class:"relative"},X8={key:0,class:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg"},Y8={key:1,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg"},Z8=["disabled"],J8={class:"text-center"},Q8=xt({__name:"ForgotPassword",setup(r){const e=ar({email:""}),t=Q(!1),n=Q(""),i=Q(""),o=async()=>{if(n.value="",i.value="",!e.email.endsWith("@live.uleam.edu.ec")){n.value="Debe usar su correo institucional (@live.uleam.edu.ec)";return}t.value=!0;try{const{error:a}=await we.auth.resetPasswordForEmail(e.email,{redirectTo:`${window.location.origin}/reset-password`});if(a)throw a;i.value="Enlace de recuperacin enviado! Revisa tu correo electrnico para restablecer tu contrasea.",e.email=""}catch(a){n.value=a.message||"Error al enviar el enlace de recuperacin"}finally{t.value=!1}};return(a,s)=>{const l=Xt("router-link");return R(),P("div",W8,[v("div",q8,[s[4]||(s[4]=v("div",{class:"text-center"},[v("h2",{class:"text-3xl font-extrabold text-gray-900"}," Recuperar Contrasea "),v("p",{class:"mt-2 text-sm text-gray-600"}," Ingresa tu correo institucional y te enviaremos un enlace para restablecer tu contrasea ")],-1)),v("form",{class:"mt-8 space-y-6",onSubmit:ai(o,["prevent"])},[v("div",z8,[v("div",null,[s[2]||(s[2]=v("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-1"}," Correo Electrnico ",-1)),v("div",K8,[s[1]||(s[1]=v("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[v("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})])],-1)),Ee(v("input",{id:"email","onUpdate:modelValue":s[0]||(s[0]=u=>e.email=u),type:"email",required:"",class:"appearance-none block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200",placeholder:"ejemplo@live.uleam.edu.ec"},null,512),[[We,e.email]])])])]),i.value?(R(),P("div",X8,"  "+V(i.value),1)):re("",!0),n.value?(R(),P("div",Y8,"  "+V(n.value),1)):re("",!0),v("div",null,[v("button",{type:"submit",disabled:t.value,class:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-lg font-semibold text-white bg-[#8B0000] hover:bg-[#A52A2A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#8B0000] transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed"},V(t.value?"Enviando...":"Enviar Enlace de Recuperacin"),9,Z8)]),v("div",J8,[ye(l,{to:"/login",class:"text-sm font-medium text-[#8B0000] hover:text-[#A52A2A] transition duration-200"},{default:Te(()=>[...s[3]||(s[3]=[be("  Volver al inicio de sesin ",-1)])]),_:1})])],32)])])}}}),eC={class:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100"},tC={class:"container mx-auto px-4 sm:px-6 lg:px-8 py-12"},rC={class:"bg-white rounded-2xl shadow-lg p-8 text-center"},nC={class:"flex flex-col sm:flex-row gap-4 justify-center"},iC=xt({__name:"Proximas",setup(r){const e=Q(!1),t=async()=>{const{data:n}=await we.auth.getSession(),i=localStorage.getItem("userId");e.value=!!n.session||!!i};return un(()=>{t()}),(n,i)=>{const o=Xt("router-link");return R(),P("div",eC,[v("div",tC,[i[4]||(i[4]=Qn('<div class="text-center mb-12"><h1 class="text-4xl md:text-5xl font-extrabold text-gray-900 mb-4"> Prximos Estrenos </h1><p class="text-lg text-gray-600 max-w-2xl mx-auto"> Mantente al tanto de las pelculas que prximamente llegarn a nuestro cine. No te pierdas los estrenos ms esperados! </p></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12"><div class="bg-white rounded-2xl shadow-lg overflow-hidden transform hover:-translate-y-2 hover:shadow-2xl transition-all duration-300"><div class="relative aspect-[2/3] bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center"><div class="text-center p-6"><svg class="w-16 h-16 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg><p class="text-gray-500 text-sm">Prximamente</p></div><div class="absolute top-4 right-4 bg-[#8B0000] text-white px-3 py-1 rounded-full text-xs font-bold"> PRXIMAMENTE </div></div><div class="p-6"><h3 class="text-xl font-bold text-gray-900 mb-2"> Estreno en Preparacin </h3><p class="text-sm text-gray-600 mb-4"> Estamos trabajando para traerte los mejores estrenos. Mantente atento a nuestras redes sociales para conocer las fechas exactas. </p><div class="flex items-center text-sm text-gray-500"><svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> Prximamente </div></div></div><div class="bg-white rounded-2xl shadow-lg overflow-hidden transform hover:-translate-y-2 hover:shadow-2xl transition-all duration-300"><div class="relative aspect-[2/3] bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center"><div class="text-center p-6"><svg class="w-16 h-16 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg><p class="text-gray-500 text-sm">Prximamente</p></div><div class="absolute top-4 right-4 bg-[#8B0000] text-white px-3 py-1 rounded-full text-xs font-bold"> PRXIMAMENTE </div></div><div class="p-6"><h3 class="text-xl font-bold text-gray-900 mb-2"> Nuevos Lanzamientos </h3><p class="text-sm text-gray-600 mb-4"> Las pelculas ms esperadas del ao estn por llegar. Sigue nuestras actualizaciones para no perderte ningn estreno importante. </p><div class="flex items-center text-sm text-gray-500"><svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> Prximamente </div></div></div><div class="bg-white rounded-2xl shadow-lg overflow-hidden transform hover:-translate-y-2 hover:shadow-2xl transition-all duration-300"><div class="relative aspect-[2/3] bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center"><div class="text-center p-6"><svg class="w-16 h-16 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg><p class="text-gray-500 text-sm">Prximamente</p></div><div class="absolute top-4 right-4 bg-[#8B0000] text-white px-3 py-1 rounded-full text-xs font-bold"> PRXIMAMENTE </div></div><div class="p-6"><h3 class="text-xl font-bold text-gray-900 mb-2"> Pelculas Exclusivas </h3><p class="text-sm text-gray-600 mb-4"> Estamos negociando los derechos para traer las mejores producciones cinematogrficas directamente a nuestra comunidad universitaria. </p><div class="flex items-center text-sm text-gray-500"><svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> Prximamente </div></div></div></div>',2)),v("div",rC,[i[2]||(i[2]=v("h2",{class:"text-2xl font-bold text-gray-900 mb-4"}," Quieres estar al da con nuestros estrenos? ",-1)),i[3]||(i[3]=v("p",{class:"text-gray-600 mb-6 max-w-2xl mx-auto"}," Regstrate en nuestra plataforma para recibir notificaciones sobre nuevas pelculas, funciones especiales y eventos exclusivos. Tambin puedes seguir nuestras redes sociales para no perderte ningn detalle. ",-1)),v("div",nC,[e.value?re("",!0):(R(),gl(o,{key:0,to:"/register",class:"bg-[#8B0000] text-white px-8 py-3 rounded-xl font-semibold shadow-lg hover:bg-[#A52A2A] hover:scale-105 transition-all duration-200"},{default:Te(()=>[...i[0]||(i[0]=[be(" Crear Cuenta ",-1)])]),_:1})),ye(o,{to:"/cartelera",class:"bg-gray-200 text-gray-900 px-8 py-3 rounded-xl font-semibold shadow-lg hover:bg-gray-300 hover:scale-105 transition-all duration-200"},{default:Te(()=>[...i[1]||(i[1]=[be(" Ver Cartelera Actual ",-1)])]),_:1})])])])])}}}),oC={class:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100"},aC={class:"container mx-auto px-4 sm:px-6 lg:px-8 py-12"},sC={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},lC={class:"bg-white rounded-2xl shadow-lg p-8"},uC={key:0,class:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg"},cC={key:1,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg"},fC=["disabled"],dC=xt({__name:"Contacto",setup(r){const e=ar({nombre:"",email:"",asunto:"",mensaje:""}),t=Q(!1),n=Q(""),i=Q(""),o=async()=>{n.value="",i.value="",t.value=!0;try{await new Promise(a=>setTimeout(a,1500)),i.value="Mensaje enviado con xito! Nos pondremos en contacto contigo pronto.",e.nombre="",e.email="",e.asunto="",e.mensaje=""}catch{n.value="Error al enviar el mensaje. Por favor, intenta de nuevo o contctanos directamente por correo electrnico."}finally{t.value=!1}};return(a,s)=>(R(),P("div",oC,[v("div",aC,[s[11]||(s[11]=v("div",{class:"text-center mb-12"},[v("h1",{class:"text-4xl md:text-5xl font-extrabold text-gray-900 mb-4"}," Contctanos "),v("p",{class:"text-lg text-gray-600 max-w-2xl mx-auto"}," Tienes alguna pregunta, sugerencia o necesitas ayuda? Estamos aqu para asistirte. No dudes en ponerte en contacto con nosotros a travs de cualquiera de los siguientes medios. ")],-1)),v("div",sC,[v("div",lC,[s[9]||(s[9]=v("h2",{class:"text-2xl font-bold text-gray-900 mb-6"}," Envanos un Mensaje ",-1)),v("form",{onSubmit:ai(o,["prevent"]),class:"space-y-6"},[v("div",null,[s[4]||(s[4]=v("label",{for:"nombre",class:"block text-sm font-medium text-gray-700 mb-2"}," Nombre Completo ",-1)),Ee(v("input",{id:"nombre","onUpdate:modelValue":s[0]||(s[0]=l=>e.nombre=l),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200",placeholder:"Tu nombre"},null,512),[[We,e.nombre]])]),v("div",null,[s[5]||(s[5]=v("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"}," Correo Electrnico ",-1)),Ee(v("input",{id:"email","onUpdate:modelValue":s[1]||(s[1]=l=>e.email=l),type:"email",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200",placeholder:"tu@email.com"},null,512),[[We,e.email]])]),v("div",null,[s[7]||(s[7]=v("label",{for:"asunto",class:"block text-sm font-medium text-gray-700 mb-2"}," Asunto ",-1)),Ee(v("select",{id:"asunto","onUpdate:modelValue":s[2]||(s[2]=l=>e.asunto=l),required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200"},[...s[6]||(s[6]=[Qn('<option value="">Selecciona un asunto</option><option value="consulta">Consulta General</option><option value="sugerencia">Sugerencia de Pelcula</option><option value="problema">Reportar un Problema</option><option value="reserva">Consulta sobre Reservas</option><option value="otro">Otro</option>',6)])],512),[[Hr,e.asunto]])]),v("div",null,[s[8]||(s[8]=v("label",{for:"mensaje",class:"block text-sm font-medium text-gray-700 mb-2"}," Mensaje ",-1)),Ee(v("textarea",{id:"mensaje","onUpdate:modelValue":s[3]||(s[3]=l=>e.mensaje=l),required:"",rows:"5",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200 resize-none",placeholder:"Escribe tu mensaje aqu..."},null,512),[[We,e.mensaje]])]),i.value?(R(),P("div",uC,"  "+V(i.value),1)):re("",!0),n.value?(R(),P("div",cC,"  "+V(n.value),1)):re("",!0),v("button",{type:"submit",disabled:t.value,class:"w-full bg-[#8B0000] text-white px-8 py-3 rounded-lg font-semibold hover:bg-[#A52A2A] hover:scale-105 transition-all duration-200 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed"},V(t.value?"Enviando...":"Enviar Mensaje"),9,fC)],32)]),s[10]||(s[10]=Qn('<div class="space-y-6"><div class="bg-white rounded-2xl shadow-lg p-8"><div class="flex items-start space-x-4"><div class="bg-[#8B0000] text-white p-4 rounded-lg"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></div><div><h3 class="text-xl font-bold text-gray-900 mb-2">Ubicacin</h3><p class="text-gray-600"> Universidad Laica Eloy Alfaro de Manab<br> Campus Universitario<br> Manta, Manab, Ecuador </p></div></div></div><div class="bg-white rounded-2xl shadow-lg p-8"><div class="flex items-start space-x-4"><div class="bg-[#8B0000] text-white p-4 rounded-lg"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg></div><div><h3 class="text-xl font-bold text-gray-900 mb-2">Telfono</h3><p class="text-gray-600"> (05) 262-3740<br><span class="text-sm text-gray-500">Lunes a Viernes: 8:00 AM - 6:00 PM</span></p></div></div></div><div class="bg-white rounded-2xl shadow-lg p-8"><div class="flex items-start space-x-4"><div class="bg-[#8B0000] text-white p-4 rounded-lg"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div><div><h3 class="text-xl font-bold text-gray-900 mb-2">Correo Electrnico</h3><p class="text-gray-600"><a href="mailto:cine@uleam.edu.ec" class="text-[#8B0000] hover:underline"> cine@uleam.edu.ec </a></p></div></div></div><div class="bg-white rounded-2xl shadow-lg p-8"><h3 class="text-xl font-bold text-gray-900 mb-4">Sguenos en Redes Sociales</h3><div class="flex space-x-4"><a href="https://www.facebook.com/UleamEc" aria-label="Facebook" class="bg-gray-100 hover:bg-[#8B0000] text-gray-700 hover:text-white p-3 rounded-lg transition-all duration-200 hover:scale-110"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"></path></svg></a><a href="https://www.instagram.com/uleam_ecuador_oficial/" aria-label="Instagram" class="bg-gray-100 hover:bg-[#8B0000] text-gray-700 hover:text-white p-3 rounded-lg transition-all duration-200 hover:scale-110"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"></path></svg></a></div></div></div>',1))])])]))}}),hC={class:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100"},pC={class:"container mx-auto px-4 sm:px-6 lg:px-8 py-12"},vC={class:"max-w-4xl mx-auto space-y-12"},gC={class:"bg-gradient-to-r from-[#8B0000] to-[#A52A2A] rounded-2xl shadow-lg p-8 md:p-12 text-white text-center"},yC={class:"flex flex-col sm:flex-row gap-4 justify-center"},mC=xt({__name:"AcercaDe",setup(r){const e=Q(!1),t=async()=>{const{data:n}=await we.auth.getSession(),i=localStorage.getItem("userId");e.value=!!n.session||!!i};return un(()=>{t()}),(n,i)=>{const o=Xt("router-link");return R(),P("div",hC,[v("div",pC,[i[5]||(i[5]=v("div",{class:"text-center mb-12"},[v("h1",{class:"text-4xl md:text-5xl font-extrabold text-gray-900 mb-4"}," Acerca de Cine ULEAM "),v("p",{class:"text-lg text-gray-600 max-w-3xl mx-auto"}," El espacio cinematogrfico oficial de la Universidad Laica Eloy Alfaro de Manab, creado para enriquecer la vida cultural de nuestra comunidad universitaria. ")],-1)),v("div",vC,[i[4]||(i[4]=Qn('<div class="bg-white rounded-2xl shadow-lg p-8 md:p-12"><h2 class="text-3xl font-bold text-gray-900 mb-6 flex items-center"><span class="bg-[#8B0000] text-white p-3 rounded-lg mr-4"><svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path></svg></span> Nuestra Misin </h2><p class="text-gray-700 text-lg leading-relaxed mb-4"> En <strong class="text-[#8B0000]">Cine ULEAM</strong>, nos comprometemos a ofrecer una experiencia cinematogrfica nica y accesible para todos los miembros de la comunidad universitaria. Buscamos promover la cultura, el entretenimiento y el aprendizaje a travs del sptimo arte. </p><p class="text-gray-600 leading-relaxed"> Creemos firmemente que el cine es una herramienta poderosa para la educacin, la reflexin y la conexin entre personas. Por eso, trabajamos constantemente para traer las mejores producciones cinematogrficas, tanto nacionales como internacionales, que enriquezcan el bagaje cultural de nuestros estudiantes, profesores y personal administrativo. </p></div><div class="bg-white rounded-2xl shadow-lg p-8 md:p-12"><h2 class="text-3xl font-bold text-gray-900 mb-6 flex items-center"><span class="bg-[#8B0000] text-white p-3 rounded-lg mr-4"><svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg></span> Nuestra Visin </h2><p class="text-gray-700 text-lg leading-relaxed mb-4"> Aspiramos a convertirnos en el referente cinematogrfico universitario de la regin, siendo reconocidos por nuestra diversidad de programacin, calidad en el servicio y compromiso con la comunidad. </p><p class="text-gray-600 leading-relaxed"> Queremos que Cine ULEAM sea ms que un simple lugar para ver pelculas. Nuestro objetivo es crear un espacio donde se fomente el dilogo, la crtica constructiva y el anlisis cinematogrfico, contribuyendo as a la formacin integral de nuestros estudiantes. </p></div><div class="bg-white rounded-2xl shadow-lg p-8 md:p-12"><h2 class="text-3xl font-bold text-gray-900 mb-8 text-center"> Nuestros Valores </h2><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="border-l-4 border-[#8B0000] pl-6"><h3 class="text-xl font-semibold text-gray-900 mb-2">Accesibilidad</h3><p class="text-gray-600"> Creemos que el cine debe ser accesible para todos. Por eso, ofrecemos precios especiales para estudiantes y promociones regulares para la comunidad universitaria. </p></div><div class="border-l-4 border-[#8B0000] pl-6"><h3 class="text-xl font-semibold text-gray-900 mb-2">Diversidad</h3><p class="text-gray-600"> Programamos una amplia variedad de gneros y estilos cinematogrficos, desde grandes estrenos comerciales hasta cine independiente y de autor. </p></div><div class="border-l-4 border-[#8B0000] pl-6"><h3 class="text-xl font-semibold text-gray-900 mb-2">Calidad</h3><p class="text-gray-600"> Mantenemos los ms altos estndares en cuanto a proyeccin, sonido y comodidad para garantizar la mejor experiencia cinematogrfica. </p></div><div class="border-l-4 border-[#8B0000] pl-6"><h3 class="text-xl font-semibold text-gray-900 mb-2">Comunidad</h3><p class="text-gray-600"> Fomentamos el sentido de comunidad universitaria a travs de eventos especiales, ciclos temticos y actividades que unen a estudiantes, profesores y personal. </p></div></div></div><div class="bg-white rounded-2xl shadow-lg p-8 md:p-12"><h2 class="text-3xl font-bold text-gray-900 mb-8 text-center"> Qu Ofrecemos? </h2><div class="space-y-6"><div class="flex items-start space-x-4"><div class="bg-[#8B0000] text-white p-3 rounded-lg flex-shrink-0"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg></div><div><h3 class="text-xl font-semibold text-gray-900 mb-2">Cartelera Variada</h3><p class="text-gray-600"> Ofrecemos una seleccin cuidadosa de pelculas que incluye los ltimos estrenos, clsicos del cine y producciones independientes de gran calidad. </p></div></div><div class="flex items-start space-x-4"><div class="bg-[#8B0000] text-white p-3 rounded-lg flex-shrink-0"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></div><div><h3 class="text-xl font-semibold text-gray-900 mb-2">Sistema de Reservas</h3><p class="text-gray-600"> Nuestra plataforma en lnea te permite reservar tus entradas de forma rpida y sencilla, asegurando tu lugar en las funciones ms populares. </p></div></div><div class="flex items-start space-x-4"><div class="bg-[#8B0000] text-white p-3 rounded-lg flex-shrink-0"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path></svg></div><div><h3 class="text-xl font-semibold text-gray-900 mb-2">Eventos Especiales</h3><p class="text-gray-600"> Organizamos ciclos temticos, maratones cinematogrficas, estrenos exclusivos y encuentros con directores y actores para enriquecer la experiencia. </p></div></div><div class="flex items-start space-x-4"><div class="bg-[#8B0000] text-white p-3 rounded-lg flex-shrink-0"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"></path></svg></div><div><h3 class="text-xl font-semibold text-gray-900 mb-2">Sugerencias de la Comunidad</h3><p class="text-gray-600"> Los estudiantes pueden sugerir pelculas que les gustara ver, haciendo de Cine ULEAM un espacio verdaderamente participativo y democrtico. </p></div></div></div></div>',4)),v("div",gC,[i[2]||(i[2]=v("h2",{class:"text-3xl font-bold mb-4"}," nete a Nuestra Comunidad Cinematogrfica! ",-1)),i[3]||(i[3]=v("p",{class:"text-lg mb-8 opacity-90"}," Regstrate hoy y forma parte de esta increble experiencia cinematogrfica universitaria. ",-1)),v("div",yC,[e.value?re("",!0):(R(),gl(o,{key:0,to:"/register",class:"bg-white text-[#8B0000] px-8 py-3 rounded-xl font-semibold shadow-lg hover:bg-gray-100 hover:scale-105 transition-all duration-200"},{default:Te(()=>[...i[0]||(i[0]=[be(" Crear Cuenta ",-1)])]),_:1})),ye(o,{to:"/cartelera",class:"bg-white/10 text-white border-2 border-white px-8 py-3 rounded-xl font-semibold shadow-lg hover:bg-white/20 hover:scale-105 transition-all duration-200"},{default:Te(()=>[...i[1]||(i[1]=[be(" Ver Cartelera ",-1)])]),_:1})])])])])])}}}),xC=[{path:"/",name:"Homepage",component:zy},{path:"/login",name:"Login",component:um,meta:{requiresGuest:!0}},{path:"/register",name:"Register",component:Nm,meta:{requiresGuest:!0}},{path:"/cartelera",name:"Cartelera",component:Aw,meta:{requiresAuth:!0}},{path:"/sugerencia",name:"Sugerencia",component:o_,meta:{requiresAuth:!0,requiresStudent:!0}},{path:"/generar-qr",name:"GeneradorQR",component:xb,meta:{requiresAuth:!0}},{path:"/escanear-qr",name:"EscanerQR",component:JA,meta:{requiresAuth:!0}},{path:"/admin",name:"AdminDashboard",component:jx,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/cartelera",redirect:"/admin"},{path:"/admin-secret-register",name:"AdminSecretRegister",component:x8,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/notificaciones",name:"AdminNotificaciones",component:G8,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/forgot-password",name:"ForgotPassword",component:Q8,meta:{requiresGuest:!0}},{path:"/proximas",name:"Proximas",component:iC},{path:"/contacto",name:"Contacto",component:dC},{path:"/acerca-de",name:"AcercaDe",component:mC}],th=Hv({history:_v(),routes:xC});th.beforeEach(async(r,e,t)=>{const{data:n}=await we.auth.getSession(),i=n.session,o=localStorage.getItem("userId"),a=localStorage.getItem("userRole"),s=!!i||!!o,l=i?.user?.user_metadata?.role??a??null;if(i&&!o&&localStorage.setItem("userId",i.user.id),i&&l&&!a&&localStorage.setItem("userRole",l),i?.user?.user_metadata?.full_name&&!localStorage.getItem("userName")&&localStorage.setItem("userName",i.user.user_metadata.full_name),r.meta?.requiresAuth&&!s)return t({path:"/login",query:{redirect:r.fullPath}});if(r.meta?.requiresAdmin){if(!s)return t({path:"/login",query:{redirect:r.fullPath}});if(l!=="admin")return t(l==="estudiante"?"/cartelera":"/")}if(r.meta?.requiresStudent){if(!s)return t({path:"/login",query:{redirect:r.fullPath}});if(l!=="estudiante")return t(l==="admin"?"/admin":"/")}return r.meta?.requiresGuest&&s?t(l==="admin"?"/admin":"/cartelera"):t()});const rh=Cp(Vy);rh.use(th);rh.mount("#app");
