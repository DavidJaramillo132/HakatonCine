function kh(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(r,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function vl(r){const e=Object.create(null);for(const t of r.split(","))e[t]=1;return t=>t in e}const qe={},oi=[],Mr=()=>{},Gd=()=>!1,aa=r=>r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&(r.charCodeAt(2)>122||r.charCodeAt(2)<97),gl=r=>r.startsWith("onUpdate:"),At=Object.assign,yl=(r,e)=>{const t=r.indexOf(e);t>-1&&r.splice(t,1)},Nh=Object.prototype.hasOwnProperty,Fe=(r,e)=>Nh.call(r,e),ge=Array.isArray,ai=r=>io(r)==="[object Map]",gi=r=>io(r)==="[object Set]",ru=r=>io(r)==="[object Date]",be=r=>typeof r=="function",ut=r=>typeof r=="string",Br=r=>typeof r=="symbol",Ge=r=>r!==null&&typeof r=="object",qd=r=>(Ge(r)||be(r))&&be(r.then)&&be(r.catch),zd=Object.prototype.toString,io=r=>zd.call(r),Dh=r=>io(r).slice(8,-1),Wd=r=>io(r)==="[object Object]",ml=r=>ut(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,Mi=vl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),sa=r=>{const e=Object.create(null);return(t=>e[t]||(e[t]=r(t)))},Mh=/-\w/g,vr=sa(r=>r.replace(Mh,e=>e.slice(1).toUpperCase())),Bh=/\B([A-Z])/g,yn=sa(r=>r.replace(Bh,"-$1").toLowerCase()),la=sa(r=>r.charAt(0).toUpperCase()+r.slice(1)),Ia=sa(r=>r?`on${la(r)}`:""),cn=(r,e)=>!Object.is(r,e),Po=(r,...e)=>{for(let t=0;t<r.length;t++)r[t](...e)},Kd=(r,e,t,n=!1)=>{Object.defineProperty(r,e,{configurable:!0,enumerable:!1,writable:n,value:t})},ua=r=>{const e=parseFloat(r);return isNaN(e)?r:e},Lh=r=>{const e=ut(r)?Number(r):NaN;return isNaN(e)?r:e};let nu;const ca=()=>nu||(nu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function hn(r){if(ge(r)){const e={};for(let t=0;t<r.length;t++){const n=r[t],i=ut(n)?Uh(n):hn(n);if(i)for(const o in i)e[o]=i[o]}return e}else if(ut(r)||Ge(r))return r}const Fh=/;(?![^(]*\))/g,$h=/:([^]+)/,jh=/\/\*[^]*?\*\//g;function Uh(r){const e={};return r.replace(jh,"").split(Fh).forEach(t=>{if(t){const n=t.split($h);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function it(r){let e="";if(ut(r))e=r;else if(ge(r))for(let t=0;t<r.length;t++){const n=it(r[t]);n&&(e+=n+" ")}else if(Ge(r))for(const t in r)r[t]&&(e+=t+" ");return e.trim()}const Vh="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Hh=vl(Vh);function Xd(r){return!!r||r===""}function Gh(r,e){if(r.length!==e.length)return!1;let t=!0;for(let n=0;t&&n<r.length;n++)t=Fn(r[n],e[n]);return t}function Fn(r,e){if(r===e)return!0;let t=ru(r),n=ru(e);if(t||n)return t&&n?r.getTime()===e.getTime():!1;if(t=Br(r),n=Br(e),t||n)return r===e;if(t=ge(r),n=ge(e),t||n)return t&&n?Gh(r,e):!1;if(t=Ge(r),n=Ge(e),t||n){if(!t||!n)return!1;const i=Object.keys(r).length,o=Object.keys(e).length;if(i!==o)return!1;for(const a in r){const s=r.hasOwnProperty(a),l=e.hasOwnProperty(a);if(s&&!l||!s&&l||!Fn(r[a],e[a]))return!1}}return String(r)===String(e)}function xl(r,e){return r.findIndex(t=>Fn(t,e))}const Yd=r=>!!(r&&r.__v_isRef===!0),P=r=>ut(r)?r:r==null?"":ge(r)||Ge(r)&&(r.toString===zd||!be(r.toString))?Yd(r)?P(r.value):JSON.stringify(r,Zd,2):String(r),Zd=(r,e)=>Yd(e)?Zd(r,e.value):ai(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[n,i],o)=>(t[Oa(n,o)+" =>"]=i,t),{})}:gi(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Oa(t))}:Br(e)?Oa(e):Ge(e)&&!ge(e)&&!Wd(e)?String(e):e,Oa=(r,e="")=>{var t;return Br(r)?`Symbol(${(t=r.description)!=null?t:e})`:r};let Yt;class qh{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Yt,!e&&Yt&&(this.index=(Yt.scopes||(Yt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Yt;try{return Yt=this,e()}finally{Yt=t}}}on(){++this._on===1&&(this.prevScope=Yt,Yt=this)}off(){this._on>0&&--this._on===0&&(Yt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(this.effects.length=0,t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function zh(){return Yt}let Xe;const Ta=new WeakSet;class Jd{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Yt&&Yt.active&&Yt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ta.has(this)&&(Ta.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ef(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,iu(this),tf(this);const e=Xe,t=Er;Xe=this,Er=!0;try{return this.fn()}finally{rf(this),Xe=e,Er=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)bl(e);this.deps=this.depsTail=void 0,iu(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ta.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Rs(this)&&this.run()}get dirty(){return Rs(this)}}let Qd=0,Bi,Li;function ef(r,e=!1){if(r.flags|=8,e){r.next=Li,Li=r;return}r.next=Bi,Bi=r}function wl(){Qd++}function _l(){if(--Qd>0)return;if(Li){let e=Li;for(Li=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let r;for(;Bi;){let e=Bi;for(Bi=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){r||(r=n)}e=t}}if(r)throw r}function tf(r){for(let e=r.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function rf(r){let e,t=r.depsTail,n=t;for(;n;){const i=n.prevDep;n.version===-1?(n===t&&(t=i),bl(n),Wh(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}r.deps=e,r.depsTail=t}function Rs(r){for(let e=r.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(nf(e.dep.computed)||e.dep.version!==e.version))return!0;return!!r._dirty}function nf(r){if(r.flags&4&&!(r.flags&16)||(r.flags&=-17,r.globalVersion===zi)||(r.globalVersion=zi,!r.isSSR&&r.flags&128&&(!r.deps&&!r._dirty||!Rs(r))))return;r.flags|=2;const e=r.dep,t=Xe,n=Er;Xe=r,Er=!0;try{tf(r);const i=r.fn(r._value);(e.version===0||cn(i,r._value))&&(r.flags|=128,r._value=i,e.version++)}catch(i){throw e.version++,i}finally{Xe=t,Er=n,rf(r),r.flags&=-3}}function bl(r,e=!1){const{dep:t,prevSub:n,nextSub:i}=r;if(n&&(n.nextSub=i,r.prevSub=void 0),i&&(i.prevSub=n,r.nextSub=void 0),t.subs===r&&(t.subs=n,!n&&t.computed)){t.computed.flags&=-5;for(let o=t.computed.deps;o;o=o.nextDep)bl(o,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function Wh(r){const{prevDep:e,nextDep:t}=r;e&&(e.nextDep=t,r.prevDep=void 0),t&&(t.prevDep=e,r.nextDep=void 0)}let Er=!0;const of=[];function Kr(){of.push(Er),Er=!1}function Xr(){const r=of.pop();Er=r===void 0?!0:r}function iu(r){const{cleanup:e}=r;if(r.cleanup=void 0,e){const t=Xe;Xe=void 0;try{e()}finally{Xe=t}}}let zi=0;class Kh{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class El{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Xe||!Er||Xe===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Xe)t=this.activeLink=new Kh(Xe,this),Xe.deps?(t.prevDep=Xe.depsTail,Xe.depsTail.nextDep=t,Xe.depsTail=t):Xe.deps=Xe.depsTail=t,af(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const n=t.nextDep;n.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=n),t.prevDep=Xe.depsTail,t.nextDep=void 0,Xe.depsTail.nextDep=t,Xe.depsTail=t,Xe.deps===t&&(Xe.deps=n)}return t}trigger(e){this.version++,zi++,this.notify(e)}notify(e){wl();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{_l()}}}function af(r){if(r.dep.sc++,r.sub.flags&4){const e=r.dep.computed;if(e&&!r.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)af(n)}const t=r.dep.subs;t!==r&&(r.prevSub=t,t&&(t.nextSub=r)),r.dep.subs=r}}const Ps=new WeakMap,Bn=Symbol(""),ks=Symbol(""),Wi=Symbol("");function Mt(r,e,t){if(Er&&Xe){let n=Ps.get(r);n||Ps.set(r,n=new Map);let i=n.get(t);i||(n.set(t,i=new El),i.map=n,i.key=t),i.track()}}function Gr(r,e,t,n,i,o){const a=Ps.get(r);if(!a){zi++;return}const s=l=>{l&&l.trigger()};if(wl(),e==="clear")a.forEach(s);else{const l=ge(r),u=l&&ml(t);if(l&&t==="length"){const c=Number(n);a.forEach((d,p)=>{(p==="length"||p===Wi||!Br(p)&&p>=c)&&s(d)})}else switch((t!==void 0||a.has(void 0))&&s(a.get(t)),u&&s(a.get(Wi)),e){case"add":l?u&&s(a.get("length")):(s(a.get(Bn)),ai(r)&&s(a.get(ks)));break;case"delete":l||(s(a.get(Bn)),ai(r)&&s(a.get(ks)));break;case"set":ai(r)&&s(a.get(Bn));break}}_l()}function Hn(r){const e=Me(r);return e===r?e:(Mt(e,"iterate",Wi),fr(r)?e:e.map(Ot))}function da(r){return Mt(r=Me(r),"iterate",Wi),r}const Xh={__proto__:null,[Symbol.iterator](){return Ra(this,Symbol.iterator,Ot)},concat(...r){return Hn(this).concat(...r.map(e=>ge(e)?Hn(e):e))},entries(){return Ra(this,"entries",r=>(r[1]=Ot(r[1]),r))},every(r,e){return Fr(this,"every",r,e,void 0,arguments)},filter(r,e){return Fr(this,"filter",r,e,t=>t.map(Ot),arguments)},find(r,e){return Fr(this,"find",r,e,Ot,arguments)},findIndex(r,e){return Fr(this,"findIndex",r,e,void 0,arguments)},findLast(r,e){return Fr(this,"findLast",r,e,Ot,arguments)},findLastIndex(r,e){return Fr(this,"findLastIndex",r,e,void 0,arguments)},forEach(r,e){return Fr(this,"forEach",r,e,void 0,arguments)},includes(...r){return Pa(this,"includes",r)},indexOf(...r){return Pa(this,"indexOf",r)},join(r){return Hn(this).join(r)},lastIndexOf(...r){return Pa(this,"lastIndexOf",r)},map(r,e){return Fr(this,"map",r,e,void 0,arguments)},pop(){return Ei(this,"pop")},push(...r){return Ei(this,"push",r)},reduce(r,...e){return ou(this,"reduce",r,e)},reduceRight(r,...e){return ou(this,"reduceRight",r,e)},shift(){return Ei(this,"shift")},some(r,e){return Fr(this,"some",r,e,void 0,arguments)},splice(...r){return Ei(this,"splice",r)},toReversed(){return Hn(this).toReversed()},toSorted(r){return Hn(this).toSorted(r)},toSpliced(...r){return Hn(this).toSpliced(...r)},unshift(...r){return Ei(this,"unshift",r)},values(){return Ra(this,"values",Ot)}};function Ra(r,e,t){const n=da(r),i=n[e]();return n!==r&&!fr(r)&&(i._next=i.next,i.next=()=>{const o=i._next();return o.done||(o.value=t(o.value)),o}),i}const Yh=Array.prototype;function Fr(r,e,t,n,i,o){const a=da(r),s=a!==r&&!fr(r),l=a[e];if(l!==Yh[e]){const d=l.apply(r,o);return s?Ot(d):d}let u=t;a!==r&&(s?u=function(d,p){return t.call(this,Ot(d),p,r)}:t.length>2&&(u=function(d,p){return t.call(this,d,p,r)}));const c=l.call(a,u,n);return s&&i?i(c):c}function ou(r,e,t,n){const i=da(r);let o=t;return i!==r&&(fr(r)?t.length>3&&(o=function(a,s,l){return t.call(this,a,s,l,r)}):o=function(a,s,l){return t.call(this,a,Ot(s),l,r)}),i[e](o,...n)}function Pa(r,e,t){const n=Me(r);Mt(n,"iterate",Wi);const i=n[e](...t);return(i===-1||i===!1)&&Sl(t[0])?(t[0]=Me(t[0]),n[e](...t)):i}function Ei(r,e,t=[]){Kr(),wl();const n=Me(r)[e].apply(r,t);return _l(),Xr(),n}const Zh=vl("__proto__,__v_isRef,__isVue"),sf=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(Br));function Jh(r){Br(r)||(r=String(r));const e=Me(this);return Mt(e,"has",r),e.hasOwnProperty(r)}class lf{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){if(t==="__v_skip")return e.__v_skip;const i=this._isReadonly,o=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return o;if(t==="__v_raw")return n===(i?o?l1:ff:o?df:cf).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const a=ge(e);if(!i){let l;if(a&&(l=Xh[t]))return l;if(t==="hasOwnProperty")return Jh}const s=Reflect.get(e,t,Lt(e)?e:n);if((Br(t)?sf.has(t):Zh(t))||(i||Mt(e,"get",t),o))return s;if(Lt(s)){const l=a&&ml(t)?s:s.value;return i&&Ge(l)?Ds(l):l}return Ge(s)?i?Ds(s):or(s):s}}class uf extends lf{constructor(e=!1){super(!1,e)}set(e,t,n,i){let o=e[t];if(!this._isShallow){const l=pn(o);if(!fr(n)&&!pn(n)&&(o=Me(o),n=Me(n)),!ge(e)&&Lt(o)&&!Lt(n))return l||(o.value=n),!0}const a=ge(e)&&ml(t)?Number(t)<e.length:Fe(e,t),s=Reflect.set(e,t,n,Lt(e)?e:i);return e===Me(i)&&(a?cn(n,o)&&Gr(e,"set",t,n):Gr(e,"add",t,n)),s}deleteProperty(e,t){const n=Fe(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&n&&Gr(e,"delete",t,void 0),i}has(e,t){const n=Reflect.has(e,t);return(!Br(t)||!sf.has(t))&&Mt(e,"has",t),n}ownKeys(e){return Mt(e,"iterate",ge(e)?"length":Bn),Reflect.ownKeys(e)}}class Qh extends lf{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const e1=new uf,t1=new Qh,r1=new uf(!0);const Ns=r=>r,co=r=>Reflect.getPrototypeOf(r);function n1(r,e,t){return function(...n){const i=this.__v_raw,o=Me(i),a=ai(o),s=r==="entries"||r===Symbol.iterator&&a,l=r==="keys"&&a,u=i[r](...n),c=t?Ns:e?jo:Ot;return!e&&Mt(o,"iterate",l?ks:Bn),{next(){const{value:d,done:p}=u.next();return p?{value:d,done:p}:{value:s?[c(d[0]),c(d[1])]:c(d),done:p}},[Symbol.iterator](){return this}}}}function fo(r){return function(...e){return r==="delete"?!1:r==="clear"?void 0:this}}function i1(r,e){const t={get(i){const o=this.__v_raw,a=Me(o),s=Me(i);r||(cn(i,s)&&Mt(a,"get",i),Mt(a,"get",s));const{has:l}=co(a),u=e?Ns:r?jo:Ot;if(l.call(a,i))return u(o.get(i));if(l.call(a,s))return u(o.get(s));o!==a&&o.get(i)},get size(){const i=this.__v_raw;return!r&&Mt(Me(i),"iterate",Bn),i.size},has(i){const o=this.__v_raw,a=Me(o),s=Me(i);return r||(cn(i,s)&&Mt(a,"has",i),Mt(a,"has",s)),i===s?o.has(i):o.has(i)||o.has(s)},forEach(i,o){const a=this,s=a.__v_raw,l=Me(s),u=e?Ns:r?jo:Ot;return!r&&Mt(l,"iterate",Bn),s.forEach((c,d)=>i.call(o,u(c),u(d),a))}};return At(t,r?{add:fo("add"),set:fo("set"),delete:fo("delete"),clear:fo("clear")}:{add(i){!e&&!fr(i)&&!pn(i)&&(i=Me(i));const o=Me(this);return co(o).has.call(o,i)||(o.add(i),Gr(o,"add",i,i)),this},set(i,o){!e&&!fr(o)&&!pn(o)&&(o=Me(o));const a=Me(this),{has:s,get:l}=co(a);let u=s.call(a,i);u||(i=Me(i),u=s.call(a,i));const c=l.call(a,i);return a.set(i,o),u?cn(o,c)&&Gr(a,"set",i,o):Gr(a,"add",i,o),this},delete(i){const o=Me(this),{has:a,get:s}=co(o);let l=a.call(o,i);l||(i=Me(i),l=a.call(o,i)),s&&s.call(o,i);const u=o.delete(i);return l&&Gr(o,"delete",i,void 0),u},clear(){const i=Me(this),o=i.size!==0,a=i.clear();return o&&Gr(i,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=n1(i,r,e)}),t}function Al(r,e){const t=i1(r,e);return(n,i,o)=>i==="__v_isReactive"?!r:i==="__v_isReadonly"?r:i==="__v_raw"?n:Reflect.get(Fe(t,i)&&i in n?t:n,i,o)}const o1={get:Al(!1,!1)},a1={get:Al(!1,!0)},s1={get:Al(!0,!1)};const cf=new WeakMap,df=new WeakMap,ff=new WeakMap,l1=new WeakMap;function u1(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function c1(r){return r.__v_skip||!Object.isExtensible(r)?0:u1(Dh(r))}function or(r){return pn(r)?r:Cl(r,!1,e1,o1,cf)}function hf(r){return Cl(r,!1,r1,a1,df)}function Ds(r){return Cl(r,!0,t1,s1,ff)}function Cl(r,e,t,n,i){if(!Ge(r)||r.__v_raw&&!(e&&r.__v_isReactive))return r;const o=c1(r);if(o===0)return r;const a=i.get(r);if(a)return a;const s=new Proxy(r,o===2?n:t);return i.set(r,s),s}function si(r){return pn(r)?si(r.__v_raw):!!(r&&r.__v_isReactive)}function pn(r){return!!(r&&r.__v_isReadonly)}function fr(r){return!!(r&&r.__v_isShallow)}function Sl(r){return r?!!r.__v_raw:!1}function Me(r){const e=r&&r.__v_raw;return e?Me(e):r}function d1(r){return!Fe(r,"__v_skip")&&Object.isExtensible(r)&&Kd(r,"__v_skip",!0),r}const Ot=r=>Ge(r)?or(r):r,jo=r=>Ge(r)?Ds(r):r;function Lt(r){return r?r.__v_isRef===!0:!1}function W(r){return pf(r,!1)}function f1(r){return pf(r,!0)}function pf(r,e){return Lt(r)?r:new h1(r,e)}class h1{constructor(e,t){this.dep=new El,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:Me(e),this._value=t?e:Ot(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,n=this.__v_isShallow||fr(e)||pn(e);e=n?e:Me(e),cn(e,t)&&(this._rawValue=e,this._value=n?e:Ot(e),this.dep.trigger())}}function Rt(r){return Lt(r)?r.value:r}const p1={get:(r,e,t)=>e==="__v_raw"?r:Rt(Reflect.get(r,e,t)),set:(r,e,t,n)=>{const i=r[e];return Lt(i)&&!Lt(t)?(i.value=t,!0):Reflect.set(r,e,t,n)}};function vf(r){return si(r)?r:new Proxy(r,p1)}class v1{constructor(e,t,n){this.fn=e,this.setter=t,this._value=void 0,this.dep=new El(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=zi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Xe!==this)return ef(this,!0),!0}get value(){const e=this.dep.track();return nf(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function g1(r,e,t=!1){let n,i;return be(r)?n=r:(n=r.get,i=r.set),new v1(n,i,t)}const ho={},Uo=new WeakMap;let In;function y1(r,e=!1,t=In){if(t){let n=Uo.get(t);n||Uo.set(t,n=[]),n.push(r)}}function m1(r,e,t=qe){const{immediate:n,deep:i,once:o,scheduler:a,augmentJob:s,call:l}=t,u=_=>i?_:fr(_)||i===!1||i===0?qr(_,1):qr(_);let c,d,p,h,v=!1,x=!1;if(Lt(r)?(d=()=>r.value,v=fr(r)):si(r)?(d=()=>u(r),v=!0):ge(r)?(x=!0,v=r.some(_=>si(_)||fr(_)),d=()=>r.map(_=>{if(Lt(_))return _.value;if(si(_))return u(_);if(be(_))return l?l(_,2):_()})):be(r)?e?d=l?()=>l(r,2):r:d=()=>{if(p){Kr();try{p()}finally{Xr()}}const _=In;In=c;try{return l?l(r,3,[h]):r(h)}finally{In=_}}:d=Mr,e&&i){const _=d,E=i===!0?1/0:i;d=()=>qr(_(),E)}const w=zh(),g=()=>{c.stop(),w&&w.active&&yl(w.effects,c)};if(o&&e){const _=e;e=(...E)=>{_(...E),g()}}let y=x?new Array(r.length).fill(ho):ho;const m=_=>{if(!(!(c.flags&1)||!c.dirty&&!_))if(e){const E=c.run();if(i||v||(x?E.some((b,S)=>cn(b,y[S])):cn(E,y))){p&&p();const b=In;In=c;try{const S=[E,y===ho?void 0:x&&y[0]===ho?[]:y,h];y=E,l?l(e,3,S):e(...S)}finally{In=b}}}else c.run()};return s&&s(m),c=new Jd(d),c.scheduler=a?()=>a(m,!1):m,h=_=>y1(_,!1,c),p=c.onStop=()=>{const _=Uo.get(c);if(_){if(l)l(_,4);else for(const E of _)E();Uo.delete(c)}},e?n?m(!0):y=c.run():a?a(m.bind(null,!0),!0):c.run(),g.pause=c.pause.bind(c),g.resume=c.resume.bind(c),g.stop=g,g}function qr(r,e=1/0,t){if(e<=0||!Ge(r)||r.__v_skip||(t=t||new Map,(t.get(r)||0)>=e))return r;if(t.set(r,e),e--,Lt(r))qr(r.value,e,t);else if(ge(r))for(let n=0;n<r.length;n++)qr(r[n],e,t);else if(gi(r)||ai(r))r.forEach(n=>{qr(n,e,t)});else if(Wd(r)){for(const n in r)qr(r[n],e,t);for(const n of Object.getOwnPropertySymbols(r))Object.prototype.propertyIsEnumerable.call(r,n)&&qr(r[n],e,t)}return r}function oo(r,e,t,n){try{return n?r(...n):r()}catch(i){fa(i,e,t)}}function Cr(r,e,t,n){if(be(r)){const i=oo(r,e,t,n);return i&&qd(i)&&i.catch(o=>{fa(o,e,t)}),i}if(ge(r)){const i=[];for(let o=0;o<r.length;o++)i.push(Cr(r[o],e,t,n));return i}}function fa(r,e,t,n=!0){const i=e?e.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||qe;if(e){let s=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${t}`;for(;s;){const c=s.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](r,l,u)===!1)return}s=s.parent}if(o){Kr(),oo(o,null,10,[r,l,u]),Xr();return}}x1(r,t,i,n,a)}function x1(r,e,t,n=!0,i=!1){if(i)throw r;console.error(r)}const Gt=[];let kr=-1;const li=[];let on=null,Zn=0;const gf=Promise.resolve();let Vo=null;function ha(r){const e=Vo||gf;return r?e.then(this?r.bind(this):r):e}function w1(r){let e=kr+1,t=Gt.length;for(;e<t;){const n=e+t>>>1,i=Gt[n],o=Ki(i);o<r||o===r&&i.flags&2?e=n+1:t=n}return e}function Il(r){if(!(r.flags&1)){const e=Ki(r),t=Gt[Gt.length-1];!t||!(r.flags&2)&&e>=Ki(t)?Gt.push(r):Gt.splice(w1(e),0,r),r.flags|=1,yf()}}function yf(){Vo||(Vo=gf.then(xf))}function _1(r){ge(r)?li.push(...r):on&&r.id===-1?on.splice(Zn+1,0,r):r.flags&1||(li.push(r),r.flags|=1),yf()}function au(r,e,t=kr+1){for(;t<Gt.length;t++){const n=Gt[t];if(n&&n.flags&2){if(r&&n.id!==r.uid)continue;Gt.splice(t,1),t--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function mf(r){if(li.length){const e=[...new Set(li)].sort((t,n)=>Ki(t)-Ki(n));if(li.length=0,on){on.push(...e);return}for(on=e,Zn=0;Zn<on.length;Zn++){const t=on[Zn];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}on=null,Zn=0}}const Ki=r=>r.id==null?r.flags&2?-1:1/0:r.id;function xf(r){try{for(kr=0;kr<Gt.length;kr++){const e=Gt[kr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),oo(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;kr<Gt.length;kr++){const e=Gt[kr];e&&(e.flags&=-2)}kr=-1,Gt.length=0,mf(),Vo=null,(Gt.length||li.length)&&xf()}}let nr=null,wf=null;function Ho(r){const e=nr;return nr=r,wf=r&&r.type.__scopeId||null,e}function we(r,e=nr,t){if(!e||r._n)return r;const n=(...i)=>{n._d&&zo(-1);const o=Ho(e);let a;try{a=r(...i)}finally{Ho(o),n._d&&zo(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function fe(r,e){if(nr===null)return r;const t=xa(nr),n=r.dirs||(r.dirs=[]);for(let i=0;i<e.length;i++){let[o,a,s,l=qe]=e[i];o&&(be(o)&&(o={mounted:o,updated:o}),o.deep&&qr(a),n.push({dir:o,instance:t,value:a,oldValue:void 0,arg:s,modifiers:l}))}return r}function xn(r,e,t,n){const i=r.dirs,o=e&&e.dirs;for(let a=0;a<i.length;a++){const s=i[a];o&&(s.oldValue=o[a].value);let l=s.dir[n];l&&(Kr(),Cr(l,t,8,[r.el,s,r,e]),Xr())}}const b1=Symbol("_vte"),_f=r=>r.__isTeleport,Hr=Symbol("_leaveCb"),po=Symbol("_enterCb");function E1(){const r={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return sr(()=>{r.isMounted=!0}),Tf(()=>{r.isUnmounting=!0}),r}const ur=[Function,Array],bf={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ur,onEnter:ur,onAfterEnter:ur,onEnterCancelled:ur,onBeforeLeave:ur,onLeave:ur,onAfterLeave:ur,onLeaveCancelled:ur,onBeforeAppear:ur,onAppear:ur,onAfterAppear:ur,onAppearCancelled:ur},Ef=r=>{const e=r.subTree;return e.component?Ef(e.component):e},A1={name:"BaseTransition",props:bf,setup(r,{slots:e}){const t=Xf(),n=E1();return()=>{const i=e.default&&Sf(e.default(),!0);if(!i||!i.length)return;const o=Af(i),a=Me(r),{mode:s}=a;if(n.isLeaving)return ka(o);const l=su(o);if(!l)return ka(o);let u=Ms(l,a,n,t,d=>u=d);l.type!==qt&&Xi(l,u);let c=t.subTree&&su(t.subTree);if(c&&c.type!==qt&&!Rn(c,l)&&Ef(t).type!==qt){let d=Ms(c,a,n,t);if(Xi(c,d),s==="out-in"&&l.type!==qt)return n.isLeaving=!0,d.afterLeave=()=>{n.isLeaving=!1,t.job.flags&8||t.update(),delete d.afterLeave,c=void 0},ka(o);s==="in-out"&&l.type!==qt?d.delayLeave=(p,h,v)=>{const x=Cf(n,c);x[String(c.key)]=c,p[Hr]=()=>{h(),p[Hr]=void 0,delete u.delayedLeave,c=void 0},u.delayedLeave=()=>{v(),delete u.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return o}}};function Af(r){let e=r[0];if(r.length>1){for(const t of r)if(t.type!==qt){e=t;break}}return e}const C1=A1;function Cf(r,e){const{leavingVNodes:t}=r;let n=t.get(e.type);return n||(n=Object.create(null),t.set(e.type,n)),n}function Ms(r,e,t,n,i){const{appear:o,mode:a,persisted:s=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:c,onEnterCancelled:d,onBeforeLeave:p,onLeave:h,onAfterLeave:v,onLeaveCancelled:x,onBeforeAppear:w,onAppear:g,onAfterAppear:y,onAppearCancelled:m}=e,_=String(r.key),E=Cf(t,r),b=(L,j)=>{L&&Cr(L,n,9,j)},S=(L,j)=>{const Y=j[1];b(L,j),ge(L)?L.every(M=>M.length<=1)&&Y():L.length<=1&&Y()},B={mode:a,persisted:s,beforeEnter(L){let j=l;if(!t.isMounted)if(o)j=w||l;else return;L[Hr]&&L[Hr](!0);const Y=E[_];Y&&Rn(r,Y)&&Y.el[Hr]&&Y.el[Hr](),b(j,[L])},enter(L){let j=u,Y=c,M=d;if(!t.isMounted)if(o)j=g||u,Y=y||c,M=m||d;else return;let k=!1;const K=L[po]=ee=>{k||(k=!0,ee?b(M,[L]):b(Y,[L]),B.delayedLeave&&B.delayedLeave(),L[po]=void 0)};j?S(j,[L,K]):K()},leave(L,j){const Y=String(r.key);if(L[po]&&L[po](!0),t.isUnmounting)return j();b(p,[L]);let M=!1;const k=L[Hr]=K=>{M||(M=!0,j(),K?b(x,[L]):b(v,[L]),L[Hr]=void 0,E[Y]===r&&delete E[Y])};E[Y]=r,h?S(h,[L,k]):k()},clone(L){const j=Ms(L,e,t,n,i);return i&&i(j),j}};return B}function ka(r){if(pa(r))return r=vn(r),r.children=null,r}function su(r){if(!pa(r))return _f(r.type)&&r.children?Af(r.children):r;if(r.component)return r.component.subTree;const{shapeFlag:e,children:t}=r;if(t){if(e&16)return t[0];if(e&32&&be(t.default))return t.default()}}function Xi(r,e){r.shapeFlag&6&&r.component?(r.transition=e,Xi(r.component.subTree,e)):r.shapeFlag&128?(r.ssContent.transition=e.clone(r.ssContent),r.ssFallback.transition=e.clone(r.ssFallback)):r.transition=e}function Sf(r,e=!1,t){let n=[],i=0;for(let o=0;o<r.length;o++){let a=r[o];const s=t==null?a.key:String(t)+String(a.key!=null?a.key:o);a.type===ke?(a.patchFlag&128&&i++,n=n.concat(Sf(a.children,e,s))):(e||a.type!==qt)&&n.push(s!=null?vn(a,{key:s}):a)}if(i>1)for(let o=0;o<n.length;o++)n[o].patchFlag=-2;return n}function ot(r,e){return be(r)?At({name:r.name},e,{setup:r}):r}function If(r){r.ids=[r.ids[0]+r.ids[2]+++"-",0,0]}const Go=new WeakMap;function Fi(r,e,t,n,i=!1){if(ge(r)){r.forEach((v,x)=>Fi(v,e&&(ge(e)?e[x]:e),t,n,i));return}if($i(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Fi(r,e,t,n.component.subTree);return}const o=n.shapeFlag&4?xa(n.component):n.el,a=i?null:o,{i:s,r:l}=r,u=e&&e.r,c=s.refs===qe?s.refs={}:s.refs,d=s.setupState,p=Me(d),h=d===qe?Gd:v=>Fe(p,v);if(u!=null&&u!==l){if(lu(e),ut(u))c[u]=null,h(u)&&(d[u]=null);else if(Lt(u)){u.value=null;const v=e;v.k&&(c[v.k]=null)}}if(be(l))oo(l,s,12,[a,c]);else{const v=ut(l),x=Lt(l);if(v||x){const w=()=>{if(r.f){const g=v?h(l)?d[l]:c[l]:l.value;if(i)ge(g)&&yl(g,o);else if(ge(g))g.includes(o)||g.push(o);else if(v)c[l]=[o],h(l)&&(d[l]=c[l]);else{const y=[o];l.value=y,r.k&&(c[r.k]=y)}}else v?(c[l]=a,h(l)&&(d[l]=a)):x&&(l.value=a,r.k&&(c[r.k]=a))};if(a){const g=()=>{w(),Go.delete(r)};g.id=-1,Go.set(r,g),er(g,t)}else lu(r),w()}}}function lu(r){const e=Go.get(r);e&&(e.flags|=8,Go.delete(r))}ca().requestIdleCallback;ca().cancelIdleCallback;const $i=r=>!!r.type.__asyncLoader,pa=r=>r.type.__isKeepAlive;function S1(r,e){Of(r,"a",e)}function I1(r,e){Of(r,"da",e)}function Of(r,e,t=Bt){const n=r.__wdc||(r.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return r()});if(va(e,n,t),t){let i=t.parent;for(;i&&i.parent;)pa(i.parent.vnode)&&O1(n,e,t,i),i=i.parent}}function O1(r,e,t,n){const i=va(e,r,n,!0);ga(()=>{yl(n[e],i)},t)}function va(r,e,t=Bt,n=!1){if(t){const i=t[r]||(t[r]=[]),o=e.__weh||(e.__weh=(...a)=>{Kr();const s=ao(t),l=Cr(e,t,r,a);return s(),Xr(),l});return n?i.unshift(o):i.push(o),o}}const Zr=r=>(e,t=Bt)=>{(!Zi||r==="sp")&&va(r,(...n)=>e(...n),t)},T1=Zr("bm"),sr=Zr("m"),R1=Zr("bu"),P1=Zr("u"),Tf=Zr("bum"),ga=Zr("um"),k1=Zr("sp"),N1=Zr("rtg"),D1=Zr("rtc");function M1(r,e=Bt){va("ec",r,e)}const B1="components";function lr(r,e){return F1(B1,r,!0,e)||r}const L1=Symbol.for("v-ndc");function F1(r,e,t=!0,n=!1){const i=nr||Bt;if(i){const o=i.type;{const s=Cp(o,!1);if(s&&(s===e||s===vr(e)||s===la(vr(e))))return o}const a=uu(i[r]||o[r],e)||uu(i.appContext[r],e);return!a&&n?o:a}}function uu(r,e){return r&&(r[e]||r[vr(e)]||r[la(vr(e))])}function st(r,e,t,n){let i;const o=t,a=ge(r);if(a||ut(r)){const s=a&&si(r);let l=!1,u=!1;s&&(l=!fr(r),u=pn(r),r=da(r)),i=new Array(r.length);for(let c=0,d=r.length;c<d;c++)i[c]=e(l?u?jo(Ot(r[c])):Ot(r[c]):r[c],c,void 0,o)}else if(typeof r=="number"){i=new Array(r);for(let s=0;s<r;s++)i[s]=e(s+1,s,void 0,o)}else if(Ge(r))if(r[Symbol.iterator])i=Array.from(r,(s,l)=>e(s,l,void 0,o));else{const s=Object.keys(r);i=new Array(s.length);for(let l=0,u=s.length;l<u;l++){const c=s[l];i[l]=e(r[c],c,l,o)}}else i=[];return i}const Bs=r=>r?Yf(r)?xa(r):Bs(r.parent):null,ji=At(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>Bs(r.parent),$root:r=>Bs(r.root),$host:r=>r.ce,$emit:r=>r.emit,$options:r=>Pf(r),$forceUpdate:r=>r.f||(r.f=()=>{Il(r.update)}),$nextTick:r=>r.n||(r.n=ha.bind(r.proxy)),$watch:r=>op.bind(r)}),Na=(r,e)=>r!==qe&&!r.__isScriptSetup&&Fe(r,e),$1={get({_:r},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:n,data:i,props:o,accessCache:a,type:s,appContext:l}=r;let u;if(e[0]!=="$"){const h=a[e];if(h!==void 0)switch(h){case 1:return n[e];case 2:return i[e];case 4:return t[e];case 3:return o[e]}else{if(Na(n,e))return a[e]=1,n[e];if(i!==qe&&Fe(i,e))return a[e]=2,i[e];if((u=r.propsOptions[0])&&Fe(u,e))return a[e]=3,o[e];if(t!==qe&&Fe(t,e))return a[e]=4,t[e];Ls&&(a[e]=0)}}const c=ji[e];let d,p;if(c)return e==="$attrs"&&Mt(r.attrs,"get",""),c(r);if((d=s.__cssModules)&&(d=d[e]))return d;if(t!==qe&&Fe(t,e))return a[e]=4,t[e];if(p=l.config.globalProperties,Fe(p,e))return p[e]},set({_:r},e,t){const{data:n,setupState:i,ctx:o}=r;return Na(i,e)?(i[e]=t,!0):n!==qe&&Fe(n,e)?(n[e]=t,!0):Fe(r.props,e)||e[0]==="$"&&e.slice(1)in r?!1:(o[e]=t,!0)},has({_:{data:r,setupState:e,accessCache:t,ctx:n,appContext:i,propsOptions:o,type:a}},s){let l,u;return!!(t[s]||r!==qe&&s[0]!=="$"&&Fe(r,s)||Na(e,s)||(l=o[0])&&Fe(l,s)||Fe(n,s)||Fe(ji,s)||Fe(i.config.globalProperties,s)||(u=a.__cssModules)&&u[s])},defineProperty(r,e,t){return t.get!=null?r._.accessCache[e]=0:Fe(t,"value")&&this.set(r,e,t.value,null),Reflect.defineProperty(r,e,t)}};function cu(r){return ge(r)?r.reduce((e,t)=>(e[t]=null,e),{}):r}let Ls=!0;function j1(r){const e=Pf(r),t=r.proxy,n=r.ctx;Ls=!1,e.beforeCreate&&du(e.beforeCreate,r,"bc");const{data:i,computed:o,methods:a,watch:s,provide:l,inject:u,created:c,beforeMount:d,mounted:p,beforeUpdate:h,updated:v,activated:x,deactivated:w,beforeDestroy:g,beforeUnmount:y,destroyed:m,unmounted:_,render:E,renderTracked:b,renderTriggered:S,errorCaptured:B,serverPrefetch:L,expose:j,inheritAttrs:Y,components:M,directives:k,filters:K}=e;if(u&&U1(u,n,null),a)for(const N in a){const G=a[N];be(G)&&(n[N]=G.bind(t))}if(i){const N=i.call(t,t);Ge(N)&&(r.data=or(N))}if(Ls=!0,o)for(const N in o){const G=o[N],Re=be(G)?G.bind(t,t):be(G.get)?G.get.bind(t,t):Mr,Ve=!be(G)&&be(G.set)?G.set.bind(t):Mr,et=Ee({get:Re,set:Ve});Object.defineProperty(n,N,{enumerable:!0,configurable:!0,get:()=>et.value,set:ze=>et.value=ze})}if(s)for(const N in s)Rf(s[N],n,t,N);if(l){const N=be(l)?l.call(t):l;Reflect.ownKeys(N).forEach(G=>{ko(G,N[G])})}c&&du(c,r,"c");function J(N,G){ge(G)?G.forEach(Re=>N(Re.bind(t))):G&&N(G.bind(t))}if(J(T1,d),J(sr,p),J(R1,h),J(P1,v),J(S1,x),J(I1,w),J(M1,B),J(D1,b),J(N1,S),J(Tf,y),J(ga,_),J(k1,L),ge(j))if(j.length){const N=r.exposed||(r.exposed={});j.forEach(G=>{Object.defineProperty(N,G,{get:()=>t[G],set:Re=>t[G]=Re,enumerable:!0})})}else r.exposed||(r.exposed={});E&&r.render===Mr&&(r.render=E),Y!=null&&(r.inheritAttrs=Y),M&&(r.components=M),k&&(r.directives=k),L&&If(r)}function U1(r,e,t=Mr){ge(r)&&(r=Fs(r));for(const n in r){const i=r[n];let o;Ge(i)?"default"in i?o=Ar(i.from||n,i.default,!0):o=Ar(i.from||n):o=Ar(i),Lt(o)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[n]=o}}function du(r,e,t){Cr(ge(r)?r.map(n=>n.bind(e.proxy)):r.bind(e.proxy),e,t)}function Rf(r,e,t,n){let i=n.includes(".")?Gf(t,n):()=>t[n];if(ut(r)){const o=e[r];be(o)&&No(i,o)}else if(be(r))No(i,r.bind(t));else if(Ge(r))if(ge(r))r.forEach(o=>Rf(o,e,t,n));else{const o=be(r.handler)?r.handler.bind(t):e[r.handler];be(o)&&No(i,o,r)}}function Pf(r){const e=r.type,{mixins:t,extends:n}=e,{mixins:i,optionsCache:o,config:{optionMergeStrategies:a}}=r.appContext,s=o.get(e);let l;return s?l=s:!i.length&&!t&&!n?l=e:(l={},i.length&&i.forEach(u=>qo(l,u,a,!0)),qo(l,e,a)),Ge(e)&&o.set(e,l),l}function qo(r,e,t,n=!1){const{mixins:i,extends:o}=e;o&&qo(r,o,t,!0),i&&i.forEach(a=>qo(r,a,t,!0));for(const a in e)if(!(n&&a==="expose")){const s=V1[a]||t&&t[a];r[a]=s?s(r[a],e[a]):e[a]}return r}const V1={data:fu,props:hu,emits:hu,methods:Ri,computed:Ri,beforeCreate:Ut,created:Ut,beforeMount:Ut,mounted:Ut,beforeUpdate:Ut,updated:Ut,beforeDestroy:Ut,beforeUnmount:Ut,destroyed:Ut,unmounted:Ut,activated:Ut,deactivated:Ut,errorCaptured:Ut,serverPrefetch:Ut,components:Ri,directives:Ri,watch:G1,provide:fu,inject:H1};function fu(r,e){return e?r?function(){return At(be(r)?r.call(this,this):r,be(e)?e.call(this,this):e)}:e:r}function H1(r,e){return Ri(Fs(r),Fs(e))}function Fs(r){if(ge(r)){const e={};for(let t=0;t<r.length;t++)e[r[t]]=r[t];return e}return r}function Ut(r,e){return r?[...new Set([].concat(r,e))]:e}function Ri(r,e){return r?At(Object.create(null),r,e):e}function hu(r,e){return r?ge(r)&&ge(e)?[...new Set([...r,...e])]:At(Object.create(null),cu(r),cu(e??{})):e}function G1(r,e){if(!r)return e;if(!e)return r;const t=At(Object.create(null),r);for(const n in e)t[n]=Ut(r[n],e[n]);return t}function kf(){return{app:null,config:{isNativeTag:Gd,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let q1=0;function z1(r,e){return function(n,i=null){be(n)||(n=At({},n)),i!=null&&!Ge(i)&&(i=null);const o=kf(),a=new WeakSet,s=[];let l=!1;const u=o.app={_uid:q1++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:Ip,get config(){return o.config},set config(c){},use(c,...d){return a.has(c)||(c&&be(c.install)?(a.add(c),c.install(u,...d)):be(c)&&(a.add(c),c(u,...d))),u},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),u},component(c,d){return d?(o.components[c]=d,u):o.components[c]},directive(c,d){return d?(o.directives[c]=d,u):o.directives[c]},mount(c,d,p){if(!l){const h=u._ceVNode||ue(n,i);return h.appContext=o,p===!0?p="svg":p===!1&&(p=void 0),r(h,c,p),l=!0,u._container=c,c.__vue_app__=u,xa(h.component)}},onUnmount(c){s.push(c)},unmount(){l&&(Cr(s,u._instance,16),r(null,u._container),delete u._container.__vue_app__)},provide(c,d){return o.provides[c]=d,u},runWithContext(c){const d=ui;ui=u;try{return c()}finally{ui=d}}};return u}}let ui=null;function ko(r,e){if(Bt){let t=Bt.provides;const n=Bt.parent&&Bt.parent.provides;n===t&&(t=Bt.provides=Object.create(n)),t[r]=e}}function Ar(r,e,t=!1){const n=Xf();if(n||ui){let i=ui?ui._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&r in i)return i[r];if(arguments.length>1)return t&&be(e)?e.call(n&&n.proxy):e}}const Nf={},Df=()=>Object.create(Nf),Mf=r=>Object.getPrototypeOf(r)===Nf;function W1(r,e,t,n=!1){const i={},o=Df();r.propsDefaults=Object.create(null),Bf(r,e,i,o);for(const a in r.propsOptions[0])a in i||(i[a]=void 0);t?r.props=n?i:hf(i):r.type.props?r.props=i:r.props=o,r.attrs=o}function K1(r,e,t,n){const{props:i,attrs:o,vnode:{patchFlag:a}}=r,s=Me(i),[l]=r.propsOptions;let u=!1;if((n||a>0)&&!(a&16)){if(a&8){const c=r.vnode.dynamicProps;for(let d=0;d<c.length;d++){let p=c[d];if(ya(r.emitsOptions,p))continue;const h=e[p];if(l)if(Fe(o,p))h!==o[p]&&(o[p]=h,u=!0);else{const v=vr(p);i[v]=$s(l,s,v,h,r,!1)}else h!==o[p]&&(o[p]=h,u=!0)}}}else{Bf(r,e,i,o)&&(u=!0);let c;for(const d in s)(!e||!Fe(e,d)&&((c=yn(d))===d||!Fe(e,c)))&&(l?t&&(t[d]!==void 0||t[c]!==void 0)&&(i[d]=$s(l,s,d,void 0,r,!0)):delete i[d]);if(o!==s)for(const d in o)(!e||!Fe(e,d))&&(delete o[d],u=!0)}u&&Gr(r.attrs,"set","")}function Bf(r,e,t,n){const[i,o]=r.propsOptions;let a=!1,s;if(e)for(let l in e){if(Mi(l))continue;const u=e[l];let c;i&&Fe(i,c=vr(l))?!o||!o.includes(c)?t[c]=u:(s||(s={}))[c]=u:ya(r.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,a=!0)}if(o){const l=Me(t),u=s||qe;for(let c=0;c<o.length;c++){const d=o[c];t[d]=$s(i,l,d,u[d],r,!Fe(u,d))}}return a}function $s(r,e,t,n,i,o){const a=r[t];if(a!=null){const s=Fe(a,"default");if(s&&n===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&be(l)){const{propsDefaults:u}=i;if(t in u)n=u[t];else{const c=ao(i);n=u[t]=l.call(null,e),c()}}else n=l;i.ce&&i.ce._setProp(t,n)}a[0]&&(o&&!s?n=!1:a[1]&&(n===""||n===yn(t))&&(n=!0))}return n}const X1=new WeakMap;function Lf(r,e,t=!1){const n=t?X1:e.propsCache,i=n.get(r);if(i)return i;const o=r.props,a={},s=[];let l=!1;if(!be(r)){const c=d=>{l=!0;const[p,h]=Lf(d,e,!0);At(a,p),h&&s.push(...h)};!t&&e.mixins.length&&e.mixins.forEach(c),r.extends&&c(r.extends),r.mixins&&r.mixins.forEach(c)}if(!o&&!l)return Ge(r)&&n.set(r,oi),oi;if(ge(o))for(let c=0;c<o.length;c++){const d=vr(o[c]);pu(d)&&(a[d]=qe)}else if(o)for(const c in o){const d=vr(c);if(pu(d)){const p=o[c],h=a[d]=ge(p)||be(p)?{type:p}:At({},p),v=h.type;let x=!1,w=!0;if(ge(v))for(let g=0;g<v.length;++g){const y=v[g],m=be(y)&&y.name;if(m==="Boolean"){x=!0;break}else m==="String"&&(w=!1)}else x=be(v)&&v.name==="Boolean";h[0]=x,h[1]=w,(x||Fe(h,"default"))&&s.push(d)}}const u=[a,s];return Ge(r)&&n.set(r,u),u}function pu(r){return r[0]!=="$"&&!Mi(r)}const Ol=r=>r==="_"||r==="_ctx"||r==="$stable",Tl=r=>ge(r)?r.map(Nr):[Nr(r)],Y1=(r,e,t)=>{if(e._n)return e;const n=we((...i)=>Tl(e(...i)),t);return n._c=!1,n},Ff=(r,e,t)=>{const n=r._ctx;for(const i in r){if(Ol(i))continue;const o=r[i];if(be(o))e[i]=Y1(i,o,n);else if(o!=null){const a=Tl(o);e[i]=()=>a}}},$f=(r,e)=>{const t=Tl(e);r.slots.default=()=>t},jf=(r,e,t)=>{for(const n in e)(t||!Ol(n))&&(r[n]=e[n])},Z1=(r,e,t)=>{const n=r.slots=Df();if(r.vnode.shapeFlag&32){const i=e._;i?(jf(n,e,t),t&&Kd(n,"_",i,!0)):Ff(e,n)}else e&&$f(r,e)},J1=(r,e,t)=>{const{vnode:n,slots:i}=r;let o=!0,a=qe;if(n.shapeFlag&32){const s=e._;s?t&&s===1?o=!1:jf(i,e,t):(o=!e.$stable,Ff(e,i)),a=e}else e&&($f(r,e),a={default:1});if(o)for(const s in i)!Ol(s)&&a[s]==null&&delete i[s]},er=hp;function Q1(r){return ep(r)}function ep(r,e){const t=ca();t.__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:a,createText:s,createComment:l,setText:u,setElementText:c,parentNode:d,nextSibling:p,setScopeId:h=Mr,insertStaticContent:v}=r,x=(C,I,D,q=null,z=null,X=null,oe=void 0,ne=null,re=!!I.dynamicChildren)=>{if(C===I)return;C&&!Rn(C,I)&&(q=H(C),ze(C,z,X,!0),C=null),I.patchFlag===-2&&(re=!1,I.dynamicChildren=null);const{type:Q,ref:me,shapeFlag:se}=I;switch(Q){case ma:w(C,I,D,q);break;case qt:g(C,I,D,q);break;case Do:C==null&&y(I,D,q,oe);break;case ke:M(C,I,D,q,z,X,oe,ne,re);break;default:se&1?E(C,I,D,q,z,X,oe,ne,re):se&6?k(C,I,D,q,z,X,oe,ne,re):(se&64||se&128)&&Q.process(C,I,D,q,z,X,oe,ne,re,R)}me!=null&&z?Fi(me,C&&C.ref,X,I||C,!I):me==null&&C&&C.ref!=null&&Fi(C.ref,null,X,C,!0)},w=(C,I,D,q)=>{if(C==null)n(I.el=s(I.children),D,q);else{const z=I.el=C.el;I.children!==C.children&&u(z,I.children)}},g=(C,I,D,q)=>{C==null?n(I.el=l(I.children||""),D,q):I.el=C.el},y=(C,I,D,q)=>{[C.el,C.anchor]=v(C.children,I,D,q,C.el,C.anchor)},m=({el:C,anchor:I},D,q)=>{let z;for(;C&&C!==I;)z=p(C),n(C,D,q),C=z;n(I,D,q)},_=({el:C,anchor:I})=>{let D;for(;C&&C!==I;)D=p(C),i(C),C=D;i(I)},E=(C,I,D,q,z,X,oe,ne,re)=>{if(I.type==="svg"?oe="svg":I.type==="math"&&(oe="mathml"),C==null)b(I,D,q,z,X,oe,ne,re);else{const Q=C.el&&C.el._isVueCE?C.el:null;try{Q&&Q._beginPatch(),L(C,I,z,X,oe,ne,re)}finally{Q&&Q._endPatch()}}},b=(C,I,D,q,z,X,oe,ne)=>{let re,Q;const{props:me,shapeFlag:se,transition:ye,dirs:_e}=C;if(re=C.el=a(C.type,X,me&&me.is,me),se&8?c(re,C.children):se&16&&B(C.children,re,null,q,z,Da(C,X),oe,ne),_e&&xn(C,null,q,"created"),S(re,C,C.scopeId,oe,q),me){for(const We in me)We!=="value"&&!Mi(We)&&o(re,We,null,me[We],X,q);"value"in me&&o(re,"value",null,me.value,X),(Q=me.onVnodeBeforeMount)&&Rr(Q,q,C)}_e&&xn(C,null,q,"beforeMount");const Ie=tp(z,ye);Ie&&ye.beforeEnter(re),n(re,I,D),((Q=me&&me.onVnodeMounted)||Ie||_e)&&er(()=>{Q&&Rr(Q,q,C),Ie&&ye.enter(re),_e&&xn(C,null,q,"mounted")},z)},S=(C,I,D,q,z)=>{if(D&&h(C,D),q)for(let X=0;X<q.length;X++)h(C,q[X]);if(z){let X=z.subTree;if(I===X||zf(X.type)&&(X.ssContent===I||X.ssFallback===I)){const oe=z.vnode;S(C,oe,oe.scopeId,oe.slotScopeIds,z.parent)}}},B=(C,I,D,q,z,X,oe,ne,re=0)=>{for(let Q=re;Q<C.length;Q++){const me=C[Q]=ne?an(C[Q]):Nr(C[Q]);x(null,me,I,D,q,z,X,oe,ne)}},L=(C,I,D,q,z,X,oe)=>{const ne=I.el=C.el;let{patchFlag:re,dynamicChildren:Q,dirs:me}=I;re|=C.patchFlag&16;const se=C.props||qe,ye=I.props||qe;let _e;if(D&&wn(D,!1),(_e=ye.onVnodeBeforeUpdate)&&Rr(_e,D,I,C),me&&xn(I,C,D,"beforeUpdate"),D&&wn(D,!0),(se.innerHTML&&ye.innerHTML==null||se.textContent&&ye.textContent==null)&&c(ne,""),Q?j(C.dynamicChildren,Q,ne,D,q,Da(I,z),X):oe||G(C,I,ne,null,D,q,Da(I,z),X,!1),re>0){if(re&16)Y(ne,se,ye,D,z);else if(re&2&&se.class!==ye.class&&o(ne,"class",null,ye.class,z),re&4&&o(ne,"style",se.style,ye.style,z),re&8){const Ie=I.dynamicProps;for(let We=0;We<Ie.length;We++){const $e=Ie[We],Wt=se[$e],Kt=ye[$e];(Kt!==Wt||$e==="value")&&o(ne,$e,Wt,Kt,z,D)}}re&1&&C.children!==I.children&&c(ne,I.children)}else!oe&&Q==null&&Y(ne,se,ye,D,z);((_e=ye.onVnodeUpdated)||me)&&er(()=>{_e&&Rr(_e,D,I,C),me&&xn(I,C,D,"updated")},q)},j=(C,I,D,q,z,X,oe)=>{for(let ne=0;ne<I.length;ne++){const re=C[ne],Q=I[ne],me=re.el&&(re.type===ke||!Rn(re,Q)||re.shapeFlag&198)?d(re.el):D;x(re,Q,me,null,q,z,X,oe,!0)}},Y=(C,I,D,q,z)=>{if(I!==D){if(I!==qe)for(const X in I)!Mi(X)&&!(X in D)&&o(C,X,I[X],null,z,q);for(const X in D){if(Mi(X))continue;const oe=D[X],ne=I[X];oe!==ne&&X!=="value"&&o(C,X,ne,oe,z,q)}"value"in D&&o(C,"value",I.value,D.value,z)}},M=(C,I,D,q,z,X,oe,ne,re)=>{const Q=I.el=C?C.el:s(""),me=I.anchor=C?C.anchor:s("");let{patchFlag:se,dynamicChildren:ye,slotScopeIds:_e}=I;_e&&(ne=ne?ne.concat(_e):_e),C==null?(n(Q,D,q),n(me,D,q),B(I.children||[],D,me,z,X,oe,ne,re)):se>0&&se&64&&ye&&C.dynamicChildren?(j(C.dynamicChildren,ye,D,z,X,oe,ne),(I.key!=null||z&&I===z.subTree)&&Uf(C,I,!0)):G(C,I,D,me,z,X,oe,ne,re)},k=(C,I,D,q,z,X,oe,ne,re)=>{I.slotScopeIds=ne,C==null?I.shapeFlag&512?z.ctx.activate(I,D,q,oe,re):K(I,D,q,z,X,oe,re):ee(C,I,re)},K=(C,I,D,q,z,X,oe)=>{const ne=C.component=wp(C,q,z);if(pa(C)&&(ne.ctx.renderer=R),_p(ne,!1,oe),ne.asyncDep){if(z&&z.registerDep(ne,J,oe),!C.el){const re=ne.subTree=ue(qt);g(null,re,I,D),C.placeholder=re.el}}else J(ne,C,I,D,z,X,oe)},ee=(C,I,D)=>{const q=I.component=C.component;if(dp(C,I,D))if(q.asyncDep&&!q.asyncResolved){N(q,I,D);return}else q.next=I,q.update();else I.el=C.el,q.vnode=I},J=(C,I,D,q,z,X,oe)=>{const ne=()=>{if(C.isMounted){let{next:se,bu:ye,u:_e,parent:Ie,vnode:We}=C;{const Or=Vf(C);if(Or){se&&(se.el=We.el,N(C,se,oe)),Or.asyncDep.then(()=>{C.isUnmounted||ne()});return}}let $e=se,Wt;wn(C,!1),se?(se.el=We.el,N(C,se,oe)):se=We,ye&&Po(ye),(Wt=se.props&&se.props.onVnodeBeforeUpdate)&&Rr(Wt,Ie,se,We),wn(C,!0);const Kt=gu(C),Ir=C.subTree;C.subTree=Kt,x(Ir,Kt,d(Ir.el),H(Ir),C,z,X),se.el=Kt.el,$e===null&&fp(C,Kt.el),_e&&er(_e,z),(Wt=se.props&&se.props.onVnodeUpdated)&&er(()=>Rr(Wt,Ie,se,We),z)}else{let se;const{el:ye,props:_e}=I,{bm:Ie,m:We,parent:$e,root:Wt,type:Kt}=C,Ir=$i(I);wn(C,!1),Ie&&Po(Ie),!Ir&&(se=_e&&_e.onVnodeBeforeMount)&&Rr(se,$e,I),wn(C,!0);{Wt.ce&&Wt.ce._def.shadowRoot!==!1&&Wt.ce._injectChildStyle(Kt);const Or=C.subTree=gu(C);x(null,Or,D,q,C,z,X),I.el=Or.el}if(We&&er(We,z),!Ir&&(se=_e&&_e.onVnodeMounted)){const Or=I;er(()=>Rr(se,$e,Or),z)}(I.shapeFlag&256||$e&&$i($e.vnode)&&$e.vnode.shapeFlag&256)&&C.a&&er(C.a,z),C.isMounted=!0,I=D=q=null}};C.scope.on();const re=C.effect=new Jd(ne);C.scope.off();const Q=C.update=re.run.bind(re),me=C.job=re.runIfDirty.bind(re);me.i=C,me.id=C.uid,re.scheduler=()=>Il(me),wn(C,!0),Q()},N=(C,I,D)=>{I.component=C;const q=C.vnode.props;C.vnode=I,C.next=null,K1(C,I.props,q,D),J1(C,I.children,D),Kr(),au(C),Xr()},G=(C,I,D,q,z,X,oe,ne,re=!1)=>{const Q=C&&C.children,me=C?C.shapeFlag:0,se=I.children,{patchFlag:ye,shapeFlag:_e}=I;if(ye>0){if(ye&128){Ve(Q,se,D,q,z,X,oe,ne,re);return}else if(ye&256){Re(Q,se,D,q,z,X,oe,ne,re);return}}_e&8?(me&16&&Ct(Q,z,X),se!==Q&&c(D,se)):me&16?_e&16?Ve(Q,se,D,q,z,X,oe,ne,re):Ct(Q,z,X,!0):(me&8&&c(D,""),_e&16&&B(se,D,q,z,X,oe,ne,re))},Re=(C,I,D,q,z,X,oe,ne,re)=>{C=C||oi,I=I||oi;const Q=C.length,me=I.length,se=Math.min(Q,me);let ye;for(ye=0;ye<se;ye++){const _e=I[ye]=re?an(I[ye]):Nr(I[ye]);x(C[ye],_e,D,null,z,X,oe,ne,re)}Q>me?Ct(C,z,X,!0,!1,se):B(I,D,q,z,X,oe,ne,re,se)},Ve=(C,I,D,q,z,X,oe,ne,re)=>{let Q=0;const me=I.length;let se=C.length-1,ye=me-1;for(;Q<=se&&Q<=ye;){const _e=C[Q],Ie=I[Q]=re?an(I[Q]):Nr(I[Q]);if(Rn(_e,Ie))x(_e,Ie,D,null,z,X,oe,ne,re);else break;Q++}for(;Q<=se&&Q<=ye;){const _e=C[se],Ie=I[ye]=re?an(I[ye]):Nr(I[ye]);if(Rn(_e,Ie))x(_e,Ie,D,null,z,X,oe,ne,re);else break;se--,ye--}if(Q>se){if(Q<=ye){const _e=ye+1,Ie=_e<me?I[_e].el:q;for(;Q<=ye;)x(null,I[Q]=re?an(I[Q]):Nr(I[Q]),D,Ie,z,X,oe,ne,re),Q++}}else if(Q>ye)for(;Q<=se;)ze(C[Q],z,X,!0),Q++;else{const _e=Q,Ie=Q,We=new Map;for(Q=Ie;Q<=ye;Q++){const Qt=I[Q]=re?an(I[Q]):Nr(I[Q]);Qt.key!=null&&We.set(Qt.key,Q)}let $e,Wt=0;const Kt=ye-Ie+1;let Ir=!1,Or=0;const bi=new Array(Kt);for(Q=0;Q<Kt;Q++)bi[Q]=0;for(Q=_e;Q<=se;Q++){const Qt=C[Q];if(Wt>=Kt){ze(Qt,z,X,!0);continue}let Tr;if(Qt.key!=null)Tr=We.get(Qt.key);else for($e=Ie;$e<=ye;$e++)if(bi[$e-Ie]===0&&Rn(Qt,I[$e])){Tr=$e;break}Tr===void 0?ze(Qt,z,X,!0):(bi[Tr-Ie]=Q+1,Tr>=Or?Or=Tr:Ir=!0,x(Qt,I[Tr],D,null,z,X,oe,ne,re),Wt++)}const Ql=Ir?rp(bi):oi;for($e=Ql.length-1,Q=Kt-1;Q>=0;Q--){const Qt=Ie+Q,Tr=I[Qt],eu=I[Qt+1],tu=Qt+1<me?eu.el||eu.placeholder:q;bi[Q]===0?x(null,Tr,D,tu,z,X,oe,ne,re):Ir&&($e<0||Q!==Ql[$e]?et(Tr,D,tu,2):$e--)}}},et=(C,I,D,q,z=null)=>{const{el:X,type:oe,transition:ne,children:re,shapeFlag:Q}=C;if(Q&6){et(C.component.subTree,I,D,q);return}if(Q&128){C.suspense.move(I,D,q);return}if(Q&64){oe.move(C,I,D,R);return}if(oe===ke){n(X,I,D);for(let se=0;se<re.length;se++)et(re[se],I,D,q);n(C.anchor,I,D);return}if(oe===Do){m(C,I,D);return}if(q!==2&&Q&1&&ne)if(q===0)ne.beforeEnter(X),n(X,I,D),er(()=>ne.enter(X),z);else{const{leave:se,delayLeave:ye,afterLeave:_e}=ne,Ie=()=>{C.ctx.isUnmounted?i(X):n(X,I,D)},We=()=>{X._isLeaving&&X[Hr](!0),se(X,()=>{Ie(),_e&&_e()})};ye?ye(X,Ie,We):We()}else n(X,I,D)},ze=(C,I,D,q=!1,z=!1)=>{const{type:X,props:oe,ref:ne,children:re,dynamicChildren:Q,shapeFlag:me,patchFlag:se,dirs:ye,cacheIndex:_e}=C;if(se===-2&&(z=!1),ne!=null&&(Kr(),Fi(ne,null,D,C,!0),Xr()),_e!=null&&(I.renderCache[_e]=void 0),me&256){I.ctx.deactivate(C);return}const Ie=me&1&&ye,We=!$i(C);let $e;if(We&&($e=oe&&oe.onVnodeBeforeUnmount)&&Rr($e,I,C),me&6)wt(C.component,D,q);else{if(me&128){C.suspense.unmount(D,q);return}Ie&&xn(C,null,I,"beforeUnmount"),me&64?C.type.remove(C,I,D,R,q):Q&&!Q.hasOnce&&(X!==ke||se>0&&se&64)?Ct(Q,I,D,!1,!0):(X===ke&&se&384||!z&&me&16)&&Ct(re,I,D),q&&Pt(C)}(We&&($e=oe&&oe.onVnodeUnmounted)||Ie)&&er(()=>{$e&&Rr($e,I,C),Ie&&xn(C,null,I,"unmounted")},D)},Pt=C=>{const{type:I,el:D,anchor:q,transition:z}=C;if(I===ke){zt(D,q);return}if(I===Do){_(C);return}const X=()=>{i(D),z&&!z.persisted&&z.afterLeave&&z.afterLeave()};if(C.shapeFlag&1&&z&&!z.persisted){const{leave:oe,delayLeave:ne}=z,re=()=>oe(D,X);ne?ne(C.el,X,re):re()}else X()},zt=(C,I)=>{let D;for(;C!==I;)D=p(C),i(C),C=D;i(I)},wt=(C,I,D)=>{const{bum:q,scope:z,job:X,subTree:oe,um:ne,m:re,a:Q}=C;vu(re),vu(Q),q&&Po(q),z.stop(),X&&(X.flags|=8,ze(oe,C,I,D)),ne&&er(ne,I),er(()=>{C.isUnmounted=!0},I)},Ct=(C,I,D,q=!1,z=!1,X=0)=>{for(let oe=X;oe<C.length;oe++)ze(C[oe],I,D,q,z)},H=C=>{if(C.shapeFlag&6)return H(C.component.subTree);if(C.shapeFlag&128)return C.suspense.next();const I=p(C.anchor||C.el),D=I&&I[b1];return D?p(D):I};let ie=!1;const $=(C,I,D)=>{C==null?I._vnode&&ze(I._vnode,null,null,!0):x(I._vnode||null,C,I,null,null,null,D),I._vnode=C,ie||(ie=!0,au(),mf(),ie=!1)},R={p:x,um:ze,m:et,r:Pt,mt:K,mc:B,pc:G,pbc:j,n:H,o:r};return{render:$,hydrate:void 0,createApp:z1($)}}function Da({type:r,props:e},t){return t==="svg"&&r==="foreignObject"||t==="mathml"&&r==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function wn({effect:r,job:e},t){t?(r.flags|=32,e.flags|=4):(r.flags&=-33,e.flags&=-5)}function tp(r,e){return(!r||r&&!r.pendingBranch)&&e&&!e.persisted}function Uf(r,e,t=!1){const n=r.children,i=e.children;if(ge(n)&&ge(i))for(let o=0;o<n.length;o++){const a=n[o];let s=i[o];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=i[o]=an(i[o]),s.el=a.el),!t&&s.patchFlag!==-2&&Uf(a,s)),s.type===ma&&s.patchFlag!==-1&&(s.el=a.el),s.type===qt&&!s.el&&(s.el=a.el)}}function rp(r){const e=r.slice(),t=[0];let n,i,o,a,s;const l=r.length;for(n=0;n<l;n++){const u=r[n];if(u!==0){if(i=t[t.length-1],r[i]<u){e[n]=i,t.push(n);continue}for(o=0,a=t.length-1;o<a;)s=o+a>>1,r[t[s]]<u?o=s+1:a=s;u<r[t[o]]&&(o>0&&(e[n]=t[o-1]),t[o]=n)}}for(o=t.length,a=t[o-1];o-- >0;)t[o]=a,a=e[a];return t}function Vf(r){const e=r.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Vf(e)}function vu(r){if(r)for(let e=0;e<r.length;e++)r[e].flags|=8}const np=Symbol.for("v-scx"),ip=()=>Ar(np);function No(r,e,t){return Hf(r,e,t)}function Hf(r,e,t=qe){const{immediate:n,deep:i,flush:o,once:a}=t,s=At({},t),l=e&&n||!e&&o!=="post";let u;if(Zi){if(o==="sync"){const h=ip();u=h.__watcherHandles||(h.__watcherHandles=[])}else if(!l){const h=()=>{};return h.stop=Mr,h.resume=Mr,h.pause=Mr,h}}const c=Bt;s.call=(h,v,x)=>Cr(h,c,v,x);let d=!1;o==="post"?s.scheduler=h=>{er(h,c&&c.suspense)}:o!=="sync"&&(d=!0,s.scheduler=(h,v)=>{v?h():Il(h)}),s.augmentJob=h=>{e&&(h.flags|=4),d&&(h.flags|=2,c&&(h.id=c.uid,h.i=c))};const p=m1(r,e,s);return Zi&&(u?u.push(p):l&&p()),p}function op(r,e,t){const n=this.proxy,i=ut(r)?r.includes(".")?Gf(n,r):()=>n[r]:r.bind(n,n);let o;be(e)?o=e:(o=e.handler,t=e);const a=ao(this),s=Hf(i,o.bind(n),t);return a(),s}function Gf(r,e){const t=e.split(".");return()=>{let n=r;for(let i=0;i<t.length&&n;i++)n=n[t[i]];return n}}const ap=(r,e)=>e==="modelValue"||e==="model-value"?r.modelModifiers:r[`${e}Modifiers`]||r[`${vr(e)}Modifiers`]||r[`${yn(e)}Modifiers`];function sp(r,e,...t){if(r.isUnmounted)return;const n=r.vnode.props||qe;let i=t;const o=e.startsWith("update:"),a=o&&ap(n,e.slice(7));a&&(a.trim&&(i=t.map(c=>ut(c)?c.trim():c)),a.number&&(i=t.map(ua)));let s,l=n[s=Ia(e)]||n[s=Ia(vr(e))];!l&&o&&(l=n[s=Ia(yn(e))]),l&&Cr(l,r,6,i);const u=n[s+"Once"];if(u){if(!r.emitted)r.emitted={};else if(r.emitted[s])return;r.emitted[s]=!0,Cr(u,r,6,i)}}const lp=new WeakMap;function qf(r,e,t=!1){const n=t?lp:e.emitsCache,i=n.get(r);if(i!==void 0)return i;const o=r.emits;let a={},s=!1;if(!be(r)){const l=u=>{const c=qf(u,e,!0);c&&(s=!0,At(a,c))};!t&&e.mixins.length&&e.mixins.forEach(l),r.extends&&l(r.extends),r.mixins&&r.mixins.forEach(l)}return!o&&!s?(Ge(r)&&n.set(r,null),null):(ge(o)?o.forEach(l=>a[l]=null):At(a,o),Ge(r)&&n.set(r,a),a)}function ya(r,e){return!r||!aa(e)?!1:(e=e.slice(2).replace(/Once$/,""),Fe(r,e[0].toLowerCase()+e.slice(1))||Fe(r,yn(e))||Fe(r,e))}function gu(r){const{type:e,vnode:t,proxy:n,withProxy:i,propsOptions:[o],slots:a,attrs:s,emit:l,render:u,renderCache:c,props:d,data:p,setupState:h,ctx:v,inheritAttrs:x}=r,w=Ho(r);let g,y;try{if(t.shapeFlag&4){const _=i||n,E=_;g=Nr(u.call(E,_,c,d,h,p,v)),y=s}else{const _=e;g=Nr(_.length>1?_(d,{attrs:s,slots:a,emit:l}):_(d,null)),y=e.props?s:up(s)}}catch(_){Ui.length=0,fa(_,r,1),g=ue(qt)}let m=g;if(y&&x!==!1){const _=Object.keys(y),{shapeFlag:E}=m;_.length&&E&7&&(o&&_.some(gl)&&(y=cp(y,o)),m=vn(m,y,!1,!0))}return t.dirs&&(m=vn(m,null,!1,!0),m.dirs=m.dirs?m.dirs.concat(t.dirs):t.dirs),t.transition&&Xi(m,t.transition),g=m,Ho(w),g}const up=r=>{let e;for(const t in r)(t==="class"||t==="style"||aa(t))&&((e||(e={}))[t]=r[t]);return e},cp=(r,e)=>{const t={};for(const n in r)(!gl(n)||!(n.slice(9)in e))&&(t[n]=r[n]);return t};function dp(r,e,t){const{props:n,children:i,component:o}=r,{props:a,children:s,patchFlag:l}=e,u=o.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return n?yu(n,a,u):!!a;if(l&8){const c=e.dynamicProps;for(let d=0;d<c.length;d++){const p=c[d];if(a[p]!==n[p]&&!ya(u,p))return!0}}}else return(i||s)&&(!s||!s.$stable)?!0:n===a?!1:n?a?yu(n,a,u):!0:!!a;return!1}function yu(r,e,t){const n=Object.keys(e);if(n.length!==Object.keys(r).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(e[o]!==r[o]&&!ya(t,o))return!0}return!1}function fp({vnode:r,parent:e},t){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===r&&(n.el=r.el),n===r)(r=e.vnode).el=t,e=e.parent;else break}}const zf=r=>r.__isSuspense;function hp(r,e){e&&e.pendingBranch?ge(r)?e.effects.push(...r):e.effects.push(r):_1(r)}const ke=Symbol.for("v-fgt"),ma=Symbol.for("v-txt"),qt=Symbol.for("v-cmt"),Do=Symbol.for("v-stc"),Ui=[];let ir=null;function O(r=!1){Ui.push(ir=r?null:[])}function pp(){Ui.pop(),ir=Ui[Ui.length-1]||null}let Yi=1;function zo(r,e=!1){Yi+=r,r<0&&ir&&e&&(ir.hasOnce=!0)}function Wf(r){return r.dynamicChildren=Yi>0?ir||oi:null,pp(),Yi>0&&ir&&ir.push(r),r}function T(r,e,t,n,i,o){return Wf(f(r,e,t,n,i,o,!0))}function Rl(r,e,t,n,i){return Wf(ue(r,e,t,n,i,!0))}function Wo(r){return r?r.__v_isVNode===!0:!1}function Rn(r,e){return r.type===e.type&&r.key===e.key}const Kf=({key:r})=>r??null,Mo=({ref:r,ref_key:e,ref_for:t})=>(typeof r=="number"&&(r=""+r),r!=null?ut(r)||Lt(r)||be(r)?{i:nr,r,k:e,f:!!t}:r:null);function f(r,e=null,t=null,n=0,i=null,o=r===ke?0:1,a=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:r,props:e,key:e&&Kf(e),ref:e&&Mo(e),scopeId:wf,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:nr};return s?(Pl(l,t),o&128&&r.normalize(l)):t&&(l.shapeFlag|=ut(t)?8:16),Yi>0&&!a&&ir&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&ir.push(l),l}const ue=vp;function vp(r,e=null,t=null,n=0,i=null,o=!1){if((!r||r===L1)&&(r=qt),Wo(r)){const s=vn(r,e,!0);return t&&Pl(s,t),Yi>0&&!o&&ir&&(s.shapeFlag&6?ir[ir.indexOf(r)]=s:ir.push(s)),s.patchFlag=-2,s}if(Sp(r)&&(r=r.__vccOpts),e){e=gp(e);let{class:s,style:l}=e;s&&!ut(s)&&(e.class=it(s)),Ge(l)&&(Sl(l)&&!ge(l)&&(l=At({},l)),e.style=hn(l))}const a=ut(r)?1:zf(r)?128:_f(r)?64:Ge(r)?4:be(r)?2:0;return f(r,e,t,n,i,a,o,!0)}function gp(r){return r?Sl(r)||Mf(r)?At({},r):r:null}function vn(r,e,t=!1,n=!1){const{props:i,ref:o,patchFlag:a,children:s,transition:l}=r,u=e?yp(i||{},e):i,c={__v_isVNode:!0,__v_skip:!0,type:r.type,props:u,key:u&&Kf(u),ref:e&&e.ref?t&&o?ge(o)?o.concat(Mo(e)):[o,Mo(e)]:Mo(e):o,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:s,target:r.target,targetStart:r.targetStart,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:e&&r.type!==ke?a===-1?16:a|16:a,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:l,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&vn(r.ssContent),ssFallback:r.ssFallback&&vn(r.ssFallback),placeholder:r.placeholder,el:r.el,anchor:r.anchor,ctx:r.ctx,ce:r.ce};return l&&n&&Xi(c,l.clone(c)),c}function de(r=" ",e=0){return ue(ma,null,r,e)}function $n(r,e){const t=ue(Do,null,r);return t.staticCount=e,t}function Z(r="",e=!1){return e?(O(),Rl(qt,null,r)):ue(qt,null,r)}function Nr(r){return r==null||typeof r=="boolean"?ue(qt):ge(r)?ue(ke,null,r.slice()):Wo(r)?an(r):ue(ma,null,String(r))}function an(r){return r.el===null&&r.patchFlag!==-1||r.memo?r:vn(r)}function Pl(r,e){let t=0;const{shapeFlag:n}=r;if(e==null)e=null;else if(ge(e))t=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),Pl(r,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!Mf(e)?e._ctx=nr:i===3&&nr&&(nr.slots._===1?e._=1:(e._=2,r.patchFlag|=1024))}else be(e)?(e={default:e,_ctx:nr},t=32):(e=String(e),n&64?(t=16,e=[de(e)]):t=8);r.children=e,r.shapeFlag|=t}function yp(...r){const e={};for(let t=0;t<r.length;t++){const n=r[t];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=it([e.class,n.class]));else if(i==="style")e.style=hn([e.style,n.style]);else if(aa(i)){const o=e[i],a=n[i];a&&o!==a&&!(ge(o)&&o.includes(a))&&(e[i]=o?[].concat(o,a):a)}else i!==""&&(e[i]=n[i])}return e}function Rr(r,e,t,n=null){Cr(r,e,7,[t,n])}const mp=kf();let xp=0;function wp(r,e,t){const n=r.type,i=(e?e.appContext:r.appContext)||mp,o={uid:xp++,vnode:r,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new qh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Lf(n,i),emitsOptions:qf(n,i),emit:null,emitted:null,propsDefaults:qe,inheritAttrs:n.inheritAttrs,ctx:qe,data:qe,props:qe,attrs:qe,slots:qe,refs:qe,setupState:qe,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=sp.bind(null,o),r.ce&&r.ce(o),o}let Bt=null;const Xf=()=>Bt||nr;let Ko,js;{const r=ca(),e=(t,n)=>{let i;return(i=r[t])||(i=r[t]=[]),i.push(n),o=>{i.length>1?i.forEach(a=>a(o)):i[0](o)}};Ko=e("__VUE_INSTANCE_SETTERS__",t=>Bt=t),js=e("__VUE_SSR_SETTERS__",t=>Zi=t)}const ao=r=>{const e=Bt;return Ko(r),r.scope.on(),()=>{r.scope.off(),Ko(e)}},mu=()=>{Bt&&Bt.scope.off(),Ko(null)};function Yf(r){return r.vnode.shapeFlag&4}let Zi=!1;function _p(r,e=!1,t=!1){e&&js(e);const{props:n,children:i}=r.vnode,o=Yf(r);W1(r,n,o,e),Z1(r,i,t||e);const a=o?bp(r,e):void 0;return e&&js(!1),a}function bp(r,e){const t=r.type;r.accessCache=Object.create(null),r.proxy=new Proxy(r.ctx,$1);const{setup:n}=t;if(n){Kr();const i=r.setupContext=n.length>1?Ap(r):null,o=ao(r),a=oo(n,r,0,[r.props,i]),s=qd(a);if(Xr(),o(),(s||r.sp)&&!$i(r)&&If(r),s){if(a.then(mu,mu),e)return a.then(l=>{xu(r,l)}).catch(l=>{fa(l,r,0)});r.asyncDep=a}else xu(r,a)}else Zf(r)}function xu(r,e,t){be(e)?r.type.__ssrInlineRender?r.ssrRender=e:r.render=e:Ge(e)&&(r.setupState=vf(e)),Zf(r)}function Zf(r,e,t){const n=r.type;r.render||(r.render=n.render||Mr);{const i=ao(r);Kr();try{j1(r)}finally{Xr(),i()}}}const Ep={get(r,e){return Mt(r,"get",""),r[e]}};function Ap(r){const e=t=>{r.exposed=t||{}};return{attrs:new Proxy(r.attrs,Ep),slots:r.slots,emit:r.emit,expose:e}}function xa(r){return r.exposed?r.exposeProxy||(r.exposeProxy=new Proxy(vf(d1(r.exposed)),{get(e,t){if(t in e)return e[t];if(t in ji)return ji[t](r)},has(e,t){return t in e||t in ji}})):r.proxy}function Cp(r,e=!0){return be(r)?r.displayName||r.name:r.name||e&&r.__name}function Sp(r){return be(r)&&"__vccOpts"in r}const Ee=(r,e)=>g1(r,e,Zi);function kl(r,e,t){try{zo(-1);const n=arguments.length;return n===2?Ge(e)&&!ge(e)?Wo(e)?ue(r,null,[e]):ue(r,e):ue(r,null,e):(n>3?t=Array.prototype.slice.call(arguments,2):n===3&&Wo(t)&&(t=[t]),ue(r,e,t))}finally{zo(1)}}const Ip="3.5.23";let Us;const wu=typeof window<"u"&&window.trustedTypes;if(wu)try{Us=wu.createPolicy("vue",{createHTML:r=>r})}catch{}const Jf=Us?r=>Us.createHTML(r):r=>r,Op="http://www.w3.org/2000/svg",Tp="http://www.w3.org/1998/Math/MathML",Ur=typeof document<"u"?document:null,_u=Ur&&Ur.createElement("template"),Rp={insert:(r,e,t)=>{e.insertBefore(r,t||null)},remove:r=>{const e=r.parentNode;e&&e.removeChild(r)},createElement:(r,e,t,n)=>{const i=e==="svg"?Ur.createElementNS(Op,r):e==="mathml"?Ur.createElementNS(Tp,r):t?Ur.createElement(r,{is:t}):Ur.createElement(r);return r==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:r=>Ur.createTextNode(r),createComment:r=>Ur.createComment(r),setText:(r,e)=>{r.nodeValue=e},setElementText:(r,e)=>{r.textContent=e},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>Ur.querySelector(r),setScopeId(r,e){r.setAttribute(e,"")},insertStaticContent(r,e,t,n,i,o){const a=t?t.previousSibling:e.lastChild;if(i&&(i===o||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===o||!(i=i.nextSibling)););else{_u.innerHTML=Jf(n==="svg"?`<svg>${r}</svg>`:n==="mathml"?`<math>${r}</math>`:r);const s=_u.content;if(n==="svg"||n==="mathml"){const l=s.firstChild;for(;l.firstChild;)s.appendChild(l.firstChild);s.removeChild(l)}e.insertBefore(s,t)}return[a?a.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Jr="transition",Ai="animation",Ji=Symbol("_vtc"),Qf={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Pp=At({},bf,Qf),kp=r=>(r.displayName="Transition",r.props=Pp,r),Np=kp((r,{slots:e})=>kl(C1,Dp(r),e)),_n=(r,e=[])=>{ge(r)?r.forEach(t=>t(...e)):r&&r(...e)},bu=r=>r?ge(r)?r.some(e=>e.length>1):r.length>1:!1;function Dp(r){const e={};for(const M in r)M in Qf||(e[M]=r[M]);if(r.css===!1)return e;const{name:t="v",type:n,duration:i,enterFromClass:o=`${t}-enter-from`,enterActiveClass:a=`${t}-enter-active`,enterToClass:s=`${t}-enter-to`,appearFromClass:l=o,appearActiveClass:u=a,appearToClass:c=s,leaveFromClass:d=`${t}-leave-from`,leaveActiveClass:p=`${t}-leave-active`,leaveToClass:h=`${t}-leave-to`}=r,v=Mp(i),x=v&&v[0],w=v&&v[1],{onBeforeEnter:g,onEnter:y,onEnterCancelled:m,onLeave:_,onLeaveCancelled:E,onBeforeAppear:b=g,onAppear:S=y,onAppearCancelled:B=m}=e,L=(M,k,K,ee)=>{M._enterCancelled=ee,bn(M,k?c:s),bn(M,k?u:a),K&&K()},j=(M,k)=>{M._isLeaving=!1,bn(M,d),bn(M,h),bn(M,p),k&&k()},Y=M=>(k,K)=>{const ee=M?S:y,J=()=>L(k,M,K);_n(ee,[k,J]),Eu(()=>{bn(k,M?l:o),$r(k,M?c:s),bu(ee)||Au(k,n,x,J)})};return At(e,{onBeforeEnter(M){_n(g,[M]),$r(M,o),$r(M,a)},onBeforeAppear(M){_n(b,[M]),$r(M,l),$r(M,u)},onEnter:Y(!1),onAppear:Y(!0),onLeave(M,k){M._isLeaving=!0;const K=()=>j(M,k);$r(M,d),M._enterCancelled?($r(M,p),Iu(M)):(Iu(M),$r(M,p)),Eu(()=>{M._isLeaving&&(bn(M,d),$r(M,h),bu(_)||Au(M,n,w,K))}),_n(_,[M,K])},onEnterCancelled(M){L(M,!1,void 0,!0),_n(m,[M])},onAppearCancelled(M){L(M,!0,void 0,!0),_n(B,[M])},onLeaveCancelled(M){j(M),_n(E,[M])}})}function Mp(r){if(r==null)return null;if(Ge(r))return[Ma(r.enter),Ma(r.leave)];{const e=Ma(r);return[e,e]}}function Ma(r){return Lh(r)}function $r(r,e){e.split(/\s+/).forEach(t=>t&&r.classList.add(t)),(r[Ji]||(r[Ji]=new Set)).add(e)}function bn(r,e){e.split(/\s+/).forEach(n=>n&&r.classList.remove(n));const t=r[Ji];t&&(t.delete(e),t.size||(r[Ji]=void 0))}function Eu(r){requestAnimationFrame(()=>{requestAnimationFrame(r)})}let Bp=0;function Au(r,e,t,n){const i=r._endId=++Bp,o=()=>{i===r._endId&&n()};if(t!=null)return setTimeout(o,t);const{type:a,timeout:s,propCount:l}=Lp(r,e);if(!a)return n();const u=a+"end";let c=0;const d=()=>{r.removeEventListener(u,p),o()},p=h=>{h.target===r&&++c>=l&&d()};setTimeout(()=>{c<l&&d()},s+1),r.addEventListener(u,p)}function Lp(r,e){const t=window.getComputedStyle(r),n=v=>(t[v]||"").split(", "),i=n(`${Jr}Delay`),o=n(`${Jr}Duration`),a=Cu(i,o),s=n(`${Ai}Delay`),l=n(`${Ai}Duration`),u=Cu(s,l);let c=null,d=0,p=0;e===Jr?a>0&&(c=Jr,d=a,p=o.length):e===Ai?u>0&&(c=Ai,d=u,p=l.length):(d=Math.max(a,u),c=d>0?a>u?Jr:Ai:null,p=c?c===Jr?o.length:l.length:0);const h=c===Jr&&/\b(?:transform|all)(?:,|$)/.test(n(`${Jr}Property`).toString());return{type:c,timeout:d,propCount:p,hasTransform:h}}function Cu(r,e){for(;r.length<e.length;)r=r.concat(r);return Math.max(...e.map((t,n)=>Su(t)+Su(r[n])))}function Su(r){return r==="auto"?0:Number(r.slice(0,-1).replace(",","."))*1e3}function Iu(r){return(r?r.ownerDocument:document).body.offsetHeight}function Fp(r,e,t){const n=r[Ji];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?r.removeAttribute("class"):t?r.setAttribute("class",e):r.className=e}const Ou=Symbol("_vod"),$p=Symbol("_vsh"),jp=Symbol(""),Up=/(?:^|;)\s*display\s*:/;function Vp(r,e,t){const n=r.style,i=ut(t);let o=!1;if(t&&!i){if(e)if(ut(e))for(const a of e.split(";")){const s=a.slice(0,a.indexOf(":")).trim();t[s]==null&&Bo(n,s,"")}else for(const a in e)t[a]==null&&Bo(n,a,"");for(const a in t)a==="display"&&(o=!0),Bo(n,a,t[a])}else if(i){if(e!==t){const a=n[jp];a&&(t+=";"+a),n.cssText=t,o=Up.test(t)}}else e&&r.removeAttribute("style");Ou in r&&(r[Ou]=o?n.display:"",r[$p]&&(n.display="none"))}const Tu=/\s*!important$/;function Bo(r,e,t){if(ge(t))t.forEach(n=>Bo(r,e,n));else if(t==null&&(t=""),e.startsWith("--"))r.setProperty(e,t);else{const n=Hp(r,e);Tu.test(t)?r.setProperty(yn(n),t.replace(Tu,""),"important"):r[n]=t}}const Ru=["Webkit","Moz","ms"],Ba={};function Hp(r,e){const t=Ba[e];if(t)return t;let n=vr(e);if(n!=="filter"&&n in r)return Ba[e]=n;n=la(n);for(let i=0;i<Ru.length;i++){const o=Ru[i]+n;if(o in r)return Ba[e]=o}return e}const Pu="http://www.w3.org/1999/xlink";function ku(r,e,t,n,i,o=Hh(e)){n&&e.startsWith("xlink:")?t==null?r.removeAttributeNS(Pu,e.slice(6,e.length)):r.setAttributeNS(Pu,e,t):t==null||o&&!Xd(t)?r.removeAttribute(e):r.setAttribute(e,o?"":Br(t)?String(t):t)}function Nu(r,e,t,n,i){if(e==="innerHTML"||e==="textContent"){t!=null&&(r[e]=e==="innerHTML"?Jf(t):t);return}const o=r.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const s=o==="OPTION"?r.getAttribute("value")||"":r.value,l=t==null?r.type==="checkbox"?"on":"":String(t);(s!==l||!("_value"in r))&&(r.value=l),t==null&&r.removeAttribute(e),r._value=t;return}let a=!1;if(t===""||t==null){const s=typeof r[e];s==="boolean"?t=Xd(t):t==null&&s==="string"?(t="",a=!0):s==="number"&&(t=0,a=!0)}try{r[e]=t}catch{}a&&r.removeAttribute(i||e)}function zr(r,e,t,n){r.addEventListener(e,t,n)}function Gp(r,e,t,n){r.removeEventListener(e,t,n)}const Du=Symbol("_vei");function qp(r,e,t,n,i=null){const o=r[Du]||(r[Du]={}),a=o[e];if(n&&a)a.value=n;else{const[s,l]=zp(e);if(n){const u=o[e]=Xp(n,i);zr(r,s,u,l)}else a&&(Gp(r,s,a,l),o[e]=void 0)}}const Mu=/(?:Once|Passive|Capture)$/;function zp(r){let e;if(Mu.test(r)){e={};let n;for(;n=r.match(Mu);)r=r.slice(0,r.length-n[0].length),e[n[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):yn(r.slice(2)),e]}let La=0;const Wp=Promise.resolve(),Kp=()=>La||(Wp.then(()=>La=0),La=Date.now());function Xp(r,e){const t=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=t.attached)return;Cr(Yp(n,t.value),e,5,[n])};return t.value=r,t.attached=Kp(),t}function Yp(r,e){if(ge(e)){const t=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{t.call(r),r._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const Bu=r=>r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&r.charCodeAt(2)>96&&r.charCodeAt(2)<123,Zp=(r,e,t,n,i,o)=>{const a=i==="svg";e==="class"?Fp(r,n,a):e==="style"?Vp(r,t,n):aa(e)?gl(e)||qp(r,e,t,n,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Jp(r,e,n,a))?(Nu(r,e,n),!r.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&ku(r,e,n,a,o,e!=="value")):r._isVueCE&&(/[A-Z]/.test(e)||!ut(n))?Nu(r,vr(e),n,o,e):(e==="true-value"?r._trueValue=n:e==="false-value"&&(r._falseValue=n),ku(r,e,n,a))};function Jp(r,e,t,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in r&&Bu(e)&&be(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&r.tagName==="IFRAME"||e==="form"||e==="list"&&r.tagName==="INPUT"||e==="type"&&r.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=r.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Bu(e)&&ut(t)?!1:e in r}const gn=r=>{const e=r.props["onUpdate:modelValue"]||!1;return ge(e)?t=>Po(e,t):e};function Qp(r){r.target.composing=!0}function Lu(r){const e=r.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const hr=Symbol("_assign");function Fu(r,e,t){return e&&(r=r.trim()),t&&(r=ua(r)),r}const Ae={created(r,{modifiers:{lazy:e,trim:t,number:n}},i){r[hr]=gn(i);const o=n||i.props&&i.props.type==="number";zr(r,e?"change":"input",a=>{a.target.composing||r[hr](Fu(r.value,t,o))}),(t||o)&&zr(r,"change",()=>{r.value=Fu(r.value,t,o)}),e||(zr(r,"compositionstart",Qp),zr(r,"compositionend",Lu),zr(r,"change",Lu))},mounted(r,{value:e}){r.value=e??""},beforeUpdate(r,{value:e,oldValue:t,modifiers:{lazy:n,trim:i,number:o}},a){if(r[hr]=gn(a),r.composing)return;const s=(o||r.type==="number")&&!/^0\d/.test(r.value)?ua(r.value):r.value,l=e??"";s!==l&&(document.activeElement===r&&r.type!=="range"&&(n&&e===t||i&&r.value.trim()===l)||(r.value=l))}},Nl={deep:!0,created(r,e,t){r[hr]=gn(t),zr(r,"change",()=>{const n=r._modelValue,i=di(r),o=r.checked,a=r[hr];if(ge(n)){const s=xl(n,i),l=s!==-1;if(o&&!l)a(n.concat(i));else if(!o&&l){const u=[...n];u.splice(s,1),a(u)}}else if(gi(n)){const s=new Set(n);o?s.add(i):s.delete(i),a(s)}else a(t0(r,o))})},mounted:$u,beforeUpdate(r,e,t){r[hr]=gn(t),$u(r,e,t)}};function $u(r,{value:e,oldValue:t},n){r._modelValue=e;let i;if(ge(e))i=xl(e,n.props.value)>-1;else if(gi(e))i=e.has(n.props.value);else{if(e===t)return;i=Fn(e,t0(r,!0))}r.checked!==i&&(r.checked=i)}const e0={created(r,{value:e},t){r.checked=Fn(e,t.props.value),r[hr]=gn(t),zr(r,"change",()=>{r[hr](di(r))})},beforeUpdate(r,{value:e,oldValue:t},n){r[hr]=gn(n),e!==t&&(r.checked=Fn(e,n.props.value))}},ar={deep:!0,created(r,{value:e,modifiers:{number:t}},n){const i=gi(e);zr(r,"change",()=>{const o=Array.prototype.filter.call(r.options,a=>a.selected).map(a=>t?ua(di(a)):di(a));r[hr](r.multiple?i?new Set(o):o:o[0]),r._assigning=!0,ha(()=>{r._assigning=!1})}),r[hr]=gn(n)},mounted(r,{value:e}){ju(r,e)},beforeUpdate(r,e,t){r[hr]=gn(t)},updated(r,{value:e}){r._assigning||ju(r,e)}};function ju(r,e){const t=r.multiple,n=ge(e);if(!(t&&!n&&!gi(e))){for(let i=0,o=r.options.length;i<o;i++){const a=r.options[i],s=di(a);if(t)if(n){const l=typeof s;l==="string"||l==="number"?a.selected=e.some(u=>String(u)===String(s)):a.selected=xl(e,s)>-1}else a.selected=e.has(s);else if(Fn(di(a),e)){r.selectedIndex!==i&&(r.selectedIndex=i);return}}!t&&r.selectedIndex!==-1&&(r.selectedIndex=-1)}}function di(r){return"_value"in r?r._value:r.value}function t0(r,e){const t=e?"_trueValue":"_falseValue";return t in r?r[t]:e}const Qi={created(r,e,t){vo(r,e,t,null,"created")},mounted(r,e,t){vo(r,e,t,null,"mounted")},beforeUpdate(r,e,t,n){vo(r,e,t,n,"beforeUpdate")},updated(r,e,t,n){vo(r,e,t,n,"updated")}};function ev(r,e){switch(r){case"SELECT":return ar;case"TEXTAREA":return Ae;default:switch(e){case"checkbox":return Nl;case"radio":return e0;default:return Ae}}}function vo(r,e,t,n,i){const a=ev(r.tagName,t.props&&t.props.type)[i];a&&a(r,e,t,n)}const tv=["ctrl","shift","alt","meta"],rv={stop:r=>r.stopPropagation(),prevent:r=>r.preventDefault(),self:r=>r.target!==r.currentTarget,ctrl:r=>!r.ctrlKey,shift:r=>!r.shiftKey,alt:r=>!r.altKey,meta:r=>!r.metaKey,left:r=>"button"in r&&r.button!==0,middle:r=>"button"in r&&r.button!==1,right:r=>"button"in r&&r.button!==2,exact:(r,e)=>tv.some(t=>r[`${t}Key`]&&!e.includes(t))},Yr=(r,e)=>{const t=r._withMods||(r._withMods={}),n=e.join(".");return t[n]||(t[n]=((i,...o)=>{for(let a=0;a<e.length;a++){const s=rv[e[a]];if(s&&s(i,e))return}return r(i,...o)}))},nv={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},r0=(r,e)=>{const t=r._withKeys||(r._withKeys={}),n=e.join(".");return t[n]||(t[n]=(i=>{if(!("key"in i))return;const o=yn(i.key);if(e.some(a=>a===o||nv[a]===o))return r(i)}))},iv=At({patchProp:Zp},Rp);let Uu;function ov(){return Uu||(Uu=Q1(iv))}const av=((...r)=>{const e=ov().createApp(...r),{mount:t}=e;return e.mount=n=>{const i=lv(n);if(!i)return;const o=e._component;!be(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const a=t(i,!1,sv(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},e});function sv(r){if(r instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&r instanceof MathMLElement)return"mathml"}function lv(r){return ut(r)?document.querySelector(r):r}const uv={class:"bg-[#8B0000] text-white"},cv={class:"container mx-auto px-4 py-12"},dv={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8"},fv={class:"space-y-4"},hv={class:"text-blue-200 text-xs"},pv={class:"space-y-4"},vv={class:"space-y-2"},gv={class:"space-y-4"},yv={class:"space-y-2"},mv=ot({__name:"Footer",setup(r){const e=Ee(()=>new Date().getFullYear());return(t,n)=>{const i=lr("router-link");return O(),T("footer",uv,[f("div",cv,[f("div",dv,[f("div",fv,[n[0]||(n[0]=f("h3",{class:"text-2xl font-bold tracking-wider"},"CINE ULEAM",-1)),n[1]||(n[1]=f("p",{class:"text-blue-100 text-sm leading-relaxed"}," El cine oficial de la Universidad Laica Eloy Alfaro de Manab. Entretenimiento y cultura cinematogrfica para toda la comunidad universitaria. ",-1)),f("p",hv,"  "+P(e.value)+" Todos los derechos reservados. ",1)]),f("div",pv,[n[5]||(n[5]=f("h4",{class:"text-lg font-semibold border-b border-white pb-2"},"Navegacin",-1)),f("ul",vv,[f("li",null,[ue(i,{to:"/",class:"text-blue-100 hover:text-yellow-400 transition-colors duration-200 text-sm"},{default:we(()=>[...n[2]||(n[2]=[de("Inicio",-1)])]),_:1})]),f("li",null,[ue(i,{to:"/cartelera",class:"text-blue-100 hover:text-yellow-400 transition-colors duration-200 text-sm"},{default:we(()=>[...n[3]||(n[3]=[de("Cartelera",-1)])]),_:1})]),f("li",null,[ue(i,{to:"/proximas",class:"text-blue-100 hover:text-yellow-400 transition-colors duration-200 text-sm"},{default:we(()=>[...n[4]||(n[4]=[de("Prximas Pelculas",-1)])]),_:1})])])]),f("div",gv,[n[8]||(n[8]=f("h4",{class:"text-lg font-semibold border-b border-b border-whitepb-2"},"Informacin",-1)),f("ul",yv,[f("li",null,[ue(i,{to:"/contacto",class:"text-blue-100 hover:text-yellow-400 transition-colors duration-200 text-sm"},{default:we(()=>[...n[6]||(n[6]=[de("Contacto",-1)])]),_:1})]),f("li",null,[ue(i,{to:"/acerca-de",class:"text-blue-100 hover:text-yellow-400 transition-colors duration-200 text-sm"},{default:we(()=>[...n[7]||(n[7]=[de("Acerca de",-1)])]),_:1})])])]),n[9]||(n[9]=$n('<div class="space-y-4"><h4 class="text-lg font-semibold border-b border-b border-whitepb-2">Sguenos</h4><div class="flex space-x-4"><a href="https://www.facebook.com/UleamEc" aria-label="Facebook" class="hover:bg-yellow-500 hover:text-[#003366] p-3 rounded-full transition-all duration-200 hover:scale-110"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"></path></svg></a><a href="https://www.instagram.com/uleam_ecuador_oficial/" aria-label="Instagram" class="hover:bg-yellow-500 hover:text-[#003366] p-3 rounded-full transition-all duration-200 hover:scale-110"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"></path></svg></a></div><p class="text-blue-100 text-xs mt-4"> Campus ULEAM<br> (05) 262-3740<br> cine@uleam.edu.ec </p></div>',1))]),n[10]||(n[10]=f("div",{class:"mt-8 pt-6 text-center"},[f("p",{class:"text-blue-100 text-sm flex items-center justify-center gap-2"}," Hecho para la comunidad ULEAM ")],-1))])])}}});const Jn=typeof document<"u";function n0(r){return typeof r=="object"||"displayName"in r||"props"in r||"__vccOpts"in r}function xv(r){return r.__esModule||r[Symbol.toStringTag]==="Module"||r.default&&n0(r.default)}const Le=Object.assign;function Fa(r,e){const t={};for(const n in e){const i=e[n];t[n]=Sr(i)?i.map(r):r(i)}return t}const Vi=()=>{},Sr=Array.isArray;function Vu(r,e){const t={};for(const n in r)t[n]=n in e?e[n]:r[n];return t}const i0=/#/g,wv=/&/g,_v=/\//g,bv=/=/g,Ev=/\?/g,o0=/\+/g,Av=/%5B/g,Cv=/%5D/g,a0=/%5E/g,Sv=/%60/g,s0=/%7B/g,Iv=/%7C/g,l0=/%7D/g,Ov=/%20/g;function Dl(r){return r==null?"":encodeURI(""+r).replace(Iv,"|").replace(Av,"[").replace(Cv,"]")}function Tv(r){return Dl(r).replace(s0,"{").replace(l0,"}").replace(a0,"^")}function Vs(r){return Dl(r).replace(o0,"%2B").replace(Ov,"+").replace(i0,"%23").replace(wv,"%26").replace(Sv,"`").replace(s0,"{").replace(l0,"}").replace(a0,"^")}function Rv(r){return Vs(r).replace(bv,"%3D")}function Pv(r){return Dl(r).replace(i0,"%23").replace(Ev,"%3F")}function kv(r){return Pv(r).replace(_v,"%2F")}function eo(r){if(r==null)return null;try{return decodeURIComponent(""+r)}catch{}return""+r}const Nv=/\/$/,Dv=r=>r.replace(Nv,"");function $a(r,e,t="/"){let n,i={},o="",a="";const s=e.indexOf("#");let l=e.indexOf("?");return l=s>=0&&l>s?-1:l,l>=0&&(n=e.slice(0,l),o=e.slice(l,s>0?s:e.length),i=r(o.slice(1))),s>=0&&(n=n||e.slice(0,s),a=e.slice(s,e.length)),n=Fv(n??e,t),{fullPath:n+o+a,path:n,query:i,hash:eo(a)}}function Mv(r,e){const t=e.query?r(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function Hu(r,e){return!e||!r.toLowerCase().startsWith(e.toLowerCase())?r:r.slice(e.length)||"/"}function Bv(r,e,t){const n=e.matched.length-1,i=t.matched.length-1;return n>-1&&n===i&&fi(e.matched[n],t.matched[i])&&u0(e.params,t.params)&&r(e.query)===r(t.query)&&e.hash===t.hash}function fi(r,e){return(r.aliasOf||r)===(e.aliasOf||e)}function u0(r,e){if(Object.keys(r).length!==Object.keys(e).length)return!1;for(const t in r)if(!Lv(r[t],e[t]))return!1;return!0}function Lv(r,e){return Sr(r)?Gu(r,e):Sr(e)?Gu(e,r):r===e}function Gu(r,e){return Sr(e)?r.length===e.length&&r.every((t,n)=>t===e[n]):r.length===1&&r[0]===e}function Fv(r,e){if(r.startsWith("/"))return r;if(!r)return e;const t=e.split("/"),n=r.split("/"),i=n[n.length-1];(i===".."||i===".")&&n.push("");let o=t.length-1,a,s;for(a=0;a<n.length;a++)if(s=n[a],s!==".")if(s==="..")o>1&&o--;else break;return t.slice(0,o).join("/")+"/"+n.slice(a).join("/")}const Qr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Hs=(function(r){return r.pop="pop",r.push="push",r})({}),ja=(function(r){return r.back="back",r.forward="forward",r.unknown="",r})({});function $v(r){if(!r)if(Jn){const e=document.querySelector("base");r=e&&e.getAttribute("href")||"/",r=r.replace(/^\w+:\/\/[^\/]+/,"")}else r="/";return r[0]!=="/"&&r[0]!=="#"&&(r="/"+r),Dv(r)}const jv=/^[^#]+#/;function Uv(r,e){return r.replace(jv,"#")+e}function Vv(r,e){const t=document.documentElement.getBoundingClientRect(),n=r.getBoundingClientRect();return{behavior:e.behavior,left:n.left-t.left-(e.left||0),top:n.top-t.top-(e.top||0)}}const wa=()=>({left:window.scrollX,top:window.scrollY});function Hv(r){let e;if("el"in r){const t=r.el,n=typeof t=="string"&&t.startsWith("#"),i=typeof t=="string"?n?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!i)return;e=Vv(i,r)}else e=r;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function qu(r,e){return(history.state?history.state.position-e:-1)+r}const Gs=new Map;function Gv(r,e){Gs.set(r,e)}function qv(r){const e=Gs.get(r);return Gs.delete(r),e}function zv(r){return typeof r=="string"||r&&typeof r=="object"}function c0(r){return typeof r=="string"||typeof r=="symbol"}let at=(function(r){return r[r.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",r[r.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",r[r.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",r[r.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",r[r.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",r})({});const d0=Symbol("");at.MATCHER_NOT_FOUND+"",at.NAVIGATION_GUARD_REDIRECT+"",at.NAVIGATION_ABORTED+"",at.NAVIGATION_CANCELLED+"",at.NAVIGATION_DUPLICATED+"";function hi(r,e){return Le(new Error,{type:r,[d0]:!0},e)}function jr(r,e){return r instanceof Error&&d0 in r&&(e==null||!!(r.type&e))}const Wv=["params","query","hash"];function Kv(r){if(typeof r=="string")return r;if(r.path!=null)return r.path;const e={};for(const t of Wv)t in r&&(e[t]=r[t]);return JSON.stringify(e,null,2)}function Xv(r){const e={};if(r===""||r==="?")return e;const t=(r[0]==="?"?r.slice(1):r).split("&");for(let n=0;n<t.length;++n){const i=t[n].replace(o0," "),o=i.indexOf("="),a=eo(o<0?i:i.slice(0,o)),s=o<0?null:eo(i.slice(o+1));if(a in e){let l=e[a];Sr(l)||(l=e[a]=[l]),l.push(s)}else e[a]=s}return e}function zu(r){let e="";for(let t in r){const n=r[t];if(t=Rv(t),n==null){n!==void 0&&(e+=(e.length?"&":"")+t);continue}(Sr(n)?n.map(i=>i&&Vs(i)):[n&&Vs(n)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+t,i!=null&&(e+="="+i))})}return e}function Yv(r){const e={};for(const t in r){const n=r[t];n!==void 0&&(e[t]=Sr(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return e}const Zv=Symbol(""),Wu=Symbol(""),_a=Symbol(""),Ml=Symbol(""),qs=Symbol("");function Ci(){let r=[];function e(n){return r.push(n),()=>{const i=r.indexOf(n);i>-1&&r.splice(i,1)}}function t(){r=[]}return{add:e,list:()=>r.slice(),reset:t}}function sn(r,e,t,n,i,o=a=>a()){const a=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((s,l)=>{const u=p=>{p===!1?l(hi(at.NAVIGATION_ABORTED,{from:t,to:e})):p instanceof Error?l(p):zv(p)?l(hi(at.NAVIGATION_GUARD_REDIRECT,{from:e,to:p})):(a&&n.enterCallbacks[i]===a&&typeof p=="function"&&a.push(p),s())},c=o(()=>r.call(n&&n.instances[i],e,t,u));let d=Promise.resolve(c);r.length<3&&(d=d.then(u)),d.catch(p=>l(p))})}function Ua(r,e,t,n,i=o=>o()){const o=[];for(const a of r)for(const s in a.components){let l=a.components[s];if(!(e!=="beforeRouteEnter"&&!a.instances[s]))if(n0(l)){const u=(l.__vccOpts||l)[e];u&&o.push(sn(u,t,n,a,s,i))}else{let u=l();o.push(()=>u.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${s}" at "${a.path}"`);const d=xv(c)?c.default:c;a.mods[s]=c,a.components[s]=d;const p=(d.__vccOpts||d)[e];return p&&sn(p,t,n,a,s,i)()}))}}return o}function Jv(r,e){const t=[],n=[],i=[],o=Math.max(e.matched.length,r.matched.length);for(let a=0;a<o;a++){const s=e.matched[a];s&&(r.matched.find(u=>fi(u,s))?n.push(s):t.push(s));const l=r.matched[a];l&&(e.matched.find(u=>fi(u,l))||i.push(l))}return[t,n,i]}let Qv=()=>location.protocol+"//"+location.host;function f0(r,e){const{pathname:t,search:n,hash:i}=e,o=r.indexOf("#");if(o>-1){let a=i.includes(r.slice(o))?r.slice(o).length:1,s=i.slice(a);return s[0]!=="/"&&(s="/"+s),Hu(s,"")}return Hu(t,r)+n+i}function eg(r,e,t,n){let i=[],o=[],a=null;const s=({state:p})=>{const h=f0(r,location),v=t.value,x=e.value;let w=0;if(p){if(t.value=h,e.value=p,a&&a===v){a=null;return}w=x?p.position-x.position:0}else n(h);i.forEach(g=>{g(t.value,v,{delta:w,type:Hs.pop,direction:w?w>0?ja.forward:ja.back:ja.unknown})})};function l(){a=t.value}function u(p){i.push(p);const h=()=>{const v=i.indexOf(p);v>-1&&i.splice(v,1)};return o.push(h),h}function c(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState(Le({},p.state,{scroll:wa()}),"")}}function d(){for(const p of o)p();o=[],window.removeEventListener("popstate",s),window.removeEventListener("pagehide",c),document.removeEventListener("visibilitychange",c)}return window.addEventListener("popstate",s),window.addEventListener("pagehide",c),document.addEventListener("visibilitychange",c),{pauseListeners:l,listen:u,destroy:d}}function Ku(r,e,t,n=!1,i=!1){return{back:r,current:e,forward:t,replaced:n,position:window.history.length,scroll:i?wa():null}}function tg(r){const{history:e,location:t}=window,n={value:f0(r,t)},i={value:e.state};i.value||o(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function o(l,u,c){const d=r.indexOf("#"),p=d>-1?(t.host&&document.querySelector("base")?r:r.slice(d))+l:Qv()+r+l;try{e[c?"replaceState":"pushState"](u,"",p),i.value=u}catch(h){console.error(h),t[c?"replace":"assign"](p)}}function a(l,u){o(l,Le({},e.state,Ku(i.value.back,l,i.value.forward,!0),u,{position:i.value.position}),!0),n.value=l}function s(l,u){const c=Le({},i.value,e.state,{forward:l,scroll:wa()});o(c.current,c,!0),o(l,Le({},Ku(n.value,l,null),{position:c.position+1},u),!1),n.value=l}return{location:n,state:i,push:s,replace:a}}function rg(r){r=$v(r);const e=tg(r),t=eg(r,e.state,e.location,e.replace);function n(o,a=!0){a||t.pauseListeners(),history.go(o)}const i=Le({location:"",base:r,go:n,createHref:Uv.bind(null,r)},e,t);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}let Nn=(function(r){return r[r.Static=0]="Static",r[r.Param=1]="Param",r[r.Group=2]="Group",r})({});var ft=(function(r){return r[r.Static=0]="Static",r[r.Param=1]="Param",r[r.ParamRegExp=2]="ParamRegExp",r[r.ParamRegExpEnd=3]="ParamRegExpEnd",r[r.EscapeNext=4]="EscapeNext",r})(ft||{});const ng={type:Nn.Static,value:""},ig=/[a-zA-Z0-9_]/;function og(r){if(!r)return[[]];if(r==="/")return[[ng]];if(!r.startsWith("/"))throw new Error(`Invalid path "${r}"`);function e(h){throw new Error(`ERR (${t})/"${u}": ${h}`)}let t=ft.Static,n=t;const i=[];let o;function a(){o&&i.push(o),o=[]}let s=0,l,u="",c="";function d(){u&&(t===ft.Static?o.push({type:Nn.Static,value:u}):t===ft.Param||t===ft.ParamRegExp||t===ft.ParamRegExpEnd?(o.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:Nn.Param,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function p(){u+=l}for(;s<r.length;){if(l=r[s++],l==="\\"&&t!==ft.ParamRegExp){n=t,t=ft.EscapeNext;continue}switch(t){case ft.Static:l==="/"?(u&&d(),a()):l===":"?(d(),t=ft.Param):p();break;case ft.EscapeNext:p(),t=n;break;case ft.Param:l==="("?t=ft.ParamRegExp:ig.test(l)?p():(d(),t=ft.Static,l!=="*"&&l!=="?"&&l!=="+"&&s--);break;case ft.ParamRegExp:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:t=ft.ParamRegExpEnd:c+=l;break;case ft.ParamRegExpEnd:d(),t=ft.Static,l!=="*"&&l!=="?"&&l!=="+"&&s--,c="";break;default:e("Unknown state");break}}return t===ft.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),d(),a(),i}const Xu="[^/]+?",ag={sensitive:!1,strict:!1,start:!0,end:!0};var Ht=(function(r){return r[r._multiplier=10]="_multiplier",r[r.Root=90]="Root",r[r.Segment=40]="Segment",r[r.SubSegment=30]="SubSegment",r[r.Static=40]="Static",r[r.Dynamic=20]="Dynamic",r[r.BonusCustomRegExp=10]="BonusCustomRegExp",r[r.BonusWildcard=-50]="BonusWildcard",r[r.BonusRepeatable=-20]="BonusRepeatable",r[r.BonusOptional=-8]="BonusOptional",r[r.BonusStrict=.7000000000000001]="BonusStrict",r[r.BonusCaseSensitive=.25]="BonusCaseSensitive",r})(Ht||{});const sg=/[.+*?^${}()[\]/\\]/g;function lg(r,e){const t=Le({},ag,e),n=[];let i=t.start?"^":"";const o=[];for(const u of r){const c=u.length?[]:[Ht.Root];t.strict&&!u.length&&(i+="/");for(let d=0;d<u.length;d++){const p=u[d];let h=Ht.Segment+(t.sensitive?Ht.BonusCaseSensitive:0);if(p.type===Nn.Static)d||(i+="/"),i+=p.value.replace(sg,"\\$&"),h+=Ht.Static;else if(p.type===Nn.Param){const{value:v,repeatable:x,optional:w,regexp:g}=p;o.push({name:v,repeatable:x,optional:w});const y=g||Xu;if(y!==Xu){h+=Ht.BonusCustomRegExp;try{`${y}`}catch(_){throw new Error(`Invalid custom RegExp for param "${v}" (${y}): `+_.message)}}let m=x?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;d||(m=w&&u.length<2?`(?:/${m})`:"/"+m),w&&(m+="?"),i+=m,h+=Ht.Dynamic,w&&(h+=Ht.BonusOptional),x&&(h+=Ht.BonusRepeatable),y===".*"&&(h+=Ht.BonusWildcard)}c.push(h)}n.push(c)}if(t.strict&&t.end){const u=n.length-1;n[u][n[u].length-1]+=Ht.BonusStrict}t.strict||(i+="/?"),t.end?i+="$":t.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const a=new RegExp(i,t.sensitive?"":"i");function s(u){const c=u.match(a),d={};if(!c)return null;for(let p=1;p<c.length;p++){const h=c[p]||"",v=o[p-1];d[v.name]=h&&v.repeatable?h.split("/"):h}return d}function l(u){let c="",d=!1;for(const p of r){(!d||!c.endsWith("/"))&&(c+="/"),d=!1;for(const h of p)if(h.type===Nn.Static)c+=h.value;else if(h.type===Nn.Param){const{value:v,repeatable:x,optional:w}=h,g=v in u?u[v]:"";if(Sr(g)&&!x)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const y=Sr(g)?g.join("/"):g;if(!y)if(w)p.length<2&&(c.endsWith("/")?c=c.slice(0,-1):d=!0);else throw new Error(`Missing required param "${v}"`);c+=y}}return c||"/"}return{re:a,score:n,keys:o,parse:s,stringify:l}}function ug(r,e){let t=0;for(;t<r.length&&t<e.length;){const n=e[t]-r[t];if(n)return n;t++}return r.length<e.length?r.length===1&&r[0]===Ht.Static+Ht.Segment?-1:1:r.length>e.length?e.length===1&&e[0]===Ht.Static+Ht.Segment?1:-1:0}function h0(r,e){let t=0;const n=r.score,i=e.score;for(;t<n.length&&t<i.length;){const o=ug(n[t],i[t]);if(o)return o;t++}if(Math.abs(i.length-n.length)===1){if(Yu(n))return 1;if(Yu(i))return-1}return i.length-n.length}function Yu(r){const e=r[r.length-1];return r.length>0&&e[e.length-1]<0}const cg={strict:!1,end:!0,sensitive:!1};function dg(r,e,t){const n=lg(og(r.path),t),i=Le(n,{record:r,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function fg(r,e){const t=[],n=new Map;e=Vu(cg,e);function i(d){return n.get(d)}function o(d,p,h){const v=!h,x=Ju(d);x.aliasOf=h&&h.record;const w=Vu(e,d),g=[x];if("alias"in d){const _=typeof d.alias=="string"?[d.alias]:d.alias;for(const E of _)g.push(Ju(Le({},x,{components:h?h.record.components:x.components,path:E,aliasOf:h?h.record:x})))}let y,m;for(const _ of g){const{path:E}=_;if(p&&E[0]!=="/"){const b=p.record.path,S=b[b.length-1]==="/"?"":"/";_.path=p.record.path+(E&&S+E)}if(y=dg(_,p,w),h?h.alias.push(y):(m=m||y,m!==y&&m.alias.push(y),v&&d.name&&!Qu(y)&&a(d.name)),p0(y)&&l(y),x.children){const b=x.children;for(let S=0;S<b.length;S++)o(b[S],y,h&&h.children[S])}h=h||y}return m?()=>{a(m)}:Vi}function a(d){if(c0(d)){const p=n.get(d);p&&(n.delete(d),t.splice(t.indexOf(p),1),p.children.forEach(a),p.alias.forEach(a))}else{const p=t.indexOf(d);p>-1&&(t.splice(p,1),d.record.name&&n.delete(d.record.name),d.children.forEach(a),d.alias.forEach(a))}}function s(){return t}function l(d){const p=vg(d,t);t.splice(p,0,d),d.record.name&&!Qu(d)&&n.set(d.record.name,d)}function u(d,p){let h,v={},x,w;if("name"in d&&d.name){if(h=n.get(d.name),!h)throw hi(at.MATCHER_NOT_FOUND,{location:d});w=h.record.name,v=Le(Zu(p.params,h.keys.filter(m=>!m.optional).concat(h.parent?h.parent.keys.filter(m=>m.optional):[]).map(m=>m.name)),d.params&&Zu(d.params,h.keys.map(m=>m.name))),x=h.stringify(v)}else if(d.path!=null)x=d.path,h=t.find(m=>m.re.test(x)),h&&(v=h.parse(x),w=h.record.name);else{if(h=p.name?n.get(p.name):t.find(m=>m.re.test(p.path)),!h)throw hi(at.MATCHER_NOT_FOUND,{location:d,currentLocation:p});w=h.record.name,v=Le({},p.params,d.params),x=h.stringify(v)}const g=[];let y=h;for(;y;)g.unshift(y.record),y=y.parent;return{name:w,path:x,params:v,matched:g,meta:pg(g)}}r.forEach(d=>o(d));function c(){t.length=0,n.clear()}return{addRoute:o,resolve:u,removeRoute:a,clearRoutes:c,getRoutes:s,getRecordMatcher:i}}function Zu(r,e){const t={};for(const n of e)n in r&&(t[n]=r[n]);return t}function Ju(r){const e={path:r.path,redirect:r.redirect,name:r.name,meta:r.meta||{},aliasOf:r.aliasOf,beforeEnter:r.beforeEnter,props:hg(r),children:r.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in r?r.components||null:r.component&&{default:r.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function hg(r){const e={},t=r.props||!1;if("component"in r)e.default=t;else for(const n in r.components)e[n]=typeof t=="object"?t[n]:t;return e}function Qu(r){for(;r;){if(r.record.aliasOf)return!0;r=r.parent}return!1}function pg(r){return r.reduce((e,t)=>Le(e,t.meta),{})}function vg(r,e){let t=0,n=e.length;for(;t!==n;){const o=t+n>>1;h0(r,e[o])<0?n=o:t=o+1}const i=gg(r);return i&&(n=e.lastIndexOf(i,n-1)),n}function gg(r){let e=r;for(;e=e.parent;)if(p0(e)&&h0(r,e)===0)return e}function p0({record:r}){return!!(r.name||r.components&&Object.keys(r.components).length||r.redirect)}function ec(r){const e=Ar(_a),t=Ar(Ml),n=Ee(()=>{const l=Rt(r.to);return e.resolve(l)}),i=Ee(()=>{const{matched:l}=n.value,{length:u}=l,c=l[u-1],d=t.matched;if(!c||!d.length)return-1;const p=d.findIndex(fi.bind(null,c));if(p>-1)return p;const h=tc(l[u-2]);return u>1&&tc(c)===h&&d[d.length-1].path!==h?d.findIndex(fi.bind(null,l[u-2])):p}),o=Ee(()=>i.value>-1&&wg(t.params,n.value.params)),a=Ee(()=>i.value>-1&&i.value===t.matched.length-1&&u0(t.params,n.value.params));function s(l={}){if(xg(l)){const u=e[Rt(r.replace)?"replace":"push"](Rt(r.to)).catch(Vi);return r.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:n,href:Ee(()=>n.value.href),isActive:o,isExactActive:a,navigate:s}}function yg(r){return r.length===1?r[0]:r}const mg=ot({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:ec,setup(r,{slots:e}){const t=or(ec(r)),{options:n}=Ar(_a),i=Ee(()=>({[rc(r.activeClass,n.linkActiveClass,"router-link-active")]:t.isActive,[rc(r.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const o=e.default&&yg(e.default(t));return r.custom?o:kl("a",{"aria-current":t.isExactActive?r.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:i.value},o)}}}),Wr=mg;function xg(r){if(!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)&&!r.defaultPrevented&&!(r.button!==void 0&&r.button!==0)){if(r.currentTarget&&r.currentTarget.getAttribute){const e=r.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return r.preventDefault&&r.preventDefault(),!0}}function wg(r,e){for(const t in e){const n=e[t],i=r[t];if(typeof n=="string"){if(n!==i)return!1}else if(!Sr(i)||i.length!==n.length||n.some((o,a)=>o!==i[a]))return!1}return!0}function tc(r){return r?r.aliasOf?r.aliasOf.path:r.path:""}const rc=(r,e,t)=>r??e??t,_g=ot({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(r,{attrs:e,slots:t}){const n=Ar(qs),i=Ee(()=>r.route||n.value),o=Ar(Wu,0),a=Ee(()=>{let u=Rt(o);const{matched:c}=i.value;let d;for(;(d=c[u])&&!d.components;)u++;return u}),s=Ee(()=>i.value.matched[a.value]);ko(Wu,Ee(()=>a.value+1)),ko(Zv,s),ko(qs,i);const l=W();return No(()=>[l.value,s.value,r.name],([u,c,d],[p,h,v])=>{c&&(c.instances[d]=u,h&&h!==c&&u&&u===p&&(c.leaveGuards.size||(c.leaveGuards=h.leaveGuards),c.updateGuards.size||(c.updateGuards=h.updateGuards))),u&&c&&(!h||!fi(c,h)||!p)&&(c.enterCallbacks[d]||[]).forEach(x=>x(u))},{flush:"post"}),()=>{const u=i.value,c=r.name,d=s.value,p=d&&d.components[c];if(!p)return nc(t.default,{Component:p,route:u});const h=d.props[c],v=h?h===!0?u.params:typeof h=="function"?h(u):h:null,w=kl(p,Le({},v,e,{onVnodeUnmounted:g=>{g.component.isUnmounted&&(d.instances[c]=null)},ref:l}));return nc(t.default,{Component:w,route:u})||w}}});function nc(r,e){if(!r)return null;const t=r(e);return t.length===1?t[0]:t}const bg=_g;function Eg(r){const e=fg(r.routes,r),t=r.parseQuery||Xv,n=r.stringifyQuery||zu,i=r.history,o=Ci(),a=Ci(),s=Ci(),l=f1(Qr);let u=Qr;Jn&&r.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=Fa.bind(null,H=>""+H),d=Fa.bind(null,kv),p=Fa.bind(null,eo);function h(H,ie){let $,R;return c0(H)?($=e.getRecordMatcher(H),R=ie):R=H,e.addRoute(R,$)}function v(H){const ie=e.getRecordMatcher(H);ie&&e.removeRoute(ie)}function x(){return e.getRoutes().map(H=>H.record)}function w(H){return!!e.getRecordMatcher(H)}function g(H,ie){if(ie=Le({},ie||l.value),typeof H=="string"){const D=$a(t,H,ie.path),q=e.resolve({path:D.path},ie),z=i.createHref(D.fullPath);return Le(D,q,{params:p(q.params),hash:eo(D.hash),redirectedFrom:void 0,href:z})}let $;if(H.path!=null)$=Le({},H,{path:$a(t,H.path,ie.path).path});else{const D=Le({},H.params);for(const q in D)D[q]==null&&delete D[q];$=Le({},H,{params:d(D)}),ie.params=d(ie.params)}const R=e.resolve($,ie),U=H.hash||"";R.params=c(p(R.params));const C=Mv(n,Le({},H,{hash:Tv(U),path:R.path})),I=i.createHref(C);return Le({fullPath:C,hash:U,query:n===zu?Yv(H.query):H.query||{}},R,{redirectedFrom:void 0,href:I})}function y(H){return typeof H=="string"?$a(t,H,l.value.path):Le({},H)}function m(H,ie){if(u!==H)return hi(at.NAVIGATION_CANCELLED,{from:ie,to:H})}function _(H){return S(H)}function E(H){return _(Le(y(H),{replace:!0}))}function b(H,ie){const $=H.matched[H.matched.length-1];if($&&$.redirect){const{redirect:R}=$;let U=typeof R=="function"?R(H,ie):R;return typeof U=="string"&&(U=U.includes("?")||U.includes("#")?U=y(U):{path:U},U.params={}),Le({query:H.query,hash:H.hash,params:U.path!=null?{}:H.params},U)}}function S(H,ie){const $=u=g(H),R=l.value,U=H.state,C=H.force,I=H.replace===!0,D=b($,R);if(D)return S(Le(y(D),{state:typeof D=="object"?Le({},U,D.state):U,force:C,replace:I}),ie||$);const q=$;q.redirectedFrom=ie;let z;return!C&&Bv(n,R,$)&&(z=hi(at.NAVIGATION_DUPLICATED,{to:q,from:R}),et(R,R,!0,!1)),(z?Promise.resolve(z):j(q,R)).catch(X=>jr(X)?jr(X,at.NAVIGATION_GUARD_REDIRECT)?X:Ve(X):G(X,q,R)).then(X=>{if(X){if(jr(X,at.NAVIGATION_GUARD_REDIRECT))return S(Le({replace:I},y(X.to),{state:typeof X.to=="object"?Le({},U,X.to.state):U,force:C}),ie||q)}else X=M(q,R,!0,I,U);return Y(q,R,X),X})}function B(H,ie){const $=m(H,ie);return $?Promise.reject($):Promise.resolve()}function L(H){const ie=zt.values().next().value;return ie&&typeof ie.runWithContext=="function"?ie.runWithContext(H):H()}function j(H,ie){let $;const[R,U,C]=Jv(H,ie);$=Ua(R.reverse(),"beforeRouteLeave",H,ie);for(const D of R)D.leaveGuards.forEach(q=>{$.push(sn(q,H,ie))});const I=B.bind(null,H,ie);return $.push(I),Ct($).then(()=>{$=[];for(const D of o.list())$.push(sn(D,H,ie));return $.push(I),Ct($)}).then(()=>{$=Ua(U,"beforeRouteUpdate",H,ie);for(const D of U)D.updateGuards.forEach(q=>{$.push(sn(q,H,ie))});return $.push(I),Ct($)}).then(()=>{$=[];for(const D of C)if(D.beforeEnter)if(Sr(D.beforeEnter))for(const q of D.beforeEnter)$.push(sn(q,H,ie));else $.push(sn(D.beforeEnter,H,ie));return $.push(I),Ct($)}).then(()=>(H.matched.forEach(D=>D.enterCallbacks={}),$=Ua(C,"beforeRouteEnter",H,ie,L),$.push(I),Ct($))).then(()=>{$=[];for(const D of a.list())$.push(sn(D,H,ie));return $.push(I),Ct($)}).catch(D=>jr(D,at.NAVIGATION_CANCELLED)?D:Promise.reject(D))}function Y(H,ie,$){s.list().forEach(R=>L(()=>R(H,ie,$)))}function M(H,ie,$,R,U){const C=m(H,ie);if(C)return C;const I=ie===Qr,D=Jn?history.state:{};$&&(R||I?i.replace(H.fullPath,Le({scroll:I&&D&&D.scroll},U)):i.push(H.fullPath,U)),l.value=H,et(H,ie,$,I),Ve()}let k;function K(){k||(k=i.listen((H,ie,$)=>{if(!wt.listening)return;const R=g(H),U=b(R,wt.currentRoute.value);if(U){S(Le(U,{replace:!0,force:!0}),R).catch(Vi);return}u=R;const C=l.value;Jn&&Gv(qu(C.fullPath,$.delta),wa()),j(R,C).catch(I=>jr(I,at.NAVIGATION_ABORTED|at.NAVIGATION_CANCELLED)?I:jr(I,at.NAVIGATION_GUARD_REDIRECT)?(S(Le(y(I.to),{force:!0}),R).then(D=>{jr(D,at.NAVIGATION_ABORTED|at.NAVIGATION_DUPLICATED)&&!$.delta&&$.type===Hs.pop&&i.go(-1,!1)}).catch(Vi),Promise.reject()):($.delta&&i.go(-$.delta,!1),G(I,R,C))).then(I=>{I=I||M(R,C,!1),I&&($.delta&&!jr(I,at.NAVIGATION_CANCELLED)?i.go(-$.delta,!1):$.type===Hs.pop&&jr(I,at.NAVIGATION_ABORTED|at.NAVIGATION_DUPLICATED)&&i.go(-1,!1)),Y(R,C,I)}).catch(Vi)}))}let ee=Ci(),J=Ci(),N;function G(H,ie,$){Ve(H);const R=J.list();return R.length?R.forEach(U=>U(H,ie,$)):console.error(H),Promise.reject(H)}function Re(){return N&&l.value!==Qr?Promise.resolve():new Promise((H,ie)=>{ee.add([H,ie])})}function Ve(H){return N||(N=!H,K(),ee.list().forEach(([ie,$])=>H?$(H):ie()),ee.reset()),H}function et(H,ie,$,R){const{scrollBehavior:U}=r;if(!Jn||!U)return Promise.resolve();const C=!$&&qv(qu(H.fullPath,0))||(R||!$)&&history.state&&history.state.scroll||null;return ha().then(()=>U(H,ie,C)).then(I=>I&&Hv(I)).catch(I=>G(I,H,ie))}const ze=H=>i.go(H);let Pt;const zt=new Set,wt={currentRoute:l,listening:!0,addRoute:h,removeRoute:v,clearRoutes:e.clearRoutes,hasRoute:w,getRoutes:x,resolve:g,options:r,push:_,replace:E,go:ze,back:()=>ze(-1),forward:()=>ze(1),beforeEach:o.add,beforeResolve:a.add,afterEach:s.add,onError:J.add,isReady:Re,install(H){H.component("RouterLink",Wr),H.component("RouterView",bg),H.config.globalProperties.$router=wt,Object.defineProperty(H.config.globalProperties,"$route",{enumerable:!0,get:()=>Rt(l)}),Jn&&!Pt&&l.value===Qr&&(Pt=!0,_(i.location).catch(R=>{}));const ie={};for(const R in Qr)Object.defineProperty(ie,R,{get:()=>l.value[R],enumerable:!0});H.provide(_a,wt),H.provide(Ml,hf(ie)),H.provide(qs,l);const $=H.unmount;zt.add(H),H.unmount=function(){zt.delete(H),zt.size<1&&(u=Qr,k&&k(),k=null,l.value=Qr,Pt=!1,N=!1),$()}}};function Ct(H){return H.reduce((ie,$)=>ie.then(()=>L($)),Promise.resolve())}return wt}function yi(){return Ar(_a)}function Ag(r){return Ar(Ml)}var zs=function(r,e){return zs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},zs(r,e)};function v0(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");zs(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Xo=function(){return Xo=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Xo.apply(this,arguments)};function mi(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function g0(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o}function y0(r,e){return function(t,n){e(t,n,r)}}function m0(r,e,t,n,i,o){function a(g){if(g!==void 0&&typeof g!="function")throw new TypeError("Function expected");return g}for(var s=n.kind,l=s==="getter"?"get":s==="setter"?"set":"value",u=!e&&r?n.static?r:r.prototype:null,c=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),d,p=!1,h=t.length-1;h>=0;h--){var v={};for(var x in n)v[x]=x==="access"?{}:n[x];for(var x in n.access)v.access[x]=n.access[x];v.addInitializer=function(g){if(p)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(g||null))};var w=(0,t[h])(s==="accessor"?{get:c.get,set:c.set}:c[l],v);if(s==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(d=a(w.get))&&(c.get=d),(d=a(w.set))&&(c.set=d),(d=a(w.init))&&i.unshift(d)}else(d=a(w))&&(s==="field"?i.unshift(d):c[l]=d)}u&&Object.defineProperty(u,n.name,c),p=!0}function x0(r,e,t){for(var n=arguments.length>2,i=0;i<e.length;i++)t=n?e[i].call(r,t):e[i].call(r);return n?t:void 0}function w0(r){return typeof r=="symbol"?r:"".concat(r)}function _0(r,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function b0(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function ce(r,e,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?o(c.value):i(c.value).then(s,l)}u((n=n.apply(r,e||[])).next())})}function E0(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(c){u=[6,c],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var ba=Object.create?(function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}):(function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]});function A0(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&ba(e,r,t)}function Yo(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bl(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o}function C0(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Bl(arguments[e]));return r}function S0(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}function I0(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))}function pi(r){return this instanceof pi?(this.v=r,this):new pi(r)}function O0(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(h){return function(v){return Promise.resolve(v).then(h,d)}}function s(h,v){n[h]&&(i[h]=function(x){return new Promise(function(w,g){o.push([h,x,w,g])>1||l(h,x)})},v&&(i[h]=v(i[h])))}function l(h,v){try{u(n[h](v))}catch(x){p(o[0][3],x)}}function u(h){h.value instanceof pi?Promise.resolve(h.value.v).then(c,d):p(o[0][2],h)}function c(h){l("next",h)}function d(h){l("throw",h)}function p(h,v){h(v),o.shift(),o.length&&l(o[0][0],o[0][1])}}function T0(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,o){e[i]=r[i]?function(a){return(t=!t)?{value:pi(r[i](a)),done:!1}:o?o(a):a}:o}}function R0(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof Yo=="function"?Yo(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=r[o]&&function(a){return new Promise(function(s,l){a=r[o](a),i(s,l,a.done,a.value)})}}function i(o,a,s,l){Promise.resolve(l).then(function(u){o({value:u,done:s})},a)}}function P0(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}var Cg=Object.create?(function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}):function(r,e){r.default=e},Ws=function(r){return Ws=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},Ws(r)};function k0(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t=Ws(r),n=0;n<t.length;n++)t[n]!=="default"&&ba(e,r,t[n]);return Cg(e,r),e}function N0(r){return r&&r.__esModule?r:{default:r}}function D0(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function M0(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t}function B0(r,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof r=="function"?e===r:r.has(e)}function L0(r,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],t&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),r.stack.push({value:e,dispose:n,async:t})}else t&&r.stack.push({async:!0});return e}var Sg=typeof SuppressedError=="function"?SuppressedError:function(r,e,t){var n=new Error(t);return n.name="SuppressedError",n.error=r,n.suppressed=e,n};function F0(r){function e(o){r.error=r.hasError?new Sg(o,r.error,"An error was suppressed during disposal."):o,r.hasError=!0}var t,n=0;function i(){for(;t=r.stack.pop();)try{if(!t.async&&n===1)return n=0,r.stack.push(t),Promise.resolve().then(i);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(o).then(i,function(a){return e(a),i()})}else n|=1}catch(a){e(a)}if(n===1)return r.hasError?Promise.reject(r.error):Promise.resolve();if(r.hasError)throw r.error}return i()}function $0(r,e){return typeof r=="string"&&/^\.\.?\//.test(r)?r.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,n,i,o,a){return n?e?".jsx":".js":i&&(!o||!a)?t:i+o+"."+a.toLowerCase()+"js"}):r}const Ig={__extends:v0,__assign:Xo,__rest:mi,__decorate:g0,__param:y0,__esDecorate:m0,__runInitializers:x0,__propKey:w0,__setFunctionName:_0,__metadata:b0,__awaiter:ce,__generator:E0,__createBinding:ba,__exportStar:A0,__values:Yo,__read:Bl,__spread:C0,__spreadArrays:S0,__spreadArray:I0,__await:pi,__asyncGenerator:O0,__asyncDelegator:T0,__asyncValues:R0,__makeTemplateObject:P0,__importStar:k0,__importDefault:N0,__classPrivateFieldGet:D0,__classPrivateFieldSet:M0,__classPrivateFieldIn:B0,__addDisposableResource:L0,__disposeResources:F0,__rewriteRelativeImportExtension:$0},Og=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:L0,get __assign(){return Xo},__asyncDelegator:T0,__asyncGenerator:O0,__asyncValues:R0,__await:pi,__awaiter:ce,__classPrivateFieldGet:D0,__classPrivateFieldIn:B0,__classPrivateFieldSet:M0,__createBinding:ba,__decorate:g0,__disposeResources:F0,__esDecorate:m0,__exportStar:A0,__extends:v0,__generator:E0,__importDefault:N0,__importStar:k0,__makeTemplateObject:P0,__metadata:b0,__param:y0,__propKey:w0,__read:Bl,__rest:mi,__rewriteRelativeImportExtension:$0,__runInitializers:x0,__setFunctionName:_0,__spread:C0,__spreadArray:I0,__spreadArrays:S0,__values:Yo,default:Ig},Symbol.toStringTag,{value:"Module"})),Tg=r=>r?(...e)=>r(...e):(...e)=>fetch(...e);class Ll extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class ic extends Ll{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class oc extends Ll{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ac extends Ll{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ks;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(Ks||(Ks={}));class Rg{constructor(e,{headers:t={},customFetch:n,region:i=Ks.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=Tg(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ce(this,arguments,void 0,function*(t,n={}){var i;try{const{headers:o,method:a,body:s,signal:l}=n;let u={},{region:c}=n;c||(c=this.region);const d=new URL(`${this.url}/${t}`);c&&c!=="any"&&(u["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let p;s&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&s instanceof Blob||s instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",p=s):typeof s=="string"?(u["Content-Type"]="text/plain",p=s):typeof FormData<"u"&&s instanceof FormData?p=s:(u["Content-Type"]="application/json",p=JSON.stringify(s)):p=s;const h=yield this.fetch(d.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),o),body:p,signal:l}).catch(g=>{throw g.name==="AbortError"?g:new ic(g)}),v=h.headers.get("x-relay-error");if(v&&v==="true")throw new oc(h);if(!h.ok)throw new ac(h);let x=((i=h.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),w;return x==="application/json"?w=yield h.json():x==="application/octet-stream"||x==="application/pdf"?w=yield h.blob():x==="text/event-stream"?w=h:x==="multipart/form-data"?w=yield h.formData():w=yield h.text(),{data:w,error:null,response:h}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new ic(o)}:{data:null,error:o,response:o instanceof ac||o instanceof oc?o.context:void 0}}})}}function j0(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Pg(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function n(){var i=!1;try{i=this instanceof n}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var kt={};const xi=Pg(Og);var go={},yo={},mo={},xo={},wo={},_o={},sc;function U0(){if(sc)return _o;sc=1,Object.defineProperty(_o,"__esModule",{value:!0});class r extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return _o.default=r,_o}var lc;function V0(){if(lc)return wo;lc=1,Object.defineProperty(wo,"__esModule",{value:!0});const e=xi.__importDefault(U0());class t{constructor(i){var o,a;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(o=i.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=i.signal,this.isMaybeSingle=(a=i.isMaybeSingle)!==null&&a!==void 0?a:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=new Headers(this.headers),this.headers.set(i,o),this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let s=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var u,c,d,p;let h=null,v=null,x=null,w=l.status,g=l.statusText;if(l.ok){if(this.method!=="HEAD"){const E=await l.text();E===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?v=E:v=JSON.parse(E))}const m=(c=this.headers.get("Prefer"))===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),_=(d=l.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");m&&_&&_.length>1&&(x=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(h={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,x=null,w=406,g="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const m=await l.text();try{h=JSON.parse(m),Array.isArray(h)&&l.status===404&&(v=[],h=null,w=200,g="OK")}catch{l.status===404&&m===""?(w=204,g="No Content"):h={message:m}}if(h&&this.isMaybeSingle&&(!((p=h?.details)===null||p===void 0)&&p.includes("0 rows"))&&(h=null,w=200,g="OK"),h&&this.shouldThrowOnError)throw new e.default(h)}return{error:h,data:v,count:x,status:w,statusText:g}});return this.shouldThrowOnError||(s=s.catch(l=>{var u,c,d;return{error:{message:`${(u=l?.name)!==null&&u!==void 0?u:"FetchError"}: ${l?.message}`,details:`${(c=l?.stack)!==null&&c!==void 0?c:""}`,hint:"",code:`${(d=l?.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),s.then(i,o)}returns(){return this}overrideTypes(){return this}}return wo.default=t,wo}var uc;function H0(){if(uc)return xo;uc=1,Object.defineProperty(xo,"__esModule",{value:!0});const e=xi.__importDefault(V0());class t extends e.default{select(i){let o=!1;const a=(i??"*").split("").map(s=>/\s/.test(s)&&!o?"":(s==='"'&&(o=!o),s)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:o=!0,nullsFirst:a,foreignTable:s,referencedTable:l=s}={}){const u=l?`${l}.order`:"order",c=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${c?`${c},`:""}${i}.${o?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:o,referencedTable:a=o}={}){const s=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(s,`${i}`),this}range(i,o,{foreignTable:a,referencedTable:s=a}={}){const l=typeof s>"u"?"offset":`${s}.offset`,u=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(u,`${o-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:o=!1,settings:a=!1,buffers:s=!1,wal:l=!1,format:u="text"}={}){var c;const d=[i?"analyze":null,o?"verbose":null,a?"settings":null,s?"buffers":null,l?"wal":null].filter(Boolean).join("|"),p=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${p}"; options=${d};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return xo.default=t,xo}var cc;function Fl(){if(cc)return mo;cc=1,Object.defineProperty(mo,"__esModule",{value:!0});const e=xi.__importDefault(H0()),t=new RegExp("[,()]");class n extends e.default{eq(o,a){return this.url.searchParams.append(o,`eq.${a}`),this}neq(o,a){return this.url.searchParams.append(o,`neq.${a}`),this}gt(o,a){return this.url.searchParams.append(o,`gt.${a}`),this}gte(o,a){return this.url.searchParams.append(o,`gte.${a}`),this}lt(o,a){return this.url.searchParams.append(o,`lt.${a}`),this}lte(o,a){return this.url.searchParams.append(o,`lte.${a}`),this}like(o,a){return this.url.searchParams.append(o,`like.${a}`),this}likeAllOf(o,a){return this.url.searchParams.append(o,`like(all).{${a.join(",")}}`),this}likeAnyOf(o,a){return this.url.searchParams.append(o,`like(any).{${a.join(",")}}`),this}ilike(o,a){return this.url.searchParams.append(o,`ilike.${a}`),this}ilikeAllOf(o,a){return this.url.searchParams.append(o,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(o,a){return this.url.searchParams.append(o,`ilike(any).{${a.join(",")}}`),this}is(o,a){return this.url.searchParams.append(o,`is.${a}`),this}in(o,a){const s=Array.from(new Set(a)).map(l=>typeof l=="string"&&t.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(o,`in.(${s})`),this}contains(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cs.{${a.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(a)}`),this}containedBy(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cd.{${a.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(a)}`),this}rangeGt(o,a){return this.url.searchParams.append(o,`sr.${a}`),this}rangeGte(o,a){return this.url.searchParams.append(o,`nxl.${a}`),this}rangeLt(o,a){return this.url.searchParams.append(o,`sl.${a}`),this}rangeLte(o,a){return this.url.searchParams.append(o,`nxr.${a}`),this}rangeAdjacent(o,a){return this.url.searchParams.append(o,`adj.${a}`),this}overlaps(o,a){return typeof a=="string"?this.url.searchParams.append(o,`ov.${a}`):this.url.searchParams.append(o,`ov.{${a.join(",")}}`),this}textSearch(o,a,{config:s,type:l}={}){let u="";l==="plain"?u="pl":l==="phrase"?u="ph":l==="websearch"&&(u="w");const c=s===void 0?"":`(${s})`;return this.url.searchParams.append(o,`${u}fts${c}.${a}`),this}match(o){return Object.entries(o).forEach(([a,s])=>{this.url.searchParams.append(a,`eq.${s}`)}),this}not(o,a,s){return this.url.searchParams.append(o,`not.${a}.${s}`),this}or(o,{foreignTable:a,referencedTable:s=a}={}){const l=s?`${s}.or`:"or";return this.url.searchParams.append(l,`(${o})`),this}filter(o,a,s){return this.url.searchParams.append(o,`${a}.${s}`),this}}return mo.default=n,mo}var dc;function G0(){if(dc)return yo;dc=1,Object.defineProperty(yo,"__esModule",{value:!0});const e=xi.__importDefault(Fl());class t{constructor(i,{headers:o={},schema:a,fetch:s}){this.url=i,this.headers=new Headers(o),this.schema=a,this.fetch=s}select(i,o){const{head:a=!1,count:s}=o??{},l=a?"HEAD":"GET";let u=!1;const c=(i??"*").split("").map(d=>/\s/.test(d)&&!u?"":(d==='"'&&(u=!u),d)).join("");return this.url.searchParams.set("select",c),s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:o,defaultToNull:a=!0}={}){var s;const l="POST";if(o&&this.headers.append("Prefer",`count=${o}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const u=i.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(u.length>0){const c=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(i,{onConflict:o,ignoreDuplicates:a=!1,count:s,defaultToNull:l=!0}={}){var u;const c="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),s&&this.headers.append("Prefer",`count=${s}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((p,h)=>p.concat(Object.keys(h)),[]);if(d.length>0){const p=[...new Set(d)].map(h=>`"${h}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(i,{count:o}={}){var a;const s="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:i}={}){var o;const a="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return yo.default=t,yo}var fc;function kg(){if(fc)return go;fc=1,Object.defineProperty(go,"__esModule",{value:!0});const r=xi,e=r.__importDefault(G0()),t=r.__importDefault(Fl());class n{constructor(o,{headers:a={},schema:s,fetch:l}={}){this.url=o,this.headers=new Headers(a),this.schemaName=s,this.fetch=l}from(o){const a=new URL(`${this.url}/${o}`);return new e.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new n(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:s=!1,get:l=!1,count:u}={}){var c;let d;const p=new URL(`${this.url}/rpc/${o}`);let h;s||l?(d=s?"HEAD":"GET",Object.entries(a).filter(([x,w])=>w!==void 0).map(([x,w])=>[x,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([x,w])=>{p.searchParams.append(x,w)})):(d="POST",h=a);const v=new Headers(this.headers);return u&&v.set("Prefer",`count=${u}`),new t.default({method:d,url:p,headers:v,schema:this.schemaName,body:h,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}}return go.default=n,go}var hc;function Ng(){if(hc)return kt;hc=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.PostgrestError=kt.PostgrestBuilder=kt.PostgrestTransformBuilder=kt.PostgrestFilterBuilder=kt.PostgrestQueryBuilder=kt.PostgrestClient=void 0;const r=xi,e=r.__importDefault(kg());kt.PostgrestClient=e.default;const t=r.__importDefault(G0());kt.PostgrestQueryBuilder=t.default;const n=r.__importDefault(Fl());kt.PostgrestFilterBuilder=n.default;const i=r.__importDefault(H0());kt.PostgrestTransformBuilder=i.default;const o=r.__importDefault(V0());kt.PostgrestBuilder=o.default;const a=r.__importDefault(U0());return kt.PostgrestError=a.default,kt.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:o.default,PostgrestError:a.default},kt}var q0=Ng();const z0=j0(q0),Dg=kh({__proto__:null,default:z0},[q0]),{PostgrestClient:Mg,PostgrestQueryBuilder:PI,PostgrestFilterBuilder:kI,PostgrestTransformBuilder:NI,PostgrestBuilder:DI,PostgrestError:MI}=z0||Dg;class Bg{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const n=t.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const n=this.getWebSocketConstructor();return new n(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Lg="2.80.0",Fg=`realtime-js/${Lg}`,$g="1.0.0",Xs=1e4,jg=1e3,Ug=100;var Hi;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Hi||(Hi={}));var ht;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(ht||(ht={}));var wr;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(wr||(wr={}));var Ys;(function(r){r.websocket="websocket"})(Ys||(Ys={}));var Pn;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Pn||(Pn={}));class Vg{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const i=t.getUint8(1),o=t.getUint8(2);let a=this.HEADER_LENGTH+2;const s=n.decode(e.slice(a,a+i));a=a+i;const l=n.decode(e.slice(a,a+o));a=a+o;const u=JSON.parse(n.decode(e.slice(a,e.byteLength)));return{ref:null,topic:s,event:l,payload:u}}}class W0{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ke;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(Ke||(Ke={}));const pc=(r,e,t={})=>{var n;const i=(n=t.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((o,a)=>(o[a]=Hg(a,r,e,i),o),{}):{}},Hg=(r,e,t,n)=>{const i=e.find(s=>s.name===r),o=i?.type,a=t[r];return o&&!n.includes(o)?K0(o,a):Zs(a)},K0=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return Wg(e,t)}switch(r){case Ke.bool:return Gg(e);case Ke.float4:case Ke.float8:case Ke.int2:case Ke.int4:case Ke.int8:case Ke.numeric:case Ke.oid:return qg(e);case Ke.json:case Ke.jsonb:return zg(e);case Ke.timestamp:return Kg(e);case Ke.abstime:case Ke.date:case Ke.daterange:case Ke.int4range:case Ke.int8range:case Ke.money:case Ke.reltime:case Ke.text:case Ke.time:case Ke.timestamptz:case Ke.timetz:case Ke.tsrange:case Ke.tstzrange:return Zs(e);default:return Zs(e)}},Zs=r=>r,Gg=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},qg=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},zg=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},Wg=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,n=r[t];if(r[0]==="{"&&n==="}"){let o;const a=r.slice(1,t);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(s=>K0(e,s))}return r},Kg=r=>typeof r=="string"?r.replace(" ","T"):r,X0=r=>{const e=new URL(r);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Va{constructor(e,t,n={},i=Xs){this.channel=e,this.event=t,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var vc;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(vc||(vc={}));class Gi{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:o,onLeave:a,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Gi.syncState(this.state,i,o,a),this.pendingDiffs.forEach(l=>{this.state=Gi.syncDiff(this.state,l,o,a)}),this.pendingDiffs=[],s()}),this.channel._on(n.diff,{},i=>{const{onJoin:o,onLeave:a,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Gi.syncDiff(this.state,i,o,a),s())}),this.onJoin((i,o,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:a})}),this.onLeave((i,o,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,i){const o=this.cloneDeep(e),a=this.transformState(t),s={},l={};return this.map(o,(u,c)=>{a[u]||(l[u]=c)}),this.map(a,(u,c)=>{const d=o[u];if(d){const p=c.map(w=>w.presence_ref),h=d.map(w=>w.presence_ref),v=c.filter(w=>h.indexOf(w.presence_ref)<0),x=d.filter(w=>p.indexOf(w.presence_ref)<0);v.length>0&&(s[u]=v),x.length>0&&(l[u]=x)}else s[u]=c}),this.syncDiff(o,{joins:s,leaves:l},n,i)}static syncDiff(e,t,n,i){const{joins:o,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(o,(s,l)=>{var u;const c=(u=e[s])!==null&&u!==void 0?u:[];if(e[s]=this.cloneDeep(l),c.length>0){const d=e[s].map(h=>h.presence_ref),p=c.filter(h=>d.indexOf(h.presence_ref)<0);e[s].unshift(...p)}n(s,c,l)}),this.map(a,(s,l)=>{let u=e[s];if(!u)return;const c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),e[s]=u,i(s,u,l),u.length===0&&delete e[s]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const i=e[n];return"metas"in i?t[n]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[n]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var gc;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(gc||(gc={}));var qi;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(qi||(qi={}));var Vr;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Vr||(Vr={}));class $l{constructor(e,t={config:{}},n){var i,o;if(this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=ht.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Va(this,wr.join,this.params,this.timeout),this.rejoinTimer=new W0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ht.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ht.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this._on(wr.reply,{},(a,s)=>{this._trigger(this._replyEventName(s),a)}),this.presence=new Gi(this),this.broadcastEndpointURL=X0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var n,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==ht.closed){const{config:{broadcast:a,presence:s,private:l}}=this.params,u=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(h=>h.filter))!==null&&i!==void 0?i:[],c=!!this.bindings[qi.PRESENCE]&&this.bindings[qi.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,d={},p={broadcast:a,presence:Object.assign(Object.assign({},s),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(h=>e?.(Vr.CHANNEL_ERROR,h)),this._onClose(()=>e?.(Vr.CLOSED)),this.updateJoinPayload(Object.assign({config:p},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:h})=>{var v;if(this.socket.setAuth(),h===void 0){e?.(Vr.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,w=(v=x?.length)!==null&&v!==void 0?v:0,g=[];for(let y=0;y<w;y++){const m=x[y],{filter:{event:_,schema:E,table:b,filter:S}}=m,B=h&&h[y];if(B&&B.event===_&&B.schema===E&&B.table===b&&B.filter===S)g.push(Object.assign(Object.assign({},m),{id:B.id}));else{this.unsubscribe(),this.state=ht.errored,e?.(Vr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(Vr.SUBSCRIBED);return}}).receive("error",h=>{this.state=ht.errored,e?.(Vr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{e?.(Vr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===ht.joined&&e===qi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async httpSend(e,t,n={}){var i;const o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},s=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(s.status===202)return{success:!0};let l=s.statusText;try{const u=await s.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(e,t={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,s,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(s=(a=this.params)===null||a===void 0?void 0:a.config)===null||s===void 0?void 0:s.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ht.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(wr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new Va(this,wr.leave,{},e),n.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ht.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const i=new AbortController,o=setTimeout(()=>i.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(o),a}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Va(this,e,t,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Ug){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var i,o;const a=e.toLocaleLowerCase(),{close:s,error:l,leave:u,join:c}=wr;if(n&&[s,l,u,c].indexOf(a)>=0&&n!==this._joinRef())return;let p=this._onMessage(a,t,n);if(t&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(h=>{var v,x,w;return((v=h.filter)===null||v===void 0?void 0:v.event)==="*"||((w=(x=h.filter)===null||x===void 0?void 0:x.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===a}).map(h=>h.callback(p,n)):(o=this.bindings[a])===null||o===void 0||o.filter(h=>{var v,x,w,g,y,m;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in h){const _=h.id,E=(v=h.filter)===null||v===void 0?void 0:v.event;return _&&((x=t.ids)===null||x===void 0?void 0:x.includes(_))&&(E==="*"||E?.toLocaleLowerCase()===((w=t.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const _=(y=(g=h?.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return _==="*"||_===((m=t?.event)===null||m===void 0?void 0:m.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===a}).map(h=>{if(typeof p=="object"&&"ids"in p){const v=p.data,{schema:x,table:w,commit_timestamp:g,type:y,errors:m}=v;p=Object.assign(Object.assign({},{schema:x,table:w,commit_timestamp:g,eventType:y,new:{},old:{},errors:m}),this._getPayloadRecords(v))}h.callback(p,n)})}_isClosed(){return this.state===ht.closed}_isJoined(){return this.state===ht.joined}_isJoining(){return this.state===ht.joining}_isLeaving(){return this.state===ht.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const i=e.toLocaleLowerCase(),o={type:i,filter:t,callback:n};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&$l.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(wr.close,{},e)}_onError(e){this._on(wr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ht.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=pc(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=pc(e.columns,e.old_record)),t}}const Ha=()=>{},bo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Xg=[1e3,2e3,5e3,1e4],Yg=1e4,Zg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Jg{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xs,this.transport=null,this.heartbeatIntervalMs=bo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ha,this.ref=0,this.reconnectTimer=null,this.logger=Ha,this.conn=null,this.sendBuffer=[],this.serializer=new Vg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((n=t?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Ys.websocket}`,this.httpEndpoint=X0(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Bg.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:$g}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Hi.connecting:return Pn.Connecting;case Hi.open:return Pn.Open;case Hi.closing:return Pn.Closing;default:return Pn.Closed}}isConnected(){return this.connectionState()===Pn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===n);if(i)return i;{const o=new $l(`realtime:${e}`,t,this);return this.channels.push(o),o}}push(e){const{topic:t,event:n,payload:i,ref:o}=e,a=()=>{this.encode(e,s=>{var l;(l=this.conn)===null||l===void 0||l.send(s)})};this.log("push",`${t} ${n} (${o})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(jg,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},bo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:o,ref:a}=t,s=a?`(${a})`:"",l=o.status||"";this.log("receive",`${l} ${n} ${i} ${s}`.trim(),o),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(i,o,a)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(wr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${n}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([Zg],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(n=>{const i={access_token:t,version:Fg};t&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(wr.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new W0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},bo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,i,o,a,s,l,u,c;if(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(n=e?.timeout)!==null&&n!==void 0?n:Xs,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:bo.HEARTBEAT_INTERVAL,this.worker=(o=e?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=e?.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(s=e?.heartbeatCallback)!==null&&s!==void 0?s:Ha,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e?.reconnectAfterMs)!==null&&l!==void 0?l:(d=>Xg[d-1]||Yg),this.encode=(u=e?.encode)!==null&&u!==void 0?u:((d,p)=>p(JSON.stringify(d))),this.decode=(c=e?.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class jl extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function nt(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class Qg extends jl{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Js extends jl{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const Ul=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),e2=()=>Response,Qs=r=>{if(Array.isArray(r))return r.map(t=>Qs(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,n])=>{const i=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=Qs(n)}),e},t2=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},Ga=r=>{var e;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(e=r.error)===null||e===void 0?void 0:e.message)||JSON.stringify(r)},r2=(r,e,t)=>ce(void 0,void 0,void 0,function*(){const n=yield e2();r instanceof n&&!t?.noResolveJson?r.json().then(i=>{const o=r.status||500,a=i?.statusCode||o+"";e(new Qg(Ga(i),o,a))}).catch(i=>{e(new Js(Ga(i),i))}):e(new Js(Ga(r),r))}),n2=(r,e,t,n)=>{const i={method:r,headers:e?.headers||{}};return r==="GET"||!n?i:(t2(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(n)):i.body=n,e?.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),t))};function so(r,e,t,n,i,o){return ce(this,void 0,void 0,function*(){return new Promise((a,s)=>{r(t,n2(e,n,i,o)).then(l=>{if(!l.ok)throw l;return n?.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>r2(l,s,n))})})}function to(r,e,t,n){return ce(this,void 0,void 0,function*(){return so(r,"GET",e,t,n)})}function xr(r,e,t,n,i){return ce(this,void 0,void 0,function*(){return so(r,"POST",e,n,i,t)})}function el(r,e,t,n,i){return ce(this,void 0,void 0,function*(){return so(r,"PUT",e,n,i,t)})}function i2(r,e,t,n){return ce(this,void 0,void 0,function*(){return so(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function Vl(r,e,t,n,i){return ce(this,void 0,void 0,function*(){return so(r,"DELETE",e,n,i,t)})}class o2{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return ce(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(nt(e))return{data:null,error:e};throw e}})}}var Y0;class a2{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Y0]="BlobDownloadBuilder",this.promise=null}asStream(){return new o2(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ce(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(nt(e))return{data:null,error:e};throw e}})}}Y0=Symbol.toStringTag;const s2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},yc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class l2{constructor(e,t={},n,i){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=Ul(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,n,i){return ce(this,void 0,void 0,function*(){try{let o;const a=Object.assign(Object.assign({},yc),i);let s=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",a.cacheControl),l&&!o.has("metadata")&&o.append("metadata",this.encodeMetadata(l))):(o=n,s["cache-control"]=`max-age=${a.cacheControl}`,s["content-type"]=a.contentType,l&&(s["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!a.duplex&&(a.duplex="half")),i?.headers&&(s=Object.assign(Object.assign({},s),i.headers));const u=this._removeEmptyFolders(t),c=this._getFinalPath(u),d=yield(e=="PUT"?el:xr)(this.fetch,`${this.url}/object/${c}`,o,Object.assign({headers:s},a?.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(nt(o))return{data:null,error:o};throw o}})}upload(e,t,n){return ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,i){return ce(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),a=this._getFinalPath(o),s=new URL(this.url+`/object/upload/sign/${a}`);s.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:yc.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const d=yield el(this.fetch,s.toString(),l,{headers:c});return{data:{path:o,fullPath:d.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(nt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return ce(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);t?.upsert&&(i["x-upsert"]="true");const o=yield xr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),a=new URL(this.url+o.url),s=a.searchParams.get("token");if(!s)throw new jl("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:s},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(nt(n))return{data:null,error:n};throw n}})}update(e,t,n){return ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return ce(this,void 0,void 0,function*(){try{return{data:yield xr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(nt(i))return{data:null,error:i};throw i}})}copy(e,t,n){return ce(this,void 0,void 0,function*(){try{return{data:{path:(yield xr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(nt(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,n){return ce(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),o=yield xr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n?.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(nt(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,n){return ce(this,void 0,void 0,function*(){try{const i=yield xr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${o}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(nt(i))return{data:null,error:i};throw i}})}download(e,t){const i=typeof t?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(t?.transform||{}),a=o?`?${o}`:"",s=this._getFinalPath(e),l=()=>to(this.fetch,`${this.url}/${i}/${s}${a}`,{headers:this.headers,noResolveJson:!0});return new a2(l,this.shouldThrowOnError)}info(e){return ce(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield to(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Qs(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(nt(n))return{data:null,error:n};throw n}})}exists(e){return ce(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield i2(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(nt(n)&&n instanceof Js){const i=n.originalError;if([400,404].includes(i?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),i=[],o=t?.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&i.push(o);const s=typeof t?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(t?.transform||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${u}`)}}}remove(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Vl(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(nt(t))return{data:null,error:t};throw t}})}list(e,t,n){return ce(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},s2),t),{prefix:e||""});return{data:yield xr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(nt(i))return{data:null,error:i};throw i}})}listV2(e,t){return ce(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield xr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},t),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(nt(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Z0="2.80.0",J0={"X-Client-Info":`storage-js/${Z0}`};class u2{constructor(e,t={},n,i){this.shouldThrowOnError=!1;const o=new URL(e);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},J0),t),this.fetch=Ul(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return ce(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield to(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(nt(t))return{data:null,error:t};throw t}})}getBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield to(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(nt(t))return{data:null,error:t};throw t}})}createBucket(e){return ce(this,arguments,void 0,function*(t,n={public:!1}){try{return{data:yield xr(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(nt(i))return{data:null,error:i};throw i}})}updateBucket(e,t){return ce(this,void 0,void 0,function*(){try{return{data:yield el(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(nt(n))return{data:null,error:n};throw n}})}emptyBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield xr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(nt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Vl(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(nt(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}class c2{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},J0),t),this.fetch=Ul(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield xr(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(nt(t))return{data:null,error:t};throw t}})}listBuckets(e){return ce(this,void 0,void 0,function*(){try{const t=new URLSearchParams;e?.limit!==void 0&&t.set("limit",e.limit.toString()),e?.offset!==void 0&&t.set("offset",e.offset.toString()),e?.sortColumn&&t.set("sortColumn",e.sortColumn),e?.sortOrder&&t.set("sortOrder",e.sortOrder),e?.search&&t.set("search",e.search);const n=t.toString(),i=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield to(this.fetch,i,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(nt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Vl(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(nt(t))return{data:null,error:t};throw t}})}}const Hl={"X-Client-Info":`storage-js/${Z0}`,"Content-Type":"application/json"};class Q0 extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function tr(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}class qa extends Q0{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class d2 extends Q0{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var mc;(function(r){r.InternalError="InternalError",r.S3VectorConflictException="S3VectorConflictException",r.S3VectorNotFoundException="S3VectorNotFoundException",r.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",r.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",r.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(mc||(mc={}));const Gl=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),f2=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},xc=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),h2=(r,e,t)=>ce(void 0,void 0,void 0,function*(){if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!t?.noResolveJson){const i=r.status||500,o=r;if(typeof o.json=="function")o.json().then(a=>{const s=a?.statusCode||a?.code||i+"";e(new qa(xc(a),i,s))}).catch(()=>{const a=i+"",s=o.statusText||`HTTP ${i} error`;e(new qa(s,i,a))});else{const a=i+"",s=o.statusText||`HTTP ${i} error`;e(new qa(s,i,a))}}else e(new d2(xc(r),r))}),p2=(r,e,t,n)=>{const i={method:r,headers:e?.headers||{}};return n?(f2(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(n)):i.body=n,Object.assign(Object.assign({},i),t)):i};function v2(r,e,t,n,i,o){return ce(this,void 0,void 0,function*(){return new Promise((a,s)=>{r(t,p2(e,n,i,o)).then(l=>{if(!l.ok)throw l;if(n?.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>a(l)).catch(l=>h2(l,s,n))})})}function rr(r,e,t,n,i){return ce(this,void 0,void 0,function*(){return v2(r,"POST",e,n,i,t)})}class g2{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Hl),t),this.fetch=Gl(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return ce(this,void 0,void 0,function*(){try{return{data:(yield rr(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(tr(t))return{data:null,error:t};throw t}})}getIndex(e,t){return ce(this,void 0,void 0,function*(){try{return{data:yield rr(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(tr(n))return{data:null,error:n};throw n}})}listIndexes(e){return ce(this,void 0,void 0,function*(){try{return{data:yield rr(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(tr(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return ce(this,void 0,void 0,function*(){try{return{data:(yield rr(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(tr(n))return{data:null,error:n};throw n}})}}class y2{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Hl),t),this.fetch=Gl(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return ce(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield rr(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(tr(t))return{data:null,error:t};throw t}})}getVectors(e){return ce(this,void 0,void 0,function*(){try{return{data:yield rr(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(tr(t))return{data:null,error:t};throw t}})}listVectors(e){return ce(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield rr(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(tr(t))return{data:null,error:t};throw t}})}queryVectors(e){return ce(this,void 0,void 0,function*(){try{return{data:yield rr(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(tr(t))return{data:null,error:t};throw t}})}deleteVectors(e){return ce(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield rr(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(tr(t))return{data:null,error:t};throw t}})}}class m2{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Hl),t),this.fetch=Gl(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:(yield rr(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(tr(t))return{data:null,error:t};throw t}})}getBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield rr(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(tr(t))return{data:null,error:t};throw t}})}listBuckets(){return ce(this,arguments,void 0,function*(e={}){try{return{data:yield rr(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(tr(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:(yield rr(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(tr(t))return{data:null,error:t};throw t}})}}class x2 extends m2{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new w2(this.url,this.headers,e,this.fetch)}}class w2 extends g2{constructor(e,t,n,i){super(e,t,i),this.vectorBucketName=n}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ce(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ce(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ce(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ce(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new _2(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class _2 extends y2{constructor(e,t,n,i,o){super(e,t,o),this.vectorBucketName=n,this.indexName=i}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ce(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ce(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ce(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ce(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ce(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class b2 extends u2{constructor(e,t={},n,i){super(e,t,n,i)}from(e){return new l2(this.url,this.headers,e,this.fetch)}get vectors(){return new x2(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new c2(this.url+"/iceberg",this.headers,this.fetch)}}const E2="2.80.0";let Pi="";typeof Deno<"u"?Pi="deno":typeof document<"u"?Pi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Pi="react-native":Pi="node";const A2={"X-Client-Info":`supabase-js-${Pi}/${E2}`},C2={headers:A2},S2={schema:"public"},I2={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},O2={},T2=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),R2=()=>Headers,P2=(r,e,t)=>{const n=T2(t),i=R2();return async(o,a)=>{var s;const l=(s=await e())!==null&&s!==void 0?s:r;let u=new i(a?.headers);return u.has("apikey")||u.set("apikey",r),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(o,Object.assign(Object.assign({},a),{headers:u}))}};function k2(r){return r.endsWith("/")?r:r+"/"}function N2(r,e){var t,n;const{db:i,auth:o,realtime:a,global:s}=r,{db:l,auth:u,realtime:c,global:d}=e,p={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),o),realtime:Object.assign(Object.assign({},c),a),storage:{},global:Object.assign(Object.assign(Object.assign({},d),s),{headers:Object.assign(Object.assign({},(t=d?.headers)!==null&&t!==void 0?t:{}),(n=s?.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return r.accessToken?p.accessToken=r.accessToken:delete p.accessToken,p}function D2(r){const e=r?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(k2(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const eh="2.80.0",Qn=30*1e3,tl=3,za=tl*Qn,M2="http://localhost:9999",B2="supabase.auth.token",L2={"X-Client-Info":`gotrue-js/${eh}`},rl="X-Supabase-Api-Version",th={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},F2=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,$2=600*1e3;class ro extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function he(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class j2 extends ro{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function U2(r){return he(r)&&r.name==="AuthApiError"}class kn extends ro{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class mn extends ro{constructor(e,t,n,i){super(e,n,i),this.name=t,this.status=n}}class yr extends mn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function V2(r){return he(r)&&r.name==="AuthSessionMissingError"}class Gn extends mn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Eo extends mn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ao extends mn{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function H2(r){return he(r)&&r.name==="AuthImplicitGrantRedirectError"}class wc extends mn{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class nl extends mn{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Wa(r){return he(r)&&r.name==="AuthRetryableFetchError"}class _c extends mn{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class il extends mn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Zo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),bc=` 	
\r=`.split(""),G2=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<bc.length;e+=1)r[bc[e].charCodeAt(0)]=-2;for(let e=0;e<Zo.length;e+=1)r[Zo[e].charCodeAt(0)]=e;return r})();function Ec(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(Zo[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(Zo[n]),e.queuedBits-=6}}function rh(r,e,t){const n=G2[r];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function Ac(r){const e=[],t=a=>{e.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=a=>{W2(a,n,t)};for(let a=0;a<r.length;a+=1)rh(r.charCodeAt(a),i,o);return e.join("")}function q2(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function z2(r,e){for(let t=0;t<r.length;t+=1){let n=r.charCodeAt(t);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(r.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}q2(n,e)}}function W2(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let n=1;n<6;n+=1)if((r>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function ci(r){const e=[],t={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<r.length;i+=1)rh(r.charCodeAt(i),t,n);return new Uint8Array(e)}function K2(r){const e=[];return z2(r,t=>e.push(t)),new Uint8Array(e)}function Dn(r){const e=[],t={queue:0,queuedBits:0},n=i=>{e.push(i)};return r.forEach(i=>Ec(i,t,n)),Ec(null,t,n),e.join("")}function X2(r){return Math.round(Date.now()/1e3)+r}function Y2(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const Nt=()=>typeof window<"u"&&typeof document<"u",En={tested:!1,writable:!1},nh=()=>{if(!Nt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(En.tested)return En.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),En.tested=!0,En.writable=!0}catch{En.tested=!0,En.writable=!1}return En.writable};function Z2(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return t.searchParams.forEach((n,i)=>{e[i]=n}),e}const ih=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),J2=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",ei=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},An=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},en=async(r,e)=>{await r.removeItem(e)};class Ea{constructor(){this.promise=new Ea.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Ea.promiseConstructor=Promise;function Ka(r){const e=r.split(".");if(e.length!==3)throw new il("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!F2.test(e[n]))throw new il("JWT not in base64url format");return{header:JSON.parse(Ac(e[0])),payload:JSON.parse(Ac(e[1])),signature:ci(e[2]),raw:{header:e[0],payload:e[1]}}}async function Q2(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function ey(r,e){return new Promise((n,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await r(o);if(!e(o,null,a)){n(a);return}}catch(a){if(!e(o,a)){i(a);return}}})()})}function ty(r){return("0"+r.toString(16)).substr(-2)}function ry(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let i="";for(let o=0;o<56;o++)i+=t.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,ty).join("")}async function ny(r){const t=new TextEncoder().encode(r),n=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(n);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function iy(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await ny(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function qn(r,e,t=!1){const n=ry();let i=n;t&&(i+="/PASSWORD_RECOVERY"),await ei(r,`${e}-code-verifier`,i);const o=await iy(n);return[o,n===o?"plain":"s256"]}const oy=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ay(r){const e=r.headers.get(rl);if(!e||!e.match(oy))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function sy(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function ly(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const uy=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function zn(r){if(!uy.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Xa(){const r={};return new Proxy(r,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const n=t.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function cy(r,e){return new Proxy(r,{get:(t,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,n,i)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,n,i)}})}function Cc(r){return JSON.parse(JSON.stringify(r))}const On=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),dy=[502,503,504];async function Sc(r){var e;if(!J2(r))throw new nl(On(r),0);if(dy.includes(r.status))throw new nl(On(r),r.status);let t;try{t=await r.json()}catch(o){throw new kn(On(o),o)}let n;const i=ay(r);if(i&&i.getTime()>=th["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new _c(On(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new yr}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new _c(On(t),r.status,t.weak_password.reasons);throw new j2(On(t),r.status||500,n)}const fy=(r,e,t,n)=>{const i={method:r,headers:e?.headers||{}};return r==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),t))};async function xe(r,e,t,n){var i;const o=Object.assign({},n?.headers);o[rl]||(o[rl]=th["2024-01-01"].name),n?.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const a=(i=n?.query)!==null&&i!==void 0?i:{};n?.redirectTo&&(a.redirect_to=n.redirectTo);const s=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await hy(r,e,t+s,{headers:o,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(l):{data:Object.assign({},l),error:null}}async function hy(r,e,t,n,i,o){const a=fy(e,n,i,o);let s;try{s=await r(t,Object.assign({},a))}catch(l){throw console.error(l),new nl(On(l),0)}if(s.ok||await Sc(s),n?.noResolveJson)return s;try{return await s.json()}catch(l){await Sc(l)}}function mr(r){var e;let t=null;gy(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=X2(r.expires_in)));const n=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:n},error:null}}function Ic(r){const e=mr(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=r.weak_password),e}function un(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function py(r){return{data:r,error:null}}function vy(r){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:o}=r,a=mi(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),s={action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:o},l=Object.assign({},a);return{data:{properties:s,user:l},error:null}}function Oc(r){return r}function gy(r){return r.access_token&&r.refresh_token&&r.expires_in}const Ya=["global","local","others"];class yy{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=ih(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Ya[0]){if(Ya.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ya.join(", ")}`);try{return await xe(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await xe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:un})}catch(n){if(he(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=mi(e,["options"]),i=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(i.new_email=n?.newEmail,delete i.newEmail),await xe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:vy,redirectTo:t?.redirectTo})}catch(t){if(he(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await xe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:un})}catch(t){if(he(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,i,o,a,s,l;try{const u={nextPage:null,lastPage:0,total:0},c=await xe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Oc});if(c.error)throw c.error;const d=await c.json(),p=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,h=(l=(s=c.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return h.length>0&&(h.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=x}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(he(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){zn(e);try{return await xe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:un})}catch(t){if(he(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){zn(e);try{return await xe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:un})}catch(n){if(he(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){zn(e);try{return await xe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:un})}catch(n){if(he(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){zn(e.userId);try{const{data:t,error:n}=await xe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:n}}catch(t){if(he(t))return{data:null,error:t};throw t}}async _deleteFactor(e){zn(e.userId),zn(e.id);try{return{data:await xe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(he(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,n,i,o,a,s,l;try{const u={nextPage:null,lastPage:0,total:0},c=await xe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Oc});if(c.error)throw c.error;const d=await c.json(),p=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,h=(l=(s=c.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return h.length>0&&(h.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=x}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(he(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await xe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(he(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await xe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(he(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await xe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(he(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await xe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(he(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await xe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(he(t))return{data:null,error:t};throw t}}}function Tc(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}const Wn={debug:!!(globalThis&&nh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class oh extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class my extends oh{}async function xy(r,e,t){Wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Wn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,i.name);try{return await t()}finally{Wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,i.name)}}else{if(e===0)throw Wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new my(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Wn.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function wy(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ah(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function _y(r){return parseInt(r,16)}function by(r){const e=new TextEncoder().encode(r);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function Ey(r){var e;const{chainId:t,domain:n,expirationTime:i,issuedAt:o=new Date,nonce:a,notBefore:s,requestId:l,resources:u,scheme:c,uri:d,version:p}=r;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((e=r.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const h=ah(r.address),v=c?`${c}://${n}`:n,x=r.statement?`${r.statement}
`:"",w=`${v} wants you to sign in with your Ethereum account:
${h}

${x}`;let g=`URI: ${d}
Version: ${p}
Chain ID: ${t}${a?`
Nonce: ${a}`:""}
Issued At: ${o.toISOString()}`;if(i&&(g+=`
Expiration Time: ${i.toISOString()}`),s&&(g+=`
Not Before: ${s.toISOString()}`),l&&(g+=`
Request ID: ${l}`),u){let y=`
Resources:`;for(const m of u){if(!m||typeof m!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${m}`);y+=`
- ${m}`}g+=y}return`${w}
${g}`}class ct extends Error{constructor({message:e,code:t,cause:n,name:i}){var o;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(o=i??(n instanceof Error?n.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=t}}class Jo extends ct{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function Ay({error:r,options:e}){var t,n,i;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ct({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((t=o.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new ct({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(e.mediation==="conditional"&&((n=o.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new ct({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ct({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new ct({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new ct({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return o.pubKeyCredParams.filter(s=>s.type==="public-key").length===0?new ct({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new ct({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const a=window.location.hostname;if(sh(a)){if(o.rp.id!==a)return new ct({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new ct({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new ct({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function Cy({error:r,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ct({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new ct({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const n=window.location.hostname;if(sh(n)){if(t.rpId!==n)return new ct({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new ct({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class Sy{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Iy=new Sy;function Oy(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:e,user:t,excludeCredentials:n}=r,i=mi(r,["challenge","user","excludeCredentials"]),o=ci(e).buffer,a=Object.assign(Object.assign({},t),{id:ci(t.id).buffer}),s=Object.assign(Object.assign({},i),{challenge:o,user:a});if(n&&n.length>0){s.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];s.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:ci(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return s}function Ty(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:e,allowCredentials:t}=r,n=mi(r,["challenge","allowCredentials"]),i=ci(e).buffer,o=Object.assign(Object.assign({},n),{challenge:i});if(t&&t.length>0){o.allowCredentials=new Array(t.length);for(let a=0;a<t.length;a++){const s=t[a];o.allowCredentials[a]=Object.assign(Object.assign({},s),{id:ci(s.id).buffer,type:s.type||"public-key",transports:s.transports})}}return o}function Ry(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r;return{id:r.id,rawId:r.id,response:{attestationObject:Dn(new Uint8Array(r.response.attestationObject)),clientDataJSON:Dn(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Py(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r,n=r.getClientExtensionResults(),i=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:Dn(new Uint8Array(i.authenticatorData)),clientDataJSON:Dn(new Uint8Array(i.clientDataJSON)),signature:Dn(new Uint8Array(i.signature)),userHandle:i.userHandle?Dn(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function sh(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function Rc(){var r,e;return!!(Nt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function ky(r){try{const e=await navigator.credentials.create(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Jo("Browser returned unexpected credential type",e)}:{data:null,error:new Jo("Empty credential response",e)}}catch(e){return{data:null,error:Ay({error:e,options:r})}}}async function Ny(r){try{const e=await navigator.credentials.get(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Jo("Browser returned unexpected credential type",e)}:{data:null,error:new Jo("Empty credential response",e)}}catch(e){return{data:null,error:Cy({error:e,options:r})}}}const Dy={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},My={userVerification:"preferred",hints:["security-key"]};function Qo(...r){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),t=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of r)if(i)for(const o in i){const a=i[o];if(a!==void 0)if(Array.isArray(a))n[o]=a;else if(t(a))n[o]=a;else if(e(a)){const s=n[o];e(s)?n[o]=Qo(s,a):n[o]=Qo(a)}else n[o]=a}return n}function By(r,e){return Qo(Dy,r,e||{})}function Ly(r,e){return Qo(My,r,e||{})}class Fy{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:n,signal:i},o){try{const{data:a,error:s}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!a)return{data:null,error:s};const l=i??Iy.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:u}=a.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(a.webauthn.type){case"create":{const u=By(a.webauthn.credential_options.publicKey,o?.create),{data:c,error:d}=await ky({publicKey:u,signal:l});return c?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:c}},error:null}:{data:null,error:d}}case"request":{const u=Ly(a.webauthn.credential_options.publicKey,o?.request),{data:c,error:d}=await Ny(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:u,signal:l}));return c?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:c}},error:null}:{data:null,error:d}}}}catch(a){return he(a)?{data:null,error:a}:{data:null,error:new kn("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:t,webauthn:n}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}},o){if(!t)return{data:null,error:new ro("rpId is required for WebAuthn authentication")};try{if(!Rc())return{data:null,error:new kn("Browser does not support WebAuthn",null)};const{data:a,error:s}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:n},signal:i},{request:o});if(!a)return{data:null,error:s};const{webauthn:l}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:l.type,rpId:t,rpOrigins:n,credential_response:l.credential_response}})}catch(a){return he(a)?{data:null,error:a}:{data:null,error:new kn("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i},o){if(!t)return{data:null,error:new ro("rpId is required for WebAuthn registration")};try{if(!Rc())return{data:null,error:new kn("Browser does not support WebAuthn",null)};const{data:a,error:s}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(c=>{var d;return(d=c.data)===null||d===void 0?void 0:d.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===e&&p.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c?.id}):void 0),{data:null,error:s};const{data:l,error:u}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:t,rpOrigins:n},signal:i},{create:o});return l?this._verify({factorId:a.id,challengeId:l.challengeId,webauthn:{rpId:t,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(a){return he(a)?{data:null,error:a}:{data:null,error:new kn("Unexpected error in register",a)}}}}wy();const $y={url:M2,storageKey:B2,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:L2,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Pc(r,e,t){return await t()}const Kn={};class no{get jwks(){var e,t;return(t=(e=Kn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Kn[this.storageKey]=Object.assign(Object.assign({},Kn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Kn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Kn[this.storageKey]=Object.assign(Object.assign({},Kn[this.storageKey]),{cachedAt:e})}constructor(e){var t,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},$y),e);if(this.storageKey=o.storageKey,this.instanceID=(t=no.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,no.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Nt()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new yy({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=ih(o.fetch),this.lock=o.lock||Pc,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:Nt()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=xy:this.lock=Pc,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Fy(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:nh()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Tc(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Tc(this.memoryStorage)),Nt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${eh}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},n="none";if(Nt()&&(t=Z2(window.location.href),this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce")),Nt()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:o}=await this._getSessionFromURL(t,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),H2(o)){const l=(e=o.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:s}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",s),await this._saveSession(a),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return he(t)?this._returnResult({error:t}):this._returnResult({error:new kn("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,i;try{const o=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:mr}),{data:a,error:s}=o;if(s||!a)return this._returnResult({data:{user:null,session:null},error:s});const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(o){if(he(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var t,n,i;try{let o;if("email"in e){const{email:c,password:d,options:p}=e;let h=null,v=null;this.flowType==="pkce"&&([h,v]=await qn(this.storage,this.storageKey)),o=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p?.emailRedirectTo,body:{email:c,password:d,data:(t=p?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:h,code_challenge_method:v},xform:mr})}else if("phone"in e){const{phone:c,password:d,options:p}=e;o=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(n=p?.data)!==null&&n!==void 0?n:{},channel:(i=p?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:mr})}else throw new Eo("You must provide either an email or phone number and a password");const{data:a,error:s}=o;if(s||!a)return this._returnResult({data:{user:null,session:null},error:s});const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(o){if(he(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:o,password:a,options:s}=e;t=await xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:Ic})}else if("phone"in e){const{phone:o,password:a,options:s}=e;t=await xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:Ic})}else throw new Eo("You must provide either an email or phone number and a password");const{data:n,error:i}=t;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const o=new Gn;return this._returnResult({data:{user:null,session:null},error:o})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(t){if(he(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,n,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,n,i,o,a,s,l,u,c,d,p;let h,v;if("message"in e)h=e.message,v=e.signature;else{const{chain:x,wallet:w,statement:g,options:y}=e;let m;if(Nt())if(typeof w=="object")m=w;else{const L=window;if("ethereum"in L&&typeof L.ethereum=="object"&&"request"in L.ethereum&&typeof L.ethereum.request=="function")m=L.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!y?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");m=w}const _=new URL((t=y?.url)!==null&&t!==void 0?t:window.location.href),E=await m.request({method:"eth_requestAccounts"}).then(L=>L).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!E||E.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const b=ah(E[0]);let S=(n=y?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!S){const L=await m.request({method:"eth_chainId"});S=_y(L)}const B={domain:_.host,address:b,statement:g,uri:_.href,version:"1",chainId:S,nonce:(i=y?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(o=y?.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(s=y?.signInWithEthereum)===null||s===void 0?void 0:s.expirationTime,notBefore:(l=y?.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=y?.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=y?.signInWithEthereum)===null||c===void 0?void 0:c.resources};h=Ey(B),v=await m.request({method:"personal_sign",params:[by(h),b]})}try{const{data:x,error:w}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:v},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:mr});if(w)throw w;if(!x||!x.session||!x.user){const g=new Gn;return this._returnResult({data:{user:null,session:null},error:g})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:w})}catch(x){if(he(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(e){var t,n,i,o,a,s,l,u,c,d,p,h;let v,x;if("message"in e)v=e.message,x=e.signature;else{const{chain:w,wallet:g,statement:y,options:m}=e;let _;if(Nt())if(typeof g=="object")_=g;else{const b=window;if("solana"in b&&typeof b.solana=="object"&&("signIn"in b.solana&&typeof b.solana.signIn=="function"||"signMessage"in b.solana&&typeof b.solana.signMessage=="function"))_=b.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!m?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=g}const E=new URL((t=m?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in _&&_.signIn){const b=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},m?.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),y?{statement:y}:null));let S;if(Array.isArray(b)&&b[0]&&typeof b[0]=="object")S=b[0];else if(b&&typeof b=="object"&&"signedMessage"in b&&"signature"in b)S=b;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)v=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),x=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${E.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(i=(n=m?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=m?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...!((a=m?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...!((s=m?.signInWithSolana)===null||s===void 0)&&s.chainId?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...!((l=m?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...!((u=m?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...!((d=(c=m?.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||d===void 0)&&d.length?["Resources",...m.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const b=await _.signMessage(new TextEncoder().encode(v),"utf8");if(!b||!(b instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=b}}try{const{data:w,error:g}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Dn(x)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:mr});if(g)throw g;if(!w||!w.session||!w.user){const y=new Gn;return this._returnResult({data:{user:null,session:null},error:y})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:g})}catch(w){if(he(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(e){const t=await An(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(t??"").split("/");try{const{data:o,error:a}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:mr});if(await en(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!o||!o.session||!o.user){const s=new Gn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:s})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:a})}catch(o){if(he(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:t,provider:n,token:i,access_token:o,nonce:a}=e,s=await xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:mr}),{data:l,error:u}=s;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const c=new Gn;return this._returnResult({data:{user:null,session:null},error:c})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(t){if(he(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,n,i,o,a;try{if("email"in e){const{email:s,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await qn(this.storage,this.storageKey));const{error:d}=await xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:(t=l?.data)!==null&&t!==void 0?t:{},create_user:(n=l?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in e){const{phone:s,options:l}=e,{data:u,error:c}=await xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:s,data:(i=l?.data)!==null&&i!==void 0?i:{},create_user:(o=l?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(a=l?.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:c})}throw new Eo("You must provide either an email or phone number.")}catch(s){if(he(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async verifyOtp(e){var t,n;try{let i,o;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:s}=await xe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:mr});if(s)throw s;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,u=a.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(he(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var t,n,i;try{let o=null,a=null;this.flowType==="pkce"&&([o,a]=await qn(this.storage,this.storageKey));const s=await xe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:py});return this._returnResult(s)}catch(o){if(he(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new yr;const{error:i}=await xe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(he(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:o}=e,{error:a}=await xe(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:n,type:i,options:o}=e,{data:a,error:s}=await xe(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:s})}throw new Eo("You must provide either an email or phone number and a type")}catch(t){if(he(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await An(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<za:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const a=await An(this.userStorage,this.storageKey+"-user");a?.user?e.user=a.user:e.user=Xa()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=cy(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:un}):await this._useSession(async t=>{var n,i,o;const{data:a,error:s}=t;if(s)throw s;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new yr}:await xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:un})})}catch(t){if(he(t))return V2(t)&&(await this._removeSession(),await en(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:i,error:o}=n;if(o)throw o;if(!i.session)throw new yr;const a=i.session;let s=null,l=null;this.flowType==="pkce"&&e.email!=null&&([s,l]=await qn(this.storage,this.storageKey));const{data:u,error:c}=await xe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:l}),jwt:a.access_token,xform:un});if(c)throw c;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(n){if(he(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new yr;const t=Date.now()/1e3;let n=t,i=!0,o=null;const{payload:a}=Ka(e.access_token);if(a.exp&&(n=a.exp,i=n<=t),i){const{data:s,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!s)return{data:{user:null,session:null},error:null};o=s}else{const{data:s,error:l}=await this._getUser(e.access_token);if(l)throw l;o={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(t){if(he(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:a,error:s}=t;if(s)throw s;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!e?.refresh_token)throw new yr;const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(he(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!Nt())throw new Ao("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ao(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new wc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ao("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new wc("No code detected.");const{data:y,error:m}=await this._exchangeCodeForSession(e.code);if(m)throw m;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:o,refresh_token:a,expires_in:s,expires_at:l,token_type:u}=e;if(!o||!s||!a||!u)throw new Ao("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(s);let p=c+d;l&&(p=parseInt(l));const h=p-c;h*1e3<=Qn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const v=p-d;c-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,p,c):c-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,p,c);const{data:x,error:w}=await this._getUser(o);if(w)throw w;const g={provider_token:n,provider_refresh_token:i,access_token:o,expires_in:d,expires_at:p,refresh_token:a,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:e.type},error:null})}catch(n){if(he(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await An(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:i,error:o}=t;if(o)return this._returnResult({error:o});const a=(n=i.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:s}=await this.admin.signOut(a,e);if(s&&!(U2(s)&&(s.status===404||s.status===401||s.status===403)))return this._returnResult({error:s})}return e!=="others"&&(await this._removeSession(),await en(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=Y2(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,i;try{const{data:{session:o},error:a}=t;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,t={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await qn(this.storage,this.storageKey,!0));try{return await xe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(he(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(he(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:n,error:i}=await this._useSession(async o=>{var a,s,l,u,c;const{data:d,error:p}=o;if(p)throw p;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await xe(this.fetch,"GET",h,{headers:this.headers,jwt:(c=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return Nt()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n?.url),this._returnResult({data:{provider:e.provider,url:n?.url},error:null})}catch(n){if(he(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var n;try{const{error:i,data:{session:o}}=t;if(i)throw i;const{options:a,provider:s,token:l,access_token:u,nonce:c}=e,d=await xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=o?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:s,id_token:l,access_token:u,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:mr}),{data:p,error:h}=d;return h?this._returnResult({data:{user:null,session:null},error:h}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new Gn}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:h}))}catch(i){if(he(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,i;const{data:o,error:a}=t;if(a)throw a;return await xe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(he(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await ey(async i=>(i>0&&await Q2(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await xe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:mr})),(i,o)=>{const a=200*Math.pow(2,i);return o&&Wa(o)&&Date.now()+a-n<Qn})}catch(n){if(this._debug(t,"error",n),he(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Nt()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await An(this.storage,this.storageKey);if(i&&this.userStorage){let a=await An(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await ei(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a?.user)!==null&&e!==void 0?e:Xa()}else if(i&&!i.user&&!i.user){const a=await An(this.storage,this.storageKey+"-user");a&&a?.user?(i.user=a.user,await en(this.storage,this.storageKey+"-user"),await ei(this.storage,this.storageKey,i)):i.user=Xa()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const o=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<za;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${za}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),Wa(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:s}=await this._getUser(i.access_token);!s&&a?.user?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new yr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Ea;const{data:o,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new yr;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const s={data:o.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(o){if(this._debug(i,"error",o),he(o)){const a={data:null,error:o};return Wa(o)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,t)}catch(l){o.push(l)}});if(await Promise.all(a),o.length>0){for(let s=0;s<o.length;s+=1)console.error(o[s]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&t.user&&await ei(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const o=Cc(i);await ei(this.storage,this.storageKey,o)}else{const i=Cc(t);await ei(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await en(this.storage,this.storageKey),await en(this.storage,this.storageKey+"-code-verifier"),await en(this.storage,this.storageKey+"-user"),this.userStorage&&await en(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Nt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Qn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/Qn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Qn}ms, refresh threshold is ${tl} ticks`),i<=tl&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof oh)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Nt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const i=[`provider=${encodeURIComponent(t)}`];if(n?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,a]=await qn(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(s.toString())}if(n?.queryParams){const o=new URLSearchParams(n.queryParams);i.push(o.toString())}return n?.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:i,error:o}=t;return o?this._returnResult({data:null,error:o}):await xe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(he(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,i;const{data:o,error:a}=t;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:u}=await xe(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:(n=o?.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l?.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(t){if(he(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:o}=t;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Ry(e.webauthn.credential_response):Py(e.webauthn.credential_response)})}:{code:e.code}),{data:s,error:l}=await xe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),this._returnResult({data:s,error:l}))})}catch(t){if(he(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:o}=t;if(o)return this._returnResult({data:null,error:o});const a=await xe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});if(a.error)return a;const{data:s}=a;if(s.type!=="webauthn")return{data:s,error:null};switch(s.webauthn.type){case"create":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:Oy(s.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:Ty(s.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(he(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=t?.factors)!==null&&e!==void 0?e:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:n},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Ka(n.access_token);let a=null;o.aal&&(a=o.aal);let s=a;((t=(e=n.user.factors)===null||e===void 0?void 0:e.filter(c=>c.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(s="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:s,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;return i?this._returnResult({data:null,error:i}):n?await xe(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new yr})})}catch(t){if(he(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new yr});const a=await xe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:s=>({data:s,error:null})});return a.data&&a.data.redirect_url&&Nt()&&!t?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(n){if(he(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new yr});const a=await xe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:s=>({data:s,error:null})});return a.data&&a.data.redirect_url&&Nt()&&!t?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(n){if(he(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(s=>s.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(s=>s.kid===e),n&&this.jwks_cached_at+$2>i)return n;const{data:o,error:a}=await xe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,n=o.keys.find(s=>s.kid===e),!n)?null:n}async getClaims(e,t={}){try{let n=e;if(!n){const{data:h,error:v}=await this.getSession();if(v||!h.session)return this._returnResult({data:null,error:v});n=h.session.access_token}const{header:i,payload:o,signature:a,raw:{header:s,payload:l}}=Ka(n);t?.allowExpired||sy(o.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!u){const{error:h}=await this.getUser(n);if(h)throw h;return{data:{claims:o,header:i,signature:a},error:null}}const c=ly(i.alg),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,a,K2(`${s}.${l}`)))throw new il("Invalid JWT signature");return{data:{claims:o,header:i,signature:a},error:null}}catch(n){if(he(n))return this._returnResult({data:null,error:n});throw n}}}no.nextInstanceID={};const jy=no;class Uy extends jy{constructor(e){super(e)}}class Vy{constructor(e,t,n){var i,o,a;this.supabaseUrl=e,this.supabaseKey=t;const s=D2(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const l=`sb-${s.hostname.split(".")[0]}-auth-token`,u={db:S2,realtime:O2,auth:Object.assign(Object.assign({},I2),{storageKey:l}),global:C2},c=N2(n??{},u);this.storageKey=(i=c.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=c.global.headers)!==null&&o!==void 0?o:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=c.auth)!==null&&a!==void 0?a:{},this.headers,c.global.fetch),this.fetch=P2(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new Mg(new URL("rest/v1",s).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new b2(this.storageUrl.href,this.headers,this.fetch,n?.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new Rg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,userStorage:o,storageKey:a,flowType:s,lock:l,debug:u,throwOnError:c},d,p){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Uy({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,userStorage:o,flowType:s,lock:l,debug:u,throwOnError:c,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Jg(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n?.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Hy=(r,e,t)=>new Vy(r,e,t);function Gy(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const e=r.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Gy()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const qy="https://qatxikvgjlogwdopocvm.supabase.co",zy="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFhdHhpa3ZnamxvZ3dkb3BvY3ZtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI0NTkxNzYsImV4cCI6MjA3ODAzNTE3Nn0.8fbqBRhTRDy0n-zn9YrmzdFbK3orm51awvDgBWMzumw",ae=Hy(qy,zy),Wy={class:"bg-[#8B0000] text-white shadow-lg sticky top-0 z-50"},Ky={class:"container mx-auto px-6 py-4"},Xy={class:"flex items-center justify-between"},Yy={class:"hidden md:block"},Zy={class:"flex items-center space-x-8"},Jy={key:0},Qy={key:1},em={key:2,class:"text-sm text-yellow-200 font-semibold"},tm={key:3},rm={key:4},nm={key:5},im={key:6},om={key:7},am={key:8},sm={key:9},lm={class:"md:hidden"},um={key:0,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},cm={key:1,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},dm={key:0,class:"md:hidden mt-4 pb-4"},fm={class:"flex flex-col space-y-4"},hm={key:0},pm={key:1},vm={key:2,class:"text-sm text-yellow-200 font-semibold"},gm={key:3},ym={key:4},mm={key:5},xm={key:6},wm={key:7},_m={key:8},bm={key:9},Em=ot({__name:"Navbar",setup(r){const e=W(!1),t=W(!1),n=W(null),i=W(""),o=yi();let a=null;const s=()=>{e.value=!e.value},l=()=>{e.value=!1},u=async()=>{const{data:w}=await ae.auth.getSession(),g=w.session,y=localStorage.getItem("userId"),m=localStorage.getItem("userRole"),_=localStorage.getItem("userName");if(g){const E=g.user.user_metadata?.role??m??null,b=g.user.user_metadata?.full_name??_??g.user.email??"";t.value=!0,n.value=E,i.value=b,E&&!m&&localStorage.setItem("userRole",E),b&&!_&&localStorage.setItem("userName",b),localStorage.setItem("userId",g.user.id);return}y?(t.value=!0,n.value=m,i.value=_??""):(t.value=!1,n.value=null,i.value="")},c=async()=>{try{const{data:{session:w}}=await ae.auth.getSession();if(w){const{error:g}=await ae.auth.signOut({scope:"local"});g&&g.message!=="Auth session missing!"&&console.warn("Error al cerrar sesin en el servidor:",g)}}catch(w){w instanceof Error&&!w.message.includes("Auth session missing")&&console.warn("Error al cerrar sesin:",w)}localStorage.removeItem("userId"),localStorage.removeItem("userRole"),localStorage.removeItem("userName"),t.value=!1,n.value=null,i.value="",o.push("/login")},d=()=>{u()};sr(()=>{u(),a=ae.auth.onAuthStateChange(()=>{u()}),window.addEventListener("storage",d)}),ga(()=>{a?.data.subscription.unsubscribe(),window.removeEventListener("storage",d)});const p=Ee(()=>n.value==="admin"?"/admin":"/cartelera"),h=Ee(()=>n.value==="admin"?"Panel Admin":"Cartelera"),v=Ee(()=>i.value||"Usuario"),x=Ee(()=>n.value==="estudiante");return(w,g)=>{const y=lr("router-link");return O(),T("header",Wy,[f("nav",Ky,[f("div",Xy,[g[11]||(g[11]=f("div",{class:"flex items-center space-x-2"},[f("h1",{class:"text-2xl font-bold tracking-wide"},"CINE ULEAM")],-1)),f("div",Yy,[f("ul",Zy,[f("li",null,[ue(y,{to:"/",class:"hover:text-yellow-400 transition-colors duration-200 font-medium"},{default:we(()=>[...g[1]||(g[1]=[de(" Inicio ",-1)])]),_:1})]),t.value?(O(),T("li",Jy,[ue(y,{to:p.value,class:"hover:text-yellow-400 transition-colors duration-200 font-medium"},{default:we(()=>[de(P(h.value),1)]),_:1},8,["to"])])):Z("",!0),n.value==="admin"?(O(),T("li",Qy,[ue(y,{to:"/escanear-qr",class:"hover:text-yellow-400 transition-colors duration-200 font-medium"},{default:we(()=>[...g[2]||(g[2]=[de(" Escner QR ",-1)])]),_:1})])):Z("",!0),t.value?(O(),T("li",em," Hola, "+P(v.value)+"! ",1)):Z("",!0),t.value?Z("",!0):(O(),T("li",tm,[ue(y,{to:"/cartelera",class:"hover:text-yellow-400 transition-colors duration-200 font-medium"},{default:we(()=>[...g[3]||(g[3]=[de(" Cartelera ",-1)])]),_:1})])),x.value?(O(),T("li",rm,[ue(y,{to:"/sugerencia",class:"hover:text-yellow-400 transition-colors duration-200 font-medium"},{default:we(()=>[...g[4]||(g[4]=[de(" Sugerencia ",-1)])]),_:1})])):Z("",!0),t.value?(O(),T("li",nm,[ue(y,{to:"/alquiler-sala",class:"hover:text-yellow-400 transition-colors duration-200 font-medium"},{default:we(()=>[...g[5]||(g[5]=[de(" Alquiler de Sala ",-1)])]),_:1})])):Z("",!0),x.value?(O(),T("li",im,[ue(y,{to:"/encuestas",class:"hover:text-yellow-400 transition-colors duration-200 font-medium"},{default:we(()=>[...g[6]||(g[6]=[de(" Encuestas ",-1)])]),_:1})])):Z("",!0),t.value?Z("",!0):(O(),T("li",om,[ue(y,{to:"/login",class:"hover:text-yellow-400 transition-colors duration-200 font-medium"},{default:we(()=>[...g[7]||(g[7]=[de(" Iniciar Sesin ",-1)])]),_:1})])),t.value?Z("",!0):(O(),T("li",am,[ue(y,{to:"/register",class:"bg-white text-[#8B0000] px-6 py-2 rounded-lg font-semibold hover:bg-yellow-400 hover:text-[#8B0000] transition-all duration-200"},{default:we(()=>[...g[8]||(g[8]=[de(" Registrarse ",-1)])]),_:1})])),t.value?(O(),T("li",sm,[f("button",{onClick:c,class:"bg-white/10 px-6 py-2 rounded-lg font-semibold hover:bg-white hover:text-[#8B0000] transition-all duration-200"}," Cerrar sesin ")])):Z("",!0)])]),f("div",lm,[f("button",{onClick:s,class:"text-white focus:outline-none","aria-label":"Toggle menu"},[e.value?(O(),T("svg",cm,[...g[10]||(g[10]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])])):(O(),T("svg",um,[...g[9]||(g[9]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,-1)])]))])])]),e.value?(O(),T("div",dm,[f("ul",fm,[f("li",null,[ue(y,{to:"/",onClick:l,class:"block hover:text-yellow-400 transition-colors duration-200 font-medium"},{default:we(()=>[...g[12]||(g[12]=[de(" Inicio ",-1)])]),_:1})]),t.value?(O(),T("li",hm,[ue(y,{to:p.value,onClick:l,class:"block hover:text-yellow-400 transition-colors duration-200 font-medium"},{default:we(()=>[de(P(h.value),1)]),_:1},8,["to"])])):Z("",!0),n.value==="admin"?(O(),T("li",pm,[ue(y,{to:"/escanear-qr",onClick:l,class:"block hover:text-yellow-400 transition-colors duration-200 font-medium"},{default:we(()=>[...g[13]||(g[13]=[de(" Escner QR ",-1)])]),_:1})])):Z("",!0),t.value?(O(),T("li",vm," Hola, "+P(v.value)+"! ",1)):Z("",!0),t.value?Z("",!0):(O(),T("li",gm,[ue(y,{to:"/cartelera",onClick:l,class:"block hover:text-yellow-400 transition-colors duration-200 font-medium"},{default:we(()=>[...g[14]||(g[14]=[de(" Cartelera ",-1)])]),_:1})])),x.value?(O(),T("li",ym,[ue(y,{to:"/sugerencia",onClick:l,class:"block hover:text-yellow-400 transition-colors duration-200 font-medium"},{default:we(()=>[...g[15]||(g[15]=[de(" Sugerencia ",-1)])]),_:1})])):Z("",!0),t.value?(O(),T("li",mm,[ue(y,{to:"/alquiler-sala",onClick:l,class:"block hover:text-yellow-400 transition-colors duration-200 font-medium"},{default:we(()=>[...g[16]||(g[16]=[de(" Alquiler de Sala ",-1)])]),_:1})])):Z("",!0),x.value?(O(),T("li",xm,[ue(y,{to:"/encuestas",onClick:l,class:"block hover:text-yellow-400 transition-colors duration-200 font-medium"},{default:we(()=>[...g[17]||(g[17]=[de(" Encuestas ",-1)])]),_:1})])):Z("",!0),t.value?Z("",!0):(O(),T("li",wm,[ue(y,{to:"/login",onClick:l,class:"block hover:text-yellow-400 transition-colors duration-200 font-medium"},{default:we(()=>[...g[18]||(g[18]=[de(" Iniciar Sesin ",-1)])]),_:1})])),t.value?Z("",!0):(O(),T("li",_m,[ue(y,{to:"/register",onClick:l,class:"block bg-white text-[#8B0000] px-6 py-2 rounded-lg font-semibold text-center hover:bg-yellow-400 hover:text-[#8B0000] transition-all duration-200"},{default:we(()=>[...g[19]||(g[19]=[de(" Registrarse ",-1)])]),_:1})])),t.value?(O(),T("li",bm,[f("button",{onClick:g[0]||(g[0]=()=>{c(),l()}),class:"w-full bg-white/10 px-6 py-2 rounded-lg font-semibold hover:bg-white hover:text-[#8B0000] transition-all duration-200"}," Cerrar sesin ")])):Z("",!0)])])):Z("",!0)])])}}}),Am={class:"app-layout"},Cm={class:"main-content"},Sm=ot({__name:"App",setup(r){return(e,t)=>{const n=lr("router-view");return O(),T("div",Am,[ue(Em),f("main",Cm,[ue(n)]),ue(mv)])}}}),Im="/assets/cine3-BRvoO-bB.jpeg",Om={class:"relative z-10 max-w-3xl text-center space-y-6"},Tm={class:"flex flex-col sm:flex-row gap-4 justify-center mt-8"},Rm=ot({__name:"Home",setup(r){return(e,t)=>{const n=lr("RouterLink");return O(),T("section",{class:"relative min-h-screen flex items-center justify-center text-white px-8 py-12 bg-cover bg-center",style:hn({backgroundImage:`url(${Rt(Im)})`})},[t[3]||(t[3]=f("div",{class:"absolute inset-0 bg-black/30 backdrop-blur-md"},null,-1)),f("div",Om,[t[1]||(t[1]=f("h1",{class:"text-4xl font-bold"},"Bienvenido al Cine ULEAM",-1)),t[2]||(t[2]=f("p",{class:"text-xl"},"Disfruta de las mejores pelculas en el corazn de tu universidad.",-1)),f("div",Tm,[ue(n,{to:"/cartelera",class:"bg-[#8B0000] text-white px-8 py-3 font-semibold rounded-xl shadow-lg hover:bg-[#A52A2A] hover:scale-105 transition-all duration-300"},{default:we(()=>[...t[0]||(t[0]=[de(" Ver Cartelera ",-1)])]),_:1})])])],4)}}}),jn=(r,e)=>{const t=r.__vccOpts||r;for(const[n,i]of e)t[n]=i;return t},Pm=jn(Rm,[["__scopeId","data-v-7a7054b3"]]),km={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 py-12 px-4 sm:px-6 lg:px-8 relative z-10"},Nm={class:"max-w-md w-full space-y-8 bg-white p-8 rounded-2xl shadow-2xl relative z-20"},Dm={class:"space-y-4"},Mm={class:"relative"},Bm={class:"relative"},Lm=["type"],Fm={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},$m={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},jm={class:"flex items-center justify-between"},Um={class:"flex items-center"},Vm={class:"text-sm"},Hm={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg"},Gm=["disabled"],qm={class:"text-center"},zm={class:"text-sm text-gray-600"},Wm=ot({__name:"Login",setup(r){const e=yi(),t=or({email:"",password:"",remember:!1}),n=W(!1),i=W(""),o=W(!1),a=()=>{n.value=!n.value},s=async()=>{if(i.value="",!t.email.endsWith("@live.uleam.edu.ec")){i.value="Debe usar su correo institucional (@live.uleam.edu.ec)";return}o.value=!0;try{const{error:l}=await ae.auth.signInWithPassword({email:t.email,password:t.password});if(l)throw l;const{data:u,error:c}=await ae.from("usuarios").select("*").eq("correo",t.email).single();if(c)throw c;localStorage.setItem("userRole",u.rol),localStorage.setItem("userId",u.id),localStorage.setItem("userName",u.nombre),u.rol==="admin"?e.push("/admin"):e.push("/cartelera")}catch(l){i.value=l.message||"Error al iniciar sesin"}finally{o.value=!1}};return(l,u)=>{const c=lr("router-link");return O(),T("div",km,[f("div",Nm,[u[13]||(u[13]=f("div",{class:"text-center"},[f("div",{class:"flex justify-center mb-4"}),f("h2",{class:"text-3xl font-extrabold text-gray-900"}," Iniciar Sesin "),f("p",{class:"mt-2 text-sm text-gray-600"}," Accede a tu cuenta de Cine ULEAM ")],-1)),f("form",{class:"mt-8 space-y-6",onSubmit:Yr(s,["prevent"])},[f("div",Dm,[f("div",null,[u[4]||(u[4]=f("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-1"}," Correo Electrnico ",-1)),f("div",Mm,[u[3]||(u[3]=f("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[f("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})])],-1)),fe(f("input",{id:"email","onUpdate:modelValue":u[0]||(u[0]=d=>t.email=d),type:"email",required:"",class:"appearance-none block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200",placeholder:"ejemplo@live.uleam.edu.ec"},null,512),[[Ae,t.email]])])]),f("div",null,[u[8]||(u[8]=f("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-1"}," Contrasea ",-1)),f("div",Bm,[u[7]||(u[7]=f("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[f("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1)),fe(f("input",{id:"password","onUpdate:modelValue":u[1]||(u[1]=d=>t.password=d),type:n.value?"text":"password",required:"",class:"appearance-none block w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200",placeholder:""},null,8,Lm),[[Qi,t.password]]),f("button",{type:"button",onClick:a,class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[n.value?(O(),T("svg",$m,[...u[6]||(u[6]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(O(),T("svg",Fm,[...u[5]||(u[5]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])])])]),f("div",jm,[f("div",Um,[fe(f("input",{id:"remember","onUpdate:modelValue":u[2]||(u[2]=d=>t.remember=d),type:"checkbox",class:"h-4 w-4 text-[#8B0000] focus:ring-[#8B0000] border-gray-300 rounded cursor-pointer"},null,512),[[Nl,t.remember]]),u[9]||(u[9]=f("label",{for:"remember",class:"ml-2 block text-sm text-gray-700 cursor-pointer"}," Recordarme ",-1))]),f("div",Vm,[ue(c,{to:"/forgot-password",class:"font-medium text-[#8B0000] hover:text-[#A52A2A] transition duration-200"},{default:we(()=>[...u[10]||(u[10]=[de(" Olvidaste tu contrasea? ",-1)])]),_:1})])]),i.value?(O(),T("div",Hm,"  "+P(i.value),1)):Z("",!0),f("div",null,[f("button",{type:"submit",disabled:o.value,class:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-lg font-semibold text-white bg-[#8B0000] hover:bg-[#A52A2A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#8B0000] transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed"},P(o.value?"Iniciando sesin...":"Iniciar Sesin"),9,Gm)]),f("div",qm,[f("p",zm,[u[12]||(u[12]=de(" No tienes una cuenta? ",-1)),ue(c,{to:"/register",class:"font-medium text-[#8B0000] hover:text-[#A52A2A] transition duration-200"},{default:we(()=>[...u[11]||(u[11]=[de(" Regstrate aqu ",-1)])]),_:1})])])],32)])])}}}),Km={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 py-12 px-4 sm:px-6 lg:px-8 relative z-10"},Xm={class:"max-w-md w-full space-y-8 bg-white p-8 rounded-2xl shadow-2xl relative z-20"},Ym={class:"space-y-4"},Zm={class:"relative"},Jm={class:"relative"},Qm={class:"relative"},ex=["type"],tx={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},rx={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},nx={class:"relative"},ix=["type"],ox={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ax={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},sx={key:0,class:"mt-1 text-sm text-red-600"},lx={class:"flex items-start"},ux={class:"flex items-center h-5"},cx={key:0,class:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg"},dx={key:1,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg"},fx={class:"text-sm"},hx=["disabled"],px={class:"text-center"},vx={class:"text-sm text-gray-600"},gx=ot({__name:"Register",setup(r){const e=yi(),t=or({fullName:"",email:"",password:"",confirmPassword:"",acceptTerms:!1}),n=W(!1),i=W(!1),o=W(!1),a=W(""),s=W(""),l=()=>{n.value=!n.value},u=()=>{i.value=!i.value},c=Ee(()=>t.confirmPassword.length>0&&t.password!==t.confirmPassword),d=Ee(()=>t.fullName.length>0&&t.email.length>0&&t.email.endsWith("@live.uleam.edu.ec")&&t.password.length>=6&&t.password===t.confirmPassword&&t.acceptTerms),p=async()=>{if(d.value){if(!t.email.endsWith("@live.uleam.edu.ec")){a.value="Debe usar su correo institucional (@live.uleam.edu.ec)";return}o.value=!0,a.value="",s.value="";try{const{data:h,error:v}=await ae.auth.signUp({email:t.email,password:t.password,options:{data:{full_name:t.fullName},emailRedirectTo:`${window.location.origin}/cartelera`}});if(v)throw v;if(h.user){await new Promise(g=>setTimeout(g,500));const{data:x,error:w}=await ae.from("usuarios").select("*").eq("id",h.user.id).single();w&&console.error("Error al verificar usuario:",w),x?(localStorage.setItem("userId",x.id),localStorage.setItem("userRole",x.rol),localStorage.setItem("userName",x.nombre)):(localStorage.setItem("userId",h.user.id),localStorage.setItem("userRole","estudiante"),localStorage.setItem("userName",t.fullName)),s.value="Cuenta creada exitosamente!",setTimeout(()=>{e.push("/cartelera")},1e3)}else a.value="No se pudo crear la cuenta. Por favor, intenta nuevamente."}catch(h){console.error("Error en registro:",h),h.message.includes("already registered")?a.value="Este correo ya est registrado":a.value=h.message||"Error al crear la cuenta"}finally{o.value=!1}}};return(h,v)=>{const x=lr("router-link");return O(),T("div",Km,[f("div",Xm,[v[20]||(v[20]=f("div",{class:"text-center"},[f("h2",{class:"text-3xl font-extrabold text-gray-900"}," Crear Cuenta "),f("p",{class:"mt-2 text-sm text-gray-600"}," nete a la comunidad del Cine ULEAM ")],-1)),f("form",{class:"mt-8 space-y-6",onSubmit:Yr(p,["prevent"])},[f("div",Ym,[f("div",null,[v[6]||(v[6]=f("label",{for:"fullName",class:"block text-sm font-medium text-gray-700 mb-1"}," Nombre Completo ",-1)),f("div",Zm,[v[5]||(v[5]=f("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[f("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),fe(f("input",{id:"fullName","onUpdate:modelValue":v[0]||(v[0]=w=>t.fullName=w),type:"text",required:"",class:"appearance-none block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200",placeholder:"Juan Prez"},null,512),[[Ae,t.fullName]])])]),f("div",null,[v[8]||(v[8]=f("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-1"}," Correo Electrnico ",-1)),f("div",Jm,[v[7]||(v[7]=f("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[f("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})])],-1)),fe(f("input",{id:"email","onUpdate:modelValue":v[1]||(v[1]=w=>t.email=w),type:"email",required:"",class:"appearance-none block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200",placeholder:"ejemplo@live.uleam.edu.ec"},null,512),[[Ae,t.email]])])]),f("div",null,[v[12]||(v[12]=f("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-1"}," Contrasea ",-1)),f("div",Qm,[v[11]||(v[11]=f("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[f("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1)),fe(f("input",{id:"password","onUpdate:modelValue":v[2]||(v[2]=w=>t.password=w),type:n.value?"text":"password",required:"",minlength:"6",class:"appearance-none block w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200",placeholder:"Mnimo 6 caracteres"},null,8,ex),[[Qi,t.password]]),f("button",{type:"button",onClick:l,class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[n.value?(O(),T("svg",rx,[...v[10]||(v[10]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(O(),T("svg",tx,[...v[9]||(v[9]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])])]),f("div",null,[v[16]||(v[16]=f("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-700 mb-1"}," Confirmar Contrasea ",-1)),f("div",nx,[v[15]||(v[15]=f("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[f("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),fe(f("input",{id:"confirmPassword","onUpdate:modelValue":v[3]||(v[3]=w=>t.confirmPassword=w),type:i.value?"text":"password",required:"",minlength:"6",class:"appearance-none block w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200",placeholder:"Repite tu contrasea"},null,8,ix),[[Qi,t.confirmPassword]]),f("button",{type:"button",onClick:u,class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[i.value?(O(),T("svg",ax,[...v[14]||(v[14]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(O(),T("svg",ox,[...v[13]||(v[13]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])]),c.value?(O(),T("p",sx," Las contraseas no coinciden ")):Z("",!0)])]),f("div",lx,[f("div",ux,[fe(f("input",{id:"terms","onUpdate:modelValue":v[4]||(v[4]=w=>t.acceptTerms=w),type:"checkbox",required:"",class:"h-4 w-4 text-[#8B0000] focus:ring-[#8B0000] border-gray-300 rounded cursor-pointer"},null,512),[[Nl,t.acceptTerms]])]),v[17]||(v[17]=f("div",{class:"ml-3 text-sm"},[f("label",{for:"terms",class:"text-gray-600 cursor-pointer"},[de(" Acepto los "),f("a",{href:"#",class:"font-medium text-[#8B0000] hover:text-[#A52A2A]"},"trminos y condiciones"),de(" y la "),f("a",{href:"#",class:"font-medium text-[#8B0000] hover:text-[#A52A2A]"},"poltica de privacidad")])],-1))]),s.value?(O(),T("div",cx,"  "+P(s.value),1)):Z("",!0),a.value?(O(),T("div",dx,[f("p",fx,P(a.value),1)])):Z("",!0),f("div",null,[f("button",{type:"submit",disabled:!d.value||o.value,class:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-lg font-semibold text-white bg-[#8B0000] hover:bg-[#A52A2A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#8B0000] transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100"},P(o.value?"Creando cuenta...":"Crear Cuenta"),9,hx)]),f("div",px,[f("p",vx,[v[19]||(v[19]=de(" Ya tienes una cuenta? ",-1)),ue(x,{to:"/login",class:"font-medium text-[#8B0000] hover:text-[#A52A2A] transition duration-200"},{default:we(()=>[...v[18]||(v[18]=[de(" Inicia sesin aqu ",-1)])]),_:1})])])],32)])])}}}),yx={class:"min-h-screen bg-gray-50"},mx={class:"container mx-auto px-6 py-8"},xx={class:"mb-6 flex flex-wrap gap-4"},wx={class:"mb-6 flex flex-wrap gap-4"},_x={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},bx={class:"bg-white rounded-xl shadow-md p-6"},Ex={class:"flex items-center justify-between"},Ax={class:"text-3xl font-bold text-gray-800 mt-2"},Cx={class:"bg-white rounded-xl shadow-md p-6"},Sx={class:"flex items-center justify-between"},Ix={class:"text-3xl font-bold text-gray-800 mt-2"},Ox={class:"bg-white rounded-xl shadow-md overflow-hidden"},Tx={class:"border-b border-gray-200"},Rx={class:"flex -mb-px"},Px={class:"p-6"},kx={key:0,class:"space-y-6"},Nx={class:"bg-gray-50 rounded-lg p-6"},Dx={class:"flex gap-4 mb-4"},Mx={key:0,class:"space-y-4"},Bx={class:"flex gap-4"},Lx=["disabled"],Fx={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm text-blue-700 flex items-center gap-2"},$x={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},jx=["onClick"],Ux={class:"flex gap-4"},Vx=["src","alt"],Hx={class:"flex-1"},Gx={class:"font-semibold text-gray-800"},qx={class:"text-sm text-gray-600"},zx={class:"text-sm text-gray-500 mt-1"},Wx={key:1,class:"space-y-4"},Kx={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Xx={class:"md:col-span-2"},Yx={class:"space-y-3"},Zx={class:"flex gap-4"},Jx={key:0,class:"space-y-2"},Qx={key:0,class:"flex items-center gap-2 text-sm text-blue-600"},ew={key:1,class:"text-sm text-gray-600"},tw={key:1},rw={key:2,class:"mt-3"},nw=["src"],iw={class:"md:col-span-2"},ow={key:0,class:"flex justify-center items-center py-12"},aw={key:1,class:"bg-blue-50 border border-blue-200 rounded-lg p-8 text-center"},sw={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},lw=["src","alt"],uw={class:"p-4"},cw={class:"font-bold text-lg text-gray-800"},dw={class:"text-sm text-gray-600 mt-1"},fw={class:"text-sm text-gray-500 mt-1"},hw={class:"text-sm text-gray-700 mt-2 line-clamp-2"},pw={class:"flex gap-2 mt-4"},vw=["onClick"],gw=["onClick"],yw={key:1,class:"space-y-6"},mw={class:"bg-gray-50 rounded-lg p-6"},xw={class:"space-y-4"},ww={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},_w=["value"],bw=["min"],Ew=["value"],Aw={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg"},Cw={class:"space-y-4"},Sw={class:"flex items-center justify-between"},Iw={class:"flex-1"},Ow={class:"font-bold text-gray-800"},Tw={class:"flex gap-4 mt-2 text-sm text-gray-600"},Rw={class:"flex gap-2"},Pw=["onClick"],kw=ot({__name:"AdminCartelera",setup(r){const e=W("peliculas"),t=W("api"),n=W("url"),i=W(""),o=W(!1),a=W(!1),s=W(!0),l=W(!1),u=W(0),c=W([]),d=W(!1),p=W(""),h=W(null),v=W(null),x=W(""),w=W(localStorage.getItem("userRole")||""),g=or({ocupacionTotal:0,reservasHoy:0,peliculasActivas:0,funcionesHoy:0}),y=W([]),m=W([]),_=W([]),E=or({titulo:"",director:"",duracion_min:0,genero:"",poster_url:"",sinopsis:""}),b=or({pelicula_id:"",sala_id:"",fecha:"",hora_inicio:"",hora_fin:""}),S=Ee(()=>new Date().toISOString().split("T")[0]),B=$=>{const U=$.target.files?.[0];if(!U)return;if(!U.type.startsWith("image/")){alert("Por favor selecciona un archivo de imagen vlido");return}if(U.size>5*1024*1024){alert("La imagen no debe superar los 5MB");return}v.value=U;const C=new FileReader;C.onload=I=>{x.value=I.target?.result},C.readAsDataURL(U)},L=async $=>{try{if(localStorage.getItem("userRole")!=="admin")return alert("Solo los administradores pueden subir imgenes"),null;l.value=!0,u.value=0;const U=Date.now(),C=$.name.split(".").pop(),I=`poster_${U}.${C}`,{error:D}=await ae.storage.from("posters-peliculas").upload(I,$,{cacheControl:"3600",upsert:!1});if(D)throw console.error("Error subiendo imagen:",D),D;u.value=100;const{data:q}=ae.storage.from("posters-peliculas").getPublicUrl(I);return q.publicUrl}catch(R){return console.error("Error en subirImagenASupabase:",R),alert("Error al subir la imagen: "+R.message),null}finally{l.value=!1,u.value=0}};sr(async()=>{await j(),await Y(),await M(),await k(),setInterval(async()=>{await k()},3e4)});const j=async()=>{try{s.value=!0,console.log("Cargando pelculas...");const{data:$,error:R}=await ae.from("peliculas").select("*").order("creada_en",{ascending:!1});if(R)throw console.error("Error de Supabase:",R),R;console.log("Pelculas cargadas:",$),y.value=$||[],console.log("Total de pelculas:",y.value.length)}catch($){console.error("Error cargando pelculas:",$),alert("Error al cargar pelculas: "+$.message)}finally{s.value=!1}},Y=async()=>{try{const{data:$,error:R}=await ae.from("funciones").select("*").order("fecha",{ascending:!0}).order("hora_inicio",{ascending:!0});if(R)throw R;m.value=$||[]}catch($){console.error("Error cargando funciones:",$)}},M=async()=>{try{const{data:$,error:R}=await ae.from("sala").select("*").order("nombre",{ascending:!0});if(R)throw R;_.value=$||[]}catch($){console.error("Error cargando salas:",$)}},k=async()=>{try{const{count:$}=await ae.from("peliculas").select("*",{count:"exact",head:!0});g.peliculasActivas=$||0;const R=new Date().toISOString().split("T")[0],{count:U}=await ae.from("funciones").select("*",{count:"exact",head:!0}).eq("fecha",R);g.funcionesHoy=U||0;const C=new Date;C.setHours(0,0,0,0);const I=new Date;I.setHours(23,59,59,999);try{const{data:D,error:q}=await ae.from("reservas").select("id").gte("creada_en",C.toISOString()).lte("creada_en",I.toISOString());if(!q&&D)g.reservasHoy=D.length;else{const{count:z}=await ae.from("reservas").select("*",{count:"exact",head:!0}).eq("estado","activa");g.reservasHoy=z||0}}catch(D){console.error("Error cargando reservas:",D);const{count:q}=await ae.from("reservas").select("*",{count:"exact",head:!0});g.reservasHoy=q||0}}catch($){console.error("Error cargando estadsticas:",$)}},K=async()=>{if(i.value.trim()){o.value=!0;try{const U=await(await fetch(`https://www.omdbapi.com/?s=${encodeURIComponent(i.value)}&apikey=34e63b5b`)).json();U.Response==="True"?c.value=U.Search:(alert("No se encontraron pelculas"),c.value=[])}catch($){console.error("Error buscando pelcula:",$),alert("Error al buscar pelcula")}finally{o.value=!1}}},ee=async $=>{if(!$||$==="N/A")return $;try{const U=await(await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent($)}&langpair=en|es`)).json();return U.responseStatus===200&&U.responseData&&U.responseData.translatedText||$}catch(R){return console.warn("Error al traducir texto:",R),$}},J=async $=>{try{a.value=!0;const C=await(await fetch(`https://www.omdbapi.com/?i=${$.imdbID}&apikey=34e63b5b`)).json();if(C.Response==="True"){E.titulo=C.Title,E.director=C.Director!=="N/A"?C.Director:"",E.duracion_min=parseInt(C.Runtime?.replace(" min",""))||0,E.genero=C.Genre!=="N/A"?C.Genre.split(",")[0].trim():"",E.poster_url=C.Poster!=="N/A"?C.Poster:"";const I=C.Plot!=="N/A"?C.Plot:"";I?E.sinopsis=await ee(I):E.sinopsis="",d.value=!0,c.value=[]}}catch(R){console.error("Error obteniendo detalles:",R),alert("Error al obtener los detalles de la pelcula. Intenta de nuevo.")}finally{a.value=!1}},N=async()=>{if(!E.titulo||!E.sinopsis){alert("Por favor completa todos los campos requeridos");return}try{let $=E.poster_url;if(v.value&&n.value==="upload"){const U=await L(v.value);if(!U){alert("Error al subir la imagen. Por favor intenta de nuevo.");return}$=U}const R={titulo:E.titulo,director:E.director,duracion_min:E.duracion_min,genero:E.genero,poster_url:$,sinopsis:E.sinopsis};if(h.value){const{error:U}=await ae.from("peliculas").update(R).eq("id",h.value);if(U)throw U;alert("Pelcula actualizada correctamente")}else{const{error:U}=await ae.from("peliculas").insert([R]);if(U)throw U;alert("Pelcula guardada correctamente")}await j(),await k(),Ve()}catch($){console.error("Error guardando pelcula:",$),alert("Error al guardar la pelcula")}},G=$=>{E.titulo=$.titulo,E.director=$.director||"",E.duracion_min=$.duracion_min||0,E.genero=$.genero||"",E.poster_url=$.poster_url||"",E.sinopsis=$.sinopsis||"",h.value=$.id,t.value="manual",d.value=!0},Re=async $=>{if(confirm("Ests seguro de eliminar esta pelcula?"))try{const{error:R}=await ae.from("peliculas").delete().eq("id",$);if(R)throw R;alert("Pelcula eliminada correctamente"),await j(),await k()}catch(R){console.error("Error eliminando pelcula:",R),alert("Error al eliminar la pelcula")}},Ve=()=>{E.titulo="",E.director="",E.duracion_min=0,E.genero="",E.poster_url="",E.sinopsis="",d.value=!1,h.value=null,c.value=[],i.value="",v.value=null,x.value="",n.value="url"},et=($,R)=>{const[U,C]=$.split(":").map(Number),I=new Date;return I.setHours(U||0,C||0,0),I.setMinutes(I.getMinutes()+R),I.toTimeString().slice(0,5)},ze=()=>{const{fecha:$,hora_inicio:R,sala_id:U,pelicula_id:C}=b;if(!$||!R||!U||!C)return!0;const I=y.value.find(z=>z.id===C);if(!I||!I.duracion_min)return!0;const D=new Date(`${$}T${R}`),q=new Date(D.getTime()+I.duracion_min*6e4);for(const z of m.value)if(z.fecha===$&&z.sala_id===U){const X=new Date(`${z.fecha}T${z.hora_inicio}`),oe=new Date(`${z.fecha}T${z.hora_fin}`);if(D<oe&&q>X){const ne=_.value.find(re=>re.id===U)?.nombre||"esta sala";return p.value=`Ya existe una funcin programada en ${ne} que se solapa con este horario`,!1}}return p.value="",!0},Pt=async()=>{if(ze())try{const $=y.value.find(I=>I.id===b.pelicula_id);if(!$||!$.duracion_min){alert("Error: No se pudo obtener la duracin de la pelcula");return}const R=et(b.hora_inicio,$.duracion_min),U={pelicula_id:b.pelicula_id,sala_id:b.sala_id,fecha:b.fecha,hora_inicio:b.hora_inicio,hora_fin:R},{error:C}=await ae.from("funciones").insert([U]);if(C)throw C;alert("Funcin programada correctamente"),await Y(),await k(),wt()}catch($){console.error("Error guardando funcin:",$),alert("Error al programar la funcin")}},zt=async $=>{if(confirm("Ests seguro de eliminar esta funcin?"))try{const{error:R}=await ae.from("funciones").delete().eq("id",$);if(R)throw R;alert("Funcin eliminada correctamente"),await Y(),await k()}catch(R){console.error("Error eliminando funcin:",R),alert("Error al eliminar la funcin")}},wt=()=>{b.pelicula_id="",b.sala_id="",b.fecha="",b.hora_inicio="",b.hora_fin="",p.value=""},Ct=$=>y.value.find(R=>R.id===$)?.titulo||"Pelcula no encontrada",H=$=>_.value.find(R=>R.id===$)?.nombre||"Sala no encontrada",ie=$=>new Date($+"T00:00:00").toLocaleDateString("es-ES",{weekday:"short",year:"numeric",month:"short",day:"numeric"});return($,R)=>(O(),T("div",yx,[R[50]||(R[50]=f("div",{class:"bg-[#8B0000] text-white shadow-lg"},[f("div",{class:"container mx-auto px-6 py-6"},[f("h1",{class:"text-3xl font-bold"},"Panel de Administracin - Cine ULEAM"),f("p",{class:"text-gray-200 mt-1"},"Gestin de cartelera y funciones")])],-1)),f("div",mx,[f("div",xx,[f("div",wx,[ue(Rt(Wr),{to:"/admin",class:"inline-flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-xl font-semibold shadow-md hover:bg-blue-700 transition-all duration-200"},{default:we(()=>[...R[20]||(R[20]=[f("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),de(" Dashboard ",-1)])]),_:1}),ue(Rt(Wr),{to:"/admin/notificaciones",class:"inline-flex items-center gap-2 bg-[#8B0000] text-white px-6 py-3 rounded-xl font-semibold shadow-md hover:bg-[#A52A2A] transition-all duration-200"},{default:we(()=>[...R[21]||(R[21]=[f("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1),de(" Ver Sugerencias ",-1)])]),_:1}),ue(Rt(Wr),{to:"/alquiler-sala",class:"inline-flex items-center gap-2 bg-[#006847] text-white px-6 py-3 rounded-xl font-semibold shadow-md hover:bg-[#005238] transition-all duration-200"},{default:we(()=>[...R[22]||(R[22]=[f("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1),de(" Alquiler de Sala ",-1)])]),_:1})]),f("div",_x,[f("div",bx,[f("div",Ex,[f("div",null,[R[23]||(R[23]=f("p",{class:"text-gray-500 text-sm font-medium"},"Reservas Hoy",-1)),f("p",Ax,P(g.reservasHoy),1)]),f("button",{onClick:k,class:"text-[#8B0000] hover:text-[#A52A2A] transition-colors",title:"Actualizar estadsticas"},[...R[24]||(R[24]=[f("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])])])]),f("div",Cx,[f("div",Sx,[f("div",null,[R[25]||(R[25]=f("p",{class:"text-gray-500 text-sm font-medium"},"Pelculas Activas",-1)),f("p",Ix,P(g.peliculasActivas),1)])])])]),f("div",Ox,[f("div",Tx,[f("nav",Rx,[f("button",{onClick:R[0]||(R[0]=U=>e.value="peliculas"),class:it(["px-6 py-4 text-sm font-medium border-b-2 transition-colors",e.value==="peliculas"?"border-[#8B0000] text-[#8B0000]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Gestin de Pelculas ",2),f("button",{onClick:R[1]||(R[1]=U=>e.value="funciones"),class:it(["px-6 py-4 text-sm font-medium border-b-2 transition-colors",e.value==="funciones"?"border-[#8B0000] text-[#8B0000]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Programacin de Horarios ",2)])]),f("div",Px,[e.value==="peliculas"?(O(),T("div",kx,[f("div",Nx,[R[36]||(R[36]=f("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Aadir Nueva Pelcula",-1)),f("div",Dx,[f("button",{onClick:R[2]||(R[2]=U=>t.value="api"),class:it(["flex-1 py-3 px-4 rounded-lg font-medium transition-all",t.value==="api"?"bg-[#8B0000] text-white shadow-lg":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"])}," Buscar en OMDb API ",2),f("button",{onClick:R[3]||(R[3]=U=>t.value="manual"),class:it(["flex-1 py-3 px-4 rounded-lg font-medium transition-all",t.value==="manual"?"bg-[#8B0000] text-white shadow-lg":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"])}," Ingresar Manualmente ",2)]),t.value==="api"?(O(),T("div",Mx,[f("div",Bx,[fe(f("input",{"onUpdate:modelValue":R[4]||(R[4]=U=>i.value=U),type:"text",placeholder:"Buscar pelcula por ttulo...",class:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent",onKeyup:r0(K,["enter"])},null,544),[[Ae,i.value]]),f("button",{onClick:K,disabled:o.value||a.value,class:"bg-[#8B0000] text-white px-6 py-3 rounded-lg font-medium hover:bg-[#A52A2A] transition-colors disabled:opacity-50"},P(o.value?"Buscando...":"Buscar"),9,Lx)]),a.value?(O(),T("div",Fx,[...R[26]||(R[26]=[f("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-700"},null,-1),de(" Traduciendo sinopsis al espaol... ",-1)])])):Z("",!0),c.value.length>0?(O(),T("div",$x,[(O(!0),T(ke,null,st(c.value,U=>(O(),T("div",{key:U.imdbID,class:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-lg transition-shadow cursor-pointer",onClick:C=>J(U)},[f("div",Ux,[f("img",{src:U.Poster!=="N/A"?U.Poster:"/placeholder-movie.jpg",alt:U.Title,class:"w-20 h-28 object-cover rounded"},null,8,Vx),f("div",Hx,[f("h4",Gx,P(U.Title),1),f("p",qx,P(U.Year),1),f("p",zx,P(U.Type),1)])])],8,jx))),128))])):Z("",!0)])):Z("",!0),t.value==="manual"||d.value?(O(),T("div",Wx,[f("div",Kx,[f("div",null,[R[27]||(R[27]=f("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Ttulo *",-1)),fe(f("input",{"onUpdate:modelValue":R[5]||(R[5]=U=>E.titulo=U),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent"},null,512),[[Ae,E.titulo]])]),f("div",null,[R[28]||(R[28]=f("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Director *",-1)),fe(f("input",{"onUpdate:modelValue":R[6]||(R[6]=U=>E.director=U),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent"},null,512),[[Ae,E.director]])]),f("div",null,[R[29]||(R[29]=f("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Duracin (min) *",-1)),fe(f("input",{"onUpdate:modelValue":R[7]||(R[7]=U=>E.duracion_min=U),type:"number",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent"},null,512),[[Ae,E.duracion_min]])]),f("div",null,[R[31]||(R[31]=f("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Gnero *",-1)),fe(f("select",{"onUpdate:modelValue":R[8]||(R[8]=U=>E.genero=U),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent bg-white"},[...R[30]||(R[30]=[$n('<option value="" disabled data-v-7003a6f8>Selecciona un gnero</option><option value="Accin" data-v-7003a6f8>Accin</option><option value="Aventura" data-v-7003a6f8>Aventura</option><option value="Animacin" data-v-7003a6f8>Animacin</option><option value="Ciencia Ficcin" data-v-7003a6f8>Ciencia Ficcin</option><option value="Comedia" data-v-7003a6f8>Comedia</option><option value="Crimen" data-v-7003a6f8>Crimen</option><option value="Documental" data-v-7003a6f8>Documental</option><option value="Drama" data-v-7003a6f8>Drama</option><option value="Fantasa" data-v-7003a6f8>Fantasa</option><option value="Horror" data-v-7003a6f8>Horror</option><option value="Musical" data-v-7003a6f8>Musical</option><option value="Misterio" data-v-7003a6f8>Misterio</option><option value="Romance" data-v-7003a6f8>Romance</option><option value="Suspenso" data-v-7003a6f8>Suspenso</option><option value="Terror" data-v-7003a6f8>Terror</option><option value="Thriller" data-v-7003a6f8>Thriller</option><option value="Western" data-v-7003a6f8>Western</option>',18)])],512),[[ar,E.genero]])]),f("div",Xx,[R[34]||(R[34]=f("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Pster de la Pelcula",-1)),f("div",Yx,[f("div",Zx,[w.value==="admin"?(O(),T("button",{key:0,type:"button",onClick:R[9]||(R[9]=U=>n.value="upload"),class:it(["flex-1 py-2 px-4 rounded-lg font-medium transition-all text-sm",n.value==="upload"?"bg-[#8B0000] text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"])}," Subir Imagen ",2)):Z("",!0),f("button",{type:"button",onClick:R[10]||(R[10]=U=>n.value="url"),class:it([w.value==="admin"?"flex-1":"w-full","py-2 px-4 rounded-lg font-medium transition-all text-sm",n.value==="url"?"bg-[#8B0000] text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"])}," URL de Imagen ",2)]),n.value==="upload"&&w.value==="admin"?(O(),T("div",Jx,[f("input",{type:"file",onChange:B,accept:"image/*",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-[#8B0000] file:text-white hover:file:bg-[#A52A2A]"},null,32),l.value?(O(),T("div",Qx,[R[32]||(R[32]=f("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"},null,-1)),f("span",null,"Subiendo imagen... "+P(u.value)+"%",1)])):Z("",!0),v.value?(O(),T("div",ew,"  "+P(v.value.name)+" ("+P((v.value.size/1024).toFixed(2))+" KB) ",1)):Z("",!0)])):Z("",!0),n.value==="url"?(O(),T("div",tw,[fe(f("input",{"onUpdate:modelValue":R[11]||(R[11]=U=>E.poster_url=U),type:"url",placeholder:"https://ejemplo.com/imagen.jpg",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent"},null,512),[[Ae,E.poster_url]])])):Z("",!0),E.poster_url||x.value?(O(),T("div",rw,[R[33]||(R[33]=f("p",{class:"text-sm font-medium text-gray-700 mb-2"},"Vista previa:",-1)),f("img",{src:x.value||E.poster_url,alt:"Vista previa del pster",class:"w-48 h-64 object-cover rounded-lg border border-gray-300",onError:R[12]||(R[12]=U=>U.target.src="https://via.placeholder.com/300x450?text=Error+al+cargar")},null,40,nw)])):Z("",!0)])]),f("div",iw,[R[35]||(R[35]=f("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Sinopsis *",-1)),fe(f("textarea",{"onUpdate:modelValue":R[13]||(R[13]=U=>E.sinopsis=U),rows:"4",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent"},null,512),[[Ae,E.sinopsis]])])]),f("div",{class:"flex gap-4"},[f("button",{onClick:N,class:"bg-[#8B0000] text-white px-6 py-3 rounded-lg font-medium hover:bg-[#A52A2A] transition-colors"}," Guardar Pelcula "),f("button",{onClick:Ve,class:"bg-gray-300 text-gray-700 px-6 py-3 rounded-lg font-medium hover:bg-gray-400 transition-colors"}," Cancelar ")])])):Z("",!0)]),f("div",null,[R[41]||(R[41]=f("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Cartelera Actual",-1)),s.value?(O(),T("div",ow,[...R[37]||(R[37]=[f("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#8B0000]"},null,-1),f("p",{class:"ml-4 text-gray-600"},"Cargando pelculas...",-1)])])):y.value.length===0?(O(),T("div",aw,[R[38]||(R[38]=f("svg",{class:"mx-auto h-12 w-12 text-blue-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"})],-1)),R[39]||(R[39]=f("h3",{class:"text-lg font-semibold text-gray-700 mb-2"},"No hay pelculas en la cartelera",-1)),R[40]||(R[40]=f("p",{class:"text-gray-600 mb-4"},"Agrega tu primera pelcula usando el formulario de arriba",-1)),f("button",{onClick:R[14]||(R[14]=U=>{t.value="api",e.value="peliculas"}),class:"bg-[#8B0000] text-white px-6 py-2 rounded-lg font-medium hover:bg-[#A52A2A] transition-colors"}," Agregar Pelcula ")])):(O(),T("div",sw,[(O(!0),T(ke,null,st(y.value,U=>(O(),T("div",{key:U.id,class:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-xl transition-shadow"},[f("img",{src:U.poster_url||"https://via.placeholder.com/300x450?text=Sin+Poster",alt:U.titulo,class:"w-full h-64 object-cover",onError:R[15]||(R[15]=C=>C.target.src="https://via.placeholder.com/300x450?text=Sin+Poster")},null,40,lw),f("div",uw,[f("h4",cw,P(U.titulo),1),f("p",dw,P(U.duracion_min)+" min",1),f("p",fw,P(U.genero),1),f("p",hw,P(U.sinopsis),1),f("div",pw,[f("button",{onClick:C=>G(U),class:"flex-1 bg-[#8B0000] text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-600 transition-colors"}," Editar ",8,vw),f("button",{onClick:C=>Re(U.id),class:"flex-1 bg-[#8B0000] text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-red-600 transition-colors"}," Eliminar ",8,gw)])])]))),128))]))])])):Z("",!0),e.value==="funciones"?(O(),T("div",yw,[f("div",mw,[R[48]||(R[48]=f("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Programar Nueva Funcin",-1)),f("div",xw,[f("div",ww,[f("div",null,[R[43]||(R[43]=f("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Pelcula *",-1)),fe(f("select",{"onUpdate:modelValue":R[16]||(R[16]=U=>b.pelicula_id=U),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent"},[R[42]||(R[42]=f("option",{value:""},"Seleccionar pelcula...",-1)),(O(!0),T(ke,null,st(y.value,U=>(O(),T("option",{key:U.id,value:U.id},P(U.titulo),9,_w))),128))],512),[[ar,b.pelicula_id]])]),f("div",null,[R[44]||(R[44]=f("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Fecha *",-1)),fe(f("input",{"onUpdate:modelValue":R[17]||(R[17]=U=>b.fecha=U),type:"date",required:"",min:S.value,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent"},null,8,bw),[[Ae,b.fecha]])]),f("div",null,[R[45]||(R[45]=f("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Hora de Inicio *",-1)),fe(f("input",{"onUpdate:modelValue":R[18]||(R[18]=U=>b.hora_inicio=U),type:"time",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent"},null,512),[[Ae,b.hora_inicio]])]),f("div",null,[R[47]||(R[47]=f("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Sala *",-1)),fe(f("select",{"onUpdate:modelValue":R[19]||(R[19]=U=>b.sala_id=U),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent"},[R[46]||(R[46]=f("option",{value:""},"Seleccionar sala...",-1)),(O(!0),T(ke,null,st(_.value,U=>(O(),T("option",{key:U.id,value:U.id},P(U.nombre)+" (Capacidad: "+P(U.capacidad)+") ",9,Ew))),128))],512),[[ar,b.sala_id]])])]),p.value?(O(),T("div",Aw,P(p.value),1)):Z("",!0),f("div",{class:"flex gap-4"},[f("button",{onClick:Pt,class:"bg-[#8B0000] text-white px-6 py-3 rounded-lg font-medium hover:bg-[#A52A2A] transition-colors"}," Programar Funcin "),f("button",{onClick:wt,class:"bg-gray-300 text-gray-700 px-6 py-3 rounded-lg font-medium hover:bg-gray-400 transition-colors"}," Cancelar ")])])]),f("div",null,[R[49]||(R[49]=f("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Funciones Programadas",-1)),f("div",Cw,[(O(!0),T(ke,null,st(m.value,U=>(O(),T("div",{key:U.id,class:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow"},[f("div",Sw,[f("div",Iw,[f("h4",Ow,P(Ct(U.pelicula_id)),1),f("div",Tw,[f("span",null,P(ie(U.fecha)),1),f("span",null,P(U.hora_inicio)+" - "+P(U.hora_fin),1),f("span",null,P(H(U.sala_id)),1)])]),f("div",Rw,[f("button",{onClick:C=>zt(U.id),class:"bg-red-500 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-red-600 transition-colors"}," Eliminar ",8,Pw)])])]))),128))])])])):Z("",!0)])])])])]))}}),Nw=jn(kw,[["__scopeId","data-v-7003a6f8"]]),Dw={class:"min-h-screen bg-gray-50"},Mw={class:"container mx-auto px-6 py-8"},Bw={class:"mb-6 flex flex-wrap gap-4"},Lw={key:0,class:"text-center py-12"},Fw={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6"},$w={class:"text-red-700"},jw={key:2},Uw={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Vw={class:"bg-white rounded-xl shadow-md p-6"},Hw={class:"flex items-center justify-between"},Gw={class:"text-3xl font-bold text-gray-800 mt-2"},qw={class:"bg-white rounded-xl shadow-md p-6"},zw={class:"flex items-center justify-between"},Ww={class:"text-3xl font-bold text-gray-800 mt-2"},Kw={class:"bg-white rounded-xl shadow-md p-6"},Xw={class:"flex items-center justify-between"},Yw={class:"text-2xl font-bold text-gray-800 mt-2"},Zw={class:"bg-white rounded-xl shadow-md p-6"},Jw={class:"flex items-center justify-between"},Qw={class:"text-3xl font-bold text-gray-800 mt-2"},e_={class:"bg-white rounded-xl shadow-md p-6 mb-8"},t_={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},r_=["value"],n_=["value"],i_={class:"bg-white rounded-xl shadow-md p-6 mb-8"},o_={class:"space-y-4"},a_={class:"flex justify-between text-sm"},s_={class:"font-medium text-gray-700"},l_={class:"text-gray-600"},u_={class:"w-full bg-gray-200 rounded-full h-8"},c_={key:0},d_={class:"bg-white rounded-xl shadow-md p-6 mb-8"},f_={class:"space-y-4"},h_={class:"flex justify-between text-sm"},p_={class:"font-medium text-gray-700"},v_={class:"text-gray-600"},g_={class:"w-full bg-gray-200 rounded-full h-8"},y_={key:0},m_={class:"bg-white rounded-xl shadow-md overflow-hidden"},x_={class:"overflow-x-auto"},w_={class:"min-w-full divide-y divide-gray-200"},__={class:"bg-white divide-y divide-gray-200"},b_={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},E_={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-700"},A_={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},C_={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},S_={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},I_={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},O_={class:"px-6 py-4 whitespace-nowrap"},T_={class:"flex items-center"},R_={class:"text-sm font-semibold text-gray-900"},P_={class:"px-6 py-4 whitespace-nowrap"},k_={key:0},N_=ot({__name:"AdminDashboard",setup(r){const e=W([]),t=W(!0),n=W(""),i=W({pelicula:"",sala:"",fechaInicio:"",fechaFin:""}),o=Ee(()=>[...new Set(e.value.map(m=>m.pelicula))].sort()),a=Ee(()=>[...new Set(e.value.map(m=>m.sala))].sort()),s=Ee(()=>{let y=[...e.value];return i.value.pelicula&&(y=y.filter(m=>m.pelicula===i.value.pelicula)),i.value.sala&&(y=y.filter(m=>m.sala===i.value.sala)),i.value.fechaInicio&&(y=y.filter(m=>m.fecha>=i.value.fechaInicio)),i.value.fechaFin&&(y=y.filter(m=>m.fecha<=i.value.fechaFin)),y.sort((m,_)=>{const E=_.fecha.localeCompare(m.fecha);return E!==0?E:m.hora_inicio.localeCompare(_.hora_inicio)})}),l=Ee(()=>{const y=s.value;if(y.length===0)return{totalAsientosOcupados:0,promedioOcupacion:0,salaMasOcupada:"",funcionesTotales:0};const m=y.reduce((S,B)=>S+B.asientos_ocupados,0),_=y.reduce((S,B)=>S+B.porcentaje_ocupacion,0)/y.length,E=y.reduce((S,B)=>(S[B.sala]||(S[B.sala]={total:0,count:0}),S[B.sala].total+=B.porcentaje_ocupacion,S[B.sala].count++,S),{}),b=Object.entries(E).reduce((S,[B,L])=>{const j=L.total/L.count;return j>S.promedio?{sala:B,promedio:j}:S},{sala:"",promedio:0}).sala;return{totalAsientosOcupados:m,promedioOcupacion:_.toFixed(2),salaMasOcupada:b,funcionesTotales:y.length}}),u=Ee(()=>{const m=s.value.reduce((b,S)=>(b[S.pelicula]||(b[S.pelicula]={nombre:S.pelicula,asientosOcupados:0,count:0}),b[S.pelicula].asientosOcupados+=S.asientos_ocupados,b[S.pelicula].count++,b),{}),_=Object.values(m),E=Math.max(..._.map(b=>b.asientosOcupados),1);return _.map(b=>({nombre:b.nombre,asientosOcupados:b.asientosOcupados,funcionesTotal:b.count,porcentaje:(b.asientosOcupados/E*100).toFixed(2)})).sort((b,S)=>S.asientosOcupados-b.asientosOcupados).slice(0,10)}),c=Ee(()=>{const m=s.value.reduce((_,E)=>(_[E.sala]||(_[E.sala]={nombre:E.sala,asientosOcupados:0,capacidadTotal:E.capacidad,count:0}),_[E.sala].asientosOcupados+=E.asientos_ocupados,_[E.sala].count++,_),{});return Object.values(m).map(_=>({nombre:_.nombre,asientosOcupados:_.asientosOcupados,capacidadTotal:_.capacidadTotal*_.count,funcionesTotal:_.count,porcentaje:(_.asientosOcupados/(_.capacidadTotal*_.count)*100).toFixed(2)})).sort((_,E)=>parseFloat(E.porcentaje)-parseFloat(_.porcentaje))});async function d(){t.value=!0,n.value="";try{const{data:y,error:m}=await ae.from("vista_ocupacion").select("*").order("fecha",{ascending:!1});if(m)throw m;e.value=y||[]}catch(y){n.value=y.message||"Error al cargar los datos de ocupacin",console.error("Error cargando datos:",y)}finally{t.value=!1}}function p(){}function h(y){return new Date(y).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})}function v(y){const m=y.split(":");return m.length>=2?`${m[0]}:${m[1]}`:y}function x(y){const m=typeof y=="string"?parseFloat(y):y;return m>=90?"bg-red-500":m>=70?"bg-orange-500":m>=50?"bg-yellow-500":m>=30?"bg-green-500":"bg-blue-500"}function w(y){return y>=90?"bg-red-100 text-red-800":y>=70?"bg-orange-100 text-orange-800":y>=50?"bg-yellow-100 text-yellow-800":y>=30?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}function g(y){return y>=90?"Lleno":y>=70?"Muy Ocupado":y>=50?"Ocupado":y>=30?"Moderado":"Disponible"}return sr(()=>{d()}),(y,m)=>(O(),T("div",Dw,[m[29]||(m[29]=f("div",{class:"bg-[#8B0000] text-white shadow-lg"},[f("div",{class:"container mx-auto px-6 py-6"},[f("h1",{class:"text-3xl font-bold"},"Dashboard Administrativo - Cine ULEAM"),f("p",{class:"text-gray-200 mt-1"},"Estadsticas y anlisis de ocupacin")])],-1)),f("div",Mw,[f("div",Bw,[ue(Rt(Wr),{to:"/admin/cartelera",class:"inline-flex items-center gap-2 bg-[#8B0000] text-white px-6 py-3 rounded-xl font-semibold shadow-md hover:bg-[#A52A2A] transition-all duration-200"},{default:we(()=>[...m[4]||(m[4]=[f("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"})],-1),de(" Gestin de Cartelera ",-1)])]),_:1}),ue(Rt(Wr),{to:"/admin/encuestas",class:"inline-flex items-center gap-2 bg-green-600 text-white px-6 py-3 rounded-xl font-semibold shadow-md hover:bg-green-700 transition-all duration-200"},{default:we(()=>[...m[5]||(m[5]=[f("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})],-1),de(" Gestin de Encuestas ",-1)])]),_:1}),ue(Rt(Wr),{to:"/admin/notificaciones",class:"inline-flex items-center gap-2 bg-purple-600 text-white px-6 py-3 rounded-xl font-semibold shadow-md hover:bg-purple-700 transition-all duration-200"},{default:we(()=>[...m[6]||(m[6]=[f("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1),de(" Ver Sugerencias ",-1)])]),_:1}),f("button",{onClick:d,class:"inline-flex items-center gap-2 bg-white text-[#8B0000] px-6 py-3 rounded-xl font-semibold shadow-md hover:bg-gray-100 transition-all duration-200 border-2 border-[#8B0000]"},[...m[7]||(m[7]=[f("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),de(" Actualizar Datos ",-1)])])]),t.value?(O(),T("div",Lw,[...m[8]||(m[8]=[f("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-[#8B0000]"},null,-1),f("p",{class:"mt-4 text-gray-600"},"Cargando datos...",-1)])])):n.value?(O(),T("div",Fw,[f("p",$w,P(n.value),1)])):(O(),T("div",jw,[f("div",Uw,[f("div",Vw,[f("div",Hw,[f("div",null,[m[9]||(m[9]=f("p",{class:"text-gray-500 text-sm font-medium"},"Total Asientos Ocupados",-1)),f("p",Gw,P(l.value.totalAsientosOcupados),1)]),m[10]||(m[10]=f("div",{class:"bg-blue-100 rounded-full p-3"},[f("svg",{class:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1))])]),f("div",qw,[f("div",zw,[f("div",null,[m[11]||(m[11]=f("p",{class:"text-gray-500 text-sm font-medium"},"Promedio Ocupacin",-1)),f("p",Ww,P(l.value.promedioOcupacion)+"%",1)]),m[12]||(m[12]=f("div",{class:"bg-green-100 rounded-full p-3"},[f("svg",{class:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1))])]),f("div",Kw,[f("div",Xw,[f("div",null,[m[13]||(m[13]=f("p",{class:"text-gray-500 text-sm font-medium"},"Sala Ms Ocupada",-1)),f("p",Yw,P(l.value.salaMasOcupada||"N/A"),1)]),m[14]||(m[14]=f("div",{class:"bg-yellow-100 rounded-full p-3"},[f("svg",{class:"w-8 h-8 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})])],-1))])]),f("div",Zw,[f("div",Jw,[f("div",null,[m[15]||(m[15]=f("p",{class:"text-gray-500 text-sm font-medium"},"Funciones Analizadas",-1)),f("p",Qw,P(e.value.length),1)]),m[16]||(m[16]=f("div",{class:"bg-purple-100 rounded-full p-3"},[f("svg",{class:"w-8 h-8 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})])],-1))])])]),f("div",e_,[m[23]||(m[23]=f("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Filtros",-1)),f("div",t_,[f("div",null,[m[18]||(m[18]=f("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pelcula",-1)),fe(f("select",{"onUpdate:modelValue":m[0]||(m[0]=_=>i.value.pelicula=_),onChange:p,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent"},[m[17]||(m[17]=f("option",{value:""},"Todas las pelculas",-1)),(O(!0),T(ke,null,st(o.value,_=>(O(),T("option",{key:_,value:_},P(_),9,r_))),128))],544),[[ar,i.value.pelicula]])]),f("div",null,[m[20]||(m[20]=f("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Sala",-1)),fe(f("select",{"onUpdate:modelValue":m[1]||(m[1]=_=>i.value.sala=_),onChange:p,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent"},[m[19]||(m[19]=f("option",{value:""},"Todas las salas",-1)),(O(!0),T(ke,null,st(a.value,_=>(O(),T("option",{key:_,value:_},P(_),9,n_))),128))],544),[[ar,i.value.sala]])]),f("div",null,[m[21]||(m[21]=f("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Fecha Inicio",-1)),fe(f("input",{"onUpdate:modelValue":m[2]||(m[2]=_=>i.value.fechaInicio=_),type:"date",onChange:p,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent"},null,544),[[Ae,i.value.fechaInicio]])]),f("div",null,[m[22]||(m[22]=f("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Fecha Fin",-1)),fe(f("input",{"onUpdate:modelValue":m[3]||(m[3]=_=>i.value.fechaFin=_),type:"date",onChange:p,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent"},null,544),[[Ae,i.value.fechaFin]])])])]),f("div",i_,[m[24]||(m[24]=f("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Ocupacin por Sala",-1)),f("div",o_,[(O(!0),T(ke,null,st(c.value,_=>(O(),T("div",{key:_.nombre,class:"space-y-2"},[f("div",a_,[f("span",s_,P(_.nombre),1),f("span",l_,P(_.porcentaje)+"% ocupado ("+P(_.funcionesTotal)+" funciones)",1)]),f("div",u_,[f("div",{style:hn({width:_.porcentaje+"%"}),class:it([x(_.porcentaje),"h-8 rounded-full flex items-center justify-end pr-3 text-white text-xs font-semibold transition-all duration-500"])},[parseFloat(_.porcentaje)>10?(O(),T("span",c_,P(_.asientosOcupados)+"/"+P(_.capacidadTotal),1)):Z("",!0)],6)])]))),128))])]),f("div",d_,[m[25]||(m[25]=f("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Pelculas Ms Populares",-1)),f("div",f_,[(O(!0),T(ke,null,st(u.value,_=>(O(),T("div",{key:_.nombre,class:"space-y-2"},[f("div",h_,[f("span",p_,P(_.nombre),1),f("span",v_,P(_.asientosOcupados)+" asientos ("+P(_.funcionesTotal)+" funciones)",1)]),f("div",g_,[f("div",{style:hn({width:_.porcentaje+"%"}),class:"h-8 rounded-full flex items-center justify-end pr-3 text-white text-xs font-semibold transition-all duration-500 bg-gradient-to-r from-purple-500 to-pink-500"},[parseFloat(_.porcentaje)>10?(O(),T("span",y_,P(_.porcentaje)+"%",1)):Z("",!0)],4)])]))),128))])]),f("div",m_,[m[28]||(m[28]=f("div",{class:"px-6 py-4 border-b border-gray-200 bg-gray-50"},[f("h3",{class:"text-lg font-semibold text-gray-800"},"Detalle de Ocupacin por Funcin")],-1)),f("div",x_,[f("table",w_,[m[27]||(m[27]=f("thead",{class:"bg-gray-50"},[f("tr",null,[f("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Pelcula "),f("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Sala "),f("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Fecha "),f("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Horario "),f("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Asientos Ocupados "),f("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Capacidad "),f("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Ocupacin "),f("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Estado ")])],-1)),f("tbody",__,[(O(!0),T(ke,null,st(s.value,(_,E)=>(O(),T("tr",{key:E,class:"hover:bg-gray-50"},[f("td",b_,P(_.pelicula),1),f("td",E_,P(_.sala),1),f("td",A_,P(h(_.fecha)),1),f("td",C_,P(v(_.hora_inicio))+" - "+P(v(_.hora_fin)),1),f("td",S_,P(_.asientos_ocupados),1),f("td",I_,P(_.capacidad),1),f("td",O_,[f("div",T_,[f("span",R_,P(_.porcentaje_ocupacion)+"%",1)])]),f("td",P_,[f("span",{class:it([w(_.porcentaje_ocupacion),"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full"])},P(g(_.porcentaje_ocupacion)),3)])]))),128)),s.value.length===0?(O(),T("tr",k_,[...m[26]||(m[26]=[f("td",{colspan:"8",class:"px-6 py-8 text-center text-gray-500"}," No hay datos disponibles con los filtros seleccionados ",-1)])])):Z("",!0)])])])])]))])]))}}),D_=jn(N_,[["__scopeId","data-v-695e68ab"]]),M_={class:"min-h-screen bg-gray-50"},B_={class:"bg-[#8B0000] text-white shadow-lg"},L_={class:"container mx-auto px-6 py-6"},F_={class:"flex items-center justify-between"},$_={class:"flex gap-3"},j_={class:"container mx-auto px-6 py-8"},U_={class:"mb-6"},V_={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},H_={class:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},G_={class:"p-6"},q_={class:"flex justify-between items-center mb-6"},z_={class:"text-2xl font-bold text-gray-800"},W_={class:"flex gap-3 pt-4"},K_=["disabled"],X_={key:1,class:"text-center py-12"},Y_={key:2,class:"grid grid-cols-1 gap-6"},Z_={class:"p-6"},J_={class:"flex justify-between items-start mb-4"},Q_={class:"flex-1"},eb={class:"flex items-center gap-3 mb-2"},tb={class:"text-xl font-bold text-gray-800"},rb={class:"flex gap-4 text-sm text-gray-500"},nb={key:0},ib={key:1},ob={class:"flex gap-2"},ab=["onClick"],sb=["onClick"],lb={key:0,class:"mt-4 bg-gray-50 rounded-lg p-4"},ub={class:"grid grid-cols-3 gap-4 mb-4"},cb={class:"text-center"},db={class:"text-2xl font-bold text-gray-800"},fb={class:"text-center"},hb={class:"text-2xl font-bold text-green-600"},pb={class:"text-sm text-gray-600"},vb={class:"text-center"},gb={class:"text-2xl font-bold text-red-600"},yb={class:"text-sm text-gray-600"},mb={key:0,class:"w-full h-8 bg-gray-200 rounded-full overflow-hidden flex"},xb={key:0},wb={key:0},_b={key:1,class:"text-center text-gray-500 text-sm"},bb={key:0,class:"text-center py-12"},Eb=ot({__name:"AdminEncuestas",setup(r){const e=W([]),t=W(!0),n=W(!1),i=W(!1),o=W(!1),a=W({id:"",pregunta:"",fecha_cierre:""}),s=W({});async function l(){t.value=!0;try{const{data:g,error:y}=await ae.from("encuestas").select("*").order("fecha_creacion",{ascending:!1});if(y)throw y;e.value=g||[];for(const m of e.value)await u(m.id)}catch(g){console.error("Error cargando encuestas:",g),alert("Error al cargar las encuestas: "+g.message)}finally{t.value=!1}}async function u(g){try{const{data:y,error:m}=await ae.from("votos").select("respuesta").eq("encuesta_id",g);if(m)throw m;const _=y?.length||0,E=y?.filter(S=>S.respuesta===!0).length||0,b=_-E;s.value[g]={total:_,si:E,no:b}}catch(y){console.error("Error cargando estadsticas:",y),s.value[g]={total:0,si:0,no:0}}}async function c(){if(!a.value.pregunta.trim()){alert("La pregunta es obligatoria");return}n.value=!0;try{const{data:{user:g}}=await ae.auth.getUser();if(!g)throw new Error("Usuario no autenticado");if(o.value){const{error:y}=await ae.from("encuestas").update({pregunta:a.value.pregunta,fecha_cierre:a.value.fecha_cierre||null}).eq("id",a.value.id);if(y)throw y}else{const{error:y}=await ae.from("encuestas").insert({pregunta:a.value.pregunta,admin_id:g.id,fecha_cierre:a.value.fecha_cierre||null});if(y)throw y}h(),await l()}catch(g){console.error("Error guardando encuesta:",g),alert("Error al guardar la encuesta: "+g.message)}finally{n.value=!1}}function d(g){a.value={id:g.id,pregunta:g.pregunta,fecha_cierre:g.fecha_cierre?new Date(g.fecha_cierre).toISOString().slice(0,16):""},o.value=!0,i.value=!0}async function p(g){if(confirm("Ests seguro de eliminar esta encuesta? Se eliminarn todas las respuestas asociadas."))try{const{error:y}=await ae.from("encuestas").delete().eq("id",g);if(y)throw y;await l()}catch(y){console.error("Error eliminando encuesta:",y),alert("Error al eliminar la encuesta: "+y.message)}}function h(){i.value=!1,o.value=!1,a.value={id:"",pregunta:"",fecha_cierre:""}}function v(g){return new Date(g).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function x(g){return g.fecha_cierre?new Date(g.fecha_cierre)>new Date:!0}function w(g,y){const m=s.value[g];if(!m||m.total===0)return 0;const _=y==="si"?m.si:m.no;return Math.round(_/m.total*100)}return sr(()=>{l()}),(g,y)=>(O(),T("div",M_,[f("div",B_,[f("div",L_,[f("div",F_,[y[5]||(y[5]=f("div",null,[f("h1",{class:"text-3xl font-bold"},"Gestin de Encuestas"),f("p",{class:"text-gray-200 mt-1"},"Crea y administra encuestas para los estudiantes")],-1)),f("div",$_,[ue(Rt(Wr),{to:"/admin",class:"inline-flex items-center gap-2 bg-white/20 hover:bg-white/30 text-white px-5 py-3 rounded-xl font-semibold transition-all duration-200"},{default:we(()=>[...y[3]||(y[3]=[f("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),de(" Dashboard ",-1)])]),_:1}),ue(Rt(Wr),{to:"/admin/cartelera",class:"inline-flex items-center gap-2 bg-white/20 hover:bg-white/30 text-white px-5 py-3 rounded-xl font-semibold transition-all duration-200"},{default:we(()=>[...y[4]||(y[4]=[f("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"})],-1),de(" Cartelera ",-1)])]),_:1})])])])]),f("div",j_,[f("div",U_,[f("button",{onClick:y[0]||(y[0]=m=>i.value=!0),class:"inline-flex items-center gap-2 bg-[#8B0000] text-white px-6 py-3 rounded-xl font-semibold shadow-md hover:bg-[#A52A2A] transition-all duration-200"},[...y[6]||(y[6]=[f("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),de(" Nueva Encuesta ",-1)])])]),i.value?(O(),T("div",V_,[f("div",H_,[f("div",G_,[f("div",q_,[f("h2",z_,P(o.value?"Editar Encuesta":"Nueva Encuesta"),1),f("button",{onClick:h,class:"text-gray-500 hover:text-gray-700"},[...y[7]||(y[7]=[f("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),f("form",{onSubmit:Yr(c,["prevent"]),class:"space-y-4"},[f("div",null,[y[8]||(y[8]=f("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pregunta *",-1)),fe(f("input",{"onUpdate:modelValue":y[1]||(y[1]=m=>a.value.pregunta=m),type:"text",required:"",placeholder:"Te gustara que proyectramos ms pelculas de accin?",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent"},null,512),[[Ae,a.value.pregunta]])]),f("div",null,[y[9]||(y[9]=f("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Fecha de cierre (opcional)",-1)),fe(f("input",{"onUpdate:modelValue":y[2]||(y[2]=m=>a.value.fecha_cierre=m),type:"datetime-local",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent"},null,512),[[Ae,a.value.fecha_cierre]]),y[10]||(y[10]=f("p",{class:"text-xs text-gray-500 mt-1"},"Si no se especifica, la encuesta no tendr fecha de cierre",-1))]),f("div",W_,[f("button",{type:"submit",disabled:n.value,class:"flex-1 bg-[#8B0000] text-white px-6 py-3 rounded-lg font-semibold hover:bg-[#A52A2A] transition-colors disabled:opacity-50"},P(n.value?"Guardando...":o.value?"Actualizar":"Crear Encuesta"),9,K_),f("button",{type:"button",onClick:h,class:"px-6 py-3 border border-gray-300 rounded-lg font-semibold hover:bg-gray-50 transition-colors"}," Cancelar ")])],32)])])])):Z("",!0),t.value?(O(),T("div",X_,[...y[11]||(y[11]=[f("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-[#8B0000]"},null,-1),f("p",{class:"mt-4 text-gray-600"},"Cargando encuestas...",-1)])])):(O(),T("div",Y_,[(O(!0),T(ke,null,st(e.value,m=>(O(),T("div",{key:m.id,class:"bg-white rounded-xl shadow-md overflow-hidden"},[f("div",Z_,[f("div",J_,[f("div",Q_,[f("div",eb,[f("h3",tb,P(m.pregunta),1),f("span",{class:it([x(m)?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800","px-3 py-1 text-xs font-semibold rounded-full"])},P(x(m)?"Activa":"Cerrada"),3)]),f("div",rb,[f("span",null," Creada: "+P(v(m.fecha_creacion)),1),m.fecha_cierre?(O(),T("span",nb," Cierra: "+P(v(m.fecha_cierre)),1)):(O(),T("span",ib," Sin fecha de cierre"))])]),f("div",ob,[f("button",{onClick:_=>d(m),class:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Editar"},[...y[12]||(y[12]=[f("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,ab),f("button",{onClick:_=>p(m.id),class:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Eliminar"},[...y[13]||(y[13]=[f("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,sb)])]),s.value[m.id]?(O(),T("div",lb,[y[15]||(y[15]=f("h4",{class:"font-semibold text-gray-700 mb-3"},"Estadsticas",-1)),f("div",ub,[f("div",cb,[f("p",db,P(s.value[m.id].total),1),y[14]||(y[14]=f("p",{class:"text-sm text-gray-600"},"Total respuestas",-1))]),f("div",fb,[f("p",hb,P(s.value[m.id].si),1),f("p",pb,"S ("+P(w(m.id,"si"))+"%)",1)]),f("div",vb,[f("p",gb,P(s.value[m.id].no),1),f("p",yb,"No ("+P(w(m.id,"no"))+"%)",1)])]),s.value[m.id].total>0?(O(),T("div",mb,[f("div",{style:hn({width:w(m.id,"si")+"%"}),class:"bg-green-500 flex items-center justify-center text-white text-xs font-semibold"},[w(m.id,"si")>10?(O(),T("span",xb,"S "+P(w(m.id,"si"))+"%",1)):Z("",!0)],4),f("div",{style:hn({width:w(m.id,"no")+"%"}),class:"bg-red-500 flex items-center justify-center text-white text-xs font-semibold"},[w(m.id,"no")>10?(O(),T("span",wb,"NO "+P(w(m.id,"no"))+"%",1)):Z("",!0)],4)])):(O(),T("p",_b,"Sin respuestas an"))])):Z("",!0)])]))),128)),e.value.length===0?(O(),T("div",bb,[...y[16]||(y[16]=[f("svg",{class:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),f("p",{class:"text-gray-500 text-lg"},"No hay encuestas creadas",-1),f("p",{class:"text-gray-400 text-sm mt-2"},"Crea tu primera encuesta para comenzar",-1)])])):Z("",!0)]))])]))}}),Ab={class:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100"},Cb={class:"container mx-auto px-4 sm:px-6 lg:px-8 py-12"},Sb={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-12"},Ib={class:"bg-white rounded-2xl shadow-lg p-6 mb-8"},Ob={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Tb={class:"relative"},Rb={key:0,class:"text-center py-20"},Pb={key:1,class:"bg-red-50 border border-red-200 rounded-2xl p-8 text-center"},kb={class:"text-red-700 text-lg mb-4"},Nb={key:2,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},Db={class:"relative group overflow-hidden aspect-[2/3]"},Mb=["src","alt"],Bb={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-80 transition-all duration-300 flex flex-col items-center justify-center gap-3 opacity-0 group-hover:opacity-100"},Lb=["onClick"],Fb=["onClick"],$b={class:"p-5"},jb={class:"text-xl font-bold text-gray-900 mb-3 line-clamp-2"},Ub={class:"flex flex-wrap gap-2 mb-3"},Vb={key:0,class:"text-xs bg-gray-100 text-gray-700 px-3 py-1 rounded-full"},Hb={key:0,class:"mb-3"},Gb={class:"inline-block bg-[#8B0000] text-white text-xs px-3 py-1 rounded-full font-semibold"},qb={key:1,class:"text-sm text-gray-600 line-clamp-3 mb-3"},zb={key:2,class:"text-sm text-gray-500"},Wb={key:3,class:"text-center py-20"},Kb={class:"grid grid-cols-1 md:grid-cols-5 gap-6 p-8"},Xb={class:"md:col-span-2"},Yb=["src","alt"],Zb={class:"md:col-span-3 space-y-4"},Jb={class:"text-3xl font-extrabold text-gray-900"},Qb={class:"flex flex-wrap gap-2"},e3={key:0,class:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg text-sm"},t3={key:0},r3={class:"ml-2 inline-block bg-[#8B0000] text-white px-3 py-1 rounded-full text-sm"},n3={key:1,class:"text-gray-700"},i3={key:2},o3={class:"text-gray-600 leading-relaxed"},a3={class:"pt-4"},s3=ot({__name:"Cartelera",setup(r){const e=yi(),t=W([]),n=W(!0),i=W(null),o=W(null),a=W(""),s=W(""),l=async()=>{try{n.value=!0,i.value=null;const{data:h,error:v}=await ae.from("peliculas").select("*").order("titulo",{ascending:!0});if(v)throw v;t.value=h||[]}catch(h){i.value="Error al cargar las pelculas. Por favor, intenta de nuevo.",console.error("Error:",h)}finally{n.value=!1}},u=Ee(()=>t.value.filter(h=>{const v=h.titulo.toLowerCase().includes(a.value.toLowerCase()),x=!s.value||h.genero===s.value;return v&&x})),c=h=>{o.value=h},d=()=>{o.value=null},p=h=>{if(!localStorage.getItem("userId")){alert("Debes iniciar sesin para hacer una reserva"),e.push("/login");return}e.push({path:"/generar-qr",query:{pelicula_id:h.id}}),d()};return sr(()=>{l()}),(h,v)=>{const x=lr("RouterLink");return O(),T("div",Ab,[f("div",Cb,[f("div",Sb,[v[5]||(v[5]=f("div",{class:"text-center md:text-left"},[f("h1",{class:"text-4xl md:text-5xl font-extrabold text-gray-900 mb-3"}," Cartelera de Pelculas "),f("p",{class:"text-lg text-gray-600"}," Descubre las pelculas en cartelera ")],-1)),ue(x,{to:"/sugerencia",class:"inline-flex items-center justify-center gap-2 bg-[#8B0000] text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:bg-[#A52A2A] hover:scale-105 transition-all duration-200"},{default:we(()=>[...v[4]||(v[4]=[f("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),de(" Crear sugerencia ",-1)])]),_:1})]),f("div",Ib,[f("div",Ob,[f("div",null,[v[7]||(v[7]=f("label",{for:"genero",class:"block text-sm font-medium text-gray-700 mb-2"}," Gnero ",-1)),fe(f("select",{id:"genero","onUpdate:modelValue":v[0]||(v[0]=w=>s.value=w),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200"},[...v[6]||(v[6]=[$n('<option value="">Todos los generos</option><option value="Accin">Accin</option><option value="Comedia">Comedia</option><option value="Drama">Drama</option><option value="Terror">Terror</option><option value="Ciencia Ficcin">Ciencia Ficcin</option><option value="Romance">Romance</option><option value="Aventura">Aventura</option>',8)])],512),[[ar,s.value]])]),f("div",null,[v[9]||(v[9]=f("label",{for:"busqueda",class:"block text-sm font-medium text-gray-700 mb-2"}," Buscar pelcula ",-1)),f("div",Tb,[v[8]||(v[8]=f("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[f("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),fe(f("input",{id:"busqueda",type:"text","onUpdate:modelValue":v[1]||(v[1]=w=>a.value=w),placeholder:"Buscar por ttulo...",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200"},null,512),[[Ae,a.value]])])])])]),n.value?(O(),T("div",Rb,[...v[10]||(v[10]=[f("div",{class:"inline-block animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-[#8B0000]"},null,-1),f("p",{class:"mt-4 text-lg text-gray-600"},"Cargando pelculas...",-1)])])):i.value?(O(),T("div",Pb,[v[11]||(v[11]=f("svg",{class:"mx-auto h-12 w-12 text-red-500 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),f("p",kb,P(i.value),1),f("button",{onClick:l,class:"bg-[#8B0000] text-white px-6 py-3 rounded-lg font-semibold hover:bg-[#A52A2A] hover:scale-105 transition-all duration-200"}," Reintentar ")])):u.value.length>0?(O(),T("div",Nb,[(O(!0),T(ke,null,st(u.value,w=>(O(),T("div",{key:w.id,class:"bg-white rounded-2xl shadow-lg overflow-hidden transform hover:-translate-y-2 hover:shadow-2xl transition-all duration-300"},[f("div",Db,[f("img",{src:w.poster_url||"https://via.placeholder.com/300x450?text=Sin+Poster",alt:w.titulo,class:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"},null,8,Mb),f("div",Bb,[f("button",{onClick:g=>c(w),class:"bg-white text-gray-900 px-6 py-2 rounded-lg font-semibold hover:bg-gray-100 transition-all duration-200 transform hover:scale-105"}," Ver Detalles ",8,Lb),f("button",{onClick:g=>p(w),class:"bg-[#8B0000] text-white px-6 py-2 rounded-lg font-semibold hover:bg-[#A52A2A] transition-all duration-200 transform hover:scale-105"}," Reservar ",8,Fb)])]),f("div",$b,[f("h3",jb,P(w.titulo),1),f("div",Ub,[w.duracion_min?(O(),T("span",Vb,P(w.duracion_min)+" min ",1)):Z("",!0)]),w.genero?(O(),T("div",Hb,[f("span",Gb,P(w.genero),1)])):Z("",!0),w.sinopsis?(O(),T("p",qb,P(w.sinopsis),1)):Z("",!0),w.director?(O(),T("div",zb,[v[12]||(v[12]=f("span",{class:"font-semibold"},"Director:",-1)),de(" "+P(w.director),1)])):Z("",!0)])]))),128))])):(O(),T("div",Wb,[...v[13]||(v[13]=[f("svg",{class:"mx-auto h-24 w-24 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"})],-1),f("p",{class:"text-xl text-gray-500"},"No se encontraron pelculas",-1),f("p",{class:"text-gray-400 mt-2"},"Intenta ajustar los filtros de bsqueda",-1)])]))]),o.value?(O(),T("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:d},[f("div",{class:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto relative shadow-2xl",onClick:v[3]||(v[3]=Yr(()=>{},["stop"]))},[f("button",{onClick:d,class:"absolute top-4 right-4 bg-[#8B0000] text-white w-10 h-10 rounded-full flex items-center justify-center hover:bg-[#A52A2A] transition-all duration-200 z-10 shadow-lg"},[...v[14]||(v[14]=[f("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),f("div",Kb,[f("div",Xb,[f("img",{src:o.value.poster_url||"https://via.placeholder.com/300x450?text=Sin+Poster",alt:o.value.titulo,class:"w-full rounded-xl shadow-lg"},null,8,Yb)]),f("div",Zb,[f("h2",Jb,P(o.value.titulo),1),f("div",Qb,[o.value.duracion_min?(O(),T("span",e3,P(o.value.duracion_min)+" min ",1)):Z("",!0)]),o.value.genero?(O(),T("div",t3,[v[15]||(v[15]=f("span",{class:"text-sm font-semibold text-gray-700"},"Gnero:",-1)),f("span",r3,P(o.value.genero),1)])):Z("",!0),o.value.director?(O(),T("div",n3,[v[16]||(v[16]=f("span",{class:"font-semibold"},"Director:",-1)),de(" "+P(o.value.director),1)])):Z("",!0),o.value.sinopsis?(O(),T("div",i3,[v[17]||(v[17]=f("h3",{class:"text-xl font-bold text-gray-900 mb-2"},"Sinopsis",-1)),f("p",o3,P(o.value.sinopsis),1)])):Z("",!0),f("div",a3,[f("button",{onClick:v[2]||(v[2]=w=>p(o.value)),class:"w-full bg-[#8B0000] text-white px-8 py-4 rounded-xl font-semibold text-lg hover:bg-[#A52A2A] hover:scale-105 transition-all duration-200 shadow-lg"}," Reservar Entradas ")])])])])])):Z("",!0)])}}}),l3={class:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-12"},u3={class:"container mx-auto px-4 sm:px-6 lg:px-8"},c3={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-10"},d3={class:"bg-white rounded-2xl shadow-xl p-6 md:p-10 space-y-8"},f3={class:"grid grid-cols-1 lg:grid-cols-4 gap-4"},h3={class:"lg:col-span-2"},p3={class:"flex flex-col sm:flex-row gap-3"},v3=["disabled"],g3=["value"],y3=["value"],m3={key:0,class:"mt-4 text-sm text-gray-500"},x3={key:0,class:"py-10 text-center"},w3={key:1,class:"py-8 px-6 bg-red-50 border border-red-200 rounded-2xl text-red-700"},_3={class:"text-sm"},b3={key:2},E3={key:0,class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4"},A3=["value"],C3={class:"space-y-2"},S3={class:"text-lg font-semibold text-gray-900"},I3={class:"flex flex-wrap gap-2 text-xs text-gray-600"},O3={key:0,class:"bg-gray-100 px-2.5 py-1 rounded-full"},T3={key:1,class:"bg-yellow-100 text-yellow-800 px-2.5 py-1 rounded-full font-semibold"},R3={key:2,class:"bg-gray-100 px-2.5 py-1 rounded-full"},P3={key:0,class:"text-sm text-gray-500 line-clamp-3"},k3={key:1,class:"mt-6 text-center"},N3=["disabled"],D3={key:2,class:"py-10 text-center border-2 border-dashed border-gray-200 rounded-2xl"},M3={key:0,class:"text-gray-500"},B3={key:1,class:"text-gray-500"},L3={class:"space-y-4"},F3={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl"},$3={key:1,class:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-xl"},j3=["disabled"],kc="34e63b5b",Nc="https://www.omdbapi.com/",U3=ot({__name:"Sugerencia",setup(r){const e=W([]),t=W(!1),n=W(!1),i=W(null),o=W(""),a=W(""),s=W(""),l=W(""),u=W([]),c=W([]),d=W(0),p=W(0),h=W(""),v=W(""),x=W(!1),w=W(""),g=W(""),y=()=>{u.value=[],c.value=[]},m=()=>{const M=new Set,k=new Set;e.value.forEach(K=>{K.genero&&K.genero.split(",").map(ee=>ee.trim()).filter(Boolean).forEach(ee=>M.add(ee)),K.clasificacion&&k.add(K.clasificacion)}),u.value=Array.from(M).sort(),c.value=Array.from(k).sort()},_=(M,k)=>{const K=M&&M.Response!=="False"?M:null,ee=K?.imdbID||k?.imdbID,J=K?.Title||k?.Title;if(!ee||!J)return null;const G=(K?.Runtime||"").match(/(\d+)/),Re=K?.Genre&&K.Genre!=="N/A"?K.Genre:void 0,Ve=K?.Rated&&K.Rated!=="N/A"?K.Rated:void 0,et=K?.Plot&&K.Plot!=="N/A"?K.Plot:void 0,ze=G?Number(G[1]):void 0,Pt=K?.Poster&&K.Poster!=="N/A"?K.Poster:k?.Poster&&k.Poster!=="N/A"?k.Poster:void 0;return{id:ee,titulo:J,genero:Re,clasificacion:Ve,sinopsis:et,duracion_min:ze,poster_url:Pt}},E=async M=>{const k=o.value.trim(),K=`${Nc}?s=${encodeURIComponent(k)}&type=movie&page=${M}&apikey=${kc}`,ee=await fetch(K);if(!ee.ok)throw new Error("No se pudo consultar la API externa.");const J=await ee.json();if(J.Response==="False")throw new Error(J.Error||"No se encontraron resultados con ese ttulo.");return d.value=parseInt(J.totalResults,10)||(Array.isArray(J.Search)?J.Search.length:0),(await Promise.all((J.Search||[]).map(async G=>{try{const Ve=await(await fetch(`${Nc}?i=${G.imdbID}&plot=short&apikey=${kc}`)).json();return _(Ve,G)}catch(Re){return console.warn("No se pudo obtener detalle de la pelcula:",Re),_(null,G)}}))).filter(G=>!!G)},b=async(M=!0)=>{if(w.value="",g.value="",i.value=null,o.value.trim().length<3){i.value="Ingresa al menos 3 caracteres para buscar una pelcula.",e.value=[],y();return}M?(t.value=!0,e.value=[],h.value="",a.value="",s.value="",l.value="",d.value=0,p.value=0,y()):n.value=!0;try{const K=M?1:p.value+1,ee=await E(K);if(M)e.value=ee;else{const J=new Set(e.value.map(N=>N.id));ee.forEach(N=>{J.has(N.id)||e.value.push(N)})}p.value=K,m(),e.value.length||(i.value="No se encontraron pelculas con ese ttulo. Intenta con otra bsqueda.")}catch(K){console.error("Error al buscar pelculas en la API:",K),i.value=K.message||"No se pudo obtener informacin de la API. Intenta nuevamente."}finally{M?t.value=!1:n.value=!1}},S=async()=>{n.value||t.value||e.value.length>=d.value||await b(!1)},B=Ee(()=>e.value.filter(M=>{const k=!a.value||M.titulo.toLowerCase().includes(a.value.toLowerCase()),K=!s.value||M.genero?.split(",").map(J=>J.trim().toLowerCase()).includes(s.value.toLowerCase()),ee=!l.value||M.clasificacion===l.value;return k&&K&&ee})),L=Ee(()=>!e.value.length||d.value===0?!1:e.value.length<d.value),j=Ee(()=>{if(!e.value.length)return"";const M=d.value||e.value.length;return`Mostrando ${B.value.length} de ${M} resultados disponibles`}),Y=async()=>{if(w.value="",g.value="",!h.value){w.value="Selecciona la pelcula que deseas sugerir.";return}const M=localStorage.getItem("userId"),k=localStorage.getItem("userName")||"Usuario",K=localStorage.getItem("userRole");if(!M){w.value="Necesitas iniciar sesin con tu cuenta institucional para enviar una sugerencia.";return}if(K!=="estudiante"){w.value="Solo los estudiantes pueden enviar sugerencias.";return}const ee=e.value.find(J=>J.id===h.value);if(!ee){w.value="La pelcula seleccionada ya no est disponible. Intenta nuevamente.";return}x.value=!0;try{const J=v.value.trim(),N=[`Pelcula sugerida: ${ee.titulo}`,ee.genero?`Gnero: ${ee.genero}`:null,ee.clasificacion?`Clasificacin: ${ee.clasificacion}`:null,J?`Comentario del estudiante: ${J}`:"Sin comentario adicional.",`Enviada por: ${k}`].filter(Boolean).join(`
`),{error:G}=await ae.from("notificaciones").insert([{usuario_id:M,titulo:"Sugerencia de pelcula",mensaje:N,tipo:"recomendacion",leida:!1}]);if(G)throw G;g.value="Listo! Tu sugerencia fue enviada al equipo administrador.",v.value="",h.value=""}catch(J){console.error("Error al enviar la sugerencia:",J),w.value=J.message||"No se pudo enviar la sugerencia. Intenta nuevamente."}finally{x.value=!1}};return(M,k)=>{const K=lr("RouterLink");return O(),T("div",l3,[f("div",u3,[f("div",c3,[k[10]||(k[10]=f("div",null,[f("h1",{class:"text-3xl md:text-4xl font-extrabold text-gray-900"},"Enviar sugerencia"),f("p",{class:"mt-2 text-gray-600 max-w-2xl"}," Selecciona la pelcula que deseas sugerir para la cartelera y agrega un mensaje opcional para el administrador. ")],-1)),ue(K,{to:"/cartelera",class:"inline-flex items-center gap-2 bg-white border border-gray-200 text-gray-700 px-5 py-3 rounded-xl font-semibold shadow-sm hover:bg-gray-50 transition-all duration-200"},{default:we(()=>[...k[9]||(k[9]=[f("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),de(" Volver a la cartelera ",-1)])]),_:1})]),f("div",d3,[f("section",null,[k[18]||(k[18]=f("h2",{class:"text-xl font-bold text-gray-900 mb-4"},"Buscar y filtrar pelculas",-1)),f("div",f3,[f("div",h3,[k[11]||(k[11]=f("label",{for:"busquedaApi",class:"block text-sm font-medium text-gray-700 mb-2"},"Buscar pelcula en la API",-1)),f("div",p3,[fe(f("input",{id:"busquedaApi","onUpdate:modelValue":k[0]||(k[0]=ee=>o.value=ee),type:"text",placeholder:"Ingresa al menos 3 caracteres",class:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200",onKeyup:k[1]||(k[1]=r0(ee=>b(!0),["enter"]))},null,544),[[Ae,o.value]]),f("button",{type:"button",onClick:k[2]||(k[2]=ee=>b(!0)),disabled:t.value||o.value.trim().length<3,class:"inline-flex items-center justify-center bg-[#8B0000] text-white px-6 py-3 rounded-lg font-semibold hover:bg-[#A52A2A] transition-all duration-200 disabled:opacity-60 disabled:cursor-not-allowed"},P(t.value?"Buscando...":"Buscar en la API"),9,v3)]),k[12]||(k[12]=f("p",{class:"text-sm text-gray-500 mt-2"},'Utiliza palabras clave (ej. "Spider-Man", "Interestelar").',-1))]),f("div",null,[k[13]||(k[13]=f("label",{for:"filtroTitulo",class:"block text-sm font-medium text-gray-700 mb-2"},"Filtrar resultados",-1)),fe(f("input",{id:"filtroTitulo","onUpdate:modelValue":k[3]||(k[3]=ee=>a.value=ee),type:"text",placeholder:"Filtrar por ttulo cargado",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200"},null,512),[[Ae,a.value]])]),f("div",null,[k[15]||(k[15]=f("label",{for:"genero",class:"block text-sm font-medium text-gray-700 mb-2"},"Gnero",-1)),fe(f("select",{id:"genero","onUpdate:modelValue":k[4]||(k[4]=ee=>s.value=ee),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200"},[k[14]||(k[14]=f("option",{value:""},"Todos los gneros",-1)),(O(!0),T(ke,null,st(u.value,ee=>(O(),T("option",{key:ee,value:ee},P(ee),9,g3))),128))],512),[[ar,s.value]])]),f("div",null,[k[17]||(k[17]=f("label",{for:"clasificacion",class:"block text-sm font-medium text-gray-700 mb-2"},"Clasificacin",-1)),fe(f("select",{id:"clasificacion","onUpdate:modelValue":k[5]||(k[5]=ee=>l.value=ee),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200"},[k[16]||(k[16]=f("option",{value:""},"Todas las clasificaciones",-1)),(O(!0),T(ke,null,st(c.value,ee=>(O(),T("option",{key:ee,value:ee},P(ee),9,y3))),128))],512),[[ar,l.value]])])]),j.value?(O(),T("p",m3,P(j.value),1)):Z("",!0)]),f("section",null,[k[21]||(k[21]=f("h2",{class:"text-xl font-bold text-gray-900 mb-4"},"Selecciona la pelcula",-1)),t.value?(O(),T("div",x3,[...k[19]||(k[19]=[f("div",{class:"inline-block animate-spin rounded-full h-14 w-14 border-t-4 border-b-4 border-[#8B0000]"},null,-1),f("p",{class:"mt-4 text-gray-500"},"Buscando pelculas en la API...",-1)])])):i.value?(O(),T("div",w3,[k[20]||(k[20]=f("p",{class:"font-semibold mb-3"},"No fue posible cargar las pelculas.",-1)),f("p",_3,P(i.value),1),f("button",{onClick:k[6]||(k[6]=ee=>b(!0)),class:"mt-4 bg-[#8B0000] text-white px-5 py-3 rounded-lg font-semibold hover:bg-[#A52A2A] transition-colors"}," Reintentar ")])):(O(),T("div",b3,[B.value.length?(O(),T("div",E3,[(O(!0),T(ke,null,st(B.value,ee=>(O(),T("label",{key:ee.id,class:"flex items-start gap-4 border border-gray-200 rounded-2xl p-4 cursor-pointer hover:border-[#8B0000] transition-colors"},[fe(f("input",{type:"radio",name:"pelicula",class:"mt-1 h-4 w-4 text-[#8B0000] focus:ring-[#8B0000]",value:ee.id,"onUpdate:modelValue":k[7]||(k[7]=J=>h.value=J)},null,8,A3),[[e0,h.value]]),f("div",C3,[f("p",S3,P(ee.titulo),1),f("div",I3,[ee.genero?(O(),T("span",O3,P(ee.genero),1)):Z("",!0),ee.clasificacion?(O(),T("span",T3,P(ee.clasificacion),1)):Z("",!0),ee.duracion_min?(O(),T("span",R3,P(ee.duracion_min)+" min",1)):Z("",!0)]),ee.sinopsis?(O(),T("p",P3,P(ee.sinopsis),1)):Z("",!0)])]))),128))])):Z("",!0),B.value.length&&L.value?(O(),T("div",k3,[f("button",{type:"button",onClick:S,disabled:n.value,class:"inline-flex items-center justify-center bg-gray-100 text-gray-800 px-6 py-3 rounded-lg font-semibold hover:bg-gray-200 transition-all duration-200 disabled:opacity-60 disabled:cursor-not-allowed"},P(n.value?"Cargando ms...":"Cargar ms resultados"),9,N3)])):(O(),T("div",D3,[e.value.length===0?(O(),T("p",M3,'Ingresa un ttulo en el buscador superior y presiona "Buscar en la API".')):(O(),T("p",B3,"No encontramos pelculas que coincidan con los filtros seleccionados."))]))]))]),f("section",null,[k[22]||(k[22]=f("h2",{class:"text-xl font-bold text-gray-900 mb-4"},"Mensaje para el administrador",-1)),fe(f("textarea",{"onUpdate:modelValue":k[8]||(k[8]=ee=>v.value=ee),rows:"4",placeholder:"Cuntanos por qu te gustara ver esta pelcula o agrega detalles adicionales (opcional)",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200"},null,512),[[Ae,v.value]])]),f("div",L3,[w.value?(O(),T("div",F3,P(w.value),1)):Z("",!0),g.value?(O(),T("div",$3,P(g.value),1)):Z("",!0),f("button",{onClick:Y,disabled:x.value,class:"w-full md:w-auto bg-[#8B0000] text-white px-8 py-3 rounded-xl font-semibold hover:bg-[#A52A2A] transition-all duration-200 disabled:opacity-60 disabled:cursor-not-allowed"},P(x.value?"Enviando sugerencia...":"Enviar sugerencia"),9,j3)])])])])}}}),V3=jn(U3,[["__scopeId","data-v-c7841074"]]),H3={class:"min-h-screen bg-gray-50"},G3={class:"container mx-auto px-6 py-8"},q3={key:0,class:"text-center py-12"},z3={key:1},W3={key:0,class:"mb-12"},K3={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},X3={class:"text-xl font-bold text-gray-800 mb-2"},Y3={class:"text-sm text-gray-500 mb-6"},Z3={key:0},J3={class:"flex gap-4"},Q3=["onClick","disabled"],e4=["onClick","disabled"],t4={key:1},r4={class:"grid grid-cols-1 gap-4"},n4={class:"flex justify-between items-start"},i4={class:"flex-1"},o4={class:"text-lg font-bold text-gray-800 mb-1"},a4={class:"text-sm text-gray-500"},s4={class:"text-xs text-gray-400 mt-2"},l4={key:2,class:"text-center py-12"},u4=ot({__name:"EncuestasEstudiante",setup(r){const e=W([]),t=W([]),n=W(!0),i=W(!1);async function o(){n.value=!0;try{const{data:{user:l}}=await ae.auth.getUser();if(!l)throw new Error("Usuario no autenticado");const{data:u,error:c}=await ae.from("encuestas").select("*").order("fecha_creacion",{ascending:!1});if(c)throw c;const{data:d,error:p}=await ae.from("votos").select("*").eq("usuario_id",l.id);if(p)throw p;const h=u||[],v=d||[],x=h.filter(g=>g.fecha_cierre?new Date(g.fecha_cierre)>new Date:!0),w=new Map(v.map(g=>[g.encuesta_id,g]));e.value=x.filter(g=>!w.has(g.id)),t.value=x.filter(g=>w.has(g.id)).map(g=>({encuesta:g,voto:w.get(g.id)}))}catch(l){console.error("Error cargando encuestas:",l),alert("Error al cargar las encuestas: "+l.message)}finally{n.value=!1}}async function a(l,u){if(!i.value){i.value=!0;try{const{data:{user:c}}=await ae.auth.getUser();if(!c)throw new Error("Usuario no autenticado");const{error:d}=await ae.from("votos").insert({encuesta_id:l,usuario_id:c.id,respuesta:u});if(d)throw d;await o()}catch(c){console.error("Error respondiendo encuesta:",c),c.code==="23505"?alert("Ya has respondido esta encuesta"):alert("Error al responder la encuesta: "+c.message)}finally{i.value=!1}}}function s(l){return new Date(l).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}return sr(()=>{o()}),(l,u)=>(O(),T("div",H3,[u[4]||(u[4]=f("div",{class:"bg-[#8B0000] text-white shadow-lg"},[f("div",{class:"container mx-auto px-6 py-6"},[f("h1",{class:"text-3xl font-bold"},"Encuestas"),f("p",{class:"text-gray-200 mt-1"},"Comparte tu opinin sobre el cine ULEAM")])],-1)),f("div",G3,[n.value?(O(),T("div",q3,[...u[0]||(u[0]=[f("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-[#8B0000]"},null,-1),f("p",{class:"mt-4 text-gray-600"},"Cargando encuestas...",-1)])])):(O(),T("div",z3,[e.value.length>0?(O(),T("div",W3,[u[1]||(u[1]=f("h2",{class:"text-2xl font-bold text-gray-800 mb-6"}," Encuestas Activas",-1)),f("div",K3,[(O(!0),T(ke,null,st(e.value,c=>(O(),T("div",{key:c.id,class:"bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow"},[f("h3",X3,P(c.pregunta),1),f("p",Y3,[de("  "+P(s(c.fecha_creacion))+" ",1),c.fecha_cierre?(O(),T("span",Z3,"   Cierra: "+P(s(c.fecha_cierre)),1)):Z("",!0)]),f("div",J3,[f("button",{onClick:d=>a(c.id,!0),disabled:i.value,class:"flex-1 bg-green-600 text-white px-6 py-4 rounded-xl font-bold text-lg hover:bg-green-700 transition-colors disabled:opacity-50 shadow-md"},"  S ",8,Q3),f("button",{onClick:d=>a(c.id,!1),disabled:i.value,class:"flex-1 bg-red-600 text-white px-6 py-4 rounded-xl font-bold text-lg hover:bg-red-700 transition-colors disabled:opacity-50 shadow-md"},"  NO ",8,e4)])]))),128))])])):Z("",!0),t.value.length>0?(O(),T("div",t4,[u[2]||(u[2]=f("h2",{class:"text-2xl font-bold text-gray-800 mb-6"}," Encuestas Respondidas",-1)),f("div",r4,[(O(!0),T(ke,null,st(t.value,c=>(O(),T("div",{key:c.encuesta.id,class:"bg-white rounded-xl shadow-md p-6"},[f("div",n4,[f("div",i4,[f("h3",o4,P(c.encuesta.pregunta),1),f("p",a4,"  "+P(s(c.encuesta.fecha_creacion)),1)]),f("span",{class:it([c.voto.respuesta?"bg-green-100 text-green-800":"bg-red-100 text-red-800","px-4 py-2 rounded-full font-bold text-sm"])},P(c.voto.respuesta?" S":" NO"),3)]),f("p",s4," Respondiste el "+P(s(c.voto.fecha_voto)),1)]))),128))])])):Z("",!0),e.value.length===0&&t.value.length===0?(O(),T("div",l4,[...u[3]||(u[3]=[f("svg",{class:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),f("p",{class:"text-gray-500 text-lg"},"No hay encuestas disponibles",-1),f("p",{class:"text-gray-400 text-sm mt-2"},"Vuelve ms tarde para ver nuevas encuestas",-1)])])):Z("",!0)]))])]))}});var Xn={},Za,Dc;function c4(){return Dc||(Dc=1,Za=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Za}var Ja={},tn={},Mc;function Un(){if(Mc)return tn;Mc=1;let r;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return tn.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17},tn.getSymbolTotalCodewords=function(n){return e[n]},tn.getBCHDigit=function(t){let n=0;for(;t!==0;)n++,t>>>=1;return n},tn.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');r=n},tn.isKanjiModeEnabled=function(){return typeof r<"u"},tn.toSJIS=function(n){return r(n)},tn}var Qa={},Bc;function ql(){return Bc||(Bc=1,(function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+t)}}r.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},r.from=function(n,i){if(r.isValid(n))return n;try{return e(n)}catch{return i}}})(Qa)),Qa}var es,Lc;function d4(){if(Lc)return es;Lc=1;function r(){this.buffer=[],this.length=0}return r.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},es=r,es}var ts,Fc;function f4(){if(Fc)return ts;Fc=1;function r(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return r.prototype.set=function(e,t,n,i){const o=e*this.size+t;this.data[o]=n,i&&(this.reservedBit[o]=!0)},r.prototype.get=function(e,t){return this.data[e*this.size+t]},r.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},r.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},ts=r,ts}var rs={},$c;function h4(){return $c||($c=1,(function(r){const e=Un().getSymbolSize;r.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,o=e(n),a=o===145?26:Math.ceil((o-13)/(2*i-2))*2,s=[o-7];for(let l=1;l<i-1;l++)s[l]=s[l-1]-a;return s.push(6),s.reverse()},r.getPositions=function(n){const i=[],o=r.getRowColCoords(n),a=o.length;for(let s=0;s<a;s++)for(let l=0;l<a;l++)s===0&&l===0||s===0&&l===a-1||s===a-1&&l===0||i.push([o[s],o[l]]);return i}})(rs)),rs}var ns={},jc;function p4(){if(jc)return ns;jc=1;const r=Un().getSymbolSize,e=7;return ns.getPositions=function(n){const i=r(n);return[[0,0],[i-e,0],[0,i-e]]},ns}var is={},Uc;function v4(){return Uc||(Uc=1,(function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};r.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},r.from=function(i){return r.isValid(i)?parseInt(i,10):void 0},r.getPenaltyN1=function(i){const o=i.size;let a=0,s=0,l=0,u=null,c=null;for(let d=0;d<o;d++){s=l=0,u=c=null;for(let p=0;p<o;p++){let h=i.get(d,p);h===u?s++:(s>=5&&(a+=e.N1+(s-5)),u=h,s=1),h=i.get(p,d),h===c?l++:(l>=5&&(a+=e.N1+(l-5)),c=h,l=1)}s>=5&&(a+=e.N1+(s-5)),l>=5&&(a+=e.N1+(l-5))}return a},r.getPenaltyN2=function(i){const o=i.size;let a=0;for(let s=0;s<o-1;s++)for(let l=0;l<o-1;l++){const u=i.get(s,l)+i.get(s,l+1)+i.get(s+1,l)+i.get(s+1,l+1);(u===4||u===0)&&a++}return a*e.N2},r.getPenaltyN3=function(i){const o=i.size;let a=0,s=0,l=0;for(let u=0;u<o;u++){s=l=0;for(let c=0;c<o;c++)s=s<<1&2047|i.get(u,c),c>=10&&(s===1488||s===93)&&a++,l=l<<1&2047|i.get(c,u),c>=10&&(l===1488||l===93)&&a++}return a*e.N3},r.getPenaltyN4=function(i){let o=0;const a=i.data.length;for(let l=0;l<a;l++)o+=i.data[l];return Math.abs(Math.ceil(o*100/a/5)-10)*e.N4};function t(n,i,o){switch(n){case r.Patterns.PATTERN000:return(i+o)%2===0;case r.Patterns.PATTERN001:return i%2===0;case r.Patterns.PATTERN010:return o%3===0;case r.Patterns.PATTERN011:return(i+o)%3===0;case r.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(o/3))%2===0;case r.Patterns.PATTERN101:return i*o%2+i*o%3===0;case r.Patterns.PATTERN110:return(i*o%2+i*o%3)%2===0;case r.Patterns.PATTERN111:return(i*o%3+(i+o)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}r.applyMask=function(i,o){const a=o.size;for(let s=0;s<a;s++)for(let l=0;l<a;l++)o.isReserved(l,s)||o.xor(l,s,t(i,l,s))},r.getBestMask=function(i,o){const a=Object.keys(r.Patterns).length;let s=0,l=1/0;for(let u=0;u<a;u++){o(u),r.applyMask(u,i);const c=r.getPenaltyN1(i)+r.getPenaltyN2(i)+r.getPenaltyN3(i)+r.getPenaltyN4(i);r.applyMask(u,i),c<l&&(l=c,s=u)}return s}})(is)),is}var Co={},Vc;function lh(){if(Vc)return Co;Vc=1;const r=ql(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Co.getBlocksCount=function(i,o){switch(o){case r.L:return e[(i-1)*4+0];case r.M:return e[(i-1)*4+1];case r.Q:return e[(i-1)*4+2];case r.H:return e[(i-1)*4+3];default:return}},Co.getTotalCodewordsCount=function(i,o){switch(o){case r.L:return t[(i-1)*4+0];case r.M:return t[(i-1)*4+1];case r.Q:return t[(i-1)*4+2];case r.H:return t[(i-1)*4+3];default:return}},Co}var os={},Si={},Hc;function g4(){if(Hc)return Si;Hc=1;const r=new Uint8Array(512),e=new Uint8Array(256);return(function(){let n=1;for(let i=0;i<255;i++)r[i]=n,e[n]=i,n<<=1,n&256&&(n^=285);for(let i=255;i<512;i++)r[i]=r[i-255]})(),Si.log=function(n){if(n<1)throw new Error("log("+n+")");return e[n]},Si.exp=function(n){return r[n]},Si.mul=function(n,i){return n===0||i===0?0:r[e[n]+e[i]]},Si}var Gc;function y4(){return Gc||(Gc=1,(function(r){const e=g4();r.mul=function(n,i){const o=new Uint8Array(n.length+i.length-1);for(let a=0;a<n.length;a++)for(let s=0;s<i.length;s++)o[a+s]^=e.mul(n[a],i[s]);return o},r.mod=function(n,i){let o=new Uint8Array(n);for(;o.length-i.length>=0;){const a=o[0];for(let l=0;l<i.length;l++)o[l]^=e.mul(i[l],a);let s=0;for(;s<o.length&&o[s]===0;)s++;o=o.slice(s)}return o},r.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let o=0;o<n;o++)i=r.mul(i,new Uint8Array([1,e.exp(o)]));return i}})(os)),os}var as,qc;function m4(){if(qc)return as;qc=1;const r=y4();function e(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(n){this.degree=n,this.genPoly=r.generateECPolynomial(this.degree)},e.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(n.length+this.degree);i.set(n);const o=r.mod(i,this.genPoly),a=this.degree-o.length;if(a>0){const s=new Uint8Array(this.degree);return s.set(o,a),s}return o},as=e,as}var ss={},ls={},us={},zc;function uh(){return zc||(zc=1,us.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),us}var Pr={},Wc;function ch(){if(Wc)return Pr;Wc=1;const r="[0-9]+",e="[A-Z $%*+\\-./:]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+`)(?:.|[\r
]))+`;Pr.KANJI=new RegExp(t,"g"),Pr.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Pr.BYTE=new RegExp(n,"g"),Pr.NUMERIC=new RegExp(r,"g"),Pr.ALPHANUMERIC=new RegExp(e,"g");const i=new RegExp("^"+t+"$"),o=new RegExp("^"+r+"$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Pr.testKanji=function(l){return i.test(l)},Pr.testNumeric=function(l){return o.test(l)},Pr.testAlphanumeric=function(l){return a.test(l)},Pr}var Kc;function Vn(){return Kc||(Kc=1,(function(r){const e=uh(),t=ch();r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(o,a){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!e.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?o.ccBits[0]:a<27?o.ccBits[1]:o.ccBits[2]},r.getBestModeForData=function(o){return t.testNumeric(o)?r.NUMERIC:t.testAlphanumeric(o)?r.ALPHANUMERIC:t.testKanji(o)?r.KANJI:r.BYTE},r.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},r.isValid=function(o){return o&&o.bit&&o.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+i)}}r.from=function(o,a){if(r.isValid(o))return o;try{return n(o)}catch{return a}}})(ls)),ls}var Xc;function x4(){return Xc||(Xc=1,(function(r){const e=Un(),t=lh(),n=ql(),i=Vn(),o=uh(),a=7973,s=e.getBCHDigit(a);function l(p,h,v){for(let x=1;x<=40;x++)if(h<=r.getCapacity(x,v,p))return x}function u(p,h){return i.getCharCountIndicator(p,h)+4}function c(p,h){let v=0;return p.forEach(function(x){const w=u(x.mode,h);v+=w+x.getBitsLength()}),v}function d(p,h){for(let v=1;v<=40;v++)if(c(p,v)<=r.getCapacity(v,h,i.MIXED))return v}r.from=function(h,v){return o.isValid(h)?parseInt(h,10):v},r.getCapacity=function(h,v,x){if(!o.isValid(h))throw new Error("Invalid QR Code version");typeof x>"u"&&(x=i.BYTE);const w=e.getSymbolTotalCodewords(h),g=t.getTotalCodewordsCount(h,v),y=(w-g)*8;if(x===i.MIXED)return y;const m=y-u(x,h);switch(x){case i.NUMERIC:return Math.floor(m/10*3);case i.ALPHANUMERIC:return Math.floor(m/11*2);case i.KANJI:return Math.floor(m/13);case i.BYTE:default:return Math.floor(m/8)}},r.getBestVersionForData=function(h,v){let x;const w=n.from(v,n.M);if(Array.isArray(h)){if(h.length>1)return d(h,w);if(h.length===0)return 1;x=h[0]}else x=h;return l(x.mode,x.getLength(),w)},r.getEncodedBits=function(h){if(!o.isValid(h)||h<7)throw new Error("Invalid QR Code version");let v=h<<12;for(;e.getBCHDigit(v)-s>=0;)v^=a<<e.getBCHDigit(v)-s;return h<<12|v}})(ss)),ss}var cs={},Yc;function w4(){if(Yc)return cs;Yc=1;const r=Un(),e=1335,t=21522,n=r.getBCHDigit(e);return cs.getEncodedBits=function(o,a){const s=o.bit<<3|a;let l=s<<10;for(;r.getBCHDigit(l)-n>=0;)l^=e<<r.getBCHDigit(l)-n;return(s<<10|l)^t},cs}var ds={},fs,Zc;function _4(){if(Zc)return fs;Zc=1;const r=Vn();function e(t){this.mode=r.NUMERIC,this.data=t.toString()}return e.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(n){let i,o,a;for(i=0;i+3<=this.data.length;i+=3)o=this.data.substr(i,3),a=parseInt(o,10),n.put(a,10);const s=this.data.length-i;s>0&&(o=this.data.substr(i),a=parseInt(o,10),n.put(a,s*3+1))},fs=e,fs}var hs,Jc;function b4(){if(Jc)return hs;Jc=1;const r=Vn(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function t(n){this.mode=r.ALPHANUMERIC,this.data=n}return t.getBitsLength=function(i){return 11*Math.floor(i/2)+6*(i%2)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(i){let o;for(o=0;o+2<=this.data.length;o+=2){let a=e.indexOf(this.data[o])*45;a+=e.indexOf(this.data[o+1]),i.put(a,11)}this.data.length%2&&i.put(e.indexOf(this.data[o]),6)},hs=t,hs}var ps,Qc;function E4(){if(Qc)return ps;Qc=1;const r=Vn();function e(t){this.mode=r.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}return e.getBitsLength=function(n){return n*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(t){for(let n=0,i=this.data.length;n<i;n++)t.put(this.data[n],8)},ps=e,ps}var vs,ed;function A4(){if(ed)return vs;ed=1;const r=Vn(),e=Un();function t(n){this.mode=r.KANJI,this.data=n}return t.getBitsLength=function(i){return i*13},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(n){let i;for(i=0;i<this.data.length;i++){let o=e.toSJIS(this.data[i]);if(o>=33088&&o<=40956)o-=33088;else if(o>=57408&&o<=60351)o-=49472;else throw new Error("Invalid SJIS character: "+this.data[i]+`
Make sure your charset is UTF-8`);o=(o>>>8&255)*192+(o&255),n.put(o,13)}},vs=t,vs}var gs={exports:{}},td;function C4(){return td||(td=1,(function(r){var e={single_source_shortest_paths:function(t,n,i){var o={},a={};a[n]=0;var s=e.PriorityQueue.make();s.push(n,0);for(var l,u,c,d,p,h,v,x,w;!s.empty();){l=s.pop(),u=l.value,d=l.cost,p=t[u]||{};for(c in p)p.hasOwnProperty(c)&&(h=p[c],v=d+h,x=a[c],w=typeof a[c]>"u",(w||x>v)&&(a[c]=v,s.push(c,v),o[c]=u))}if(typeof i<"u"&&typeof a[i]>"u"){var g=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(g)}return o},extract_shortest_path_from_predecessor_list:function(t,n){for(var i=[],o=n;o;)i.push(o),t[o],o=t[o];return i.reverse(),i},find_path:function(t,n,i){var o=e.single_source_shortest_paths(t,n,i);return e.extract_shortest_path_from_predecessor_list(o,i)},PriorityQueue:{make:function(t){var n=e.PriorityQueue,i={},o;t=t||{};for(o in n)n.hasOwnProperty(o)&&(i[o]=n[o]);return i.queue=[],i.sorter=t.sorter||n.default_sorter,i},default_sorter:function(t,n){return t.cost-n.cost},push:function(t,n){var i={value:t,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=e})(gs)),gs.exports}var rd;function S4(){return rd||(rd=1,(function(r){const e=Vn(),t=_4(),n=b4(),i=E4(),o=A4(),a=ch(),s=Un(),l=C4();function u(g){return unescape(encodeURIComponent(g)).length}function c(g,y,m){const _=[];let E;for(;(E=g.exec(m))!==null;)_.push({data:E[0],index:E.index,mode:y,length:E[0].length});return _}function d(g){const y=c(a.NUMERIC,e.NUMERIC,g),m=c(a.ALPHANUMERIC,e.ALPHANUMERIC,g);let _,E;return s.isKanjiModeEnabled()?(_=c(a.BYTE,e.BYTE,g),E=c(a.KANJI,e.KANJI,g)):(_=c(a.BYTE_KANJI,e.BYTE,g),E=[]),y.concat(m,_,E).sort(function(S,B){return S.index-B.index}).map(function(S){return{data:S.data,mode:S.mode,length:S.length}})}function p(g,y){switch(y){case e.NUMERIC:return t.getBitsLength(g);case e.ALPHANUMERIC:return n.getBitsLength(g);case e.KANJI:return o.getBitsLength(g);case e.BYTE:return i.getBitsLength(g)}}function h(g){return g.reduce(function(y,m){const _=y.length-1>=0?y[y.length-1]:null;return _&&_.mode===m.mode?(y[y.length-1].data+=m.data,y):(y.push(m),y)},[])}function v(g){const y=[];for(let m=0;m<g.length;m++){const _=g[m];switch(_.mode){case e.NUMERIC:y.push([_,{data:_.data,mode:e.ALPHANUMERIC,length:_.length},{data:_.data,mode:e.BYTE,length:_.length}]);break;case e.ALPHANUMERIC:y.push([_,{data:_.data,mode:e.BYTE,length:_.length}]);break;case e.KANJI:y.push([_,{data:_.data,mode:e.BYTE,length:u(_.data)}]);break;case e.BYTE:y.push([{data:_.data,mode:e.BYTE,length:u(_.data)}])}}return y}function x(g,y){const m={},_={start:{}};let E=["start"];for(let b=0;b<g.length;b++){const S=g[b],B=[];for(let L=0;L<S.length;L++){const j=S[L],Y=""+b+L;B.push(Y),m[Y]={node:j,lastCount:0},_[Y]={};for(let M=0;M<E.length;M++){const k=E[M];m[k]&&m[k].node.mode===j.mode?(_[k][Y]=p(m[k].lastCount+j.length,j.mode)-p(m[k].lastCount,j.mode),m[k].lastCount+=j.length):(m[k]&&(m[k].lastCount=j.length),_[k][Y]=p(j.length,j.mode)+4+e.getCharCountIndicator(j.mode,y))}}E=B}for(let b=0;b<E.length;b++)_[E[b]].end=0;return{map:_,table:m}}function w(g,y){let m;const _=e.getBestModeForData(g);if(m=e.from(y,_),m!==e.BYTE&&m.bit<_.bit)throw new Error('"'+g+'" cannot be encoded with mode '+e.toString(m)+`.
 Suggested mode is: `+e.toString(_));switch(m===e.KANJI&&!s.isKanjiModeEnabled()&&(m=e.BYTE),m){case e.NUMERIC:return new t(g);case e.ALPHANUMERIC:return new n(g);case e.KANJI:return new o(g);case e.BYTE:return new i(g)}}r.fromArray=function(y){return y.reduce(function(m,_){return typeof _=="string"?m.push(w(_,null)):_.data&&m.push(w(_.data,_.mode)),m},[])},r.fromString=function(y,m){const _=d(y,s.isKanjiModeEnabled()),E=v(_),b=x(E,m),S=l.find_path(b.map,"start","end"),B=[];for(let L=1;L<S.length-1;L++)B.push(b.table[S[L]].node);return r.fromArray(h(B))},r.rawSplit=function(y){return r.fromArray(d(y,s.isKanjiModeEnabled()))}})(ds)),ds}var nd;function I4(){if(nd)return Ja;nd=1;const r=Un(),e=ql(),t=d4(),n=f4(),i=h4(),o=p4(),a=v4(),s=lh(),l=m4(),u=x4(),c=w4(),d=Vn(),p=S4();function h(b,S){const B=b.size,L=o.getPositions(S);for(let j=0;j<L.length;j++){const Y=L[j][0],M=L[j][1];for(let k=-1;k<=7;k++)if(!(Y+k<=-1||B<=Y+k))for(let K=-1;K<=7;K++)M+K<=-1||B<=M+K||(k>=0&&k<=6&&(K===0||K===6)||K>=0&&K<=6&&(k===0||k===6)||k>=2&&k<=4&&K>=2&&K<=4?b.set(Y+k,M+K,!0,!0):b.set(Y+k,M+K,!1,!0))}}function v(b){const S=b.size;for(let B=8;B<S-8;B++){const L=B%2===0;b.set(B,6,L,!0),b.set(6,B,L,!0)}}function x(b,S){const B=i.getPositions(S);for(let L=0;L<B.length;L++){const j=B[L][0],Y=B[L][1];for(let M=-2;M<=2;M++)for(let k=-2;k<=2;k++)M===-2||M===2||k===-2||k===2||M===0&&k===0?b.set(j+M,Y+k,!0,!0):b.set(j+M,Y+k,!1,!0)}}function w(b,S){const B=b.size,L=u.getEncodedBits(S);let j,Y,M;for(let k=0;k<18;k++)j=Math.floor(k/3),Y=k%3+B-8-3,M=(L>>k&1)===1,b.set(j,Y,M,!0),b.set(Y,j,M,!0)}function g(b,S,B){const L=b.size,j=c.getEncodedBits(S,B);let Y,M;for(Y=0;Y<15;Y++)M=(j>>Y&1)===1,Y<6?b.set(Y,8,M,!0):Y<8?b.set(Y+1,8,M,!0):b.set(L-15+Y,8,M,!0),Y<8?b.set(8,L-Y-1,M,!0):Y<9?b.set(8,15-Y-1+1,M,!0):b.set(8,15-Y-1,M,!0);b.set(L-8,8,1,!0)}function y(b,S){const B=b.size;let L=-1,j=B-1,Y=7,M=0;for(let k=B-1;k>0;k-=2)for(k===6&&k--;;){for(let K=0;K<2;K++)if(!b.isReserved(j,k-K)){let ee=!1;M<S.length&&(ee=(S[M]>>>Y&1)===1),b.set(j,k-K,ee),Y--,Y===-1&&(M++,Y=7)}if(j+=L,j<0||B<=j){j-=L,L=-L;break}}}function m(b,S,B){const L=new t;B.forEach(function(K){L.put(K.mode.bit,4),L.put(K.getLength(),d.getCharCountIndicator(K.mode,b)),K.write(L)});const j=r.getSymbolTotalCodewords(b),Y=s.getTotalCodewordsCount(b,S),M=(j-Y)*8;for(L.getLengthInBits()+4<=M&&L.put(0,4);L.getLengthInBits()%8!==0;)L.putBit(0);const k=(M-L.getLengthInBits())/8;for(let K=0;K<k;K++)L.put(K%2?17:236,8);return _(L,b,S)}function _(b,S,B){const L=r.getSymbolTotalCodewords(S),j=s.getTotalCodewordsCount(S,B),Y=L-j,M=s.getBlocksCount(S,B),k=L%M,K=M-k,ee=Math.floor(L/M),J=Math.floor(Y/M),N=J+1,G=ee-J,Re=new l(G);let Ve=0;const et=new Array(M),ze=new Array(M);let Pt=0;const zt=new Uint8Array(b.buffer);for(let $=0;$<M;$++){const R=$<K?J:N;et[$]=zt.slice(Ve,Ve+R),ze[$]=Re.encode(et[$]),Ve+=R,Pt=Math.max(Pt,R)}const wt=new Uint8Array(L);let Ct=0,H,ie;for(H=0;H<Pt;H++)for(ie=0;ie<M;ie++)H<et[ie].length&&(wt[Ct++]=et[ie][H]);for(H=0;H<G;H++)for(ie=0;ie<M;ie++)wt[Ct++]=ze[ie][H];return wt}function E(b,S,B,L){let j;if(Array.isArray(b))j=p.fromArray(b);else if(typeof b=="string"){let ee=S;if(!ee){const J=p.rawSplit(b);ee=u.getBestVersionForData(J,B)}j=p.fromString(b,ee||40)}else throw new Error("Invalid data");const Y=u.getBestVersionForData(j,B);if(!Y)throw new Error("The amount of data is too big to be stored in a QR Code");if(!S)S=Y;else if(S<Y)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+Y+`.
`);const M=m(S,B,j),k=r.getSymbolSize(S),K=new n(k);return h(K,S),v(K),x(K,S),g(K,B,0),S>=7&&w(K,S),y(K,M),isNaN(L)&&(L=a.getBestMask(K,g.bind(null,K,B))),a.applyMask(L,K),g(K,B,L),{modules:K,version:S,errorCorrectionLevel:B,maskPattern:L,segments:j}}return Ja.create=function(S,B){if(typeof S>"u"||S==="")throw new Error("No input text");let L=e.M,j,Y;return typeof B<"u"&&(L=e.from(B.errorCorrectionLevel,e.M),j=u.from(B.version),Y=a.from(B.maskPattern),B.toSJISFunc&&r.setToSJISFunction(B.toSJISFunc)),E(S,j,L,Y)},Ja}var ys={},ms={},id;function dh(){return id||(id=1,(function(r){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let n=t.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+t);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(o){return[o,o]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}r.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,o=n.width&&n.width>=21?n.width:void 0,a=n.scale||4;return{width:o,scale:o?4:a,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},r.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},r.getImageWidth=function(n,i){const o=r.getScale(n,i);return Math.floor((n+i.margin*2)*o)},r.qrToImageData=function(n,i,o){const a=i.modules.size,s=i.modules.data,l=r.getScale(a,o),u=Math.floor((a+o.margin*2)*l),c=o.margin*l,d=[o.color.light,o.color.dark];for(let p=0;p<u;p++)for(let h=0;h<u;h++){let v=(p*u+h)*4,x=o.color.light;if(p>=c&&h>=c&&p<u-c&&h<u-c){const w=Math.floor((p-c)/l),g=Math.floor((h-c)/l);x=d[s[w*a+g]?1:0]}n[v++]=x.r,n[v++]=x.g,n[v++]=x.b,n[v]=x.a}}})(ms)),ms}var od;function O4(){return od||(od=1,(function(r){const e=dh();function t(i,o,a){i.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=a,o.width=a,o.style.height=a+"px",o.style.width=a+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(o,a,s){let l=s,u=a;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),a||(u=n()),l=e.getOptions(l);const c=e.getImageWidth(o.modules.size,l),d=u.getContext("2d"),p=d.createImageData(c,c);return e.qrToImageData(p.data,o,l),t(d,u,c),d.putImageData(p,0,0),u},r.renderToDataURL=function(o,a,s){let l=s;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),l||(l={});const u=r.render(o,a,l),c=l.type||"image/png",d=l.rendererOpts||{};return u.toDataURL(c,d.quality)}})(ys)),ys}var xs={},ad;function T4(){if(ad)return xs;ad=1;const r=dh();function e(i,o){const a=i.a/255,s=o+'="'+i.hex+'"';return a<1?s+" "+o+'-opacity="'+a.toFixed(2).slice(1)+'"':s}function t(i,o,a){let s=i+o;return typeof a<"u"&&(s+=" "+a),s}function n(i,o,a){let s="",l=0,u=!1,c=0;for(let d=0;d<i.length;d++){const p=Math.floor(d%o),h=Math.floor(d/o);!p&&!u&&(u=!0),i[d]?(c++,d>0&&p>0&&i[d-1]||(s+=u?t("M",p+a,.5+h+a):t("m",l,0),l=0,u=!1),p+1<o&&i[d+1]||(s+=t("h",c),c=0)):l++}return s}return xs.render=function(o,a,s){const l=r.getOptions(a),u=o.modules.size,c=o.modules.data,d=u+l.margin*2,p=l.color.light.a?"<path "+e(l.color.light,"fill")+' d="M0 0h'+d+"v"+d+'H0z"/>':"",h="<path "+e(l.color.dark,"stroke")+' d="'+n(c,u,l.margin)+'"/>',v='viewBox="0 0 '+d+" "+d+'"',w='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+v+' shape-rendering="crispEdges">'+p+h+`</svg>
`;return typeof s=="function"&&s(null,w),w},xs}var sd;function R4(){if(sd)return Xn;sd=1;const r=c4(),e=I4(),t=O4(),n=T4();function i(o,a,s,l,u){const c=[].slice.call(arguments,1),d=c.length,p=typeof c[d-1]=="function";if(!p&&!r())throw new Error("Callback required as last argument");if(p){if(d<2)throw new Error("Too few arguments provided");d===2?(u=s,s=a,a=l=void 0):d===3&&(a.getContext&&typeof u>"u"?(u=l,l=void 0):(u=l,l=s,s=a,a=void 0))}else{if(d<1)throw new Error("Too few arguments provided");return d===1?(s=a,a=l=void 0):d===2&&!a.getContext&&(l=s,s=a,a=void 0),new Promise(function(h,v){try{const x=e.create(s,l);h(o(x,a,l))}catch(x){v(x)}})}try{const h=e.create(s,l);u(null,o(h,a,l))}catch(h){u(h)}}return Xn.create=e.create,Xn.toCanvas=i.bind(null,t.render),Xn.toDataURL=i.bind(null,t.renderToDataURL),Xn.toString=i.bind(null,function(o,a,s){return n.render(o,s)}),Xn}var P4=R4();const k4=j0(P4),N4={class:"min-h-screen bg-gray-50 py-8"},D4={class:"container mx-auto px-4 max-w-2xl"},M4={class:"bg-white rounded-xl shadow-lg p-8"},B4={class:"text-3xl font-bold text-[#8B0000] mb-2 text-center"},L4={key:0,class:"text-center text-gray-600 mb-6"},F4={key:1,class:"space-y-6"},$4={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-6"},j4={class:"space-y-2 text-sm"},U4={class:"text-gray-900"},V4={class:"text-gray-900"},H4={key:0},G4={class:"text-gray-900"},q4={key:1,class:"bg-gradient-to-r from-[#8B0000] to-[#A52A2A] rounded-lg p-6 text-white"},z4={class:"flex gap-4 items-center"},W4=["src","alt"],K4={class:"flex-1"},X4={class:"font-bold text-xl mb-2"},Y4={class:"text-sm space-y-1 opacity-90"},Z4={key:0},J4={key:1},Q4=["value"],e8=["disabled"],t8=["value"],r8={key:0,class:"text-sm text-gray-500 mt-1"},n8={key:1,class:"text-sm text-orange-600 mt-1"},i8=["disabled"],o8={key:2,class:"space-y-6"},a8={class:"bg-gray-50 rounded-lg p-6 space-y-3"},s8={class:"grid grid-cols-2 gap-3 text-sm"},l8={class:"col-span-2"},u8={class:"text-gray-900"},c8={class:"col-span-2"},d8={class:"text-gray-900"},f8={key:0,class:"col-span-2"},h8={class:"text-gray-900"},p8={class:"col-span-2"},v8={class:"text-gray-900"},g8={class:"text-gray-900"},y8={class:"text-gray-900"},m8={class:"text-gray-900"},x8={class:"text-gray-900 text-xs"},w8={class:"bg-white border-4 border-[#8B0000] rounded-lg p-8 flex justify-center"},_8={class:"space-y-3"},b8=ot({__name:"GeneradorQR",setup(r){const e=yi(),t=Ag(),n=W(null),i=W(!1),o=W(""),a=W(null),s=W([]),l=W([]),u=W({pelicula_id:"",funcion_id:"",asientos:1}),c=Ee(()=>a.value&&u.value.pelicula_id!==""&&u.value.funcion_id!==""&&u.value.asientos>0),d=Ee(()=>u.value.pelicula_id?l.value.filter(E=>E.pelicula_id===u.value.pelicula_id):[]),p=Ee(()=>s.value.find(E=>E.id===u.value.pelicula_id)),h=Ee(()=>l.value.find(E=>E.id===u.value.funcion_id));sr(async()=>{await v(),await x(),await w();const E=t.query.pelicula_id;E&&(u.value.pelicula_id=E)});const v=async()=>{const E=localStorage.getItem("userId");if(!E){alert("Debes iniciar sesin para generar un cdigo QR"),e.push("/login");return}try{const{data:b,error:S}=await ae.from("usuarios").select("*").eq("id",E).single();if(S)throw S;a.value=b}catch(b){console.error("Error obteniendo usuario:",b),alert("Error al cargar informacin del usuario"),e.push("/login")}},x=async()=>{try{const{data:E,error:b}=await ae.from("peliculas").select("*").order("titulo",{ascending:!0});if(b)throw b;s.value=E||[]}catch(E){console.error("Error cargando pelculas:",E)}},w=async()=>{try{const{data:E,error:b}=await ae.from("funciones").select("*").gte("fecha",new Date().toISOString().split("T")[0]).order("fecha",{ascending:!0});if(b)throw b;l.value=E||[]}catch(E){console.error("Error cargando funciones:",E)}},g=async()=>{if(!a.value){alert("Debes iniciar sesin para generar un cdigo QR"),e.push("/login");return}try{console.log("Iniciando generacin de QR...");const{data:E,error:b}=await ae.from("reservas").insert({usuario_id:a.value.id,funcion_id:u.value.funcion_id,asientos:u.value.asientos,estado:"activa"}).select().single();if(b)throw console.error("Error creando reserva:",b),b;console.log("Reserva creada:",E),o.value=E.id;const S={reserva_id:E.id,usuario_id:a.value.id,nombre:a.value.nombre,correo:a.value.correo,carrera:a.value.carrera||"",pelicula:p.value?.titulo,fecha:h.value?.fecha,hora:h.value?.hora_inicio,asientos:u.value.asientos,creado_en:new Date().toISOString()},B=JSON.stringify(S);console.log("Datos del QR:",S),console.log("String del QR:",B);const{error:L}=await ae.from("tickets_qr").insert({reserva_id:E.id,codigo_qr:B,estado:"activo",fecha_generacion:new Date().toISOString()});if(L)throw console.error("Error guardando ticket:",L),L;if(console.log("Ticket guardado en BD"),i.value=!0,await ha(),await new Promise(j=>setTimeout(j,100)),!n.value)throw console.error("Canvas no encontrado en el DOM despus de nextTick"),new Error("No se pudo encontrar el elemento canvas");console.log("Canvas encontrado, generando QR visual..."),await k4.toCanvas(n.value,B,{width:300,margin:2,color:{dark:"#8B0000",light:"#FFFFFF"}}),console.log(" QR generado exitosamente en el canvas"),alert(" Reserva creada y QR generado exitosamente!")}catch(E){console.error("Error generando QR:",E),alert("Error al generar el cdigo QR: "+E.message),i.value=!1,o.value=""}},y=()=>{if(n.value){const E=document.createElement("a");E.download=`ticket-${o.value}.png`,E.href=n.value.toDataURL(),E.click()}},m=()=>{u.value={pelicula_id:"",funcion_id:"",asientos:1},i.value=!1,o.value=""},_=E=>E?new Date(E+"T00:00:00").toLocaleDateString("es-ES",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"";return(E,b)=>(O(),T("div",N4,[f("div",D4,[f("div",M4,[f("h1",B4,"  "+P(i.value?"Tu Cdigo QR":"Completa tu Reserva"),1),i.value?Z("",!0):(O(),T("p",L4,P(p.value?`Has seleccionado: ${p.value.titulo}`:"Selecciona una pelcula y funcin"),1)),i.value?(O(),T("div",o8,[b[24]||(b[24]=f("div",{class:"bg-green-50 border border-green-200 rounded-lg p-4 text-center"},[f("p",{class:"text-green-800 font-medium"},"  QR Generado Exitosamente! ")],-1)),f("div",a8,[b[23]||(b[23]=f("h3",{class:"font-bold text-lg text-gray-800 mb-4"}," Informacin de la Reserva",-1)),f("div",s8,[f("div",l8,[b[15]||(b[15]=f("span",{class:"font-medium text-gray-700"},"Nombre:",-1)),f("p",u8,P(a.value?.nombre),1)]),f("div",c8,[b[16]||(b[16]=f("span",{class:"font-medium text-gray-700"},"Correo:",-1)),f("p",d8,P(a.value?.correo),1)]),a.value?.carrera?(O(),T("div",f8,[b[17]||(b[17]=f("span",{class:"font-medium text-gray-700"},"Carrera:",-1)),f("p",h8,P(a.value.carrera),1)])):Z("",!0),f("div",p8,[b[18]||(b[18]=f("span",{class:"font-medium text-gray-700"},"Pelcula:",-1)),f("p",v8,P(p.value?.titulo),1)]),f("div",null,[b[19]||(b[19]=f("span",{class:"font-medium text-gray-700"},"Fecha:",-1)),f("p",g8,P(_(h.value?.fecha||"")),1)]),f("div",null,[b[20]||(b[20]=f("span",{class:"font-medium text-gray-700"},"Hora:",-1)),f("p",y8,P(h.value?.hora_inicio),1)]),f("div",null,[b[21]||(b[21]=f("span",{class:"font-medium text-gray-700"},"Asientos:",-1)),f("p",m8,P(u.value.asientos),1)]),f("div",null,[b[22]||(b[22]=f("span",{class:"font-medium text-gray-700"},"ID Reserva:",-1)),f("p",x8,P(o.value),1)])])]),f("div",w8,[f("canvas",{ref_key:"qrCanvas",ref:n,class:"max-w-full"},null,512)]),f("div",_8,[f("button",{onClick:y,class:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors shadow-lg hover:shadow-xl transform hover:scale-105"},"  Descargar QR "),f("button",{onClick:b[4]||(b[4]=S=>Rt(e).push("/cartelera")),class:"w-full bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors"},"  Ver Ms Pelculas "),f("button",{onClick:m,class:"w-full bg-gray-500 text-white py-3 rounded-lg font-semibold hover:bg-gray-600 transition-colors"},"  Generar Nueva Reserva ")]),b[25]||(b[25]=f("div",{class:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm text-blue-800"},[f("p",{class:"font-medium mb-2"}," Instrucciones:"),f("ul",{class:"list-disc list-inside space-y-1"},[f("li",null,"Descarga o guarda una captura del cdigo QR"),f("li",null,"Presenta este QR en la entrada del cine"),f("li",null,"El personal escanear tu cdigo para validar tu entrada"),f("li",null,"Llega 15 minutos antes del inicio de la funcin")])],-1))])):(O(),T("div",F4,[a.value?(O(),T("div",$4,[b[8]||(b[8]=f("h3",{class:"font-bold text-lg text-gray-800 mb-4"}," Tu Informacin",-1)),f("div",j4,[f("div",null,[b[5]||(b[5]=f("span",{class:"font-medium text-gray-700"},"Nombre:",-1)),f("p",U4,P(a.value.nombre),1)]),f("div",null,[b[6]||(b[6]=f("span",{class:"font-medium text-gray-700"},"Correo:",-1)),f("p",V4,P(a.value.correo),1)]),a.value.carrera?(O(),T("div",H4,[b[7]||(b[7]=f("span",{class:"font-medium text-gray-700"},"Carrera:",-1)),f("p",G4,P(a.value.carrera),1)])):Z("",!0)])])):Z("",!0),p.value?(O(),T("div",q4,[f("div",z4,[p.value.poster_url?(O(),T("img",{key:0,src:p.value.poster_url,alt:p.value.titulo,class:"w-20 h-28 object-cover rounded-lg shadow-lg"},null,8,W4)):Z("",!0),f("div",K4,[f("h3",X4," "+P(p.value.titulo),1),f("div",Y4,[p.value.duracion_min?(O(),T("p",Z4," "+P(p.value.duracion_min)+" min",1)):Z("",!0),p.value.genero?(O(),T("p",J4," "+P(p.value.genero),1)):Z("",!0)])])])])):Z("",!0),f("div",null,[b[10]||(b[10]=f("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Pelcula * ",-1)),fe(f("select",{"onUpdate:modelValue":b[0]||(b[0]=S=>u.value.pelicula_id=S),required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent"},[b[9]||(b[9]=f("option",{value:""},"Seleccionar pelcula...",-1)),(O(!0),T(ke,null,st(s.value,S=>(O(),T("option",{key:S.id,value:S.id},P(S.titulo),9,Q4))),128))],512),[[ar,u.value.pelicula_id]])]),f("div",null,[b[12]||(b[12]=f("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Funcin (Fecha y Hora) * ",-1)),fe(f("select",{"onUpdate:modelValue":b[1]||(b[1]=S=>u.value.funcion_id=S),required:"",disabled:!u.value.pelicula_id,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent disabled:opacity-50"},[b[11]||(b[11]=f("option",{value:""},"Seleccionar funcin...",-1)),(O(!0),T(ke,null,st(d.value,S=>(O(),T("option",{key:S.id,value:S.id},"  "+P(_(S.fecha))+" -  "+P(S.hora_inicio),9,t8))),128))],8,e8),[[ar,u.value.funcion_id]]),u.value.pelicula_id?d.value.length===0?(O(),T("p",n8,"  No hay funciones disponibles para esta pelcula ")):Z("",!0):(O(),T("p",r8," Primero selecciona una pelcula "))]),f("div",null,[b[13]||(b[13]=f("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Nmero de Asientos * ",-1)),fe(f("input",{"onUpdate:modelValue":b[2]||(b[2]=S=>u.value.asientos=S),type:"number",min:"1",max:"10",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#8B0000] focus:border-transparent",placeholder:"1"},null,512),[[Ae,u.value.asientos,void 0,{number:!0}]]),b[14]||(b[14]=f("p",{class:"text-sm text-gray-500 mt-1"},"Mximo 10 asientos por reserva",-1))]),f("button",{onClick:g,disabled:!c.value,class:"w-full bg-[#8B0000] text-white py-4 rounded-lg font-semibold text-lg hover:bg-[#A52A2A] transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl transform hover:scale-105 transition-all"},"  Generar Mi Cdigo QR ",8,i8),f("button",{onClick:b[3]||(b[3]=S=>Rt(e).push("/cartelera")),class:"w-full bg-gray-200 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-300 transition-colors"},"  Volver a Cartelera ")]))])])]))}}),E8=jn(b8,[["__scopeId","data-v-2b0c1691"]]);function A8(r,e){var t=Object.setPrototypeOf;t?t(r,e):r.__proto__=e}function C8(r,e){e===void 0&&(e=r.constructor);var t=Error.captureStackTrace;t&&t(r,e)}var S8=(function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),I8=(function(r){S8(e,r);function e(t,n){var i=this.constructor,o=r.call(this,t,n)||this;return Object.defineProperty(o,"name",{value:i.name,enumerable:!1,configurable:!0}),A8(o,i.prototype),C8(o),o}return e})(Error),O8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Jt=(function(r){O8(e,r);function e(t){t===void 0&&(t=void 0);var n=r.call(this,t)||this;return n.message=t,n}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e})(I8),T8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),lt=(function(r){T8(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ArgumentException",e})(Jt),R8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),ve=(function(r){R8(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e})(Jt),fh=(function(){function r(e){if(this.binarizer=e,e===null)throw new ve("Binarizer must be non-null.")}return r.prototype.getWidth=function(){return this.binarizer.getWidth()},r.prototype.getHeight=function(){return this.binarizer.getHeight()},r.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},r.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},r.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},r.prototype.crop=function(e,t,n,i){var o=this.binarizer.getLuminanceSource().crop(e,t,n,i);return new r(this.binarizer.createBinarizer(o))},r.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},r.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new r(this.binarizer.createBinarizer(e))},r.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new r(this.binarizer.createBinarizer(e))},r.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},r})(),P8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),dt=(function(r){P8(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e})(Jt),k8=(function(){function r(e){this.source=e}return r.prototype.getLuminanceSource=function(){return this.source},r.prototype.getWidth=function(){return this.source.getWidth()},r.prototype.getHeight=function(){return this.source.getHeight()},r})(),Ye=(function(){function r(){}return r.arraycopy=function(e,t,n,i,o){for(;o--;)n[i++]=e[t++]},r.currentTimeMillis=function(){return Date.now()},r})(),N8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),zl=(function(r){N8(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e})(Jt),D8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),ld=(function(r){D8(e,r);function e(t,n){t===void 0&&(t=void 0),n===void 0&&(n=void 0);var i=r.call(this,n)||this;return i.index=t,i.message=n,i}return e.kind="ArrayIndexOutOfBoundsException",e})(zl),M8=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mt=(function(){function r(){}return r.fill=function(e,t){for(var n=0,i=e.length;n<i;n++)e[n]=t},r.fillWithin=function(e,t,n,i){r.rangeCheck(e.length,t,n);for(var o=t;o<n;o++)e[o]=i},r.rangeCheck=function(e,t,n){if(t>n)throw new ve("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new ld(t);if(n>e)throw new ld(n)},r.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},r.create=function(e,t,n){var i=Array.from({length:e});return i.map(function(o){return Array.from({length:t}).fill(n)})},r.createInt32Array=function(e,t,n){var i=Array.from({length:e});return i.map(function(o){return Int32Array.from({length:t}).fill(n)})},r.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0},r.hashCode=function(e){var t,n;if(e===null)return 0;var i=1;try{for(var o=M8(e),a=o.next();!a.done;a=o.next()){var s=a.value;i=31*i+s}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i},r.fillUint8Array=function(e,t){for(var n=0;n!==e.length;n++)e[n]=t},r.copyOf=function(e,t){return e.slice(0,t)},r.copyOfUint8Array=function(e,t){if(e.length<=t){var n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)},r.copyOfRange=function(e,t,n){var i=n-t,o=new Int32Array(i);return Ye.arraycopy(e,t,o,0,i),o},r.binarySearch=function(e,t,n){n===void 0&&(n=r.numberComparator);for(var i=0,o=e.length-1;i<=o;){var a=o+i>>1,s=n(t,e[a]);if(s>0)i=a+1;else if(s<0)o=a-1;else return a}return-i-1},r.numberComparator=function(e,t){return e-t},r})(),Se=(function(){function r(){}return r.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var n=31;return t=e<<16,t!==0&&(n-=16,e=t),t=e<<8,t!==0&&(n-=8,e=t),t=e<<4,t!==0&&(n-=4,e=t),t=e<<2,t!==0&&(n-=2,e=t),n-(e<<1>>>31)},r.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},r.toHexString=function(e){return e.toString(16)},r.toBinaryString=function(e){return String(parseInt(String(e),2))},r.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},r.truncDivision=function(e,t){return Math.trunc(e/t)},r.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},r.MIN_VALUE_32_BITS=-2147483648,r.MAX_VALUE=Number.MAX_SAFE_INTEGER,r})(),Et=(function(){function r(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=r.makeArray(e):this.bits=t)}return r.prototype.getSize=function(){return this.size},r.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},r.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=r.makeArray(e);Ye.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},r.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},r.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},r.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},r.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,i=Math.floor(e/32),o=n[i];o&=~((1<<(e&31))-1);for(var a=n.length;o===0;){if(++i===a)return t;o=n[i]}var s=i*32+Se.numberOfTrailingZeros(o);return s>t?t:s},r.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,i=Math.floor(e/32),o=~n[i];o&=~((1<<(e&31))-1);for(var a=n.length;o===0;){if(++i===a)return t;o=~n[i]}var s=i*32+Se.numberOfTrailingZeros(o);return s>t?t:s},r.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},r.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new ve;if(t!==e){t--;for(var n=Math.floor(e/32),i=Math.floor(t/32),o=this.bits,a=n;a<=i;a++){var s=a>n?0:e&31,l=a<i?31:t&31,u=(2<<l)-(1<<s);o[a]|=u}}},r.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,n=0;n<e;n++)t[n]=0},r.prototype.isRange=function(e,t,n){if(t<e||e<0||t>this.size)throw new ve;if(t===e)return!0;t--;for(var i=Math.floor(e/32),o=Math.floor(t/32),a=this.bits,s=i;s<=o;s++){var l=s>i?0:e&31,u=s<o?31:t&31,c=(2<<u)-(1<<l)&4294967295;if((a[s]&c)!==(n?c:0))return!1}return!0},r.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},r.prototype.appendBits=function(e,t){if(t<0||t>32)throw new ve("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var n=t;n>0;n--)this.appendBit((e>>n-1&1)===1)},r.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var n=0;n<t;n++)this.appendBit(e.get(n))},r.prototype.xor=function(e){if(this.size!==e.size)throw new ve("Sizes don't match");for(var t=this.bits,n=0,i=t.length;n<i;n++)t[n]^=e.bits[n]},r.prototype.toBytes=function(e,t,n,i){for(var o=0;o<i;o++){for(var a=0,s=0;s<8;s++)this.get(e)&&(a|=1<<7-s),e++;t[n+o]=a}},r.prototype.getBitArray=function(){return this.bits},r.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,i=this.bits,o=0;o<n;o++){var a=i[o];a=a>>1&1431655765|(a&1431655765)<<1,a=a>>2&858993459|(a&858993459)<<2,a=a>>4&252645135|(a&252645135)<<4,a=a>>8&16711935|(a&16711935)<<8,a=a>>16&65535|(a&65535)<<16,e[t-o]=a}if(this.size!==n*32){for(var s=n*32-this.size,l=e[0]>>>s,o=1;o<n;o++){var u=e[o];l|=u<<32-s,e[o-1]=l,l=u>>>s}e[n-1]=l}this.bits=e},r.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.size===t.size&&mt.equals(this.bits,t.bits)},r.prototype.hashCode=function(){return 31*this.size+mt.hashCode(this.bits)},r.prototype.toString=function(){for(var e="",t=0,n=this.size;t<n;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},r.prototype.clone=function(){return new r(this.size,this.bits.slice())},r.prototype.toArray=function(){for(var e=[],t=0,n=this.size;t<n;t++)e.push(this.get(t));return e},r})(),ol;(function(r){r[r.OTHER=0]="OTHER",r[r.PURE_BARCODE=1]="PURE_BARCODE",r[r.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",r[r.TRY_HARDER=3]="TRY_HARDER",r[r.CHARACTER_SET=4]="CHARACTER_SET",r[r.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",r[r.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",r[r.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",r[r.ASSUME_GS1=8]="ASSUME_GS1",r[r.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",r[r.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",r[r.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(ol||(ol={}));const Ze=ol;var B8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),te=(function(r){B8(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e})(Jt),L8=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},je;(function(r){r[r.Cp437=0]="Cp437",r[r.ISO8859_1=1]="ISO8859_1",r[r.ISO8859_2=2]="ISO8859_2",r[r.ISO8859_3=3]="ISO8859_3",r[r.ISO8859_4=4]="ISO8859_4",r[r.ISO8859_5=5]="ISO8859_5",r[r.ISO8859_6=6]="ISO8859_6",r[r.ISO8859_7=7]="ISO8859_7",r[r.ISO8859_8=8]="ISO8859_8",r[r.ISO8859_9=9]="ISO8859_9",r[r.ISO8859_10=10]="ISO8859_10",r[r.ISO8859_11=11]="ISO8859_11",r[r.ISO8859_13=12]="ISO8859_13",r[r.ISO8859_14=13]="ISO8859_14",r[r.ISO8859_15=14]="ISO8859_15",r[r.ISO8859_16=15]="ISO8859_16",r[r.SJIS=16]="SJIS",r[r.Cp1250=17]="Cp1250",r[r.Cp1251=18]="Cp1251",r[r.Cp1252=19]="Cp1252",r[r.Cp1256=20]="Cp1256",r[r.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",r[r.UTF8=22]="UTF8",r[r.ASCII=23]="ASCII",r[r.Big5=24]="Big5",r[r.GB18030=25]="GB18030",r[r.EUC_KR=26]="EUC_KR"})(je||(je={}));var yt=(function(){function r(e,t,n){for(var i,o,a=[],s=3;s<arguments.length;s++)a[s-3]=arguments[s];this.valueIdentifier=e,this.name=n,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=a,r.VALUE_IDENTIFIER_TO_ECI.set(e,this),r.NAME_TO_ECI.set(n,this);for(var l=this.values,u=0,c=l.length;u!==c;u++){var d=l[u];r.VALUES_TO_ECI.set(d,this)}try{for(var p=L8(a),h=p.next();!h.done;h=p.next()){var v=h.value;r.NAME_TO_ECI.set(v,this)}}catch(x){i={error:x}}finally{try{h&&!h.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}}return r.prototype.getValueIdentifier=function(){return this.valueIdentifier},r.prototype.getName=function(){return this.name},r.prototype.getValue=function(){return this.values[0]},r.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new te("incorect value");var t=r.VALUES_TO_ECI.get(e);if(t===void 0)throw new te("incorect value");return t},r.getCharacterSetECIByName=function(e){var t=r.NAME_TO_ECI.get(e);if(t===void 0)throw new te("incorect value");return t},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.getName()===t.getName()},r.VALUE_IDENTIFIER_TO_ECI=new Map,r.VALUES_TO_ECI=new Map,r.NAME_TO_ECI=new Map,r.Cp437=new r(je.Cp437,Int32Array.from([0,2]),"Cp437"),r.ISO8859_1=new r(je.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),r.ISO8859_2=new r(je.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),r.ISO8859_3=new r(je.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),r.ISO8859_4=new r(je.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),r.ISO8859_5=new r(je.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),r.ISO8859_6=new r(je.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),r.ISO8859_7=new r(je.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),r.ISO8859_8=new r(je.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),r.ISO8859_9=new r(je.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),r.ISO8859_10=new r(je.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),r.ISO8859_11=new r(je.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),r.ISO8859_13=new r(je.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),r.ISO8859_14=new r(je.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),r.ISO8859_15=new r(je.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),r.ISO8859_16=new r(je.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),r.SJIS=new r(je.SJIS,20,"SJIS","Shift_JIS"),r.Cp1250=new r(je.Cp1250,21,"Cp1250","windows-1250"),r.Cp1251=new r(je.Cp1251,22,"Cp1251","windows-1251"),r.Cp1252=new r(je.Cp1252,23,"Cp1252","windows-1252"),r.Cp1256=new r(je.Cp1256,24,"Cp1256","windows-1256"),r.UnicodeBigUnmarked=new r(je.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),r.UTF8=new r(je.UTF8,26,"UTF8","UTF-8"),r.ASCII=new r(je.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),r.Big5=new r(je.Big5,28,"Big5"),r.GB18030=new r(je.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),r.EUC_KR=new r(je.EUC_KR,30,"EUC_KR","EUC-KR"),r})(),F8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Lo=(function(r){F8(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e})(Jt),pr=(function(){function r(){}return r.decode=function(e,t){var n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},r.shouldDecodeOnFallback=function(e){return!r.isBrowser()&&e==="ISO-8859-1"},r.encode=function(e,t){var n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},r.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},r.encodingName=function(e){return typeof e=="string"?e:e.getName()},r.encodingCharacterSet=function(e){return e instanceof yt?e:yt.getCharacterSetECIByName(e)},r.decodeFallback=function(e,t){var n=this.encodingCharacterSet(t);if(r.isDecodeFallbackSupported(n)){for(var i="",o=0,a=e.length;o<a;o++){var s=e[o].toString(16);s.length<2&&(s="0"+s),i+="%"+s}return decodeURIComponent(i)}if(n.equals(yt.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Lo("Encoding "+this.encodingName(t)+" not supported by fallback.")},r.isDecodeFallbackSupported=function(e){return e.equals(yt.UTF8)||e.equals(yt.ISO8859_1)||e.equals(yt.ASCII)},r.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),n=t.split(""),i=[],o=0;o<n.length;o++)i.push(n[o].charCodeAt(0));return new Uint8Array(i)},r})(),Oe=(function(){function r(){}return r.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var n=t?t.getName():this.ISO88591;return pr.decode(new Uint8Array([e]),n)},r.guessEncoding=function(e,t){if(t!=null&&t.get(Ze.CHARACTER_SET)!==void 0)return t.get(Ze.CHARACTER_SET).toString();for(var n=e.length,i=!0,o=!0,a=!0,s=0,l=0,u=0,c=0,d=0,p=0,h=0,v=0,x=0,w=0,g=0,y=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,m=0;m<n&&(i||o||a);m++){var _=e[m]&255;a&&(s>0?(_&128)===0?a=!1:s--:(_&128)!==0&&((_&64)===0?a=!1:(s++,(_&32)===0?l++:(s++,(_&16)===0?u++:(s++,(_&8)===0?c++:a=!1))))),i&&(_>127&&_<160?i=!1:_>159&&(_<192||_===215||_===247)&&g++),o&&(d>0?_<64||_===127||_>252?o=!1:d--:_===128||_===160||_>239?o=!1:_>160&&_<224?(p++,v=0,h++,h>x&&(x=h)):_>127?(d++,h=0,v++,v>w&&(w=v)):(h=0,v=0))}return a&&s>0&&(a=!1),o&&d>0&&(o=!1),a&&(y||l+u+c>0)?r.UTF8:o&&(r.ASSUME_SHIFT_JIS||x>=3||w>=3)?r.SHIFT_JIS:i&&o?x===2&&p===2||g*10>=n?r.SHIFT_JIS:r.ISO88591:i?r.ISO88591:o?r.SHIFT_JIS:a?r.UTF8:r.PLATFORM_DEFAULT_ENCODING},r.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=-1;function o(s,l,u,c,d,p){if(s==="%%")return"%";if(t[++i]!==void 0){s=c?parseInt(c.substr(1)):void 0;var h=d?parseInt(d.substr(1)):void 0,v;switch(p){case"s":v=t[i];break;case"c":v=t[i][0];break;case"f":v=parseFloat(t[i]).toFixed(s);break;case"p":v=parseFloat(t[i]).toPrecision(s);break;case"e":v=parseFloat(t[i]).toExponential(s);break;case"x":v=parseInt(t[i]).toString(h||16);break;case"d":v=parseFloat(parseInt(t[i],h||10).toPrecision(s)).toFixed(0);break}v=typeof v=="object"?JSON.stringify(v):(+v).toString(h);for(var x=parseInt(u),w=u&&u[0]+""=="0"?"0":" ";v.length<x;)v=l!==void 0?v+w:w+v;return v}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,o)},r.getBytes=function(e,t){return pr.encode(e,t)},r.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},r.getCharAt=function(e){return String.fromCharCode(e)},r.SHIFT_JIS=yt.SJIS.getName(),r.GB2312="GB2312",r.ISO88591=yt.ISO8859_1.getName(),r.EUC_JP="EUC_JP",r.UTF8=yt.UTF8.getName(),r.PLATFORM_DEFAULT_ENCODING=r.UTF8,r.ASSUME_SHIFT_JIS=!1,r})(),Ce=(function(){function r(e){e===void 0&&(e=""),this.value=e}return r.prototype.enableDecoding=function(e){return this.encoding=e,this},r.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Oe.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},r.prototype.appendChars=function(e,t,n){for(var i=t;t<t+n;i++)this.append(e[i]);return this},r.prototype.length=function(){return this.value.length},r.prototype.charAt=function(e){return this.value.charAt(e)},r.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},r.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},r.prototype.substring=function(e,t){return this.value.substring(e,t)},r.prototype.setLengthToZero=function(){this.value=""},r.prototype.toString=function(){return this.value},r.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},r})(),Lr=(function(){function r(e,t,n,i){if(this.width=e,this.height=t,this.rowSize=n,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new ve("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return r.parseFromBooleanArray=function(e){for(var t=e.length,n=e[0].length,i=new r(n,t),o=0;o<t;o++)for(var a=e[o],s=0;s<n;s++)a[s]&&i.set(s,o);return i},r.parseFromString=function(e,t,n){if(e===null)throw new ve("stringRepresentation cannot be null");for(var i=new Array(e.length),o=0,a=0,s=-1,l=0,u=0;u<e.length;)if(e.charAt(u)===`
`||e.charAt(u)==="\r"){if(o>a){if(s===-1)s=o-a;else if(o-a!==s)throw new ve("row lengths do not match");a=o,l++}u++}else if(e.substring(u,u+t.length)===t)u+=t.length,i[o]=!0,o++;else if(e.substring(u,u+n.length)===n)u+=n.length,i[o]=!1,o++;else throw new ve("illegal character encountered: "+e.substring(u));if(o>a){if(s===-1)s=o-a;else if(o-a!==s)throw new ve("row lengths do not match");l++}for(var c=new r(s,l),d=0;d<o;d++)i[d]&&c.set(Math.floor(d%s),Math.floor(d/s));return c},r.prototype.get=function(e,t){var n=t*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},r.prototype.set=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},r.prototype.unset=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},r.prototype.flip=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},r.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new ve("input matrix dimensions do not match");for(var t=new Et(Math.floor(this.width/32)+1),n=this.rowSize,i=this.bits,o=0,a=this.height;o<a;o++)for(var s=o*n,l=e.getRow(o,t).getBitArray(),u=0;u<n;u++)i[s+u]^=l[u]},r.prototype.clear=function(){for(var e=this.bits,t=e.length,n=0;n<t;n++)e[n]=0},r.prototype.setRegion=function(e,t,n,i){if(t<0||e<0)throw new ve("Left and top must be nonnegative");if(i<1||n<1)throw new ve("Height and width must be at least 1");var o=e+n,a=t+i;if(a>this.height||o>this.width)throw new ve("The region must fit inside the matrix");for(var s=this.rowSize,l=this.bits,u=t;u<a;u++)for(var c=u*s,d=e;d<o;d++)l[c+Math.floor(d/32)]|=1<<(d&31)&4294967295},r.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new Et(this.width):t.clear();for(var n=this.rowSize,i=this.bits,o=e*n,a=0;a<n;a++)t.setBulk(a*32,i[o+a]);return t},r.prototype.setRow=function(e,t){Ye.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},r.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),n=new Et(e),i=new Et(e),o=0,a=Math.floor((t+1)/2);o<a;o++)n=this.getRow(o,n),i=this.getRow(t-1-o,i),n.reverse(),i.reverse(),this.setRow(o,i),this.setRow(t-1-o,n)},r.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,n=this.rowSize,i=this.bits,o=e,a=t,s=-1,l=-1,u=0;u<t;u++)for(var c=0;c<n;c++){var d=i[u*n+c];if(d!==0){if(u<a&&(a=u),u>l&&(l=u),c*32<o){for(var p=0;(d<<31-p&4294967295)===0;)p++;c*32+p<o&&(o=c*32+p)}if(c*32+31>s){for(var p=31;!(d>>>p);)p--;c*32+p>s&&(s=c*32+p)}}}return s<o||l<a?null:Int32Array.from([o,a,s-o+1,l-a+1])},r.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,n=0;n<t.length&&t[n]===0;)n++;if(n===t.length)return null;for(var i=n/e,o=n%e*32,a=t[n],s=0;(a<<31-s&4294967295)===0;)s++;return o+=s,Int32Array.from([o,i])},r.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,n=t.length-1;n>=0&&t[n]===0;)n--;if(n<0)return null;for(var i=Math.floor(n/e),o=Math.floor(n%e)*32,a=t[n],s=31;!(a>>>s);)s--;return o+=s,Int32Array.from([o,i])},r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.getRowSize=function(){return this.rowSize},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&mt.equals(this.bits,t.bits)},r.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+mt.hashCode(this.bits),e},r.prototype.toString=function(e,t,n){return e===void 0&&(e="X "),t===void 0&&(t="  "),n===void 0&&(n=`
`),this.buildToString(e,t,n)},r.prototype.buildToString=function(e,t,n){for(var i=new Ce,o=0,a=this.height;o<a;o++){for(var s=0,l=this.width;s<l;s++)i.append(this.get(s,o)?e:t);i.append(n)}return i.toString()},r.prototype.clone=function(){return new r(this.width,this.height,this.rowSize,this.bits.slice())},r})(),$8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),V=(function(r){$8(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e})(Jt),j8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),U8=(function(r){j8(e,r);function e(t){var n=r.call(this,t)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(t,n){var i=this.getLuminanceSource(),o=i.getWidth();n==null||n.getSize()<o?n=new Et(o):n.clear(),this.initArrays(o);for(var a=i.getRow(t,this.luminances),s=this.buckets,l=0;l<o;l++)s[(a[l]&255)>>e.LUMINANCE_SHIFT]++;var u=e.estimateBlackPoint(s);if(o<3)for(var l=0;l<o;l++)(a[l]&255)<u&&n.set(l);else for(var c=a[0]&255,d=a[1]&255,l=1;l<o-1;l++){var p=a[l+1]&255;(d*4-c-p)/2<u&&n.set(l),c=d,d=p}return n},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),n=t.getWidth(),i=t.getHeight(),o=new Lr(n,i);this.initArrays(n);for(var a=this.buckets,s=1;s<5;s++)for(var l=Math.floor(i*s/5),u=t.getRow(l,this.luminances),c=Math.floor(n*4/5),d=Math.floor(n/5);d<c;d++){var p=u[d]&255;a[p>>e.LUMINANCE_SHIFT]++}for(var h=e.estimateBlackPoint(a),v=t.getMatrix(),s=0;s<i;s++)for(var x=s*n,d=0;d<n;d++){var p=v[x+d]&255;p<h&&o.set(d,s)}return o},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var n=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)n[i]=0},e.estimateBlackPoint=function(t){for(var n=t.length,i=0,o=0,a=0,s=0;s<n;s++)t[s]>a&&(o=s,a=t[s]),t[s]>i&&(i=t[s]);for(var l=0,u=0,s=0;s<n;s++){var c=s-o,d=t[s]*c*c;d>u&&(l=s,u=d)}if(o>l){var p=o;o=l,l=p}if(l-o<=n/16)throw new V;for(var h=l-1,v=-1,s=l-1;s>o;s--){var x=s-o,d=x*x*(l-s)*(i-t[s]);d>v&&(h=s,v=d)}return h<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e})(k8),V8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),hh=(function(r){V8(e,r);function e(t){var n=r.call(this,t)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),n=t.getWidth(),i=t.getHeight();if(n>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var o=t.getMatrix(),a=n>>e.BLOCK_SIZE_POWER;(n&e.BLOCK_SIZE_MASK)!==0&&a++;var s=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&s++;var l=e.calculateBlackPoints(o,a,s,n,i),u=new Lr(n,i);e.calculateThresholdForBlock(o,a,s,n,i,l,u),this.matrix=u}else this.matrix=r.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,n,i,o,a,s,l){for(var u=a-e.BLOCK_SIZE,c=o-e.BLOCK_SIZE,d=0;d<i;d++){var p=d<<e.BLOCK_SIZE_POWER;p>u&&(p=u);for(var h=e.cap(d,2,i-3),v=0;v<n;v++){var x=v<<e.BLOCK_SIZE_POWER;x>c&&(x=c);for(var w=e.cap(v,2,n-3),g=0,y=-2;y<=2;y++){var m=s[h+y];g+=m[w-2]+m[w-1]+m[w]+m[w+1]+m[w+2]}var _=g/25;e.thresholdBlock(t,x,p,_,o,l)}}},e.cap=function(t,n,i){return t<n?n:t>i?i:t},e.thresholdBlock=function(t,n,i,o,a,s){for(var l=0,u=i*a+n;l<e.BLOCK_SIZE;l++,u+=a)for(var c=0;c<e.BLOCK_SIZE;c++)(t[u+c]&255)<=o&&s.set(n+c,i+l)},e.calculateBlackPoints=function(t,n,i,o,a){for(var s=a-e.BLOCK_SIZE,l=o-e.BLOCK_SIZE,u=new Array(i),c=0;c<i;c++){u[c]=new Int32Array(n);var d=c<<e.BLOCK_SIZE_POWER;d>s&&(d=s);for(var p=0;p<n;p++){var h=p<<e.BLOCK_SIZE_POWER;h>l&&(h=l);for(var v=0,x=255,w=0,g=0,y=d*o+h;g<e.BLOCK_SIZE;g++,y+=o){for(var m=0;m<e.BLOCK_SIZE;m++){var _=t[y+m]&255;v+=_,_<x&&(x=_),_>w&&(w=_)}if(w-x>e.MIN_DYNAMIC_RANGE)for(g++,y+=o;g<e.BLOCK_SIZE;g++,y+=o)for(var m=0;m<e.BLOCK_SIZE;m++)v+=t[y+m]&255}var E=v>>e.BLOCK_SIZE_POWER*2;if(w-x<=e.MIN_DYNAMIC_RANGE&&(E=x/2,c>0&&p>0)){var b=(u[c-1][p]+2*u[c][p-1]+u[c-1][p-1])/4;x<b&&(E=b)}u[c][p]=E}}return u},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e})(U8),lo=(function(){function r(e,t){this.width=e,this.height=t}return r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.isCropSupported=function(){return!1},r.prototype.crop=function(e,t,n,i){throw new Lo("This luminance source does not support cropping.")},r.prototype.isRotateSupported=function(){return!1},r.prototype.rotateCounterClockwise=function(){throw new Lo("This luminance source does not support rotation by 90 degrees.")},r.prototype.rotateCounterClockwise45=function(){throw new Lo("This luminance source does not support rotation by 45 degrees.")},r.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new Ce,n=0;n<this.height;n++){for(var i=this.getRow(n,e),o=0;o<this.width;o++){var a=i[o]&255,s=void 0;a<64?s="#":a<128?s="+":a<192?s=".":s=" ",t.append(s)}t.append(`
`)}return t.toString()},r})(),H8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Aa=(function(r){H8(e,r);function e(t){var n=r.call(this,t.getWidth(),t.getHeight())||this;return n.delegate=t,n}return e.prototype.getRow=function(t,n){for(var i=this.delegate.getRow(t,n),o=this.getWidth(),a=0;a<o;a++)i[a]=255-(i[a]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(n),o=0;o<n;o++)i[o]=255-(t[o]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,n,i,o){return new e(this.delegate.crop(t,n,i,o))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e})(lo),G8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),q8=(function(r){G8(e,r);function e(t,n){n===void 0&&(n=!1);var i=r.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,n),i}return e.makeBufferFromCanvasImageData=function(t,n){n===void 0&&(n=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,n)},e.toGrayscaleBuffer=function(t,n,i,o){o===void 0&&(o=!1);var a=new Uint8ClampedArray(n*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!o)for(var s=0,l=0,u=t.length;s<u;s+=4,l++){var c=void 0,d=t[s+3];if(d===0)c=255;else{var p=t[s],h=t[s+1],v=t[s+2];c=306*p+601*h+117*v+512>>10}a[l]=c}else for(var s=0,l=0,x=t.length;s<x;s+=4,l++){var c=void 0,d=t[s+3];if(d===0)c=255;else{var p=t[s],h=t[s+1],v=t[s+2];c=306*p+601*h+117*v+512>>10}a[l]=255-c}return a},e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new ve("Requested row is outside the image: "+t);var i=this.getWidth(),o=t*i;return n===null?n=this.buffer.slice(o,o+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(o,o+i))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,i,o){return r.prototype.crop.call(this,t,n,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var n=this.getTempCanvasElement(),i=n.getContext("2d"),o=t*e.DEGREE_TO_RADIANS,a=this.canvas.width,s=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(o))*a+Math.abs(Math.sin(o))*s),u=Math.ceil(Math.abs(Math.sin(o))*a+Math.abs(Math.cos(o))*s);return n.width=l,n.height=u,i.translate(l/2,u/2),i.rotate(o),i.drawImage(this.canvas,a/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new Aa(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e})(lo),z8=(function(){function r(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}return r.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},r})(),$t=function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?o(c.value):i(c.value).then(s,l)}u((n=n.apply(r,e||[])).next())})},jt=function(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(c){u=[6,c],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},W8=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wi=(function(){function r(e,t,n){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(r.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),r.prototype.listVideoInputDevices=function(){return $t(this,void 0,void 0,function(){var e,t,n,i,o,a,s,l,u,c,d,p;return jt(this,function(h){switch(h.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),t=[];try{for(n=W8(e),i=n.next();!i.done;i=n.next())o=i.value,a=o.kind==="video"?"videoinput":o.kind,a==="videoinput"&&(s=o.deviceId||o.id,l=o.label||"Video device "+(t.length+1),u=o.groupId,c={deviceId:s,label:l,kind:a,groupId:u},t.push(c))}catch(v){d={error:v}}finally{try{i&&!i.done&&(p=n.return)&&p.call(n)}finally{if(d)throw d.error}}return[2,t]}})})},r.prototype.getVideoInputDevices=function(){return $t(this,void 0,void 0,function(){var e;return jt(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(n){return new z8(n.deviceId,n.label)})]}})})},r.prototype.findDeviceById=function(e){return $t(this,void 0,void 0,function(){var t;return jt(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=n.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},r.prototype.decodeFromInputVideoDevice=function(e,t){return $t(this,void 0,void 0,function(){return jt(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,n.sent()]}})})},r.prototype.decodeOnceFromVideoDevice=function(e,t){return $t(this,void 0,void 0,function(){var n,i;return jt(this,function(o){switch(o.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},i={video:n},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,o.sent()]}})})},r.prototype.decodeOnceFromConstraints=function(e,t){return $t(this,void 0,void 0,function(){var n;return jt(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=i.sent(),[4,this.decodeOnceFromStream(n,t)];case 2:return[2,i.sent()]}})})},r.prototype.decodeOnceFromStream=function(e,t){return $t(this,void 0,void 0,function(){var n,i;return jt(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return n=o.sent(),[4,this.decodeOnce(n)];case 2:return i=o.sent(),[2,i]}})})},r.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,n){return $t(this,void 0,void 0,function(){return jt(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,n)];case 1:return[2,i.sent()]}})})},r.prototype.decodeFromVideoDevice=function(e,t,n){return $t(this,void 0,void 0,function(){var i,o;return jt(this,function(a){switch(a.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,t,n)];case 1:return[2,a.sent()]}})})},r.prototype.decodeFromConstraints=function(e,t,n){return $t(this,void 0,void 0,function(){var i;return jt(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=o.sent(),[4,this.decodeFromStream(i,t,n)];case 2:return[2,o.sent()]}})})},r.prototype.decodeFromStream=function(e,t,n){return $t(this,void 0,void 0,function(){var i;return jt(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=o.sent(),[4,this.decodeContinuously(i,n)];case 2:return[2,o.sent()]}})})},r.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},r.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},r.prototype.attachStreamToVideo=function(e,t){return $t(this,void 0,void 0,function(){var n;return jt(this,function(i){switch(i.label){case 0:return n=this.prepareVideoElement(t),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return i.sent(),[2,n]}})})},r.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(n,i){return t.playVideoOnLoad(e,function(){return n()})})},r.prototype.playVideoOnLoad=function(e,t){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},r.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},r.prototype.tryPlayVideo=function(e){return $t(this,void 0,void 0,function(){return jt(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},r.prototype.getMediaElement=function(e,t){var n=document.getElementById(e);if(!n)throw new lt("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new lt("element with id '"+e+"' must be an "+t+" element");return n},r.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new lt("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},r.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new lt("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},r.prototype.decodeFromVideoContinuously=function(e,t,n){if(e===void 0&&t===void 0)throw new lt("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)},r.prototype.decodeFromImageElement=function(e){if(!e)throw new lt("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var n;return this.isImageLoaded(t)?n=this.decodeOnce(t,!1,!0):n=this._decodeOnLoadImage(t),n},r.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},r.prototype.decodeFromVideoElementContinuously=function(e,t){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)},r.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new lt("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},r.prototype.decodeFromImageUrl=function(e){if(!e)throw new lt("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var n=this._decodeOnLoadImage(t);return t.src=e,n},r.prototype.decodeFromVideoUrl=function(e){if(!e)throw new lt("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n},r.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new lt("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(n,t);return n.src=e,i},r.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(n,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(n,i)},e.addEventListener("load",t.imageLoadedListener)})},r.prototype._decodeOnLoadVideo=function(e){return $t(this,void 0,void 0,function(){return jt(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},r.prototype._decodeOnLoadVideoContinuously=function(e,t){return $t(this,void 0,void 0,function(){return jt(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,t),[2]}})})},r.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},r.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},r.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},r.prototype.decodeOnce=function(e,t,n){var i=this;t===void 0&&(t=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var o=function(a,s){if(i._stopAsyncDecode){s(new V("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var l=i.decode(e);a(l)}catch(p){var u=t&&p instanceof V,c=p instanceof dt||p instanceof te,d=c&&n;if(u||d)return setTimeout(o,i._timeBetweenDecodingAttempts,a,s);s(p)}};return new Promise(function(a,s){return o(a,s)})},r.prototype.decodeContinuously=function(e,t){var n=this;this._stopContinuousDecode=!1;var i=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var o=n.decode(e);t(o,null),setTimeout(i,n.timeBetweenScansMillis)}catch(l){t(null,l);var a=l instanceof dt||l instanceof te,s=l instanceof V;(a||s)&&setTimeout(i,n._timeBetweenDecodingAttempts)}};i()},r.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},r.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),i=new q8(n,t),o=new hh(i);return new fh(o)},r.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),n=void 0;try{n=t.getContext("2d",{willReadFrequently:!0})}catch{n=t.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},r.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},r.prototype.drawFrameOnCanvas=function(e,t,n){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},r.prototype.drawImageOnCanvas=function(e,t,n){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},r.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},r.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),n,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=i+"px",t.width=n,t.height=i,t},r.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},r.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},r.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},r.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},r.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},r.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},r.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},r})(),Ft=(function(){function r(e,t,n,i,o,a){n===void 0&&(n=t==null?0:8*t.length),a===void 0&&(a=Ye.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=i,this.format=o,this.timestamp=a,this.text=e,this.rawBytes=t,n==null?this.numBits=t==null?0:8*t.length:this.numBits=n,this.resultPoints=i,this.format=o,this.resultMetadata=null,a==null?this.timestamp=Ye.currentTimeMillis():this.timestamp=a}return r.prototype.getText=function(){return this.text},r.prototype.getRawBytes=function(){return this.rawBytes},r.prototype.getNumBits=function(){return this.numBits},r.prototype.getResultPoints=function(){return this.resultPoints},r.prototype.getBarcodeFormat=function(){return this.format},r.prototype.getResultMetadata=function(){return this.resultMetadata},r.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},r.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},r.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(t.length+e.length);Ye.arraycopy(t,0,n,0,t.length),Ye.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}},r.prototype.getTimestamp=function(){return this.timestamp},r.prototype.toString=function(){return this.text},r})(),al;(function(r){r[r.AZTEC=0]="AZTEC",r[r.CODABAR=1]="CODABAR",r[r.CODE_39=2]="CODE_39",r[r.CODE_93=3]="CODE_93",r[r.CODE_128=4]="CODE_128",r[r.DATA_MATRIX=5]="DATA_MATRIX",r[r.EAN_8=6]="EAN_8",r[r.EAN_13=7]="EAN_13",r[r.ITF=8]="ITF",r[r.MAXICODE=9]="MAXICODE",r[r.PDF_417=10]="PDF_417",r[r.QR_CODE=11]="QR_CODE",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(al||(al={}));const pe=al;var sl;(function(r){r[r.OTHER=0]="OTHER",r[r.ORIENTATION=1]="ORIENTATION",r[r.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",r[r.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",r[r.ISSUE_NUMBER=4]="ISSUE_NUMBER",r[r.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",r[r.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",r[r.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",r[r.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",r[r.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",r[r.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(sl||(sl={}));const Tt=sl;var Ca=(function(){function r(e,t,n,i,o,a){o===void 0&&(o=-1),a===void 0&&(a=-1),this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=i,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=a,this.numBits=e==null?0:8*e.length}return r.prototype.getRawBytes=function(){return this.rawBytes},r.prototype.getNumBits=function(){return this.numBits},r.prototype.setNumBits=function(e){this.numBits=e},r.prototype.getText=function(){return this.text},r.prototype.getByteSegments=function(){return this.byteSegments},r.prototype.getECLevel=function(){return this.ecLevel},r.prototype.getErrorsCorrected=function(){return this.errorsCorrected},r.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},r.prototype.getErasures=function(){return this.erasures},r.prototype.setErasures=function(e){this.erasures=e},r.prototype.getOther=function(){return this.other},r.prototype.setOther=function(e){this.other=e},r.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},r.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},r.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},r})(),ki=(function(){function r(){}return r.prototype.exp=function(e){return this.expTable[e]},r.prototype.log=function(e){if(e===0)throw new ve;return this.logTable[e]},r.addOrSubtract=function(e,t){return e^t},r})(),dn=(function(){function r(e,t){if(t.length===0)throw new ve;this.field=e;var n=t.length;if(n>1&&t[0]===0){for(var i=1;i<n&&t[i]===0;)i++;i===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-i),Ye.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return r.prototype.getCoefficients=function(){return this.coefficients},r.prototype.getDegree=function(){return this.coefficients.length-1},r.prototype.isZero=function(){return this.coefficients[0]===0},r.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},r.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,n;if(e===1){n=0;for(var i=0,o=t.length;i!==o;i++){var a=t[i];n=ki.addOrSubtract(n,a)}return n}n=t[0];for(var s=t.length,l=this.field,i=1;i<s;i++)n=ki.addOrSubtract(l.multiply(e,n),t[i]);return n},r.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new ve("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,n=e.coefficients;if(t.length>n.length){var i=t;t=n,n=i}var o=new Int32Array(n.length),a=n.length-t.length;Ye.arraycopy(n,0,o,0,a);for(var s=a;s<n.length;s++)o[s]=ki.addOrSubtract(t[s-a],n[s]);return new r(this.field,o)},r.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new ve("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,n=t.length,i=e.coefficients,o=i.length,a=new Int32Array(n+o-1),s=this.field,l=0;l<n;l++)for(var u=t[l],c=0;c<o;c++)a[l+c]=ki.addOrSubtract(a[l+c],s.multiply(u,i[c]));return new r(s,a)},r.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,n=this.field,i=new Int32Array(t),o=this.coefficients,a=0;a<t;a++)i[a]=n.multiply(o[a],e);return new r(n,i)},r.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new ve;if(t===0)return this.field.getZero();for(var n=this.coefficients,i=n.length,o=new Int32Array(i+e),a=this.field,s=0;s<i;s++)o[s]=a.multiply(n[s],t);return new r(a,o)},r.prototype.divide=function(e){if(!this.field.equals(e.field))throw new ve("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new ve("Divide by 0");for(var t=this.field,n=t.getZero(),i=this,o=e.getCoefficient(e.getDegree()),a=t.inverse(o);i.getDegree()>=e.getDegree()&&!i.isZero();){var s=i.getDegree()-e.getDegree(),l=t.multiply(i.getCoefficient(i.getDegree()),a),u=e.multiplyByMonomial(s,l),c=t.buildMonomial(s,l);n=n.addOrSubtract(c),i=i.addOrSubtract(u)}return[n,i]},r.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),t===0||n!==1){var i=this.field.log(n);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},r})(),K8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),ph=(function(r){K8(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ArithmeticException",e})(Jt),X8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Zt=(function(r){X8(e,r);function e(t,n,i){var o=r.call(this)||this;o.primitive=t,o.size=n,o.generatorBase=i;for(var a=new Int32Array(n),s=1,l=0;l<n;l++)a[l]=s,s*=2,s>=n&&(s^=t,s&=n-1);o.expTable=a;for(var u=new Int32Array(n),l=0;l<n-1;l++)u[a[l]]=l;return o.logTable=u,o.zero=new dn(o,Int32Array.from([0])),o.one=new dn(o,Int32Array.from([1])),o}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,n){if(t<0)throw new ve;if(n===0)return this.zero;var i=new Int32Array(t+1);return i[0]=n,new dn(this,i)},e.prototype.inverse=function(t){if(t===0)throw new ph;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,n){return t===0||n===0?0:this.expTable[(this.logTable[t]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Se.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e})(ki),Y8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),So=(function(r){Y8(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ReedSolomonException",e})(Jt),Z8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),uo=(function(r){Z8(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IllegalStateException",e})(Jt),Sa=(function(){function r(e){this.field=e}return r.prototype.decode=function(e,t){for(var n=this.field,i=new dn(n,e),o=new Int32Array(t),a=!0,s=0;s<t;s++){var l=i.evaluateAt(n.exp(s+n.getGeneratorBase()));o[o.length-1-s]=l,l!==0&&(a=!1)}if(!a)for(var u=new dn(n,o),c=this.runEuclideanAlgorithm(n.buildMonomial(t,1),u,t),d=c[0],p=c[1],h=this.findErrorLocations(d),v=this.findErrorMagnitudes(p,h),s=0;s<h.length;s++){var x=e.length-1-n.log(h[s]);if(x<0)throw new So("Bad error location");e[x]=Zt.addOrSubtract(e[x],v[s])}},r.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var o=this.field,a=e,s=t,l=o.getZero(),u=o.getOne();s.getDegree()>=(n/2|0);){var c=a,d=l;if(a=s,l=u,a.isZero())throw new So("r_{i-1} was zero");s=c;for(var p=o.getZero(),h=a.getCoefficient(a.getDegree()),v=o.inverse(h);s.getDegree()>=a.getDegree()&&!s.isZero();){var x=s.getDegree()-a.getDegree(),w=o.multiply(s.getCoefficient(s.getDegree()),v);p=p.addOrSubtract(o.buildMonomial(x,w)),s=s.addOrSubtract(a.multiplyByMonomial(x,w))}if(u=p.multiply(l).addOrSubtract(d),s.getDegree()>=a.getDegree())throw new uo("Division algorithm failed to reduce polynomial?")}var g=u.getCoefficient(0);if(g===0)throw new So("sigmaTilde(0) was zero");var y=o.inverse(g),m=u.multiplyScalar(y),_=s.multiplyScalar(y);return[m,_]},r.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(t),i=0,o=this.field,a=1;a<o.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(n[i]=o.inverse(a),i++);if(i!==t)throw new So("Error locator degree does not match number of roots");return n},r.prototype.findErrorMagnitudes=function(e,t){for(var n=t.length,i=new Int32Array(n),o=this.field,a=0;a<n;a++){for(var s=o.inverse(t[a]),l=1,u=0;u<n;u++)if(a!==u){var c=o.multiply(t[u],s),d=(c&1)===0?c|1:c&-2;l=o.multiply(l,d)}i[a]=o.multiply(e.evaluateAt(s),o.inverse(l)),o.getGeneratorBase()!==0&&(i[a]=o.multiply(i[a],s))}return i},r})(),St;(function(r){r[r.UPPER=0]="UPPER",r[r.LOWER=1]="LOWER",r[r.MIXED=2]="MIXED",r[r.DIGIT=3]="DIGIT",r[r.PUNCT=4]="PUNCT",r[r.BINARY=5]="BINARY"})(St||(St={}));var ud=(function(){function r(){}return r.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),n=this.extractBits(t),i=this.correctBits(n),o=r.convertBoolArrayToByteArray(i),a=r.getEncodedData(i),s=new Ca(o,a,null,null);return s.setNumBits(i.length),s},r.highLevelDecode=function(e){return this.getEncodedData(e)},r.getEncodedData=function(e){for(var t=e.length,n=St.UPPER,i=St.UPPER,o="",a=0;a<t;)if(i===St.BINARY){if(t-a<5)break;var s=r.readCode(e,a,5);if(a+=5,s===0){if(t-a<11)break;s=r.readCode(e,a,11)+31,a+=11}for(var l=0;l<s;l++){if(t-a<8){a=t;break}var u=r.readCode(e,a,8);o+=Oe.castAsNonUtf8Char(u),a+=8}i=n}else{var c=i===St.DIGIT?4:5;if(t-a<c)break;var u=r.readCode(e,a,c);a+=c;var d=r.getCharacter(i,u);d.startsWith("CTRL_")?(n=i,i=r.getTable(d.charAt(5)),d.charAt(6)==="L"&&(n=i)):(o+=d,i=n)}return o},r.getTable=function(e){switch(e){case"L":return St.LOWER;case"P":return St.PUNCT;case"M":return St.MIXED;case"D":return St.DIGIT;case"B":return St.BINARY;case"U":default:return St.UPPER}},r.getCharacter=function(e,t){switch(e){case St.UPPER:return r.UPPER_TABLE[t];case St.LOWER:return r.LOWER_TABLE[t];case St.MIXED:return r.MIXED_TABLE[t];case St.PUNCT:return r.PUNCT_TABLE[t];case St.DIGIT:return r.DIGIT_TABLE[t];default:throw new uo("Bad table")}},r.prototype.correctBits=function(e){var t,n;this.ddata.getNbLayers()<=2?(n=6,t=Zt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=Zt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=Zt.AZTEC_DATA_10):(n=12,t=Zt.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),o=e.length/n;if(o<i)throw new te;for(var a=e.length%n,s=new Int32Array(o),l=0;l<o;l++,a+=n)s[l]=r.readCode(e,a,n);try{var u=new Sa(t);u.decode(s,o-i)}catch(w){throw new te(w)}for(var c=(1<<n)-1,d=0,l=0;l<i;l++){var p=s[l];if(p===0||p===c)throw new te;(p===1||p===c-1)&&d++}for(var h=new Array(i*n-d),v=0,l=0;l<i;l++){var p=s[l];if(p===1||p===c-1)h.fill(p>1,v,v+n-1),v+=n-1;else for(var x=n-1;x>=0;--x)h[v++]=(p&1<<x)!==0}return h},r.prototype.extractBits=function(e){var t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),i=(t?11:14)+n*4,o=new Int32Array(i),a=new Array(this.totalBitsInLayer(n,t));if(t)for(var s=0;s<o.length;s++)o[s]=s;else for(var l=i+1+2*Se.truncDivision(Se.truncDivision(i,2)-1,15),u=i/2,c=Se.truncDivision(l,2),s=0;s<u;s++){var d=s+Se.truncDivision(s,15);o[u-s-1]=c-d-1,o[u+s]=c+d+1}for(var s=0,p=0;s<n;s++){for(var h=(n-s)*4+(t?9:12),v=s*2,x=i-1-v,w=0;w<h;w++)for(var g=w*2,y=0;y<2;y++)a[p+g+y]=e.get(o[v+y],o[v+w]),a[p+2*h+g+y]=e.get(o[v+w],o[x-y]),a[p+4*h+g+y]=e.get(o[x-y],o[x-w]),a[p+6*h+g+y]=e.get(o[x-w],o[v+y]);p+=h*8}return a},r.readCode=function(e,t,n){for(var i=0,o=t;o<t+n;o++)i<<=1,e[o]&&(i|=1);return i},r.readByte=function(e,t){var n=e.length-t;return n>=8?r.readCode(e,t,8):r.readCode(e,t,n)<<8-n},r.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),n=0;n<t.length;n++)t[n]=r.readByte(e,8*n);return t},r.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},r.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],r.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],r.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],r.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],r.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],r})(),Pe=(function(){function r(){}return r.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},r.distance=function(e,t,n,i){var o=e-n,a=t-i;return Math.sqrt(o*o+a*a)},r.sum=function(e){for(var t=0,n=0,i=e.length;n!==i;n++){var o=e[n];t+=o}return t},r})(),ll=(function(){function r(){}return r.floatToIntBits=function(e){return e},r.MAX_VALUE=Number.MAX_SAFE_INTEGER,r})(),le=(function(){function r(e,t){this.x=e,this.y=t}return r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r.prototype.equals=function(e){if(e instanceof r){var t=e;return this.x===t.x&&this.y===t.y}return!1},r.prototype.hashCode=function(){return 31*ll.floatToIntBits(this.x)+ll.floatToIntBits(this.y)},r.prototype.toString=function(){return"("+this.x+","+this.y+")"},r.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),o,a,s;if(n>=t&&n>=i?(a=e[0],o=e[1],s=e[2]):i>=n&&i>=t?(a=e[1],o=e[0],s=e[2]):(a=e[2],o=e[0],s=e[1]),this.crossProductZ(o,a,s)<0){var l=o;o=s,s=l}e[0]=o,e[1]=a,e[2]=s},r.distance=function(e,t){return Pe.distance(e.x,e.y,t.x,t.y)},r.crossProductZ=function(e,t,n){var i=t.x,o=t.y;return(n.x-i)*(e.y-o)-(n.y-o)*(e.x-i)},r})(),Wl=(function(){function r(e,t){this.bits=e,this.points=t}return r.prototype.getBits=function(){return this.bits},r.prototype.getPoints=function(){return this.points},r})(),J8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Q8=(function(r){J8(e,r);function e(t,n,i,o,a){var s=r.call(this,t,n)||this;return s.compact=i,s.nbDatablocks=o,s.nbLayers=a,s}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e})(Wl),ul=(function(){function r(e,t,n,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=r.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var o=t/2|0;if(this.leftInit=n-o,this.rightInit=n+o,this.upInit=i-o,this.downInit=i+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new V}return r.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,n=this.upInit,i=this.downInit,o=!1,a=!0,s=!1,l=!1,u=!1,c=!1,d=!1,p=this.width,h=this.height;a;){a=!1;for(var v=!0;(v||!l)&&t<p;)v=this.containsBlackPoint(n,i,t,!1),v?(t++,a=!0,l=!0):l||t++;if(t>=p){o=!0;break}for(var x=!0;(x||!u)&&i<h;)x=this.containsBlackPoint(e,t,i,!0),x?(i++,a=!0,u=!0):u||i++;if(i>=h){o=!0;break}for(var w=!0;(w||!c)&&e>=0;)w=this.containsBlackPoint(n,i,e,!1),w?(e--,a=!0,c=!0):c||e--;if(e<0){o=!0;break}for(var g=!0;(g||!d)&&n>=0;)g=this.containsBlackPoint(e,t,n,!0),g?(n--,a=!0,d=!0):d||n--;if(n<0){o=!0;break}a&&(s=!0)}if(!o&&s){for(var y=t-e,m=null,_=1;m===null&&_<y;_++)m=this.getBlackPointOnSegment(e,i-_,e+_,i);if(m==null)throw new V;for(var E=null,_=1;E===null&&_<y;_++)E=this.getBlackPointOnSegment(e,n+_,e+_,n);if(E==null)throw new V;for(var b=null,_=1;b===null&&_<y;_++)b=this.getBlackPointOnSegment(t,n+_,t-_,n);if(b==null)throw new V;for(var S=null,_=1;S===null&&_<y;_++)S=this.getBlackPointOnSegment(t,i-_,t-_,i);if(S==null)throw new V;return this.centerEdges(S,m,b,E)}else throw new V},r.prototype.getBlackPointOnSegment=function(e,t,n,i){for(var o=Pe.round(Pe.distance(e,t,n,i)),a=(n-e)/o,s=(i-t)/o,l=this.image,u=0;u<o;u++){var c=Pe.round(e+u*a),d=Pe.round(t+u*s);if(l.get(c,d))return new le(c,d)}return null},r.prototype.centerEdges=function(e,t,n,i){var o=e.getX(),a=e.getY(),s=t.getX(),l=t.getY(),u=n.getX(),c=n.getY(),d=i.getX(),p=i.getY(),h=r.CORR;return o<this.width/2?[new le(d-h,p+h),new le(s+h,l+h),new le(u-h,c-h),new le(o+h,a-h)]:[new le(d+h,p+h),new le(s+h,l-h),new le(u-h,c+h),new le(o-h,a-h)]},r.prototype.containsBlackPoint=function(e,t,n,i){var o=this.image;if(i){for(var a=e;a<=t;a++)if(o.get(a,n))return!0}else for(var s=e;s<=t;s++)if(o.get(n,s))return!0;return!1},r.INIT_SIZE=10,r.CORR=1,r})(),cd=(function(){function r(){}return r.checkAndNudgePoints=function(e,t){for(var n=e.getWidth(),i=e.getHeight(),o=!0,a=0;a<t.length&&o;a+=2){var s=Math.floor(t[a]),l=Math.floor(t[a+1]);if(s<-1||s>n||l<-1||l>i)throw new V;o=!1,s===-1?(t[a]=0,o=!0):s===n&&(t[a]=n-1,o=!0),l===-1?(t[a+1]=0,o=!0):l===i&&(t[a+1]=i-1,o=!0)}o=!0;for(var a=t.length-2;a>=0&&o;a-=2){var s=Math.floor(t[a]),l=Math.floor(t[a+1]);if(s<-1||s>n||l<-1||l>i)throw new V;o=!1,s===-1?(t[a]=0,o=!0):s===n&&(t[a]=n-1,o=!0),l===-1?(t[a+1]=0,o=!0):l===i&&(t[a+1]=i-1,o=!0)}},r})(),vh=(function(){function r(e,t,n,i,o,a,s,l,u){this.a11=e,this.a21=t,this.a31=n,this.a12=i,this.a22=o,this.a32=a,this.a13=s,this.a23=l,this.a33=u}return r.quadrilateralToQuadrilateral=function(e,t,n,i,o,a,s,l,u,c,d,p,h,v,x,w){var g=r.quadrilateralToSquare(e,t,n,i,o,a,s,l),y=r.squareToQuadrilateral(u,c,d,p,h,v,x,w);return y.times(g)},r.prototype.transformPoints=function(e){for(var t=e.length,n=this.a11,i=this.a12,o=this.a13,a=this.a21,s=this.a22,l=this.a23,u=this.a31,c=this.a32,d=this.a33,p=0;p<t;p+=2){var h=e[p],v=e[p+1],x=o*h+l*v+d;e[p]=(n*h+a*v+u)/x,e[p+1]=(i*h+s*v+c)/x}},r.prototype.transformPointsWithValues=function(e,t){for(var n=this.a11,i=this.a12,o=this.a13,a=this.a21,s=this.a22,l=this.a23,u=this.a31,c=this.a32,d=this.a33,p=e.length,h=0;h<p;h++){var v=e[h],x=t[h],w=o*v+l*x+d;e[h]=(n*v+a*x+u)/w,t[h]=(i*v+s*x+c)/w}},r.squareToQuadrilateral=function(e,t,n,i,o,a,s,l){var u=e-n+o-s,c=t-i+a-l;if(u===0&&c===0)return new r(n-e,o-n,e,i-t,a-i,t,0,0,1);var d=n-o,p=s-o,h=i-a,v=l-a,x=d*v-p*h,w=(u*v-p*c)/x,g=(d*c-u*h)/x;return new r(n-e+w*n,s-e+g*s,e,i-t+w*i,l-t+g*l,t,w,g,1)},r.quadrilateralToSquare=function(e,t,n,i,o,a,s,l){return r.squareToQuadrilateral(e,t,n,i,o,a,s,l).buildAdjoint()},r.prototype.buildAdjoint=function(){return new r(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},r.prototype.times=function(e){return new r(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},r})(),eE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),tE=(function(r){eE(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,n,i,o,a,s,l,u,c,d,p,h,v,x,w,g,y,m,_){var E=vh.quadrilateralToQuadrilateral(o,a,s,l,u,c,d,p,h,v,x,w,g,y,m,_);return this.sampleGridWithTransform(t,n,i,E)},e.prototype.sampleGridWithTransform=function(t,n,i,o){if(n<=0||i<=0)throw new V;for(var a=new Lr(n,i),s=new Float32Array(2*n),l=0;l<i;l++){for(var u=s.length,c=l+.5,d=0;d<u;d+=2)s[d]=d/2+.5,s[d+1]=c;o.transformPoints(s),cd.checkAndNudgePoints(t,s);try{for(var d=0;d<u;d+=2)t.get(Math.floor(s[d]),Math.floor(s[d+1]))&&a.set(d/2,l)}catch{throw new V}}return a},e})(cd),Kl=(function(){function r(){}return r.setGridSampler=function(e){r.gridSampler=e},r.getInstance=function(){return r.gridSampler},r.gridSampler=new tE,r})(),Xt=(function(){function r(e,t){this.x=e,this.y=t}return r.prototype.toResultPoint=function(){return new le(this.getX(),this.getY())},r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r})(),rE=(function(){function r(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return r.prototype.detect=function(){return this.detectMirror(!1)},r.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){var i=n[0];n[0]=n[2],n[2]=i}this.extractParameters(n);var o=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),a=this.getMatrixCornerPoints(n);return new Q8(o,a,this.compact,this.nbDataBlocks,this.nbLayers)},r.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new V;var t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);for(var i=0,o=0;o<4;o++){var a=n[(this.shift+o)%4];this.compact?(i<<=7,i+=a>>1&127):(i<<=10,i+=(a>>2&992)+(a>>1&31))}var s=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(s>>6)+1,this.nbDataBlocks=(s&63)+1):(this.nbLayers=(s>>11)+1,this.nbDataBlocks=(s&2047)+1)},r.prototype.getRotation=function(e,t){var n=0;e.forEach(function(o,a,s){var l=(o>>t-2<<1)+(o&1);n=(n<<3)+l}),n=((n&1)<<11)+(n>>1);for(var i=0;i<4;i++)if(Se.bitCount(n^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new V},r.prototype.getCorrectedParameterData=function(e,t){var n,i;t?(n=7,i=2):(n=10,i=4);for(var o=n-i,a=new Int32Array(n),s=n-1;s>=0;--s)a[s]=e&15,e>>=4;try{var l=new Sa(Zt.AZTEC_PARAM);l.decode(a,o)}catch{throw new V}for(var u=0,s=0;s<i;s++)u=(u<<4)+a[s];return u},r.prototype.getBullsEyeCorners=function(e){var t=e,n=e,i=e,o=e,a=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var s=this.getFirstDifferent(t,a,1,-1),l=this.getFirstDifferent(n,a,1,1),u=this.getFirstDifferent(i,a,-1,1),c=this.getFirstDifferent(o,a,-1,-1);if(this.nbCenterLayers>2){var d=this.distancePoint(c,s)*this.nbCenterLayers/(this.distancePoint(o,t)*(this.nbCenterLayers+2));if(d<.75||d>1.25||!this.isWhiteOrBlackRectangle(s,l,u,c))break}t=s,n=l,i=u,o=c,a=!a}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new V;this.compact=this.nbCenterLayers===5;var p=new le(t.getX()+.5,t.getY()-.5),h=new le(n.getX()+.5,n.getY()+.5),v=new le(i.getX()-.5,i.getY()+.5),x=new le(o.getX()-.5,o.getY()-.5);return this.expandSquare([p,h,v,x],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},r.prototype.getMatrixCenter=function(){var e,t,n,i;try{var o=new ul(this.image).detect();e=o[0],t=o[1],n=o[2],i=o[3]}catch{var a=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new Xt(a+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Xt(a+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Xt(a-7,s+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Xt(a-7,s-7),!1,-1,-1).toResultPoint()}var l=Pe.round((e.getX()+i.getX()+t.getX()+n.getX())/4),u=Pe.round((e.getY()+i.getY()+t.getY()+n.getY())/4);try{var o=new ul(this.image,15,l,u).detect();e=o[0],t=o[1],n=o[2],i=o[3]}catch{e=this.getFirstDifferent(new Xt(l+7,u-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Xt(l+7,u+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Xt(l-7,u+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Xt(l-7,u-7),!1,-1,-1).toResultPoint()}return l=Pe.round((e.getX()+i.getX()+t.getX()+n.getX())/4),u=Pe.round((e.getY()+i.getY()+t.getY()+n.getY())/4),new Xt(l,u)},r.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},r.prototype.sampleGrid=function(e,t,n,i,o){var a=Kl.getInstance(),s=this.getDimension(),l=s/2-this.nbCenterLayers,u=s/2+this.nbCenterLayers;return a.sampleGrid(e,s,s,l,l,u,l,u,u,l,u,t.getX(),t.getY(),n.getX(),n.getY(),i.getX(),i.getY(),o.getX(),o.getY())},r.prototype.sampleLine=function(e,t,n){for(var i=0,o=this.distanceResultPoint(e,t),a=o/n,s=e.getX(),l=e.getY(),u=a*(t.getX()-e.getX())/o,c=a*(t.getY()-e.getY())/o,d=0;d<n;d++)this.image.get(Pe.round(s+d*u),Pe.round(l+d*c))&&(i|=1<<n-d-1);return i},r.prototype.isWhiteOrBlackRectangle=function(e,t,n,i){var o=3;e=new Xt(e.getX()-o,e.getY()+o),t=new Xt(t.getX()-o,t.getY()-o),n=new Xt(n.getX()+o,n.getY()-o),i=new Xt(i.getX()+o,i.getY()+o);var a=this.getColor(i,e);if(a===0)return!1;var s=this.getColor(e,t);return s!==a||(s=this.getColor(t,n),s!==a)?!1:(s=this.getColor(n,i),s===a)},r.prototype.getColor=function(e,t){for(var n=this.distancePoint(e,t),i=(t.getX()-e.getX())/n,o=(t.getY()-e.getY())/n,a=0,s=e.getX(),l=e.getY(),u=this.image.get(e.getX(),e.getY()),c=Math.ceil(n),d=0;d<c;d++)s+=i,l+=o,this.image.get(Pe.round(s),Pe.round(l))!==u&&a++;var p=a/n;return p>.1&&p<.9?0:p<=.1===u?1:-1},r.prototype.getFirstDifferent=function(e,t,n,i){for(var o=e.getX()+n,a=e.getY()+i;this.isValid(o,a)&&this.image.get(o,a)===t;)o+=n,a+=i;for(o-=n,a-=i;this.isValid(o,a)&&this.image.get(o,a)===t;)o+=n;for(o-=n;this.isValid(o,a)&&this.image.get(o,a)===t;)a+=i;return a-=i,new Xt(o,a)},r.prototype.expandSquare=function(e,t,n){var i=n/(2*t),o=e[0].getX()-e[2].getX(),a=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,l=(e[0].getY()+e[2].getY())/2,u=new le(s+i*o,l+i*a),c=new le(s-i*o,l-i*a);o=e[1].getX()-e[3].getX(),a=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,l=(e[1].getY()+e[3].getY())/2;var d=new le(s+i*o,l+i*a),p=new le(s-i*o,l-i*a),h=[u,d,c,p];return h},r.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},r.prototype.isValidPoint=function(e){var t=Pe.round(e.getX()),n=Pe.round(e.getY());return this.isValid(t,n)},r.prototype.distancePoint=function(e,t){return Pe.distance(e.getX(),e.getY(),t.getX(),t.getY())},r.prototype.distanceResultPoint=function(e,t){return Pe.distance(e.getX(),e.getY(),t.getX(),t.getY())},r.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Se.truncDivision(this.nbLayers-4,8)+1)+15},r})(),ea=(function(){function r(){}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n=null,i=new rE(e.getBlackMatrix()),o=null,a=null;try{var s=i.detectMirror(!1);o=s.getPoints(),this.reportFoundResultPoints(t,o),a=new ud().decode(s)}catch(d){n=d}if(a==null)try{var s=i.detectMirror(!0);o=s.getPoints(),this.reportFoundResultPoints(t,o),a=new ud().decode(s)}catch(d){throw n??d}var l=new Ft(a.getText(),a.getRawBytes(),a.getNumBits(),o,pe.AZTEC,Ye.currentTimeMillis()),u=a.getByteSegments();u!=null&&l.putMetadata(Tt.BYTE_SEGMENTS,u);var c=a.getECLevel();return c!=null&&l.putMetadata(Tt.ERROR_CORRECTION_LEVEL,c),l},r.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var n=e.get(Ze.NEED_RESULT_POINT_CALLBACK);n!=null&&t.forEach(function(i,o,a){n.foundPossibleResultPoint(i)})}},r.prototype.reset=function(){},r})(),nE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){nE(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new ea,t)||this}return e})(wi);var xt=(function(){function r(){}return r.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var n=t&&t.get(Ze.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),o=this.doDecode(i,t),a=o.getResultMetadata(),s=270;a!==null&&a.get(Tt.ORIENTATION)===!0&&(s=s+a.get(Tt.ORIENTATION)%360),o.putMetadata(Tt.ORIENTATION,s);var l=o.getResultPoints();if(l!==null)for(var u=i.getHeight(),c=0;c<l.length;c++)l[c]=new le(u-l[c].getY()-1,l[c].getX());return o}else throw new V}},r.prototype.reset=function(){},r.prototype.doDecode=function(e,t){var n=e.getWidth(),i=e.getHeight(),o=new Et(n),a=t&&t.get(Ze.TRY_HARDER)===!0,s=Math.max(1,i>>(a?8:5)),l;a?l=i:l=15;for(var u=Math.trunc(i/2),c=0;c<l;c++){var d=Math.trunc((c+1)/2),p=(c&1)===0,h=u+s*(p?d:-d);if(h<0||h>=i)break;try{o=e.getBlackRow(h,o)}catch{continue}for(var v=function(y){if(y===1&&(o.reverse(),t&&t.get(Ze.NEED_RESULT_POINT_CALLBACK)===!0)){var m=new Map;t.forEach(function(b,S){return m.set(S,b)}),m.delete(Ze.NEED_RESULT_POINT_CALLBACK),t=m}try{var _=x.decodeRow(h,o,t);if(y===1){_.putMetadata(Tt.ORIENTATION,180);var E=_.getResultPoints();E!==null&&(E[0]=new le(n-E[0].getX()-1,E[0].getY()),E[1]=new le(n-E[1].getX()-1,E[1].getY()))}return{value:_}}catch{}},x=this,w=0;w<2;w++){var g=v(w);if(typeof g=="object")return g.value}}throw new V},r.recordPattern=function(e,t,n){for(var i=n.length,o=0;o<i;o++)n[o]=0;var a=e.getSize();if(t>=a)throw new V;for(var s=!e.get(t),l=0,u=t;u<a;){if(e.get(u)!==s)n[l]++;else{if(++l===i)break;n[l]=1,s=!s}u++}if(!(l===i||l===i-1&&u===a))throw new V},r.recordPatternInReverse=function(e,t,n){for(var i=n.length,o=e.get(t);t>0&&i>=0;)e.get(--t)!==o&&(i--,o=!o);if(i>=0)throw new V;r.recordPattern(e,t+1,n)},r.patternMatchVariance=function(e,t,n){for(var i=e.length,o=0,a=0,s=0;s<i;s++)o+=e[s],a+=t[s];if(o<a)return Number.POSITIVE_INFINITY;var l=o/a;n*=l;for(var u=0,c=0;c<i;c++){var d=e[c],p=t[c]*l,h=d>p?d-p:p-d;if(h>n)return Number.POSITIVE_INFINITY;u+=h}return u/o},r})(),iE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),dd=(function(r){iE(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var n=t.getSize(),i=t.getNextSet(0),o=0,a=Int32Array.from([0,0,0,0,0,0]),s=i,l=!1,u=6,c=i;c<n;c++)if(t.get(c)!==l)a[o]++;else{if(o===u-1){for(var d=e.MAX_AVG_VARIANCE,p=-1,h=e.CODE_START_A;h<=e.CODE_START_C;h++){var v=xt.patternMatchVariance(a,e.CODE_PATTERNS[h],e.MAX_INDIVIDUAL_VARIANCE);v<d&&(d=v,p=h)}if(p>=0&&t.isRange(Math.max(0,s-(c-s)/2),s,!1))return Int32Array.from([s,c,p]);s+=a[0]+a[1],a=a.slice(2,a.length),a[o-1]=0,a[o]=0,o--}else o++;a[o]=1,l=!l}throw new V},e.decodeCode=function(t,n,i){xt.recordPattern(t,i,n);for(var o=e.MAX_AVG_VARIANCE,a=-1,s=0;s<e.CODE_PATTERNS.length;s++){var l=e.CODE_PATTERNS[s],u=this.patternMatchVariance(n,l,e.MAX_INDIVIDUAL_VARIANCE);u<o&&(o=u,a=s)}if(a>=0)return a;throw new V},e.prototype.decodeRow=function(t,n,i){var o=i&&i.get(Ze.ASSUME_GS1)===!0,a=e.findStartPattern(n),s=a[2],l=0,u=new Uint8Array(20);u[l++]=s;var c;switch(s){case e.CODE_START_A:c=e.CODE_CODE_A;break;case e.CODE_START_B:c=e.CODE_CODE_B;break;case e.CODE_START_C:c=e.CODE_CODE_C;break;default:throw new te}for(var d=!1,p=!1,h="",v=a[0],x=a[1],w=Int32Array.from([0,0,0,0,0,0]),g=0,y=0,m=s,_=0,E=!0,b=!1,S=!1;!d;){var B=p;switch(p=!1,g=y,y=e.decodeCode(n,w,x),u[l++]=y,y!==e.CODE_STOP&&(E=!0),y!==e.CODE_STOP&&(_++,m+=_*y),v=x,x+=w.reduce(function(N,G){return N+G},0),y){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new te}switch(c){case e.CODE_CODE_A:if(y<64)S===b?h+=String.fromCharCode(32+y):h+=String.fromCharCode(32+y+128),S=!1;else if(y<96)S===b?h+=String.fromCharCode(y-64):h+=String.fromCharCode(y+64),S=!1;else switch(y!==e.CODE_STOP&&(E=!1),y){case e.CODE_FNC_1:o&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!b&&S?(b=!0,S=!1):b&&S?(b=!1,S=!1):S=!0;break;case e.CODE_SHIFT:p=!0,c=e.CODE_CODE_B;break;case e.CODE_CODE_B:c=e.CODE_CODE_B;break;case e.CODE_CODE_C:c=e.CODE_CODE_C;break;case e.CODE_STOP:d=!0;break}break;case e.CODE_CODE_B:if(y<96)S===b?h+=String.fromCharCode(32+y):h+=String.fromCharCode(32+y+128),S=!1;else switch(y!==e.CODE_STOP&&(E=!1),y){case e.CODE_FNC_1:o&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!b&&S?(b=!0,S=!1):b&&S?(b=!1,S=!1):S=!0;break;case e.CODE_SHIFT:p=!0,c=e.CODE_CODE_A;break;case e.CODE_CODE_A:c=e.CODE_CODE_A;break;case e.CODE_CODE_C:c=e.CODE_CODE_C;break;case e.CODE_STOP:d=!0;break}break;case e.CODE_CODE_C:if(y<100)y<10&&(h+="0"),h+=y;else switch(y!==e.CODE_STOP&&(E=!1),y){case e.CODE_FNC_1:o&&(h.length===0?h+="]C1":h+="");break;case e.CODE_CODE_A:c=e.CODE_CODE_A;break;case e.CODE_CODE_B:c=e.CODE_CODE_B;break;case e.CODE_STOP:d=!0;break}break}B&&(c=c===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var L=x-v;if(x=n.getNextUnset(x),!n.isRange(x,Math.min(n.getSize(),x+(x-v)/2),!1))throw new V;if(m-=_*g,m%103!==g)throw new dt;var j=h.length;if(j===0)throw new V;j>0&&E&&(c===e.CODE_CODE_C?h=h.substring(0,j-2):h=h.substring(0,j-1));for(var Y=(a[1]+a[0])/2,M=v+L/2,k=u.length,K=new Uint8Array(k),ee=0;ee<k;ee++)K[ee]=u[ee];var J=[new le(Y,t),new le(M,t)];return new Ft(h,K,0,J,pe.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e})(xt),oE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),ws=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fd=(function(r){oE(e,r);function e(t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var i=r.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=n,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,n,i){var o,a,s,l,u=this.counters;u.fill(0),this.decodeRowResult="";var c=e.findAsteriskPattern(n,u),d=n.getNextSet(c[1]),p=n.getSize(),h,v;do{e.recordPattern(n,d,u);var x=e.toNarrowWidePattern(u);if(x<0)throw new V;h=e.patternToChar(x),this.decodeRowResult+=h,v=d;try{for(var w=(o=void 0,ws(u)),g=w.next();!g.done;g=w.next()){var y=g.value;d+=y}}catch(k){o={error:k}}finally{try{g&&!g.done&&(a=w.return)&&a.call(w)}finally{if(o)throw o.error}}d=n.getNextSet(d)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var m=0;try{for(var _=ws(u),E=_.next();!E.done;E=_.next()){var y=E.value;m+=y}}catch(k){s={error:k}}finally{try{E&&!E.done&&(l=_.return)&&l.call(_)}finally{if(s)throw s.error}}var b=d-v-m;if(d!==p&&b*2<m)throw new V;if(this.usingCheckDigit){for(var S=this.decodeRowResult.length-1,B=0,L=0;L<S;L++)B+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(L));if(this.decodeRowResult.charAt(S)!==e.ALPHABET_STRING.charAt(B%43))throw new dt;this.decodeRowResult=this.decodeRowResult.substring(0,S)}if(this.decodeRowResult.length===0)throw new V;var j;this.extendedMode?j=e.decodeExtended(this.decodeRowResult):j=this.decodeRowResult;var Y=(c[1]+c[0])/2,M=v+m/2;return new Ft(j,null,0,[new le(Y,t),new le(M,t)],pe.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,n){for(var i=t.getSize(),o=t.getNextSet(0),a=0,s=o,l=!1,u=n.length,c=o;c<i;c++)if(t.get(c)!==l)n[a]++;else{if(a===u-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,s-Math.floor((c-s)/2)),s,!1))return[s,c];s+=n[0]+n[1],n.copyWithin(0,2,2+a-1),n[a-1]=0,n[a]=0,a--}else a++;n[a]=1,l=!l}throw new V},e.toNarrowWidePattern=function(t){var n,i,o=t.length,a=0,s;do{var l=2147483647;try{for(var u=(n=void 0,ws(t)),c=u.next();!c.done;c=u.next()){var d=c.value;d<l&&d>a&&(l=d)}}catch(x){n={error:x}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}a=l,s=0;for(var p=0,h=0,v=0;v<o;v++){var d=t[v];d>a&&(h|=1<<o-1-v,s++,p+=d)}if(s===3){for(var v=0;v<o&&s>0;v++){var d=t[v];if(d>a&&(s--,d*2>=p))return-1}return h}}while(s>3);return-1},e.patternToChar=function(t){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===t)return e.ALPHABET_STRING.charAt(n);if(t===e.ASTERISK_ENCODING)return"*";throw new V},e.decodeExtended=function(t){for(var n=t.length,i="",o=0;o<n;o++){var a=t.charAt(o);if(a==="+"||a==="$"||a==="%"||a==="/"){var s=t.charAt(o+1),l="\0";switch(a){case"+":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new te;break;case"$":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new te;break;case"%":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s==="X"||s==="Y"||s==="Z")l="";else throw new te;break;case"/":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new te;break}i+=l,o++}else i+=a}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e})(xt),aE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),_s=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hd=(function(r){aE(e,r);function e(){var t=r.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,n,i){var o,a,s,l,u=this.findAsteriskPattern(n),c=n.getNextSet(u[1]),d=n.getSize(),p=this.counters;p.fill(0),this.decodeRowResult="";var h,v;do{e.recordPattern(n,c,p);var x=this.toPattern(p);if(x<0)throw new V;h=this.patternToChar(x),this.decodeRowResult+=h,v=c;try{for(var w=(o=void 0,_s(p)),g=w.next();!g.done;g=w.next()){var y=g.value;c+=y}}catch(L){o={error:L}}finally{try{g&&!g.done&&(a=w.return)&&a.call(w)}finally{if(o)throw o.error}}c=n.getNextSet(c)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var m=0;try{for(var _=_s(p),E=_.next();!E.done;E=_.next()){var y=E.value;m+=y}}catch(L){s={error:L}}finally{try{E&&!E.done&&(l=_.return)&&l.call(_)}finally{if(s)throw s.error}}if(c===d||!n.get(c))throw new V;if(this.decodeRowResult.length<2)throw new V;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var b=this.decodeExtended(this.decodeRowResult),S=(u[1]+u[0])/2,B=v+m/2;return new Ft(b,null,0,[new le(S,t),new le(B,t)],pe.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var n=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var o=this.counters,a=i,s=!1,l=o.length,u=0,c=i;c<n;c++)if(t.get(c)!==s)o[u]++;else{if(u===l-1){if(this.toPattern(o)===e.ASTERISK_ENCODING)return new Int32Array([a,c]);a+=o[0]+o[1],o.copyWithin(0,2,2+u-1),o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,s=!s}throw new V},e.prototype.toPattern=function(t){var n,i,o=0;try{for(var a=_s(t),s=a.next();!s.done;s=a.next()){var l=s.value;o+=l}}catch(v){n={error:v}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}for(var u=0,c=t.length,d=0;d<c;d++){var p=Math.round(t[d]*9/o);if(p<1||p>4)return-1;if((d&1)===0)for(var h=0;h<p;h++)u=u<<1|1;else u<<=p}return u},e.prototype.patternToChar=function(t){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===t)return e.ALPHABET_STRING.charAt(n);throw new V},e.prototype.decodeExtended=function(t){for(var n=t.length,i="",o=0;o<n;o++){var a=t.charAt(o);if(a>="a"&&a<="d"){if(o>=n-1)throw new te;var s=t.charAt(o+1),l="\0";switch(a){case"d":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new te;break;case"a":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new te;break;case"b":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s>="X"&&s<="Z")l="";else throw new te;break;case"c":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new te;break}i+=l,o++}else i+=a}return i},e.prototype.checkChecksums=function(t){var n=t.length;this.checkOneChecksum(t,n-2,20),this.checkOneChecksum(t,n-1,15)},e.prototype.checkOneChecksum=function(t,n,i){for(var o=1,a=0,s=n-1;s>=0;s--)a+=o*e.ALPHABET_STRING.indexOf(t.charAt(s)),++o>i&&(o=1);if(t.charAt(n)!==e.ALPHABET_STRING[a%47])throw new dt},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e})(xt),sE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),lE=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pd=(function(r){sE(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,n,i){var o,a,s=this.decodeStart(n),l=this.decodeEnd(n),u=new Ce;e.decodeMiddle(n,s[1],l[0],u);var c=u.toString(),d=null;i!=null&&(d=i.get(Ze.ALLOWED_LENGTHS)),d==null&&(d=e.DEFAULT_ALLOWED_LENGTHS);var p=c.length,h=!1,v=0;try{for(var x=lE(d),w=x.next();!w.done;w=x.next()){var g=w.value;if(p===g){h=!0;break}g>v&&(v=g)}}catch(_){o={error:_}}finally{try{w&&!w.done&&(a=x.return)&&a.call(x)}finally{if(o)throw o.error}}if(!h&&p>v&&(h=!0),!h)throw new te;var y=[new le(s[1],t),new le(l[0],t)],m=new Ft(c,null,0,y,pe.ITF,new Date().getTime());return m},e.decodeMiddle=function(t,n,i,o){var a=new Int32Array(10),s=new Int32Array(5),l=new Int32Array(5);for(a.fill(0),s.fill(0),l.fill(0);n<i;){xt.recordPattern(t,n,a);for(var u=0;u<5;u++){var c=2*u;s[u]=a[c],l[u]=a[c+1]}var d=e.decodeDigit(s);o.append(d.toString()),d=this.decodeDigit(l),o.append(d.toString()),a.forEach(function(p){n+=p})}},e.prototype.decodeStart=function(t){var n=e.skipWhiteSpace(t),i=e.findGuardPattern(t,n,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,n){var i=this.narrowLineWidth*10;i=i<n?i:n;for(var o=n-1;i>0&&o>=0&&!t.get(o);o--)i--;if(i!==0)throw new V},e.skipWhiteSpace=function(t){var n=t.getSize(),i=t.getNextSet(0);if(i===n)throw new V;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var n=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,n,e.END_PATTERN_REVERSED[0])}catch(a){a instanceof V&&(i=e.findGuardPattern(t,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var o=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-o,i}finally{t.reverse()}},e.findGuardPattern=function(t,n,i){var o=i.length,a=new Int32Array(o),s=t.getSize(),l=!1,u=0,c=n;a.fill(0);for(var d=n;d<s;d++)if(t.get(d)!==l)a[u]++;else{if(u===o-1){if(xt.patternMatchVariance(a,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[c,d];c+=a[0]+a[1],Ye.arraycopy(a,2,a,0,u-1),a[u-1]=0,a[u]=0,u--}else u++;a[u]=1,l=!l}throw new V},e.decodeDigit=function(t){for(var n=e.MAX_AVG_VARIANCE,i=-1,o=e.PATTERNS.length,a=0;a<o;a++){var s=e.PATTERNS[a],l=xt.patternMatchVariance(t,s,e.MAX_INDIVIDUAL_VARIANCE);l<n?(n=l,i=a):l===n&&(i=-1)}if(i>=0)return i%10;throw new V},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e})(xt),uE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),vi=(function(r){uE(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var n=!1,i,o=0,a=Int32Array.from([0,0,0]);!n;){a=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,o,!1,this.START_END_PATTERN,a);var s=i[0];o=i[1];var l=s-(o-s);l>=0&&(n=t.isRange(l,s,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var n=t.length;if(n===0)return!1;var i=parseInt(t.charAt(n-1),10);return e.getStandardUPCEANChecksum(t.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(t){for(var n=t.length,i=0,o=n-1;o>=0;o-=2){var a=t.charAt(o).charCodeAt(0)-48;if(a<0||a>9)throw new te;i+=a}i*=3;for(var o=n-2;o>=0;o-=2){var a=t.charAt(o).charCodeAt(0)-48;if(a<0||a>9)throw new te;i+=a}return(1e3-i)%10},e.decodeEnd=function(t,n){return e.findGuardPattern(t,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,n,i,o){return this.findGuardPattern(t,n,i,o,new Int32Array(o.length))},e.findGuardPattern=function(t,n,i,o,a){var s=t.getSize();n=i?t.getNextUnset(n):t.getNextSet(n);for(var l=0,u=n,c=o.length,d=i,p=n;p<s;p++)if(t.get(p)!==d)a[l]++;else{if(l===c-1){if(xt.patternMatchVariance(a,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([u,p]);u+=a[0]+a[1];for(var h=a.slice(2,a.length),v=0;v<l-1;v++)a[v]=h[v];a[l-1]=0,a[l]=0,l--}else l++;a[l]=1,d=!d}throw new V},e.decodeDigit=function(t,n,i,o){this.recordPattern(t,i,n);for(var a=this.MAX_AVG_VARIANCE,s=-1,l=o.length,u=0;u<l;u++){var c=o[u],d=xt.patternMatchVariance(n,c,e.MAX_INDIVIDUAL_VARIANCE);d<a&&(a=d,s=u)}if(s>=0)return s;throw new V},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e})(xt),cE=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dE=(function(){function r(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return r.prototype.decodeRow=function(e,t,n){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,n,i),a=i.toString(),s=r.parseExtensionString(a),l=[new le((n[0]+n[1])/2,e),new le(o,e)],u=new Ft(a,null,0,l,pe.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&u.putAllMetadata(s),u},r.prototype.decodeMiddle=function(e,t,n){var i,o,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=e.getSize(),l=t[1],u=0,c=0;c<5&&l<s;c++){var d=vi.decodeDigit(e,a,l,vi.L_AND_G_PATTERNS);n+=String.fromCharCode(48+d%10);try{for(var p=(i=void 0,cE(a)),h=p.next();!h.done;h=p.next()){var v=h.value;l+=v}}catch(w){i={error:w}}finally{try{h&&!h.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}d>=10&&(u|=1<<4-c),c!==4&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(n.length!==5)throw new V;var x=this.determineCheckDigit(u);if(r.extensionChecksum(n.toString())!==x)throw new V;return l},r.extensionChecksum=function(e){for(var t=e.length,n=0,i=t-2;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;n*=3;for(var i=t-1;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;return n*=3,n%10},r.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new V},r.parseExtensionString=function(e){if(e.length!==5)return null;var t=r.parseExtension5String(e);return t==null?null:new Map([[Tt.SUGGESTED_PRICE,t]])},r.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var n=parseInt(e.substring(1)),i=(n/100).toString(),o=n%100,a=o<10?"0"+o:o.toString();return t+i+"."+a},r})(),fE=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hE=(function(){function r(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return r.prototype.decodeRow=function(e,t,n){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,n,i),a=i.toString(),s=r.parseExtensionString(a),l=[new le((n[0]+n[1])/2,e),new le(o,e)],u=new Ft(a,null,0,l,pe.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&u.putAllMetadata(s),u},r.prototype.decodeMiddle=function(e,t,n){var i,o,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=e.getSize(),l=t[1],u=0,c=0;c<2&&l<s;c++){var d=vi.decodeDigit(e,a,l,vi.L_AND_G_PATTERNS);n+=String.fromCharCode(48+d%10);try{for(var p=(i=void 0,fE(a)),h=p.next();!h.done;h=p.next()){var v=h.value;l+=v}}catch(x){i={error:x}}finally{try{h&&!h.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}d>=10&&(u|=1<<1-c),c!==1&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(n.length!==2)throw new V;if(parseInt(n.toString())%4!==u)throw new V;return l},r.parseExtensionString=function(e){return e.length!==2?null:new Map([[Tt.ISSUE_NUMBER,parseInt(e)]])},r})(),pE=(function(){function r(){}return r.decodeRow=function(e,t,n){var i=vi.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var o=new dE;return o.decodeRow(e,t,i)}catch{var a=new hE;return a.decodeRow(e,t,i)}},r.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),r})(),vE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),gt=(function(r){vE(e,r);function e(){var t=r.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(s){return Int32Array.from(s)});for(var n=10;n<20;n++){for(var i=e.L_PATTERNS[n-10],o=new Int32Array(i.length),a=0;a<i.length;a++)o[a]=i[i.length-a-1];e.L_AND_G_PATTERNS[n]=o}return t}return e.prototype.decodeRow=function(t,n,i){var o=e.findStartGuardPattern(n),a=i==null?null:i.get(Ze.NEED_RESULT_POINT_CALLBACK);if(a!=null){var s=new le((o[0]+o[1])/2,t);a.foundPossibleResultPoint(s)}var l=this.decodeMiddle(n,o,this.decodeRowStringBuffer),u=l.rowOffset,c=l.resultString;if(a!=null){var d=new le(u,t);a.foundPossibleResultPoint(d)}var p=e.decodeEnd(n,u);if(a!=null){var h=new le((p[0]+p[1])/2,t);a.foundPossibleResultPoint(h)}var v=p[1],x=v+(v-p[0]);if(x>=n.getSize()||!n.isRange(v,x,!1))throw new V;var w=c.toString();if(w.length<8)throw new te;if(!e.checkChecksum(w))throw new dt;var g=(o[1]+o[0])/2,y=(p[1]+p[0])/2,m=this.getBarcodeFormat(),_=[new le(g,t),new le(y,t)],E=new Ft(w,null,0,_,m,new Date().getTime()),b=0;try{var S=pE.decodeRow(t,n,p[1]);E.putMetadata(Tt.UPC_EAN_EXTENSION,S.getText()),E.putAllMetadata(S.getResultMetadata()),E.addResultPoints(S.getResultPoints()),b=S.getText().length}catch{}var B=i==null?null:i.get(Ze.ALLOWED_EAN_EXTENSIONS);if(B!=null){var L=!1;for(var j in B)if(b.toString()===j){L=!0;break}if(!L)throw new V}return m===pe.EAN_13||pe.UPC_A,E},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var n=t.length;if(n===0)return!1;var i=parseInt(t.charAt(n-1),10);return e.getStandardUPCEANChecksum(t.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(t){for(var n=t.length,i=0,o=n-1;o>=0;o-=2){var a=t.charAt(o).charCodeAt(0)-48;if(a<0||a>9)throw new te;i+=a}i*=3;for(var o=n-2;o>=0;o-=2){var a=t.charAt(o).charCodeAt(0)-48;if(a<0||a>9)throw new te;i+=a}return(1e3-i)%10},e.decodeEnd=function(t,n){return e.findGuardPattern(t,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e})(vi),gE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),vd=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cl=(function(r){gE(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,n,i){var o,a,s,l,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var c=t.getSize(),d=n[1],p=0,h=0;h<6&&d<c;h++){var v=gt.decodeDigit(t,u,d,gt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+v%10);try{for(var x=(o=void 0,vd(u)),w=x.next();!w.done;w=x.next()){var g=w.value;d+=g}}catch(E){o={error:E}}finally{try{w&&!w.done&&(a=x.return)&&a.call(x)}finally{if(o)throw o.error}}v>=10&&(p|=1<<5-h)}i=e.determineFirstDigit(i,p);var y=gt.findGuardPattern(t,d,!0,gt.MIDDLE_PATTERN,new Int32Array(gt.MIDDLE_PATTERN.length).fill(0));d=y[1];for(var h=0;h<6&&d<c;h++){var v=gt.decodeDigit(t,u,d,gt.L_PATTERNS);i+=String.fromCharCode(48+v);try{for(var m=(s=void 0,vd(u)),_=m.next();!_.done;_=m.next()){var g=_.value;d+=g}}catch(S){s={error:S}}finally{try{_&&!_.done&&(l=m.return)&&l.call(m)}finally{if(s)throw s.error}}}return{rowOffset:d,resultString:i}},e.prototype.getBarcodeFormat=function(){return pe.EAN_13},e.determineFirstDigit=function(t,n){for(var i=0;i<10;i++)if(n===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new V},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e})(gt),yE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),gd=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yd=(function(r){yE(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,n,i){var o,a,s,l,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var c=t.getSize(),d=n[1],p=0;p<4&&d<c;p++){var h=gt.decodeDigit(t,u,d,gt.L_PATTERNS);i+=String.fromCharCode(48+h);try{for(var v=(o=void 0,gd(u)),x=v.next();!x.done;x=v.next()){var w=x.value;d+=w}}catch(_){o={error:_}}finally{try{x&&!x.done&&(a=v.return)&&a.call(v)}finally{if(o)throw o.error}}}var g=gt.findGuardPattern(t,d,!0,gt.MIDDLE_PATTERN,new Int32Array(gt.MIDDLE_PATTERN.length).fill(0));d=g[1];for(var p=0;p<4&&d<c;p++){var h=gt.decodeDigit(t,u,d,gt.L_PATTERNS);i+=String.fromCharCode(48+h);try{for(var y=(s=void 0,gd(u)),m=y.next();!m.done;m=y.next()){var w=m.value;d+=w}}catch(b){s={error:b}}finally{try{m&&!m.done&&(l=y.return)&&l.call(y)}finally{if(s)throw s.error}}}return{rowOffset:d,resultString:i}},e.prototype.getBarcodeFormat=function(){return pe.EAN_8},e})(gt),mE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),md=(function(r){mE(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.ean13Reader=new cl,t}return e.prototype.getBarcodeFormat=function(){return pe.UPC_A},e.prototype.decode=function(t,n){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,n,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,n,i))},e.prototype.decodeMiddle=function(t,n,i){return this.ean13Reader.decodeMiddle(t,n,i)},e.prototype.maybeReturnResult=function(t){var n=t.getText();if(n.charAt(0)==="0"){var i=new Ft(n.substring(1),null,null,t.getResultPoints(),pe.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new V},e.prototype.reset=function(){this.ean13Reader.reset()},e})(gt),xE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),wE=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xd=(function(r){xE(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,n,i){var o,a,s=this.decodeMiddleCounters.map(function(w){return w});s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var l=t.getSize(),u=n[1],c=0,d=0;d<6&&u<l;d++){var p=e.decodeDigit(t,s,u,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+p%10);try{for(var h=(o=void 0,wE(s)),v=h.next();!v.done;v=h.next()){var x=v.value;u+=x}}catch(w){o={error:w}}finally{try{v&&!v.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}p>=10&&(c|=1<<5-d)}return e.determineNumSysAndCheckDigit(new Ce(i),c),u},e.prototype.decodeEnd=function(t,n){return e.findGuardPatternWithoutCounters(t,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return gt.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,n){for(var i=0;i<=1;i++)for(var o=0;o<10;o++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][o]){t.insert(0,"0"+i),t.append("0"+o);return}throw V.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return pe.UPC_E},e.convertUPCEtoUPCA=function(t){var n=t.slice(1,7).split("").map(function(a){return a.charCodeAt(0)}),i=new Ce;i.append(t.charAt(0));var o=n[5];switch(o){case 0:case 1:case 2:i.appendChars(n,0,2),i.append(o),i.append("0000"),i.appendChars(n,2,3);break;case 3:i.appendChars(n,0,3),i.append("00000"),i.appendChars(n,3,2);break;case 4:i.appendChars(n,0,4),i.append("00000"),i.append(n[4]);break;default:i.appendChars(n,0,5),i.append("0000"),i.append(o);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e})(gt),_E=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),wd=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bs=(function(r){_E(e,r);function e(t){var n=r.call(this)||this,i=t==null?null:t.get(Ze.POSSIBLE_FORMATS),o=[];return i!=null&&(i.indexOf(pe.EAN_13)>-1&&o.push(new cl),i.indexOf(pe.UPC_A)>-1&&o.push(new md),i.indexOf(pe.EAN_8)>-1&&o.push(new yd),i.indexOf(pe.UPC_E)>-1&&o.push(new xd)),o.length===0&&(o.push(new cl),o.push(new md),o.push(new yd),o.push(new xd)),n.readers=o,n}return e.prototype.decodeRow=function(t,n,i){var o,a;try{for(var s=wd(this.readers),l=s.next();!l.done;l=s.next()){var u=l.value;try{var c=u.decodeRow(t,n,i),d=c.getBarcodeFormat()===pe.EAN_13&&c.getText().charAt(0)==="0",p=i==null?null:i.get(Ze.POSSIBLE_FORMATS),h=p==null||p.includes(pe.UPC_A);if(d&&h){var v=c.getRawBytes(),x=new Ft(c.getText().substring(1),v,v?v.length:null,c.getResultPoints(),pe.UPC_A);return x.putAllMetadata(c.getResultMetadata()),x}return c}catch{}}}catch(w){o={error:w}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}throw new V},e.prototype.reset=function(){var t,n;try{for(var i=wd(this.readers),o=i.next();!o.done;o=i.next()){var a=o.value;a.reset()}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e})(xt),bE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),EE=(function(r){bE(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,n,i){var o=this.getValidRowData(n);if(!o)throw new V;var a=this.codaBarDecodeRow(o.row);if(!a)throw new V;return new Ft(a,null,0,[new le(o.left,t),new le(o.right,t)],pe.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var n=t.toArray(),i=n.indexOf(!0);if(i===-1)return null;var o=n.lastIndexOf(!0);if(o<=i)return null;n=n.slice(i,o+1);for(var a=[],s=n[0],l=1,u=1;u<n.length;u++)n[u]===s?l++:(s=n[u],a.push(l),l=1);return a.push(l),a.length<23&&(a.length+1)%8!==0?null:{row:a,left:i,right:o}},e.prototype.codaBarDecodeRow=function(t){for(var n=[],i=Math.ceil(t.reduce(function(l,u){return(l+u)/2},0));t.length>0;){var o=t.splice(0,8).splice(0,7),a=o.map(function(l){return l<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[a]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[a])}var s=n.join("");return this.validCodaBarString(s)?s:null},e.prototype.validCodaBarString=function(t){var n=/^[A-D].{1,}[A-D]$/;return n.test(t)},e})(xt),AE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),CE=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tn=(function(r){AE(e,r);function e(){var t=r.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,n){for(var i=0;i<n.length;i++)if(xt.patternMatchVariance(t,n[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new V},e.count=function(t){return Pe.sum(new Int32Array(t))},e.increment=function(t,n){for(var i=0,o=n[0],a=1;a<t.length;a++)n[a]>o&&(o=n[a],i=a);t[i]++},e.decrement=function(t,n){for(var i=0,o=n[0],a=1;a<t.length;a++)n[a]<o&&(o=n[a],i=a);t[i]--},e.isFinderPattern=function(t){var n,i,o=t[0]+t[1],a=o+t[2]+t[3],s=o/a;if(s>=e.MIN_FINDER_PATTERN_RATIO&&s<=e.MAX_FINDER_PATTERN_RATIO){var l=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var c=CE(t),d=c.next();!d.done;d=c.next()){var p=d.value;p>u&&(u=p),p<l&&(l=p)}}catch(h){n={error:h}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return u<10*l}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e})(xt),ta=(function(){function r(e,t){this.value=e,this.checksumPortion=t}return r.prototype.getValue=function(){return this.value},r.prototype.getChecksumPortion=function(){return this.checksumPortion},r.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},r.prototype.hashCode=function(){return this.value^this.checksumPortion},r})(),gh=(function(){function r(e,t,n,i,o){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new le(n,o)),this.resultPoints.push(new le(i,o))}return r.prototype.getValue=function(){return this.value},r.prototype.getStartEnd=function(){return this.startEnd},r.prototype.getResultPoints=function(){return this.resultPoints},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.prototype.hashCode=function(){return this.value},r})(),SE=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ti=(function(){function r(){}return r.getRSSvalue=function(e,t,n){var i,o,a=0;try{for(var s=SE(e),l=s.next();!l.done;l=s.next()){var u=l.value;a+=u}}catch(y){i={error:y}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}for(var c=0,d=0,p=e.length,h=0;h<p-1;h++){var v=void 0;for(v=1,d|=1<<h;v<e[h];v++,d&=~(1<<h)){var x=r.combins(a-v-1,p-h-2);if(n&&d===0&&a-v-(p-h-1)>=p-h-1&&(x-=r.combins(a-v-(p-h),p-h-2)),p-h-1>1){for(var w=0,g=a-v-(p-h-2);g>t;g--)w+=r.combins(a-v-g-1,p-h-3);x-=w*(p-1-h)}else a-v>t&&x--;c+=x}a-=v}return c},r.combins=function(e,t){var n,i;e-t>t?(i=t,n=e-t):(i=e-t,n=t);for(var o=1,a=1,s=e;s>n;s--)o*=s,a<=i&&(o/=a,a++);for(;a<=i;)o/=a,a++;return o},r})(),IE=(function(){function r(){}return r.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var n=12*t,i=new Et(n),o=0,a=e[0],s=a.getRightChar().getValue(),l=11;l>=0;--l)(s&1<<l)!==0&&i.set(o),o++;for(var l=1;l<e.length;++l){for(var u=e[l],c=u.getLeftChar().getValue(),d=11;d>=0;--d)(c&1<<d)!==0&&i.set(o),o++;if(u.getRightChar()!==null)for(var p=u.getRightChar().getValue(),d=11;d>=0;--d)(p&1<<d)!==0&&i.set(o),o++}return i},r})(),Cn=(function(){function r(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return r.prototype.getDecodedInformation=function(){return this.decodedInformation},r.prototype.isFinished=function(){return this.finished},r})(),Xl=(function(){function r(e){this.newPosition=e}return r.prototype.getNewPosition=function(){return this.newPosition},r})(),OE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),gr=(function(r){OE(e,r);function e(t,n){var i=r.call(this,t)||this;return i.value=n,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e})(Xl),TE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Sn=(function(r){TE(e,r);function e(t,n,i){var o=r.call(this,t)||this;return i?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=n,o}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e})(Xl),RE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Yn=(function(r){RE(e,r);function e(t,n,i){var o=r.call(this,t)||this;if(n<0||n>10||i<0||i>10)throw new te;return o.firstDigit=n,o.secondDigit=i,o}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e})(Xl),Io=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},PE=(function(){function r(){}return r.parseFieldsInGeneralPurpose=function(e){var t,n,i,o,a,s,l,u;if(!e)return null;if(e.length<2)throw new V;var c=e.substring(0,2);try{for(var d=Io(r.TWO_DIGIT_DATA_LENGTH),p=d.next();!p.done;p=d.next()){var h=p.value;if(h[0]===c)return h[1]===r.VARIABLE_LENGTH?r.processVariableAI(2,h[2],e):r.processFixedAI(2,h[1],e)}}catch(b){t={error:b}}finally{try{p&&!p.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}if(e.length<3)throw new V;var v=e.substring(0,3);try{for(var x=Io(r.THREE_DIGIT_DATA_LENGTH),w=x.next();!w.done;w=x.next()){var h=w.value;if(h[0]===v)return h[1]===r.VARIABLE_LENGTH?r.processVariableAI(3,h[2],e):r.processFixedAI(3,h[1],e)}}catch(b){i={error:b}}finally{try{w&&!w.done&&(o=x.return)&&o.call(x)}finally{if(i)throw i.error}}try{for(var g=Io(r.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),y=g.next();!y.done;y=g.next()){var h=y.value;if(h[0]===v)return h[1]===r.VARIABLE_LENGTH?r.processVariableAI(4,h[2],e):r.processFixedAI(4,h[1],e)}}catch(b){a={error:b}}finally{try{y&&!y.done&&(s=g.return)&&s.call(g)}finally{if(a)throw a.error}}if(e.length<4)throw new V;var m=e.substring(0,4);try{for(var _=Io(r.FOUR_DIGIT_DATA_LENGTH),E=_.next();!E.done;E=_.next()){var h=E.value;if(h[0]===m)return h[1]===r.VARIABLE_LENGTH?r.processVariableAI(4,h[2],e):r.processFixedAI(4,h[1],e)}}catch(b){l={error:b}}finally{try{E&&!E.done&&(u=_.return)&&u.call(_)}finally{if(l)throw l.error}}throw new V},r.processFixedAI=function(e,t,n){if(n.length<e)throw new V;var i=n.substring(0,e);if(n.length<e+t)throw new V;var o=n.substring(e,e+t),a=n.substring(e+t),s="("+i+")"+o,l=r.parseFieldsInGeneralPurpose(a);return l==null?s:s+l},r.processVariableAI=function(e,t,n){var i=n.substring(0,e),o;n.length<e+t?o=n.length:o=e+t;var a=n.substring(e,o),s=n.substring(o),l="("+i+")"+a,u=r.parseFieldsInGeneralPurpose(s);return u==null?l:l+u},r.VARIABLE_LENGTH=[],r.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",r.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",r.VARIABLE_LENGTH,20],["22",r.VARIABLE_LENGTH,29],["30",r.VARIABLE_LENGTH,8],["37",r.VARIABLE_LENGTH,8],["90",r.VARIABLE_LENGTH,30],["91",r.VARIABLE_LENGTH,30],["92",r.VARIABLE_LENGTH,30],["93",r.VARIABLE_LENGTH,30],["94",r.VARIABLE_LENGTH,30],["95",r.VARIABLE_LENGTH,30],["96",r.VARIABLE_LENGTH,30],["97",r.VARIABLE_LENGTH,3],["98",r.VARIABLE_LENGTH,30],["99",r.VARIABLE_LENGTH,30]],r.THREE_DIGIT_DATA_LENGTH=[["240",r.VARIABLE_LENGTH,30],["241",r.VARIABLE_LENGTH,30],["242",r.VARIABLE_LENGTH,6],["250",r.VARIABLE_LENGTH,30],["251",r.VARIABLE_LENGTH,30],["253",r.VARIABLE_LENGTH,17],["254",r.VARIABLE_LENGTH,20],["400",r.VARIABLE_LENGTH,30],["401",r.VARIABLE_LENGTH,30],["402",17],["403",r.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",r.VARIABLE_LENGTH,20],["421",r.VARIABLE_LENGTH,15],["422",3],["423",r.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],r.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",r.VARIABLE_LENGTH,15],["391",r.VARIABLE_LENGTH,18],["392",r.VARIABLE_LENGTH,15],["393",r.VARIABLE_LENGTH,18],["703",r.VARIABLE_LENGTH,30]],r.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",r.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",r.VARIABLE_LENGTH,20],["8003",r.VARIABLE_LENGTH,30],["8004",r.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",r.VARIABLE_LENGTH,30],["8008",r.VARIABLE_LENGTH,12],["8018",18],["8020",r.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",r.VARIABLE_LENGTH,70],["8200",r.VARIABLE_LENGTH,70]],r})(),Fo=(function(){function r(e){this.buffer=new Ce,this.information=e}return r.prototype.decodeAllCodes=function(e,t){var n=t,i=null;do{var o=this.decodeGeneralPurposeField(n,i),a=PE.parseFieldsInGeneralPurpose(o.getNewString());if(a!=null&&e.append(a),o.isRemaining()?i=""+o.getRemainingValue():i=null,n===o.getNewPosition())break;n=o.getNewPosition()}while(!0);return e.toString()},r.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},r.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new Yn(this.information.getSize(),Yn.FNC1,Yn.FNC1):new Yn(this.information.getSize(),t-1,Yn.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),i=(n-8)/11,o=(n-8)%11;return new Yn(e+7,i,o)},r.prototype.extractNumericValueFromBitArray=function(e,t){return r.extractNumericValueFromBitArray(this.information,e,t)},r.extractNumericValueFromBitArray=function(e,t,n){for(var i=0,o=0;o<n;++o)e.get(t+o)&&(i|=1<<n-o-1);return i},r.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new Sn(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new Sn(this.current.getPosition(),this.buffer.toString())},r.prototype.parseBlocks=function(){var e,t;do{var n=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=n!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},r.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new Sn(this.current.getPosition(),this.buffer.toString()):t=new Sn(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Cn(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new Sn(this.current.getPosition(),this.buffer.toString());return new Cn(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Cn(!1)},r.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Sn(this.current.getPosition(),this.buffer.toString());return new Cn(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Cn(!1)},r.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Sn(this.current.getPosition(),this.buffer.toString());return new Cn(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Cn(!1)},r.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},r.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new gr(e+5,gr.FNC1);if(t>=5&&t<15)return new gr(e+5,"0"+(t-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new gr(e+7,""+(n+1));if(n>=90&&n<116)return new gr(e+7,""+(n+7));var i=this.extractNumericValueFromBitArray(e,8),o;switch(i){case 232:o="!";break;case 233:o='"';break;case 234:o="%";break;case 235:o="&";break;case 236:o="'";break;case 237:o="(";break;case 238:o=")";break;case 239:o="*";break;case 240:o="+";break;case 241:o=",";break;case 242:o="-";break;case 243:o=".";break;case 244:o="/";break;case 245:o=":";break;case 246:o=";";break;case 247:o="<";break;case 248:o="=";break;case 249:o=">";break;case 250:o="?";break;case 251:o="_";break;case 252:o=" ";break;default:throw new te}return new gr(e+8,o)},r.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},r.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new gr(e+5,gr.FNC1);if(t>=5&&t<15)return new gr(e+5,"0"+(t-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new gr(e+6,""+(n+33));var i;switch(n){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new uo("Decoding invalid alphanumeric value: "+n)}return new gr(e+6,i)},r.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},r.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},r.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},r})(),yh=(function(){function r(e){this.information=e,this.generalDecoder=new Fo(e)}return r.prototype.getInformation=function(){return this.information},r.prototype.getGeneralDecoder=function(){return this.generalDecoder},r})(),kE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),_r=(function(r){kE(e,r);function e(t){return r.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,n){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,n,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,n,i){for(var o=0;o<4;++o){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*o,10);a/100===0&&t.append("0"),a/10===0&&t.append("0"),t.append(a)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,n){for(var i=0,o=0;o<13;o++){var a=t.charAt(o+n).charCodeAt(0)-48;i+=(o&1)===0?3*a:a}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e})(yh),NE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),DE=(function(r){NE(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Ce;t.append("(01)");var n=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e})(_r),ME=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),BE=(function(r){ME(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Ce;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e})(yh),LE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),$o=(function(r){LE(e,r);function e(t){return r.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,n,i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n,i);this.addWeightCode(t,o);for(var a=this.checkWeight(o),s=1e5,l=0;l<5;++l)a/s===0&&t.append("0"),s/=10;t.append(a)},e})(_r),FE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),mh=(function(r){FE(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+$o.GTIN_SIZE+e.WEIGHT_SIZE)throw new V;var t=new Ce;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+$o.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e})($o),$E=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),jE=(function(r){$E(e,r);function e(t){return r.call(this,t)||this}return e.prototype.addWeightCode=function(t,n){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e})(mh),UE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),VE=(function(r){UE(e,r);function e(t){return r.call(this,t)||this}return e.prototype.addWeightCode=function(t,n){n<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e})(mh),HE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),GE=(function(r){HE(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+_r.GTIN_SIZE)throw new V;var t=new Ce;this.encodeCompressedGtin(t,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+_r.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(n),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+_r.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e})(_r),qE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),zE=(function(r){qE(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+_r.GTIN_SIZE)throw new V;var t=new Ce;this.encodeCompressedGtin(t,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+_r.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(n),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+_r.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var o=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+_r.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(o.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e})(_r),WE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),rn=(function(r){WE(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.dateCode=i,o.firstAIdigits=n,o}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new V;var t=new Ce;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,n){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var o=i%32;i/=32;var a=i%12+1;i/=12;var s=i;s/10===0&&t.append("0"),t.append(s),a/10===0&&t.append("0"),t.append(a),o/10===0&&t.append("0"),t.append(o)}},e.prototype.addWeightCode=function(t,n){t.append("("),t.append(this.firstAIdigits),t.append(n/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e})($o);function KE(r){try{if(r.get(1))return new DE(r);if(!r.get(2))return new BE(r);var e=Fo.extractNumericValueFromBitArray(r,1,4);switch(e){case 4:return new jE(r);case 5:return new VE(r)}var t=Fo.extractNumericValueFromBitArray(r,1,5);switch(t){case 12:return new GE(r);case 13:return new zE(r)}var n=Fo.extractNumericValueFromBitArray(r,1,7);switch(n){case 56:return new rn(r,"310","11");case 57:return new rn(r,"320","11");case 58:return new rn(r,"310","13");case 59:return new rn(r,"320","13");case 60:return new rn(r,"310","15");case 61:return new rn(r,"320","15");case 62:return new rn(r,"310","17");case 63:return new rn(r,"320","17")}}catch(i){throw console.log(i),new uo("unknown decoder: "+r)}}var _d=(function(){function r(e,t,n,i){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=i}return r.prototype.mayBeLast=function(){return this.maybeLast},r.prototype.getLeftChar=function(){return this.leftchar},r.prototype.getRightChar=function(){return this.rightchar},r.prototype.getFinderPattern=function(){return this.finderpattern},r.prototype.mustBeLast=function(){return this.rightchar==null},r.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},r.equals=function(e,t){return e instanceof r?r.equalsOrNull(e.leftchar,t.leftchar)&&r.equalsOrNull(e.rightchar,t.rightchar)&&r.equalsOrNull(e.finderpattern,t.finderpattern):!1},r.equalsOrNull=function(e,t){return e===null?t===null:r.equals(e,t)},r.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},r})(),XE=(function(){function r(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}return r.prototype.getPairs=function(){return this.pairs},r.prototype.getRowNumber=function(){return this.rowNumber},r.prototype.isReversed=function(){return this.wasReversed},r.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},r.prototype.toString=function(){return"{ "+this.pairs+" }"},r.prototype.equals=function(e,t){return e instanceof r?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},r.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var n;return e.forEach(function(i,o){t.forEach(function(a){i.getLeftChar().getValue()===a.getLeftChar().getValue()&&i.getRightChar().getValue()===a.getRightChar().getValue()&&i.getFinderPatter().getValue()===a.getFinderPatter().getValue()&&(n=!0)})}),n}},r})(),YE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),nn=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ZE=(function(r){YE(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,n,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,n){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,t))}catch(s){if(s instanceof V){if(!this.pairs.length)throw new V;i=!0}}if(this.checkChecksum())return this.pairs;var o;if(this.rows.length?o=!0:o=!1,this.storeRow(t,!1),o){var a=this.checkRowsBoolean(!1);if(a!=null||(a=this.checkRowsBoolean(!0),a!=null))return a}throw new V},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(t,n){for(var i,o,a=n;a<this.rows.length;a++){var s=this.rows[a];this.pairs.length=0;try{for(var l=(i=void 0,nn(t)),u=l.next();!u.done;u=l.next()){var c=u.value;this.pairs.push(c.getPairs())}}catch(p){i={error:p}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}if(this.pairs.push(s.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var d=new Array(t);d.push(s);try{return this.checkRows(d,a+1)}catch(p){console.log(p)}}}throw new V},e.isValidSequence=function(t){var n,i;try{for(var o=nn(e.FINDER_PATTERN_SEQUENCES),a=o.next();!a.done;a=o.next()){var s=a.value;if(!(t.length>s.length)){for(var l=!0,u=0;u<t.length;u++)if(t[u].getFinderPattern().getValue()!==s[u]){l=!1;break}if(l)return!0}}}catch(c){n={error:c}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(t,n){for(var i=0,o=!1,a=!1;i<this.rows.length;){var s=this.rows[i];if(s.getRowNumber()>t){a=s.isEquivalent(this.pairs);break}o=s.isEquivalent(this.pairs),i++}a||o||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new XE(this.pairs,t,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,n){var i,o,a,s,l,u;try{for(var c=nn(n),d=c.next();!d.done;d=c.next()){var p=d.value;if(p.getPairs().length!==t.length){var h=!0;try{for(var v=(a=void 0,nn(p.getPairs())),x=v.next();!x.done;x=v.next()){var w=x.value,g=!1;try{for(var y=(l=void 0,nn(t)),m=y.next();!m.done;m=y.next()){var _=m.value;if(_d.equals(w,_)){g=!0;break}}}catch(E){l={error:E}}finally{try{m&&!m.done&&(u=y.return)&&u.call(y)}finally{if(l)throw l.error}}g||(h=!1)}}catch(E){a={error:E}}finally{try{x&&!x.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}}}}catch(E){i={error:E}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,n){var i,o,a,s,l,u;try{for(var c=nn(n),d=c.next();!d.done;d=c.next()){var p=d.value,h=!0;try{for(var v=(a=void 0,nn(t)),x=v.next();!x.done;x=v.next()){var w=x.value,g=!1;try{for(var y=(l=void 0,nn(p.getPairs())),m=y.next();!m.done;m=y.next()){var _=m.value;if(w.equals(_)){g=!0;break}}}catch(E){l={error:E}}finally{try{m&&!m.done&&(u=y.return)&&u.call(y)}finally{if(l)throw l.error}}if(!g){h=!1;break}}}catch(E){a={error:E}}finally{try{x&&!x.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}if(h)return!0}}catch(E){i={error:E}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var n=IE.buildBitArray(t),i=KE(n),o=i.parseInformation(),a=t[0].getFinderPattern().getResultPoints(),s=t[t.length-1].getFinderPattern().getResultPoints(),l=[a[0],a[1],s[0],s[1]];return new Ft(o,null,null,l,pe.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),n=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var o=i.getChecksumPortion(),a=2,s=1;s<this.pairs.size();++s){var l=this.pairs.get(s);o+=l.getLeftChar().getChecksumPortion(),a++;var u=l.getRightChar();u!=null&&(o+=u.getChecksumPortion(),a++)}o%=211;var c=211*(a-4)+o;return c===n.getValue()},e.getNextSecondBar=function(t,n){var i;return t.get(n)?(i=t.getNextUnset(n),i=t.getNextSet(i)):(i=t.getNextSet(n),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,n,i){var o=n.length%2===0;this.startFromEven&&(o=!o);var a,s=!0,l=-1;do this.findNextPair(t,n,l),a=this.parseFoundFinderPattern(t,i,o),a===null?l=e.getNextSecondBar(t,this.startEnd[0]):s=!1;while(s);var u=this.decodeDataCharacter(t,a,o,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new V;var c;try{c=this.decodeDataCharacter(t,a,o,!1)}catch(d){c=null,console.log(d)}return new _d(u,c,a,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,n,i){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var a=t.getSize(),s;if(i>=0)s=i;else if(this.isEmptyPair(n))s=0;else{var l=n[n.length-1];s=l.getFinderPattern().getStartEnd()[1]}var u=n.length%2!==0;this.startFromEven&&(u=!u);for(var c=!1;s<a&&(c=!t.get(s),!!c);)s++;for(var d=0,p=s,h=s;h<a;h++)if(t.get(h)!==c)o[d]++;else{if(d===3){if(u&&e.reverseCounters(o),e.isFinderPattern(o)){this.startEnd[0]=p,this.startEnd[1]=h;return}u&&e.reverseCounters(o),p+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,d--}else d++;o[d]=1,c=!c}throw new V},e.reverseCounters=function(t){for(var n=t.length,i=0;i<n/2;++i){var o=t[i];t[i]=t[n-i-1],t[n-i-1]=o}},e.prototype.parseFoundFinderPattern=function(t,n,i){var o,a,s;if(i){for(var l=this.startEnd[0]-1;l>=0&&!t.get(l);)l--;l++,o=this.startEnd[0]-l,a=l,s=this.startEnd[1]}else a=this.startEnd[0],s=t.getNextUnset(this.startEnd[1]+1),o=s-this.startEnd[1];var u=this.getDecodeFinderCounters();Ye.arraycopy(u,0,u,1,u.length-1),u[0]=o;var c;try{c=this.parseFinderValue(u,e.FINDER_PATTERNS)}catch{return null}return new gh(c,[a,s],a,s,n)},e.prototype.decodeDataCharacter=function(t,n,i,o){for(var a=this.getDataCharacterCounters(),s=0;s<a.length;s++)a[s]=0;if(o)e.recordPatternInReverse(t,n.getStartEnd()[0],a);else{e.recordPattern(t,n.getStartEnd()[1],a);for(var l=0,u=a.length-1;l<u;l++,u--){var c=a[l];a[l]=a[u],a[u]=c}}var d=17,p=Pe.sum(new Int32Array(a))/d,h=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(p-h)/h>.3)throw new V;for(var v=this.getOddCounts(),x=this.getEvenCounts(),w=this.getOddRoundingErrors(),g=this.getEvenRoundingErrors(),l=0;l<a.length;l++){var y=1*a[l]/p,m=y+.5;if(m<1){if(y<.3)throw new V;m=1}else if(m>8){if(y>8.7)throw new V;m=8}var _=l/2;(l&1)===0?(v[_]=m,w[_]=y-m):(x[_]=m,g[_]=y-m)}this.adjustOddEvenCounts(d);for(var E=4*n.getValue()+(i?0:2)+(o?0:1)-1,b=0,S=0,l=v.length-1;l>=0;l--){if(e.isNotA1left(n,i,o)){var B=e.WEIGHTS[E][2*l];S+=v[l]*B}b+=v[l]}for(var L=0,l=x.length-1;l>=0;l--)if(e.isNotA1left(n,i,o)){var B=e.WEIGHTS[E][2*l+1];L+=x[l]*B}var j=S+L;if((b&1)!==0||b>13||b<4)throw new V;var Y=(13-b)/2,M=e.SYMBOL_WIDEST[Y],k=9-M,K=ti.getRSSvalue(v,M,!0),ee=ti.getRSSvalue(x,k,!1),J=e.EVEN_TOTAL_SUBSET[Y],N=e.GSUM[Y],G=K*J+ee+N;return new ta(G,j)},e.isNotA1left=function(t,n,i){return!(t.getValue()===0&&n&&i)},e.prototype.adjustOddEvenCounts=function(t){var n=Pe.sum(new Int32Array(this.getOddCounts())),i=Pe.sum(new Int32Array(this.getEvenCounts())),o=!1,a=!1;n>13?a=!0:n<4&&(o=!0);var s=!1,l=!1;i>13?l=!0:i<4&&(s=!0);var u=n+i-t,c=(n&1)===1,d=(i&1)===0;if(u===1)if(c){if(d)throw new V;a=!0}else{if(!d)throw new V;l=!0}else if(u===-1)if(c){if(d)throw new V;o=!0}else{if(!d)throw new V;s=!0}else if(u===0){if(c){if(!d)throw new V;n<i?(o=!0,l=!0):(a=!0,s=!0)}else if(d)throw new V}else throw new V;if(o){if(a)throw new V;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(l)throw new V;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e})(Tn),JE=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),QE=(function(r){JE(e,r);function e(t,n,i){var o=r.call(this,t,n)||this;return o.count=0,o.finderPattern=i,o}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e})(ta),eA=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Es=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bd=(function(r){eA(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,n,i){var o,a,s,l,u=this.decodePair(n,!1,t,i);e.addOrTally(this.possibleLeftPairs,u),n.reverse();var c=this.decodePair(n,!0,t,i);e.addOrTally(this.possibleRightPairs,c),n.reverse();try{for(var d=Es(this.possibleLeftPairs),p=d.next();!p.done;p=d.next()){var h=p.value;if(h.getCount()>1)try{for(var v=(s=void 0,Es(this.possibleRightPairs)),x=v.next();!x.done;x=v.next()){var w=x.value;if(w.getCount()>1&&e.checkChecksum(h,w))return e.constructResult(h,w)}}catch(g){s={error:g}}finally{try{x&&!x.done&&(l=v.return)&&l.call(v)}finally{if(s)throw s.error}}}}catch(g){o={error:g}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}throw new V},e.addOrTally=function(t,n){var i,o;if(n!=null){var a=!1;try{for(var s=Es(t),l=s.next();!l.done;l=s.next()){var u=l.value;if(u.getValue()===n.getValue()){u.incrementCount(),a=!0;break}}}catch(c){i={error:c}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}a||t.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,n){for(var i=4537077*t.getValue()+n.getValue(),o=new String(i).toString(),a=new Ce,s=13-o.length;s>0;s--)a.append("0");a.append(o);for(var l=0,s=0;s<13;s++){var u=a.charAt(s).charCodeAt(0)-48;l+=(s&1)===0?3*u:u}l=10-l%10,l===10&&(l=0),a.append(l.toString());var c=t.getFinderPattern().getResultPoints(),d=n.getFinderPattern().getResultPoints();return new Ft(a.toString(),null,0,[c[0],c[1],d[0],d[1]],pe.RSS_14,new Date().getTime())},e.checkChecksum=function(t,n){var i=(t.getChecksumPortion()+16*n.getChecksumPortion())%79,o=9*t.getFinderPattern().getValue()+n.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,i===o},e.prototype.decodePair=function(t,n,i,o){try{var a=this.findFinderPattern(t,n),s=this.parseFoundFinderPattern(t,i,n,a),l=o==null?null:o.get(Ze.NEED_RESULT_POINT_CALLBACK);if(l!=null){var u=(a[0]+a[1])/2;n&&(u=t.getSize()-1-u),l.foundPossibleResultPoint(new le(u,i))}var c=this.decodeDataCharacter(t,s,!0),d=this.decodeDataCharacter(t,s,!1);return new QE(1597*c.getValue()+d.getValue(),c.getChecksumPortion()+4*d.getChecksumPortion(),s)}catch{return null}},e.prototype.decodeDataCharacter=function(t,n,i){for(var o=this.getDataCharacterCounters(),a=0;a<o.length;a++)o[a]=0;if(i)xt.recordPatternInReverse(t,n.getStartEnd()[0],o);else{xt.recordPattern(t,n.getStartEnd()[1]+1,o);for(var s=0,l=o.length-1;s<l;s++,l--){var u=o[s];o[s]=o[l],o[l]=u}}for(var c=i?16:15,d=Pe.sum(new Int32Array(o))/c,p=this.getOddCounts(),h=this.getEvenCounts(),v=this.getOddRoundingErrors(),x=this.getEvenRoundingErrors(),s=0;s<o.length;s++){var w=o[s]/d,g=Math.floor(w+.5);g<1?g=1:g>8&&(g=8);var y=Math.floor(s/2);(s&1)===0?(p[y]=g,v[y]=w-g):(h[y]=g,x[y]=w-g)}this.adjustOddEvenCounts(i,c);for(var m=0,_=0,s=p.length-1;s>=0;s--)_*=9,_+=p[s],m+=p[s];for(var E=0,b=0,s=h.length-1;s>=0;s--)E*=9,E+=h[s],b+=h[s];var S=_+3*E;if(i){if((m&1)!==0||m>12||m<4)throw new V;var B=(12-m)/2,L=e.OUTSIDE_ODD_WIDEST[B],j=9-L,Y=ti.getRSSvalue(p,L,!1),M=ti.getRSSvalue(h,j,!0),k=e.OUTSIDE_EVEN_TOTAL_SUBSET[B],K=e.OUTSIDE_GSUM[B];return new ta(Y*k+M+K,S)}else{if((b&1)!==0||b>10||b<4)throw new V;var B=(10-b)/2,L=e.INSIDE_ODD_WIDEST[B],j=9-L,Y=ti.getRSSvalue(p,L,!0),M=ti.getRSSvalue(h,j,!1),ee=e.INSIDE_ODD_TOTAL_SUBSET[B],K=e.INSIDE_GSUM[B];return new ta(M*ee+Y+K,S)}},e.prototype.findFinderPattern=function(t,n){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var o=t.getSize(),a=!1,s=0;s<o&&(a=!t.get(s),n!==a);)s++;for(var l=0,u=s,c=s;c<o;c++)if(t.get(c)!==a)i[l]++;else{if(l===3){if(Tn.isFinderPattern(i))return[u,c];u+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,l--}else l++;i[l]=1,a=!a}throw new V},e.prototype.parseFoundFinderPattern=function(t,n,i,o){for(var a=t.get(o[0]),s=o[0]-1;s>=0&&a!==t.get(s);)s--;s++;var l=o[0]-s,u=this.getDecodeFinderCounters(),c=new Int32Array(u.length);Ye.arraycopy(u,0,c,1,u.length-1),c[0]=l;var d=this.parseFinderValue(c,e.FINDER_PATTERNS),p=s,h=o[1];return i&&(p=t.getSize()-1-p,h=t.getSize()-1-h),new gh(d,[s,o[1]],p,h,n)},e.prototype.adjustOddEvenCounts=function(t,n){var i=Pe.sum(new Int32Array(this.getOddCounts())),o=Pe.sum(new Int32Array(this.getEvenCounts())),a=!1,s=!1,l=!1,u=!1;t?(i>12?s=!0:i<4&&(a=!0),o>12?u=!0:o<4&&(l=!0)):(i>11?s=!0:i<5&&(a=!0),o>10?u=!0:o<4&&(l=!0));var c=i+o-n,d=(i&1)===(t?1:0),p=(o&1)===1;if(c===1)if(d){if(p)throw new V;s=!0}else{if(!p)throw new V;u=!0}else if(c===-1)if(d){if(p)throw new V;a=!0}else{if(!p)throw new V;l=!0}else if(c===0){if(d){if(!p)throw new V;i<o?(a=!0,u=!0):(s=!0,l=!0)}else if(p)throw new V}else throw new V;if(a){if(s)throw new V;Tn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&Tn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(u)throw new V;Tn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&Tn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e})(Tn),tA=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),ri=(function(r){tA(e,r);function e(t){var n=r.call(this)||this;n.readers=[];var i=t?t.get(Ze.POSSIBLE_FORMATS):null,o=t&&t.get(Ze.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,a=t&&t.get(Ze.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(pe.EAN_13)||i.includes(pe.UPC_A)||i.includes(pe.EAN_8)||i.includes(pe.UPC_E))&&n.readers.push(new bs(t)),i.includes(pe.CODE_39)&&n.readers.push(new fd(o,a)),i.includes(pe.CODE_93)&&n.readers.push(new hd),i.includes(pe.CODE_128)&&n.readers.push(new dd),i.includes(pe.ITF)&&n.readers.push(new pd),i.includes(pe.CODABAR)&&n.readers.push(new EE),i.includes(pe.RSS_14)&&n.readers.push(new bd),i.includes(pe.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new ZE))),n.readers.length===0&&(n.readers.push(new bs(t)),n.readers.push(new fd),n.readers.push(new hd),n.readers.push(new bs(t)),n.readers.push(new dd),n.readers.push(new pd),n.readers.push(new bd)),n}return e.prototype.decodeRow=function(t,n,i){for(var o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(t,n,i)}catch{}throw new V},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e})(xt),rA=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){rA(e,r);function e(t,n){return t===void 0&&(t=500),r.call(this,new ri(n),t,n)||this}return e})(wi);var Ed=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Be=(function(){function r(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}return r.prototype.getECCodewords=function(){return this.ecCodewords},r.prototype.getECBlocks=function(){return this.ecBlocks},r})(),Ne=(function(){function r(e,t){this.count=e,this.dataCodewords=t}return r.prototype.getCount=function(){return this.count},r.prototype.getDataCodewords=function(){return this.dataCodewords},r})(),nA=(function(){function r(e,t,n,i,o,a){var s,l;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=o,this.ecBlocks=a;var u=0,c=a.getECCodewords(),d=a.getECBlocks();try{for(var p=Ed(d),h=p.next();!h.done;h=p.next()){var v=h.value;u+=v.getCount()*(v.getDataCodewords()+c)}}catch(x){s={error:x}}finally{try{h&&!h.done&&(l=p.return)&&l.call(p)}finally{if(s)throw s.error}}this.totalCodewords=u}return r.prototype.getVersionNumber=function(){return this.versionNumber},r.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},r.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},r.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},r.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},r.prototype.getTotalCodewords=function(){return this.totalCodewords},r.prototype.getECBlocks=function(){return this.ecBlocks},r.getVersionForDimensions=function(e,t){var n,i;if((e&1)!==0||(t&1)!==0)throw new te;try{for(var o=Ed(r.VERSIONS),a=o.next();!a.done;a=o.next()){var s=a.value;if(s.symbolSizeRows===e&&s.symbolSizeColumns===t)return s}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}throw new te},r.prototype.toString=function(){return""+this.versionNumber},r.buildVersions=function(){return[new r(1,10,10,8,8,new Be(5,new Ne(1,3))),new r(2,12,12,10,10,new Be(7,new Ne(1,5))),new r(3,14,14,12,12,new Be(10,new Ne(1,8))),new r(4,16,16,14,14,new Be(12,new Ne(1,12))),new r(5,18,18,16,16,new Be(14,new Ne(1,18))),new r(6,20,20,18,18,new Be(18,new Ne(1,22))),new r(7,22,22,20,20,new Be(20,new Ne(1,30))),new r(8,24,24,22,22,new Be(24,new Ne(1,36))),new r(9,26,26,24,24,new Be(28,new Ne(1,44))),new r(10,32,32,14,14,new Be(36,new Ne(1,62))),new r(11,36,36,16,16,new Be(42,new Ne(1,86))),new r(12,40,40,18,18,new Be(48,new Ne(1,114))),new r(13,44,44,20,20,new Be(56,new Ne(1,144))),new r(14,48,48,22,22,new Be(68,new Ne(1,174))),new r(15,52,52,24,24,new Be(42,new Ne(2,102))),new r(16,64,64,14,14,new Be(56,new Ne(2,140))),new r(17,72,72,16,16,new Be(36,new Ne(4,92))),new r(18,80,80,18,18,new Be(48,new Ne(4,114))),new r(19,88,88,20,20,new Be(56,new Ne(4,144))),new r(20,96,96,22,22,new Be(68,new Ne(4,174))),new r(21,104,104,24,24,new Be(56,new Ne(6,136))),new r(22,120,120,18,18,new Be(68,new Ne(6,175))),new r(23,132,132,20,20,new Be(62,new Ne(8,163))),new r(24,144,144,22,22,new Be(62,new Ne(8,156),new Ne(2,155))),new r(25,8,18,6,16,new Be(7,new Ne(1,5))),new r(26,8,32,6,14,new Be(11,new Ne(1,10))),new r(27,12,26,10,24,new Be(14,new Ne(1,16))),new r(28,12,36,10,16,new Be(18,new Ne(1,22))),new r(29,16,36,14,16,new Be(24,new Ne(1,32))),new r(30,16,48,14,22,new Be(28,new Ne(1,49)))]},r.VERSIONS=r.buildVersions(),r})(),iA=(function(){function r(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new te;this.version=r.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Lr(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return r.prototype.getVersion=function(){return this.version},r.readVersion=function(e){var t=e.getHeight(),n=e.getWidth();return nA.getVersionForDimensions(t,n)},r.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,n=4,i=0,o=this.mappingBitMatrix.getHeight(),a=this.mappingBitMatrix.getWidth(),s=!1,l=!1,u=!1,c=!1;do if(n===o&&i===0&&!s)e[t++]=this.readCorner1(o,a)&255,n-=2,i+=2,s=!0;else if(n===o-2&&i===0&&(a&3)!==0&&!l)e[t++]=this.readCorner2(o,a)&255,n-=2,i+=2,l=!0;else if(n===o+4&&i===2&&(a&7)===0&&!u)e[t++]=this.readCorner3(o,a)&255,n-=2,i+=2,u=!0;else if(n===o-2&&i===0&&(a&7)===4&&!c)e[t++]=this.readCorner4(o,a)&255,n-=2,i+=2,c=!0;else{do n<o&&i>=0&&!this.readMappingMatrix.get(i,n)&&(e[t++]=this.readUtah(n,i,o,a)&255),n-=2,i+=2;while(n>=0&&i<a);n+=1,i+=3;do n>=0&&i<a&&!this.readMappingMatrix.get(i,n)&&(e[t++]=this.readUtah(n,i,o,a)&255),n+=2,i-=2;while(n<o&&i>=0);n+=3,i+=1}while(n<o||i<a);if(t!==this.version.getTotalCodewords())throw new te;return e},r.prototype.readModule=function(e,t,n,i){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},r.prototype.readUtah=function(e,t,n,i){var o=0;return this.readModule(e-2,t-2,n,i)&&(o|=1),o<<=1,this.readModule(e-2,t-1,n,i)&&(o|=1),o<<=1,this.readModule(e-1,t-2,n,i)&&(o|=1),o<<=1,this.readModule(e-1,t-1,n,i)&&(o|=1),o<<=1,this.readModule(e-1,t,n,i)&&(o|=1),o<<=1,this.readModule(e,t-2,n,i)&&(o|=1),o<<=1,this.readModule(e,t-1,n,i)&&(o|=1),o<<=1,this.readModule(e,t,n,i)&&(o|=1),o},r.prototype.readCorner1=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},r.prototype.readCorner2=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},r.prototype.readCorner3=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},r.prototype.readCorner4=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},r.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new ve("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),a=t/i|0,s=n/o|0,l=a*i,u=s*o,c=new Lr(u,l),d=0;d<a;++d)for(var p=d*i,h=0;h<s;++h)for(var v=h*o,x=0;x<i;++x)for(var w=d*(i+2)+1+x,g=p+x,y=0;y<o;++y){var m=h*(o+2)+1+y;if(e.get(m,w)){var _=v+y;c.set(_,g)}}return c},r})(),Ad=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oA=(function(){function r(e,t){this.numDataCodewords=e,this.codewords=t}return r.getDataBlocks=function(e,t){var n,i,o,a,s=t.getECBlocks(),l=0,u=s.getECBlocks();try{for(var c=Ad(u),d=c.next();!d.done;d=c.next()){var p=d.value;l+=p.getCount()}}catch(K){n={error:K}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}var h=new Array(l),v=0;try{for(var x=Ad(u),w=x.next();!w.done;w=x.next())for(var p=w.value,g=0;g<p.getCount();g++){var y=p.getDataCodewords(),m=s.getECCodewords()+y;h[v++]=new r(y,new Uint8Array(m))}}catch(K){o={error:K}}finally{try{w&&!w.done&&(a=x.return)&&a.call(x)}finally{if(o)throw o.error}}for(var _=h[0].codewords.length,E=_-s.getECCodewords(),b=E-1,S=0,g=0;g<b;g++)for(var B=0;B<v;B++)h[B].codewords[g]=e[S++];for(var L=t.getVersionNumber()===24,j=L?8:v,B=0;B<j;B++)h[B].codewords[E-1]=e[S++];for(var Y=h[0].codewords.length,g=E;g<Y;g++)for(var B=0;B<v;B++){var M=L?(B+8)%v:B,k=L&&M>7?g-1:g;h[M].codewords[k]=e[S++]}if(S!==e.length)throw new ve;return h},r.prototype.getNumDataCodewords=function(){return this.numDataCodewords},r.prototype.getCodewords=function(){return this.codewords},r})(),xh=(function(){function r(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return r.prototype.getBitOffset=function(){return this.bitOffset},r.prototype.getByteOffset=function(){return this.byteOffset},r.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new ve(""+e);var t=0,n=this.bitOffset,i=this.byteOffset,o=this.bytes;if(n>0){var a=8-n,s=e<a?e:a,l=a-s,u=255>>8-s<<l;t=(o[i]&u)>>l,e-=s,n+=s,n===8&&(n=0,i++)}if(e>0){for(;e>=8;)t=t<<8|o[i]&255,i++,e-=8;if(e>0){var l=8-e,u=255>>l<<l;t=t<<e|(o[i]&u)>>l,n+=e}}return this.bitOffset=n,this.byteOffset=i,t},r.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},r})(),pt;(function(r){r[r.PAD_ENCODE=0]="PAD_ENCODE",r[r.ASCII_ENCODE=1]="ASCII_ENCODE",r[r.C40_ENCODE=2]="C40_ENCODE",r[r.TEXT_ENCODE=3]="TEXT_ENCODE",r[r.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",r[r.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",r[r.BASE256_ENCODE=6]="BASE256_ENCODE"})(pt||(pt={}));var aA=(function(){function r(){}return r.decode=function(e){var t=new xh(e),n=new Ce,i=new Ce,o=new Array,a=pt.ASCII_ENCODE;do if(a===pt.ASCII_ENCODE)a=this.decodeAsciiSegment(t,n,i);else{switch(a){case pt.C40_ENCODE:this.decodeC40Segment(t,n);break;case pt.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case pt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case pt.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case pt.BASE256_ENCODE:this.decodeBase256Segment(t,n,o);break;default:throw new te}a=pt.ASCII_ENCODE}while(a!==pt.PAD_ENCODE&&t.available()>0);return i.length()>0&&n.append(i.toString()),new Ca(e,n.toString(),o.length===0?null:o,null)},r.decodeAsciiSegment=function(e,t,n){var i=!1;do{var o=e.readBits(8);if(o===0)throw new te;if(o<=128)return i&&(o+=128),t.append(String.fromCharCode(o-1)),pt.ASCII_ENCODE;if(o===129)return pt.PAD_ENCODE;if(o<=229){var a=o-130;a<10&&t.append("0"),t.append(""+a)}else switch(o){case 230:return pt.C40_ENCODE;case 231:return pt.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),n.insert(0,"");break;case 237:t.append("[)>06"),n.insert(0,"");break;case 238:return pt.ANSIX12_ENCODE;case 239:return pt.TEXT_ENCODE;case 240:return pt.EDIFACT_ENCODE;case 241:break;default:if(o!==254||e.available()!==0)throw new te;break}}while(e.available()>0);return pt.ASCII_ENCODE},r.decodeC40Segment=function(e,t){var n=!1,i=[],o=0;do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),i);for(var s=0;s<3;s++){var l=i[s];switch(o){case 0:if(l<3)o=l+1;else if(l<this.C40_BASIC_SET_CHARS.length){var u=this.C40_BASIC_SET_CHARS[l];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u)}else throw new te;break;case 1:n?(t.append(String.fromCharCode(l+128)),n=!1):t.append(String.fromCharCode(l)),o=0;break;case 2:if(l<this.C40_SHIFT2_SET_CHARS.length){var u=this.C40_SHIFT2_SET_CHARS[l];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u)}else switch(l){case 27:t.append("");break;case 30:n=!0;break;default:throw new te}o=0;break;case 3:n?(t.append(String.fromCharCode(l+224)),n=!1):t.append(String.fromCharCode(l+96)),o=0;break;default:throw new te}}}while(e.available()>0)},r.decodeTextSegment=function(e,t){var n=!1,i=[],o=0;do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),i);for(var s=0;s<3;s++){var l=i[s];switch(o){case 0:if(l<3)o=l+1;else if(l<this.TEXT_BASIC_SET_CHARS.length){var u=this.TEXT_BASIC_SET_CHARS[l];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u)}else throw new te;break;case 1:n?(t.append(String.fromCharCode(l+128)),n=!1):t.append(String.fromCharCode(l)),o=0;break;case 2:if(l<this.TEXT_SHIFT2_SET_CHARS.length){var u=this.TEXT_SHIFT2_SET_CHARS[l];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u)}else switch(l){case 27:t.append("");break;case 30:n=!0;break;default:throw new te}o=0;break;case 3:if(l<this.TEXT_SHIFT3_SET_CHARS.length){var u=this.TEXT_SHIFT3_SET_CHARS[l];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u),o=0}else throw new te;break;default:throw new te}}}while(e.available()>0)},r.decodeAnsiX12Segment=function(e,t){var n=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),n);for(var o=0;o<3;o++){var a=n[o];switch(a){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(a<14)t.append(String.fromCharCode(a+44));else if(a<40)t.append(String.fromCharCode(a+51));else throw new te;break}}}while(e.available()>0)},r.parseTwoBytes=function(e,t,n){var i=(e<<8)+t-1,o=Math.floor(i/1600);n[0]=o,i-=o*1600,o=Math.floor(i/40),n[1]=o,n[2]=i-o*40},r.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var i=e.readBits(6);if(i===31){var o=8-e.getBitOffset();o!==8&&e.readBits(o);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},r.decodeBase256Segment=function(e,t,n){var i=1+e.getByteOffset(),o=this.unrandomize255State(e.readBits(8),i++),a;if(o===0?a=e.available()/8|0:o<250?a=o:a=250*(o-249)+this.unrandomize255State(e.readBits(8),i++),a<0)throw new te;for(var s=new Uint8Array(a),l=0;l<a;l++){if(e.available()<8)throw new te;s[l]=this.unrandomize255State(e.readBits(8),i++)}n.push(s);try{t.append(pr.decode(s,Oe.ISO88591))}catch(u){throw new uo("Platform does not support required encoding: "+u.message)}},r.unrandomize255State=function(e,t){var n=149*t%255+1,i=e-n;return i>=0?i:i+256},r.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],r.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],r.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],r.TEXT_SHIFT2_SET_CHARS=r.C40_SHIFT2_SET_CHARS,r.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],r})(),sA=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lA=(function(){function r(){this.rsDecoder=new Sa(Zt.DATA_MATRIX_FIELD_256)}return r.prototype.decode=function(e){var t,n,i=new iA(e),o=i.getVersion(),a=i.readCodewords(),s=oA.getDataBlocks(a,o),l=0;try{for(var u=sA(s),c=u.next();!c.done;c=u.next()){var d=c.value;l+=d.getNumDataCodewords()}}catch(m){t={error:m}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}for(var p=new Uint8Array(l),h=s.length,v=0;v<h;v++){var x=s[v],w=x.getCodewords(),g=x.getNumDataCodewords();this.correctErrors(w,g);for(var y=0;y<g;y++)p[y*h+v]=w[y]}return aA.decode(p)},r.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new dt}for(var i=0;i<t;i++)e[i]=n[i]},r})(),uA=(function(){function r(e){this.image=e,this.rectangleDetector=new ul(this.image)}return r.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new V;t=this.shiftToModuleCenter(t);var n=t[0],i=t[1],o=t[2],a=t[3],s=this.transitionsBetween(n,a)+1,l=this.transitionsBetween(o,a)+1;(s&1)===1&&(s+=1),(l&1)===1&&(l+=1),4*s<7*l&&4*l<7*s&&(s=l=Math.max(s,l));var u=r.sampleGrid(this.image,n,i,o,a,s,l);return new Wl(u,[n,i,o,a])},r.shiftPoint=function(e,t,n){var i=(t.getX()-e.getX())/(n+1),o=(t.getY()-e.getY())/(n+1);return new le(e.getX()+i,e.getY()+o)},r.moveAway=function(e,t,n){var i=e.getX(),o=e.getY();return i<t?i-=1:i+=1,o<n?o-=1:o+=1,new le(i,o)},r.prototype.detectSolid1=function(e){var t=e[0],n=e[1],i=e[3],o=e[2],a=this.transitionsBetween(t,n),s=this.transitionsBetween(n,i),l=this.transitionsBetween(i,o),u=this.transitionsBetween(o,t),c=a,d=[o,t,n,i];return c>s&&(c=s,d[0]=t,d[1]=n,d[2]=i,d[3]=o),c>l&&(c=l,d[0]=n,d[1]=i,d[2]=o,d[3]=t),c>u&&(d[0]=i,d[1]=o,d[2]=t,d[3]=n),d},r.prototype.detectSolid2=function(e){var t=e[0],n=e[1],i=e[2],o=e[3],a=this.transitionsBetween(t,o),s=r.shiftPoint(n,i,(a+1)*4),l=r.shiftPoint(i,n,(a+1)*4),u=this.transitionsBetween(s,t),c=this.transitionsBetween(l,o);return u<c?(e[0]=t,e[1]=n,e[2]=i,e[3]=o):(e[0]=n,e[1]=i,e[2]=o,e[3]=t),e},r.prototype.correctTopRight=function(e){var t=e[0],n=e[1],i=e[2],o=e[3],a=this.transitionsBetween(t,o),s=this.transitionsBetween(n,o),l=r.shiftPoint(t,n,(s+1)*4),u=r.shiftPoint(i,n,(a+1)*4);a=this.transitionsBetween(l,o),s=this.transitionsBetween(u,o);var c=new le(o.getX()+(i.getX()-n.getX())/(a+1),o.getY()+(i.getY()-n.getY())/(a+1)),d=new le(o.getX()+(t.getX()-n.getX())/(s+1),o.getY()+(t.getY()-n.getY())/(s+1));if(!this.isValid(c))return this.isValid(d)?d:null;if(!this.isValid(d))return c;var p=this.transitionsBetween(l,c)+this.transitionsBetween(u,c),h=this.transitionsBetween(l,d)+this.transitionsBetween(u,d);return p>h?c:d},r.prototype.shiftToModuleCenter=function(e){var t=e[0],n=e[1],i=e[2],o=e[3],a=this.transitionsBetween(t,o)+1,s=this.transitionsBetween(i,o)+1,l=r.shiftPoint(t,n,s*4),u=r.shiftPoint(i,n,a*4);a=this.transitionsBetween(l,o)+1,s=this.transitionsBetween(u,o)+1,(a&1)===1&&(a+=1),(s&1)===1&&(s+=1);var c=(t.getX()+n.getX()+i.getX()+o.getX())/4,d=(t.getY()+n.getY()+i.getY()+o.getY())/4;t=r.moveAway(t,c,d),n=r.moveAway(n,c,d),i=r.moveAway(i,c,d),o=r.moveAway(o,c,d);var p,h;return l=r.shiftPoint(t,n,s*4),l=r.shiftPoint(l,o,a*4),p=r.shiftPoint(n,t,s*4),p=r.shiftPoint(p,i,a*4),u=r.shiftPoint(i,o,s*4),u=r.shiftPoint(u,n,a*4),h=r.shiftPoint(o,i,s*4),h=r.shiftPoint(h,t,a*4),[l,p,u,h]},r.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},r.sampleGrid=function(e,t,n,i,o,a,s){var l=Kl.getInstance();return l.sampleGrid(e,a,s,.5,.5,a-.5,.5,a-.5,s-.5,.5,s-.5,t.getX(),t.getY(),o.getX(),o.getY(),i.getX(),i.getY(),n.getX(),n.getY())},r.prototype.transitionsBetween=function(e,t){var n=Math.trunc(e.getX()),i=Math.trunc(e.getY()),o=Math.trunc(t.getX()),a=Math.trunc(t.getY()),s=Math.abs(a-i)>Math.abs(o-n);if(s){var l=n;n=i,i=l,l=o,o=a,a=l}for(var u=Math.abs(o-n),c=Math.abs(a-i),d=-u/2,p=i<a?1:-1,h=n<o?1:-1,v=0,x=this.image.get(s?i:n,s?n:i),w=n,g=i;w!==o;w+=h){var y=this.image.get(s?g:w,s?w:g);if(y!==x&&(v++,x=y),d+=c,d>0){if(g===a)break;g+=p,d-=u}}return v},r})(),ra=(function(){function r(){this.decoder=new lA}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n,i;if(t!=null&&t.has(Ze.PURE_BARCODE)){var o=r.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(o),i=r.NO_POINTS}else{var a=new uA(e.getBlackMatrix()).detect();n=this.decoder.decode(a.getBits()),i=a.getPoints()}var s=n.getRawBytes(),l=new Ft(n.getText(),s,8*s.length,i,pe.DATA_MATRIX,Ye.currentTimeMillis()),u=n.getByteSegments();u!=null&&l.putMetadata(Tt.BYTE_SEGMENTS,u);var c=n.getECLevel();return c!=null&&l.putMetadata(Tt.ERROR_CORRECTION_LEVEL,c),l},r.prototype.reset=function(){},r.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t==null||n==null)throw new V;var i=this.moduleSize(t,e),o=t[1],a=n[1],s=t[0],l=n[0],u=(l-s+1)/i,c=(a-o+1)/i;if(u<=0||c<=0)throw new V;var d=i/2;o+=d,s+=d;for(var p=new Lr(u,c),h=0;h<c;h++)for(var v=o+h*i,x=0;x<u;x++)e.get(s+x*i,v)&&p.set(x,h);return p},r.moduleSize=function(e,t){for(var n=t.getWidth(),i=e[0],o=e[1];i<n&&t.get(i,o);)i++;if(i===n)throw new V;var a=i-e[0];if(a===0)throw new V;return a},r.NO_POINTS=[],r})(),cA=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){cA(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new ra,t)||this}return e})(wi);var ni;(function(r){r[r.L=0]="L",r[r.M=1]="M",r[r.Q=2]="Q",r[r.H=3]="H"})(ni||(ni={}));var dA=(function(){function r(e,t,n){this.value=e,this.stringValue=t,this.bits=n,r.FOR_BITS.set(n,this),r.FOR_VALUE.set(e,this)}return r.prototype.getValue=function(){return this.value},r.prototype.getBits=function(){return this.bits},r.fromString=function(e){switch(e){case"L":return r.L;case"M":return r.M;case"Q":return r.Q;case"H":return r.H;default:throw new lt(e+"not available")}},r.prototype.toString=function(){return this.stringValue},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.forBits=function(e){if(e<0||e>=r.FOR_BITS.size)throw new ve;return r.FOR_BITS.get(e)},r.FOR_BITS=new Map,r.FOR_VALUE=new Map,r.L=new r(ni.L,"L",1),r.M=new r(ni.M,"M",0),r.Q=new r(ni.Q,"Q",3),r.H=new r(ni.H,"H",2),r})(),fA=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wh=(function(){function r(e){this.errorCorrectionLevel=dA.forBits(e>>3&3),this.dataMask=e&7}return r.numBitsDiffering=function(e,t){return Se.bitCount(e^t)},r.decodeFormatInformation=function(e,t){var n=r.doDecodeFormatInformation(e,t);return n!==null?n:r.doDecodeFormatInformation(e^r.FORMAT_INFO_MASK_QR,t^r.FORMAT_INFO_MASK_QR)},r.doDecodeFormatInformation=function(e,t){var n,i,o=Number.MAX_SAFE_INTEGER,a=0;try{for(var s=fA(r.FORMAT_INFO_DECODE_LOOKUP),l=s.next();!l.done;l=s.next()){var u=l.value,c=u[0];if(c===e||c===t)return new r(u[1]);var d=r.numBitsDiffering(e,c);d<o&&(a=u[1],o=d),e!==t&&(d=r.numBitsDiffering(t,c),d<o&&(a=u[1],o=d))}}catch(p){n={error:p}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return o<=3?new r(a):null},r.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},r.prototype.getDataMask=function(){return this.dataMask},r.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},r.FORMAT_INFO_MASK_QR=21522,r.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],r})(),hA=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},F=(function(){function r(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return r.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},r.prototype.getNumBlocks=function(){var e,t,n=0,i=this.ecBlocks;try{for(var o=hA(i),a=o.next();!a.done;a=o.next()){var s=a.value;n+=s.getCount()}}catch(l){e={error:l}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n},r.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},r.prototype.getECBlocks=function(){return this.ecBlocks},r})(),A=(function(){function r(e,t){this.count=e,this.dataCodewords=t}return r.prototype.getCount=function(){return this.count},r.prototype.getDataCodewords=function(){return this.dataCodewords},r})(),pA=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ln=(function(){function r(e,t){for(var n,i,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=o;var s=0,l=o[0].getECCodewordsPerBlock(),u=o[0].getECBlocks();try{for(var c=pA(u),d=c.next();!d.done;d=c.next()){var p=d.value;s+=p.getCount()*(p.getDataCodewords()+l)}}catch(h){n={error:h}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}this.totalCodewords=s}return r.prototype.getVersionNumber=function(){return this.versionNumber},r.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},r.prototype.getTotalCodewords=function(){return this.totalCodewords},r.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},r.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},r.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new te;try{return this.getVersionForNumber((e-17)/4)}catch{throw new te}},r.getVersionForNumber=function(e){if(e<1||e>40)throw new ve;return r.VERSIONS[e-1]},r.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,n=0,i=0;i<r.VERSION_DECODE_INFO.length;i++){var o=r.VERSION_DECODE_INFO[i];if(o===e)return r.getVersionForNumber(i+7);var a=wh.numBitsDiffering(e,o);a<t&&(n=i+7,t=a)}return t<=3?r.getVersionForNumber(n):null},r.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new Lr(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,i=0;i<n;i++)for(var o=this.alignmentPatternCenters[i]-2,a=0;a<n;a++)i===0&&(a===0||a===n-1)||i===n-1&&a===0||t.setRegion(this.alignmentPatternCenters[a]-2,o,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},r.prototype.toString=function(){return""+this.versionNumber},r.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),r.VERSIONS=[new r(1,new Int32Array(0),new F(7,new A(1,19)),new F(10,new A(1,16)),new F(13,new A(1,13)),new F(17,new A(1,9))),new r(2,Int32Array.from([6,18]),new F(10,new A(1,34)),new F(16,new A(1,28)),new F(22,new A(1,22)),new F(28,new A(1,16))),new r(3,Int32Array.from([6,22]),new F(15,new A(1,55)),new F(26,new A(1,44)),new F(18,new A(2,17)),new F(22,new A(2,13))),new r(4,Int32Array.from([6,26]),new F(20,new A(1,80)),new F(18,new A(2,32)),new F(26,new A(2,24)),new F(16,new A(4,9))),new r(5,Int32Array.from([6,30]),new F(26,new A(1,108)),new F(24,new A(2,43)),new F(18,new A(2,15),new A(2,16)),new F(22,new A(2,11),new A(2,12))),new r(6,Int32Array.from([6,34]),new F(18,new A(2,68)),new F(16,new A(4,27)),new F(24,new A(4,19)),new F(28,new A(4,15))),new r(7,Int32Array.from([6,22,38]),new F(20,new A(2,78)),new F(18,new A(4,31)),new F(18,new A(2,14),new A(4,15)),new F(26,new A(4,13),new A(1,14))),new r(8,Int32Array.from([6,24,42]),new F(24,new A(2,97)),new F(22,new A(2,38),new A(2,39)),new F(22,new A(4,18),new A(2,19)),new F(26,new A(4,14),new A(2,15))),new r(9,Int32Array.from([6,26,46]),new F(30,new A(2,116)),new F(22,new A(3,36),new A(2,37)),new F(20,new A(4,16),new A(4,17)),new F(24,new A(4,12),new A(4,13))),new r(10,Int32Array.from([6,28,50]),new F(18,new A(2,68),new A(2,69)),new F(26,new A(4,43),new A(1,44)),new F(24,new A(6,19),new A(2,20)),new F(28,new A(6,15),new A(2,16))),new r(11,Int32Array.from([6,30,54]),new F(20,new A(4,81)),new F(30,new A(1,50),new A(4,51)),new F(28,new A(4,22),new A(4,23)),new F(24,new A(3,12),new A(8,13))),new r(12,Int32Array.from([6,32,58]),new F(24,new A(2,92),new A(2,93)),new F(22,new A(6,36),new A(2,37)),new F(26,new A(4,20),new A(6,21)),new F(28,new A(7,14),new A(4,15))),new r(13,Int32Array.from([6,34,62]),new F(26,new A(4,107)),new F(22,new A(8,37),new A(1,38)),new F(24,new A(8,20),new A(4,21)),new F(22,new A(12,11),new A(4,12))),new r(14,Int32Array.from([6,26,46,66]),new F(30,new A(3,115),new A(1,116)),new F(24,new A(4,40),new A(5,41)),new F(20,new A(11,16),new A(5,17)),new F(24,new A(11,12),new A(5,13))),new r(15,Int32Array.from([6,26,48,70]),new F(22,new A(5,87),new A(1,88)),new F(24,new A(5,41),new A(5,42)),new F(30,new A(5,24),new A(7,25)),new F(24,new A(11,12),new A(7,13))),new r(16,Int32Array.from([6,26,50,74]),new F(24,new A(5,98),new A(1,99)),new F(28,new A(7,45),new A(3,46)),new F(24,new A(15,19),new A(2,20)),new F(30,new A(3,15),new A(13,16))),new r(17,Int32Array.from([6,30,54,78]),new F(28,new A(1,107),new A(5,108)),new F(28,new A(10,46),new A(1,47)),new F(28,new A(1,22),new A(15,23)),new F(28,new A(2,14),new A(17,15))),new r(18,Int32Array.from([6,30,56,82]),new F(30,new A(5,120),new A(1,121)),new F(26,new A(9,43),new A(4,44)),new F(28,new A(17,22),new A(1,23)),new F(28,new A(2,14),new A(19,15))),new r(19,Int32Array.from([6,30,58,86]),new F(28,new A(3,113),new A(4,114)),new F(26,new A(3,44),new A(11,45)),new F(26,new A(17,21),new A(4,22)),new F(26,new A(9,13),new A(16,14))),new r(20,Int32Array.from([6,34,62,90]),new F(28,new A(3,107),new A(5,108)),new F(26,new A(3,41),new A(13,42)),new F(30,new A(15,24),new A(5,25)),new F(28,new A(15,15),new A(10,16))),new r(21,Int32Array.from([6,28,50,72,94]),new F(28,new A(4,116),new A(4,117)),new F(26,new A(17,42)),new F(28,new A(17,22),new A(6,23)),new F(30,new A(19,16),new A(6,17))),new r(22,Int32Array.from([6,26,50,74,98]),new F(28,new A(2,111),new A(7,112)),new F(28,new A(17,46)),new F(30,new A(7,24),new A(16,25)),new F(24,new A(34,13))),new r(23,Int32Array.from([6,30,54,78,102]),new F(30,new A(4,121),new A(5,122)),new F(28,new A(4,47),new A(14,48)),new F(30,new A(11,24),new A(14,25)),new F(30,new A(16,15),new A(14,16))),new r(24,Int32Array.from([6,28,54,80,106]),new F(30,new A(6,117),new A(4,118)),new F(28,new A(6,45),new A(14,46)),new F(30,new A(11,24),new A(16,25)),new F(30,new A(30,16),new A(2,17))),new r(25,Int32Array.from([6,32,58,84,110]),new F(26,new A(8,106),new A(4,107)),new F(28,new A(8,47),new A(13,48)),new F(30,new A(7,24),new A(22,25)),new F(30,new A(22,15),new A(13,16))),new r(26,Int32Array.from([6,30,58,86,114]),new F(28,new A(10,114),new A(2,115)),new F(28,new A(19,46),new A(4,47)),new F(28,new A(28,22),new A(6,23)),new F(30,new A(33,16),new A(4,17))),new r(27,Int32Array.from([6,34,62,90,118]),new F(30,new A(8,122),new A(4,123)),new F(28,new A(22,45),new A(3,46)),new F(30,new A(8,23),new A(26,24)),new F(30,new A(12,15),new A(28,16))),new r(28,Int32Array.from([6,26,50,74,98,122]),new F(30,new A(3,117),new A(10,118)),new F(28,new A(3,45),new A(23,46)),new F(30,new A(4,24),new A(31,25)),new F(30,new A(11,15),new A(31,16))),new r(29,Int32Array.from([6,30,54,78,102,126]),new F(30,new A(7,116),new A(7,117)),new F(28,new A(21,45),new A(7,46)),new F(30,new A(1,23),new A(37,24)),new F(30,new A(19,15),new A(26,16))),new r(30,Int32Array.from([6,26,52,78,104,130]),new F(30,new A(5,115),new A(10,116)),new F(28,new A(19,47),new A(10,48)),new F(30,new A(15,24),new A(25,25)),new F(30,new A(23,15),new A(25,16))),new r(31,Int32Array.from([6,30,56,82,108,134]),new F(30,new A(13,115),new A(3,116)),new F(28,new A(2,46),new A(29,47)),new F(30,new A(42,24),new A(1,25)),new F(30,new A(23,15),new A(28,16))),new r(32,Int32Array.from([6,34,60,86,112,138]),new F(30,new A(17,115)),new F(28,new A(10,46),new A(23,47)),new F(30,new A(10,24),new A(35,25)),new F(30,new A(19,15),new A(35,16))),new r(33,Int32Array.from([6,30,58,86,114,142]),new F(30,new A(17,115),new A(1,116)),new F(28,new A(14,46),new A(21,47)),new F(30,new A(29,24),new A(19,25)),new F(30,new A(11,15),new A(46,16))),new r(34,Int32Array.from([6,34,62,90,118,146]),new F(30,new A(13,115),new A(6,116)),new F(28,new A(14,46),new A(23,47)),new F(30,new A(44,24),new A(7,25)),new F(30,new A(59,16),new A(1,17))),new r(35,Int32Array.from([6,30,54,78,102,126,150]),new F(30,new A(12,121),new A(7,122)),new F(28,new A(12,47),new A(26,48)),new F(30,new A(39,24),new A(14,25)),new F(30,new A(22,15),new A(41,16))),new r(36,Int32Array.from([6,24,50,76,102,128,154]),new F(30,new A(6,121),new A(14,122)),new F(28,new A(6,47),new A(34,48)),new F(30,new A(46,24),new A(10,25)),new F(30,new A(2,15),new A(64,16))),new r(37,Int32Array.from([6,28,54,80,106,132,158]),new F(30,new A(17,122),new A(4,123)),new F(28,new A(29,46),new A(14,47)),new F(30,new A(49,24),new A(10,25)),new F(30,new A(24,15),new A(46,16))),new r(38,Int32Array.from([6,32,58,84,110,136,162]),new F(30,new A(4,122),new A(18,123)),new F(28,new A(13,46),new A(32,47)),new F(30,new A(48,24),new A(14,25)),new F(30,new A(42,15),new A(32,16))),new r(39,Int32Array.from([6,26,54,82,110,138,166]),new F(30,new A(20,117),new A(4,118)),new F(28,new A(40,47),new A(7,48)),new F(30,new A(43,24),new A(22,25)),new F(30,new A(10,15),new A(67,16))),new r(40,Int32Array.from([6,30,58,86,114,142,170]),new F(30,new A(19,118),new A(6,119)),new F(28,new A(18,47),new A(31,48)),new F(30,new A(34,24),new A(34,25)),new F(30,new A(20,15),new A(61,16)))],r})(),_t;(function(r){r[r.DATA_MASK_000=0]="DATA_MASK_000",r[r.DATA_MASK_001=1]="DATA_MASK_001",r[r.DATA_MASK_010=2]="DATA_MASK_010",r[r.DATA_MASK_011=3]="DATA_MASK_011",r[r.DATA_MASK_100=4]="DATA_MASK_100",r[r.DATA_MASK_101=5]="DATA_MASK_101",r[r.DATA_MASK_110=6]="DATA_MASK_110",r[r.DATA_MASK_111=7]="DATA_MASK_111"})(_t||(_t={}));var Cd=(function(){function r(e,t){this.value=e,this.isMasked=t}return r.prototype.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var i=0;i<t;i++)this.isMasked(n,i)&&e.flip(i,n)},r.values=new Map([[_t.DATA_MASK_000,new r(_t.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[_t.DATA_MASK_001,new r(_t.DATA_MASK_001,function(e,t){return(e&1)===0})],[_t.DATA_MASK_010,new r(_t.DATA_MASK_010,function(e,t){return t%3===0})],[_t.DATA_MASK_011,new r(_t.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[_t.DATA_MASK_100,new r(_t.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[_t.DATA_MASK_101,new r(_t.DATA_MASK_101,function(e,t){return e*t%6===0})],[_t.DATA_MASK_110,new r(_t.DATA_MASK_110,function(e,t){return e*t%6<3})],[_t.DATA_MASK_111,new r(_t.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),r})(),vA=(function(){function r(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new te;this.bitMatrix=e}return r.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var i=this.bitMatrix.getHeight(),o=0,a=i-7,n=i-1;n>=a;n--)o=this.copyBit(8,n,o);for(var t=i-8;t<i;t++)o=this.copyBit(t,8,o);if(this.parsedFormatInfo=wh.decodeFormatInformation(e,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new te},r.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Ln.getVersionForNumber(t);for(var n=0,i=e-11,o=5;o>=0;o--)for(var a=e-9;a>=i;a--)n=this.copyBit(a,o,n);var s=Ln.decodeVersionInformation(n);if(s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;n=0;for(var a=5;a>=0;a--)for(var o=e-9;o>=i;o--)n=this.copyBit(a,o,n);if(s=Ln.decodeVersionInformation(n),s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;throw new te},r.prototype.copyBit=function(e,t,n){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?n<<1|1:n<<1},r.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),n=Cd.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,i);for(var o=t.buildFunctionPattern(),a=!0,s=new Uint8Array(t.getTotalCodewords()),l=0,u=0,c=0,d=i-1;d>0;d-=2){d===6&&d--;for(var p=0;p<i;p++)for(var h=a?i-1-p:p,v=0;v<2;v++)o.get(d-v,h)||(c++,u<<=1,this.bitMatrix.get(d-v,h)&&(u|=1),c===8&&(s[l++]=u,c=0,u=0));a=!a}if(l!==t.getTotalCodewords())throw new te;return s},r.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=Cd.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},r.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},r.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,n=e.getWidth();t<n;t++)for(var i=t+1,o=e.getHeight();i<o;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},r})(),Sd=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gA=(function(){function r(e,t){this.numDataCodewords=e,this.codewords=t}return r.getDataBlocks=function(e,t,n){var i,o,a,s;if(e.length!==t.getTotalCodewords())throw new ve;var l=t.getECBlocksForLevel(n),u=0,c=l.getECBlocks();try{for(var d=Sd(c),p=d.next();!p.done;p=d.next()){var h=p.value;u+=h.getCount()}}catch(k){i={error:k}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}var v=new Array(u),x=0;try{for(var w=Sd(c),g=w.next();!g.done;g=w.next())for(var h=g.value,y=0;y<h.getCount();y++){var m=h.getDataCodewords(),_=l.getECCodewordsPerBlock()+m;v[x++]=new r(m,new Uint8Array(_))}}catch(k){a={error:k}}finally{try{g&&!g.done&&(s=w.return)&&s.call(w)}finally{if(a)throw a.error}}for(var E=v[0].codewords.length,b=v.length-1;b>=0;){var S=v[b].codewords.length;if(S===E)break;b--}b++;for(var B=E-l.getECCodewordsPerBlock(),L=0,y=0;y<B;y++)for(var j=0;j<x;j++)v[j].codewords[y]=e[L++];for(var j=b;j<x;j++)v[j].codewords[B]=e[L++];for(var Y=v[0].codewords.length,y=B;y<Y;y++)for(var j=0;j<x;j++){var M=j<b?y:y+1;v[j].codewords[M]=e[L++]}return v},r.prototype.getNumDataCodewords=function(){return this.numDataCodewords},r.prototype.getCodewords=function(){return this.codewords},r})(),cr;(function(r){r[r.TERMINATOR=0]="TERMINATOR",r[r.NUMERIC=1]="NUMERIC",r[r.ALPHANUMERIC=2]="ALPHANUMERIC",r[r.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",r[r.BYTE=4]="BYTE",r[r.ECI=5]="ECI",r[r.KANJI=6]="KANJI",r[r.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",r[r.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",r[r.HANZI=9]="HANZI"})(cr||(cr={}));var Qe=(function(){function r(e,t,n,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=i,r.FOR_BITS.set(i,this),r.FOR_VALUE.set(e,this)}return r.forBits=function(e){var t=r.FOR_BITS.get(e);if(t===void 0)throw new ve;return t},r.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),n;return t<=9?n=0:t<=26?n=1:n=2,this.characterCountBitsForVersions[n]},r.prototype.getValue=function(){return this.value},r.prototype.getBits=function(){return this.bits},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.prototype.toString=function(){return this.stringValue},r.FOR_BITS=new Map,r.FOR_VALUE=new Map,r.TERMINATOR=new r(cr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),r.NUMERIC=new r(cr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),r.ALPHANUMERIC=new r(cr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),r.STRUCTURED_APPEND=new r(cr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),r.BYTE=new r(cr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),r.ECI=new r(cr.ECI,"ECI",Int32Array.from([0,0,0]),7),r.KANJI=new r(cr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),r.FNC1_FIRST_POSITION=new r(cr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),r.FNC1_SECOND_POSITION=new r(cr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),r.HANZI=new r(cr.HANZI,"HANZI",Int32Array.from([8,10,12]),13),r})(),yA=(function(){function r(){}return r.decode=function(e,t,n,i){var o=new xh(e),a=new Ce,s=new Array,l=-1,u=-1;try{var c=null,d=!1,p=void 0;do{if(o.available()<4)p=Qe.TERMINATOR;else{var h=o.readBits(4);p=Qe.forBits(h)}switch(p){case Qe.TERMINATOR:break;case Qe.FNC1_FIRST_POSITION:case Qe.FNC1_SECOND_POSITION:d=!0;break;case Qe.STRUCTURED_APPEND:if(o.available()<16)throw new te;l=o.readBits(8),u=o.readBits(8);break;case Qe.ECI:var v=r.parseECIValue(o);if(c=yt.getCharacterSetECIByValue(v),c===null)throw new te;break;case Qe.HANZI:var x=o.readBits(4),w=o.readBits(p.getCharacterCountBits(t));x===r.GB2312_SUBSET&&r.decodeHanziSegment(o,a,w);break;default:var g=o.readBits(p.getCharacterCountBits(t));switch(p){case Qe.NUMERIC:r.decodeNumericSegment(o,a,g);break;case Qe.ALPHANUMERIC:r.decodeAlphanumericSegment(o,a,g,d);break;case Qe.BYTE:r.decodeByteSegment(o,a,g,c,s,i);break;case Qe.KANJI:r.decodeKanjiSegment(o,a,g);break;default:throw new te}break}}while(p!==Qe.TERMINATOR)}catch{throw new te}return new Ca(e,a.toString(),s.length===0?null:s,n===null?null:n.toString(),l,u)},r.decodeHanziSegment=function(e,t,n){if(n*13>e.available())throw new te;for(var i=new Uint8Array(2*n),o=0;n>0;){var a=e.readBits(13),s=a/96<<8&4294967295|a%96;s<959?s+=41377:s+=42657,i[o]=s>>8&255,i[o+1]=s&255,o+=2,n--}try{t.append(pr.decode(i,Oe.GB2312))}catch(l){throw new te(l)}},r.decodeKanjiSegment=function(e,t,n){if(n*13>e.available())throw new te;for(var i=new Uint8Array(2*n),o=0;n>0;){var a=e.readBits(13),s=a/192<<8&4294967295|a%192;s<7936?s+=33088:s+=49472,i[o]=s>>8,i[o+1]=s,o+=2,n--}try{t.append(pr.decode(i,Oe.SHIFT_JIS))}catch(l){throw new te(l)}},r.decodeByteSegment=function(e,t,n,i,o,a){if(8*n>e.available())throw new te;for(var s=new Uint8Array(n),l=0;l<n;l++)s[l]=e.readBits(8);var u;i===null?u=Oe.guessEncoding(s,a):u=i.getName();try{t.append(pr.decode(s,u))}catch(c){throw new te(c)}o.push(s)},r.toAlphaNumericChar=function(e){if(e>=r.ALPHANUMERIC_CHARS.length)throw new te;return r.ALPHANUMERIC_CHARS[e]},r.decodeAlphanumericSegment=function(e,t,n,i){for(var o=t.length();n>1;){if(e.available()<11)throw new te;var a=e.readBits(11);t.append(r.toAlphaNumericChar(Math.floor(a/45))),t.append(r.toAlphaNumericChar(a%45)),n-=2}if(n===1){if(e.available()<6)throw new te;t.append(r.toAlphaNumericChar(e.readBits(6)))}if(i)for(var s=o;s<t.length();s++)t.charAt(s)==="%"&&(s<t.length()-1&&t.charAt(s+1)==="%"?t.deleteCharAt(s+1):t.setCharAt(s,""))},r.decodeNumericSegment=function(e,t,n){for(;n>=3;){if(e.available()<10)throw new te;var i=e.readBits(10);if(i>=1e3)throw new te;t.append(r.toAlphaNumericChar(Math.floor(i/100))),t.append(r.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(r.toAlphaNumericChar(i%10)),n-=3}if(n===2){if(e.available()<7)throw new te;var o=e.readBits(7);if(o>=100)throw new te;t.append(r.toAlphaNumericChar(Math.floor(o/10))),t.append(r.toAlphaNumericChar(o%10))}else if(n===1){if(e.available()<4)throw new te;var a=e.readBits(4);if(a>=10)throw new te;t.append(r.toAlphaNumericChar(a))}},r.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var n=e.readBits(8);return(t&63)<<8&4294967295|n}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new te},r.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",r.GB2312_SUBSET=1,r})(),_h=(function(){function r(e){this.mirrored=e}return r.prototype.isMirrored=function(){return this.mirrored},r.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},r})(),Id=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mA=(function(){function r(){this.rsDecoder=new Sa(Zt.QR_CODE_FIELD_256)}return r.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(Lr.parseFromBooleanArray(e),t)},r.prototype.decodeBitMatrix=function(e,t){var n=new vA(e),i=null;try{return this.decodeBitMatrixParser(n,t)}catch(a){i=a}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var o=this.decodeBitMatrixParser(n,t);return o.setOther(new _h(!0)),o}catch(a){throw i!==null?i:a}},r.prototype.decodeBitMatrixParser=function(e,t){var n,i,o,a,s=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),c=gA.getDataBlocks(u,s,l),d=0;try{for(var p=Id(c),h=p.next();!h.done;h=p.next()){var v=h.value;d+=v.getNumDataCodewords()}}catch(b){n={error:b}}finally{try{h&&!h.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}var x=new Uint8Array(d),w=0;try{for(var g=Id(c),y=g.next();!y.done;y=g.next()){var v=y.value,m=v.getCodewords(),_=v.getNumDataCodewords();this.correctErrors(m,_);for(var E=0;E<_;E++)x[w++]=m[E]}}catch(b){o={error:b}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(o)throw o.error}}return yA.decode(x,s,l,t)},r.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new dt}for(var i=0;i<t;i++)e[i]=n[i]},r})(),xA=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),wA=(function(r){xA(e,r);function e(t,n,i){var o=r.call(this,t,n)||this;return o.estimatedModuleSize=i,o}return e.prototype.aboutEquals=function(t,n,i){if(Math.abs(n-this.getY())<=t&&Math.abs(i-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,n,i){var o=(this.getX()+n)/2,a=(this.getY()+t)/2,s=(this.estimatedModuleSize+i)/2;return new e(o,a,s)},e})(le),_A=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bA=(function(){function r(e,t,n,i,o,a,s){this.image=e,this.startX=t,this.startY=n,this.width=i,this.height=o,this.moduleSize=a,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return r.prototype.find=function(){for(var e=this.startX,t=this.height,n=this.width,i=e+n,o=this.startY+t/2,a=new Int32Array(3),s=this.image,l=0;l<t;l++){var u=o+((l&1)===0?Math.floor((l+1)/2):-Math.floor((l+1)/2));a[0]=0,a[1]=0,a[2]=0;for(var c=e;c<i&&!s.get(c,u);)c++;for(var d=0;c<i;){if(s.get(c,u))if(d===1)a[1]++;else if(d===2){if(this.foundPatternCross(a)){var p=this.handlePossibleCenter(a,u,c);if(p!==null)return p}a[0]=a[2],a[1]=1,a[2]=0,d=1}else a[++d]++;else d===1&&d++,a[d]++;c++}if(this.foundPatternCross(a)){var p=this.handlePossibleCenter(a,u,i);if(p!==null)return p}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new V},r.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},r.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,n=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=n)return!1;return!0},r.prototype.crossCheckVertical=function(e,t,n,i){var o=this.image,a=o.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var l=e;l>=0&&o.get(t,l)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&!o.get(t,l)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<a&&o.get(t,l)&&s[1]<=n;)s[1]++,l++;if(l===a||s[1]>n)return NaN;for(;l<a&&!o.get(t,l)&&s[2]<=n;)s[2]++,l++;if(s[2]>n)return NaN;var u=s[0]+s[1]+s[2];return 5*Math.abs(u-i)>=2*i?NaN:this.foundPatternCross(s)?r.centerFromEnd(s,l):NaN},r.prototype.handlePossibleCenter=function(e,t,n){var i,o,a=e[0]+e[1]+e[2],s=r.centerFromEnd(e,n),l=this.crossCheckVertical(t,s,2*e[1],a);if(!isNaN(l)){var u=(e[0]+e[1]+e[2])/3;try{for(var c=_A(this.possibleCenters),d=c.next();!d.done;d=c.next()){var p=d.value;if(p.aboutEquals(u,l,s))return p.combineEstimate(l,s,u)}}catch(v){i={error:v}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}var h=new wA(s,l,u);this.possibleCenters.push(h),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(h)}return null},r})(),EA=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),AA=(function(r){EA(e,r);function e(t,n,i,o){var a=r.call(this,t,n)||this;return a.estimatedModuleSize=i,a.count=o,o===void 0&&(a.count=1),a}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,n,i){if(Math.abs(n-this.getY())<=t&&Math.abs(i-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,n,i){var o=this.count+1,a=(this.count*this.getX()+n)/o,s=(this.count*this.getY()+t)/o,l=(this.count*this.estimatedModuleSize+i)/o;return new e(a,s,l,o)},e})(le),CA=(function(){function r(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return r.prototype.getBottomLeft=function(){return this.bottomLeft},r.prototype.getTopLeft=function(){return this.topLeft},r.prototype.getTopRight=function(){return this.topRight},r})(),Ii=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},SA=(function(){function r(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return r.prototype.getImage=function(){return this.image},r.prototype.getPossibleCenters=function(){return this.possibleCenters},r.prototype.find=function(e){var t=e!=null&&e.get(Ze.TRY_HARDER)!==void 0,n=e!=null&&e.get(Ze.PURE_BARCODE)!==void 0,i=this.image,o=i.getHeight(),a=i.getWidth(),s=Math.floor(3*o/(4*r.MAX_MODULES));(s<r.MIN_SKIP||t)&&(s=r.MIN_SKIP);for(var l=!1,u=new Int32Array(5),c=s-1;c<o&&!l;c+=s){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;for(var d=0,p=0;p<a;p++)if(i.get(p,c))(d&1)===1&&d++,u[d]++;else if((d&1)===0)if(d===4)if(r.foundPatternCross(u)){var h=this.handlePossibleCenter(u,c,p,n);if(h===!0)if(s=2,this.hasSkipped===!0)l=this.haveMultiplyConfirmedCenters();else{var v=this.findRowSkip();v>u[2]&&(c+=v-u[2]-s,p=a-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,d=3;continue}d=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,d=3;else u[++d]++;else u[d]++;if(r.foundPatternCross(u)){var h=this.handlePossibleCenter(u,c,a,n);h===!0&&(s=u[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}}var x=this.selectBestPatterns();return le.orderBestPatterns(x),new CA(x)},r.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},r.foundPatternCross=function(e){for(var t=0,n=0;n<5;n++){var i=e[n];if(i===0)return!1;t+=i}if(t<7)return!1;var o=t/7,a=o/2;return Math.abs(o-e[0])<a&&Math.abs(o-e[1])<a&&Math.abs(3*o-e[2])<3*a&&Math.abs(o-e[3])<a&&Math.abs(o-e[4])<a},r.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},r.prototype.crossCheckDiagonal=function(e,t,n,i){for(var o=this.getCrossCheckStateCount(),a=0,s=this.image;e>=a&&t>=a&&s.get(t-a,e-a);)o[2]++,a++;if(e<a||t<a)return!1;for(;e>=a&&t>=a&&!s.get(t-a,e-a)&&o[1]<=n;)o[1]++,a++;if(e<a||t<a||o[1]>n)return!1;for(;e>=a&&t>=a&&s.get(t-a,e-a)&&o[0]<=n;)o[0]++,a++;if(o[0]>n)return!1;var l=s.getHeight(),u=s.getWidth();for(a=1;e+a<l&&t+a<u&&s.get(t+a,e+a);)o[2]++,a++;if(e+a>=l||t+a>=u)return!1;for(;e+a<l&&t+a<u&&!s.get(t+a,e+a)&&o[3]<n;)o[3]++,a++;if(e+a>=l||t+a>=u||o[3]>=n)return!1;for(;e+a<l&&t+a<u&&s.get(t+a,e+a)&&o[4]<n;)o[4]++,a++;if(o[4]>=n)return!1;var c=o[0]+o[1]+o[2]+o[3]+o[4];return Math.abs(c-i)<2*i&&r.foundPatternCross(o)},r.prototype.crossCheckVertical=function(e,t,n,i){for(var o=this.image,a=o.getHeight(),s=this.getCrossCheckStateCount(),l=e;l>=0&&o.get(t,l);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!o.get(t,l)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&o.get(t,l)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<a&&o.get(t,l);)s[2]++,l++;if(l===a)return NaN;for(;l<a&&!o.get(t,l)&&s[3]<n;)s[3]++,l++;if(l===a||s[3]>=n)return NaN;for(;l<a&&o.get(t,l)&&s[4]<n;)s[4]++,l++;if(s[4]>=n)return NaN;var u=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(u-i)>=2*i?NaN:r.foundPatternCross(s)?r.centerFromEnd(s,l):NaN},r.prototype.crossCheckHorizontal=function(e,t,n,i){for(var o=this.image,a=o.getWidth(),s=this.getCrossCheckStateCount(),l=e;l>=0&&o.get(l,t);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!o.get(l,t)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&o.get(l,t)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<a&&o.get(l,t);)s[2]++,l++;if(l===a)return NaN;for(;l<a&&!o.get(l,t)&&s[3]<n;)s[3]++,l++;if(l===a||s[3]>=n)return NaN;for(;l<a&&o.get(l,t)&&s[4]<n;)s[4]++,l++;if(s[4]>=n)return NaN;var u=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(u-i)>=i?NaN:r.foundPatternCross(s)?r.centerFromEnd(s,l):NaN},r.prototype.handlePossibleCenter=function(e,t,n,i){var o=e[0]+e[1]+e[2]+e[3]+e[4],a=r.centerFromEnd(e,n),s=this.crossCheckVertical(t,Math.floor(a),e[2],o);if(!isNaN(s)&&(a=this.crossCheckHorizontal(Math.floor(a),Math.floor(s),e[2],o),!isNaN(a)&&(!i||this.crossCheckDiagonal(Math.floor(s),Math.floor(a),e[2],o)))){for(var l=o/7,u=!1,c=this.possibleCenters,d=0,p=c.length;d<p;d++){var h=c[d];if(h.aboutEquals(l,s,a)){c[d]=h.combineEstimate(s,a,l),u=!0;break}}if(!u){var v=new AA(a,s,l);c.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return!0}return!1},r.prototype.findRowSkip=function(){var e,t,n=this.possibleCenters.length;if(n<=1)return 0;var i=null;try{for(var o=Ii(this.possibleCenters),a=o.next();!a.done;a=o.next()){var s=a.value;if(s.getCount()>=r.CENTER_QUORUM)if(i==null)i=s;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-s.getX())-Math.abs(i.getY()-s.getY()))/2)}}catch(l){e={error:l}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return 0},r.prototype.haveMultiplyConfirmedCenters=function(){var e,t,n,i,o=0,a=0,s=this.possibleCenters.length;try{for(var l=Ii(this.possibleCenters),u=l.next();!u.done;u=l.next()){var c=u.value;c.getCount()>=r.CENTER_QUORUM&&(o++,a+=c.getEstimatedModuleSize())}}catch(x){e={error:x}}finally{try{u&&!u.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}if(o<3)return!1;var d=a/s,p=0;try{for(var h=Ii(this.possibleCenters),v=h.next();!v.done;v=h.next()){var c=v.value;p+=Math.abs(c.getEstimatedModuleSize()-d)}}catch(x){n={error:x}}finally{try{v&&!v.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}return p<=.05*a},r.prototype.selectBestPatterns=function(){var e,t,n,i,o=this.possibleCenters.length;if(o<3)throw new V;var a=this.possibleCenters,s;if(o>3){var l=0,u=0;try{for(var c=Ii(this.possibleCenters),d=c.next();!d.done;d=c.next()){var p=d.value,h=p.getEstimatedModuleSize();l+=h,u+=h*h}}catch(E){e={error:E}}finally{try{d&&!d.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}s=l/o;var v=Math.sqrt(u/o-s*s);a.sort(function(E,b){var S=Math.abs(b.getEstimatedModuleSize()-s),B=Math.abs(E.getEstimatedModuleSize()-s);return S<B?-1:S>B?1:0});for(var x=Math.max(.2*s,v),w=0;w<a.length&&a.length>3;w++){var g=a[w];Math.abs(g.getEstimatedModuleSize()-s)>x&&(a.splice(w,1),w--)}}if(a.length>3){var l=0;try{for(var y=Ii(a),m=y.next();!m.done;m=y.next()){var _=m.value;l+=_.getEstimatedModuleSize()}}catch(b){n={error:b}}finally{try{m&&!m.done&&(i=y.return)&&i.call(y)}finally{if(n)throw n.error}}s=l/a.length,a.sort(function(b,S){if(S.getCount()===b.getCount()){var B=Math.abs(S.getEstimatedModuleSize()-s),L=Math.abs(b.getEstimatedModuleSize()-s);return B<L?1:B>L?-1:0}else return S.getCount()-b.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]},r.CENTER_QUORUM=2,r.MIN_SKIP=3,r.MAX_MODULES=57,r})(),IA=(function(){function r(e){this.image=e}return r.prototype.getImage=function(){return this.image},r.prototype.getResultPointCallback=function(){return this.resultPointCallback},r.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Ze.NEED_RESULT_POINT_CALLBACK);var t=new SA(this.image,this.resultPointCallback),n=t.find(e);return this.processFinderPatternInfo(n)},r.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),n=e.getTopRight(),i=e.getBottomLeft(),o=this.calculateModuleSize(t,n,i);if(o<1)throw new V("No pattern found in proccess finder.");var a=r.computeDimension(t,n,i,o),s=Ln.getProvisionalVersionForDimension(a),l=s.getDimensionForVersion()-7,u=null;if(s.getAlignmentPatternCenters().length>0)for(var c=n.getX()-t.getX()+i.getX(),d=n.getY()-t.getY()+i.getY(),p=1-3/l,h=Math.floor(t.getX()+p*(c-t.getX())),v=Math.floor(t.getY()+p*(d-t.getY())),x=4;x<=16;x<<=1)try{u=this.findAlignmentInRegion(o,h,v,x);break}catch(m){if(!(m instanceof V))throw m}var w=r.createTransform(t,n,i,u,a),g=r.sampleGrid(this.image,w,a),y;return u===null?y=[i,t,n]:y=[i,t,n,u],new Wl(g,y)},r.createTransform=function(e,t,n,i,o){var a=o-3.5,s,l,u,c;return i!==null?(s=i.getX(),l=i.getY(),u=a-3,c=u):(s=t.getX()-e.getX()+n.getX(),l=t.getY()-e.getY()+n.getY(),u=a,c=a),vh.quadrilateralToQuadrilateral(3.5,3.5,a,3.5,u,c,3.5,a,e.getX(),e.getY(),t.getX(),t.getY(),s,l,n.getX(),n.getY())},r.sampleGrid=function(e,t,n){var i=Kl.getInstance();return i.sampleGridWithTransform(e,n,n,t)},r.computeDimension=function(e,t,n,i){var o=Pe.round(le.distance(e,t)/i),a=Pe.round(le.distance(e,n)/i),s=Math.floor((o+a)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new V("Dimensions could be not found.")}return s},r.prototype.calculateModuleSize=function(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2},r.prototype.calculateModuleSizeOneWay=function(e,t){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?i/7:isNaN(i)?n/7:(n+i)/14},r.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,n,i){var o=this.sizeOfBlackWhiteBlackRun(e,t,n,i),a=1,s=e-(n-e);s<0?(a=e/(e-s),s=0):s>=this.image.getWidth()&&(a=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);var l=Math.floor(t-(i-t)*a);return a=1,l<0?(a=t/(t-l),l=0):l>=this.image.getHeight()&&(a=(this.image.getHeight()-1-t)/(l-t),l=this.image.getHeight()-1),s=Math.floor(e+(s-e)*a),o+=this.sizeOfBlackWhiteBlackRun(e,t,s,l),o-1},r.prototype.sizeOfBlackWhiteBlackRun=function(e,t,n,i){var o=Math.abs(i-t)>Math.abs(n-e);if(o){var a=e;e=t,t=a,a=n,n=i,i=a}for(var s=Math.abs(n-e),l=Math.abs(i-t),u=-s/2,c=e<n?1:-1,d=t<i?1:-1,p=0,h=n+c,v=e,x=t;v!==h;v+=c){var w=o?x:v,g=o?v:x;if(p===1===this.image.get(w,g)){if(p===2)return Pe.distance(v,x,e,t);p++}if(u+=l,u>0){if(x===i)break;x+=d,u-=s}}return p===2?Pe.distance(n+c,i,e,t):NaN},r.prototype.findAlignmentInRegion=function(e,t,n,i){var o=Math.floor(i*e),a=Math.max(0,t-o),s=Math.min(this.image.getWidth()-1,t+o);if(s-a<e*3)throw new V("Alignment top exceeds estimated module size.");var l=Math.max(0,n-o),u=Math.min(this.image.getHeight()-1,n+o);if(u-l<e*3)throw new V("Alignment bottom exceeds estimated module size.");var c=new bA(this.image,a,l,s-a,u-l,e,this.resultPointCallback);return c.find()},r})(),na=(function(){function r(){this.decoder=new mA}return r.prototype.getDecoder=function(){return this.decoder},r.prototype.decode=function(e,t){var n,i;if(t!=null&&t.get(Ze.PURE_BARCODE)!==void 0){var o=r.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(o,t),i=r.NO_POINTS}else{var a=new IA(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(a.getBits(),t),i=a.getPoints()}n.getOther()instanceof _h&&n.getOther().applyMirroredCorrection(i);var s=new Ft(n.getText(),n.getRawBytes(),void 0,i,pe.QR_CODE,void 0),l=n.getByteSegments();l!==null&&s.putMetadata(Tt.BYTE_SEGMENTS,l);var u=n.getECLevel();return u!==null&&s.putMetadata(Tt.ERROR_CORRECTION_LEVEL,u),n.hasStructuredAppend()&&(s.putMetadata(Tt.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),s.putMetadata(Tt.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),s},r.prototype.reset=function(){},r.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t===null||n===null)throw new V;var i=this.moduleSize(t,e),o=t[1],a=n[1],s=t[0],l=n[0];if(s>=l||o>=a)throw new V;if(a-o!==l-s&&(l=s+(a-o),l>=e.getWidth()))throw new V;var u=Math.round((l-s+1)/i),c=Math.round((a-o+1)/i);if(u<=0||c<=0)throw new V;if(c!==u)throw new V;var d=Math.floor(i/2);o+=d,s+=d;var p=s+Math.floor((u-1)*i)-l;if(p>0){if(p>d)throw new V;s-=p}var h=o+Math.floor((c-1)*i)-a;if(h>0){if(h>d)throw new V;o-=h}for(var v=new Lr(u,c),x=0;x<c;x++)for(var w=o+Math.floor(x*i),g=0;g<u;g++)e.get(s+Math.floor(g*i),w)&&v.set(g,x);return v},r.moduleSize=function(e,t){for(var n=t.getHeight(),i=t.getWidth(),o=e[0],a=e[1],s=!0,l=0;o<i&&a<n;){if(s!==t.get(o,a)){if(++l===5)break;s=!s}o++,a++}if(o===i||a===n)throw new V;return(o-e[0])/7},r.NO_POINTS=new Array,r})(),OA=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Te=(function(){function r(){}return r.prototype.PDF417Common=function(){},r.getBitCountSum=function(e){return Pe.sum(e)},r.toIntArray=function(e){var t,n;if(e==null||!e.length)return r.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),o=0;try{for(var a=OA(e),s=a.next();!s.done;s=a.next()){var l=s.value;i[o++]=l}}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i},r.getCodeword=function(e){var t=mt.binarySearch(r.SYMBOL_TABLE,e&262143);return t<0?-1:(r.CODEWORD_TABLE[t]-1)%r.NUMBER_OF_CODEWORDS},r.NUMBER_OF_CODEWORDS=929,r.MAX_CODEWORDS_IN_BARCODE=r.NUMBER_OF_CODEWORDS-1,r.MIN_ROWS_IN_BARCODE=3,r.MAX_ROWS_IN_BARCODE=90,r.MODULES_IN_CODEWORD=17,r.MODULES_IN_STOP_PATTERN=18,r.BARS_IN_MODULE=8,r.EMPTY_INT_ARRAY=new Int32Array([]),r.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),r.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),r})(),TA=(function(){function r(e,t){this.bits=e,this.points=t}return r.prototype.getBits=function(){return this.bits},r.prototype.getPoints=function(){return this.points},r})(),RA=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},PA=(function(){function r(){}return r.detectMultiple=function(e,t,n){var i=e.getBlackMatrix(),o=r.detect(n,i);return o.length||(i=i.clone(),i.rotate180(),o=r.detect(n,i)),new TA(i,o)},r.detect=function(e,t){for(var n,i,o=new Array,a=0,s=0,l=!1;a<t.getHeight();){var u=r.findVertices(t,a,s);if(u[0]==null&&u[3]==null){if(!l)break;l=!1,s=0;try{for(var c=(n=void 0,RA(o)),d=c.next();!d.done;d=c.next()){var p=d.value;p[1]!=null&&(a=Math.trunc(Math.max(a,p[1].getY()))),p[3]!=null&&(a=Math.max(a,Math.trunc(p[3].getY())))}}catch(h){n={error:h}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}a+=r.ROW_STEP;continue}if(l=!0,o.push(u),!e)break;u[2]!=null?(s=Math.trunc(u[2].getX()),a=Math.trunc(u[2].getY())):(s=Math.trunc(u[4].getX()),a=Math.trunc(u[4].getY()))}return o},r.findVertices=function(e,t,n){var i=e.getHeight(),o=e.getWidth(),a=new Array(8);return r.copyToResult(a,r.findRowsWithPattern(e,i,o,t,n,r.START_PATTERN),r.INDEXES_START_PATTERN),a[4]!=null&&(n=Math.trunc(a[4].getX()),t=Math.trunc(a[4].getY())),r.copyToResult(a,r.findRowsWithPattern(e,i,o,t,n,r.STOP_PATTERN),r.INDEXES_STOP_PATTERN),a},r.copyToResult=function(e,t,n){for(var i=0;i<n.length;i++)e[n[i]]=t[i]},r.findRowsWithPattern=function(e,t,n,i,o,a){for(var s=new Array(4),l=!1,u=new Int32Array(a.length);i<t;i+=r.ROW_STEP){var c=r.findGuardPattern(e,o,i,n,!1,a,u);if(c!=null){for(;i>0;){var d=r.findGuardPattern(e,o,--i,n,!1,a,u);if(d!=null)c=d;else{i++;break}}s[0]=new le(c[0],i),s[1]=new le(c[1],i),l=!0;break}}var p=i+1;if(l){for(var h=0,d=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);p<t;p++){var c=r.findGuardPattern(e,d[0],p,n,!1,a,u);if(c!=null&&Math.abs(d[0]-c[0])<r.MAX_PATTERN_DRIFT&&Math.abs(d[1]-c[1])<r.MAX_PATTERN_DRIFT)d=c,h=0;else{if(h>r.SKIPPED_ROW_COUNT_MAX)break;h++}}p-=h+1,s[2]=new le(d[0],p),s[3]=new le(d[1],p)}return p-i<r.BARCODE_MIN_HEIGHT&&mt.fill(s,null),s},r.findGuardPattern=function(e,t,n,i,o,a,s){mt.fillWithin(s,0,s.length,0);for(var l=t,u=0;e.get(l,n)&&l>0&&u++<r.MAX_PIXEL_DRIFT;)l--;for(var c=l,d=0,p=a.length,h=o;c<i;c++){var v=e.get(c,n);if(v!==h)s[d]++;else{if(d===p-1){if(r.patternMatchVariance(s,a,r.MAX_INDIVIDUAL_VARIANCE)<r.MAX_AVG_VARIANCE)return new Int32Array([l,c]);l+=s[0]+s[1],Ye.arraycopy(s,2,s,0,d-1),s[d-1]=0,s[d]=0,d--}else d++;s[d]=1,h=!h}}return d===p-1&&r.patternMatchVariance(s,a,r.MAX_INDIVIDUAL_VARIANCE)<r.MAX_AVG_VARIANCE?new Int32Array([l,c-1]):null},r.patternMatchVariance=function(e,t,n){for(var i=e.length,o=0,a=0,s=0;s<i;s++)o+=e[s],a+=t[s];if(o<a)return 1/0;var l=o/a;n*=l;for(var u=0,c=0;c<i;c++){var d=e[c],p=t[c]*l,h=d>p?d-p:p-d;if(h>n)return 1/0;u+=h}return u/o},r.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),r.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),r.MAX_AVG_VARIANCE=.42,r.MAX_INDIVIDUAL_VARIANCE=.8,r.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),r.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),r.MAX_PIXEL_DRIFT=3,r.MAX_PATTERN_DRIFT=5,r.SKIPPED_ROW_COUNT_MAX=25,r.ROW_STEP=5,r.BARCODE_MIN_HEIGHT=10,r})(),kA=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Mn=(function(){function r(e,t){if(t.length===0)throw new ve;this.field=e;var n=t.length;if(n>1&&t[0]===0){for(var i=1;i<n&&t[i]===0;)i++;i===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-i),Ye.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return r.prototype.getCoefficients=function(){return this.coefficients},r.prototype.getDegree=function(){return this.coefficients.length-1},r.prototype.isZero=function(){return this.coefficients[0]===0},r.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},r.prototype.evaluateAt=function(e){var t,n;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var o=kA(this.coefficients),a=o.next();!a.done;a=o.next()){var s=a.value;i=this.field.add(i,s)}}catch(d){t={error:d}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i}for(var l=this.coefficients[0],u=this.coefficients.length,c=1;c<u;c++)l=this.field.add(this.field.multiply(e,l),this.coefficients[c]);return l},r.prototype.add=function(e){if(!this.field.equals(e.field))throw new ve("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,n=e.coefficients;if(t.length>n.length){var i=t;t=n,n=i}var o=new Int32Array(n.length),a=n.length-t.length;Ye.arraycopy(n,0,o,0,a);for(var s=a;s<n.length;s++)o[s]=this.field.add(t[s-a],n[s]);return new r(this.field,o)},r.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new ve("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},r.prototype.multiply=function(e){return e instanceof r?this.multiplyOther(e):this.multiplyScalar(e)},r.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new ve("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new r(this.field,new Int32Array([0]));for(var t=this.coefficients,n=t.length,i=e.coefficients,o=i.length,a=new Int32Array(n+o-1),s=0;s<n;s++)for(var l=t[s],u=0;u<o;u++)a[s+u]=this.field.add(a[s+u],this.field.multiply(l,i[u]));return new r(this.field,a)},r.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new r(this.field,t)},r.prototype.multiplyScalar=function(e){if(e===0)return new r(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,n=new Int32Array(t),i=0;i<t;i++)n[i]=this.field.multiply(this.coefficients[i],e);return new r(this.field,n)},r.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new ve;if(t===0)return new r(this.field,new Int32Array([0]));for(var n=this.coefficients.length,i=new Int32Array(n+e),o=0;o<n;o++)i[o]=this.field.multiply(this.coefficients[o],t);return new r(this.field,i)},r.prototype.toString=function(){for(var e=new Ce,t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(t===0||n!==1)&&e.append(n),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},r})(),NA=(function(){function r(){}return r.prototype.add=function(e,t){return(e+t)%this.modulus},r.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},r.prototype.exp=function(e){return this.expTable[e]},r.prototype.log=function(e){if(e===0)throw new ve;return this.logTable[e]},r.prototype.inverse=function(e){if(e===0)throw new ph;return this.expTable[this.modulus-this.logTable[e]-1]},r.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},r.prototype.getSize=function(){return this.modulus},r.prototype.equals=function(e){return e===this},r})(),DA=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),MA=(function(r){DA(e,r);function e(t,n){var i=r.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var o=1,a=0;a<t;a++)i.expTable[a]=o,o=o*n%t;for(var a=0;a<t-1;a++)i.logTable[i.expTable[a]]=a;return i.zero=new Mn(i,new Int32Array([0])),i.one=new Mn(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,n){if(t<0)throw new ve;if(n===0)return this.zero;var i=new Int32Array(t+1);return i[0]=n,new Mn(this,i)},e.PDF417_GF=new e(Te.NUMBER_OF_CODEWORDS,3),e})(NA),BA=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},LA=(function(){function r(){this.field=MA.PDF417_GF}return r.prototype.decode=function(e,t,n){for(var i,o,a=new Mn(this.field,e),s=new Int32Array(t),l=!1,u=t;u>0;u--){var c=a.evaluateAt(this.field.exp(u));s[t-u]=c,c!==0&&(l=!0)}if(!l)return 0;var d=this.field.getOne();if(n!=null)try{for(var p=BA(n),h=p.next();!h.done;h=p.next()){var v=h.value,x=this.field.exp(e.length-1-v),w=new Mn(this.field,new Int32Array([this.field.subtract(0,x),1]));d=d.multiply(w)}}catch(B){i={error:B}}finally{try{h&&!h.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}for(var g=new Mn(this.field,s),y=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),g,t),m=y[0],_=y[1],E=this.findErrorLocations(m),b=this.findErrorMagnitudes(_,m,E),u=0;u<E.length;u++){var S=e.length-1-this.field.log(E[u]);if(S<0)throw dt.getChecksumInstance();e[S]=this.field.subtract(e[S],b[u])}return E.length},r.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var o=e,a=t,s=this.field.getZero(),l=this.field.getOne();a.getDegree()>=Math.round(n/2);){var u=o,c=s;if(o=a,s=l,o.isZero())throw dt.getChecksumInstance();a=u;for(var d=this.field.getZero(),p=o.getCoefficient(o.getDegree()),h=this.field.inverse(p);a.getDegree()>=o.getDegree()&&!a.isZero();){var v=a.getDegree()-o.getDegree(),x=this.field.multiply(a.getCoefficient(a.getDegree()),h);d=d.add(this.field.buildMonomial(v,x)),a=a.subtract(o.multiplyByMonomial(v,x))}l=d.multiply(s).subtract(c).negative()}var w=l.getCoefficient(0);if(w===0)throw dt.getChecksumInstance();var g=this.field.inverse(w),y=l.multiply(g),m=a.multiply(g);return[y,m]},r.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),n=new Int32Array(t),i=0,o=1;o<this.field.getSize()&&i<t;o++)e.evaluateAt(o)===0&&(n[i]=this.field.inverse(o),i++);if(i!==t)throw dt.getChecksumInstance();return n},r.prototype.findErrorMagnitudes=function(e,t,n){for(var i=t.getDegree(),o=new Int32Array(i),a=1;a<=i;a++)o[i-a]=this.field.multiply(a,t.getCoefficient(a));for(var s=new Mn(this.field,o),l=n.length,u=new Int32Array(l),a=0;a<l;a++){var c=this.field.inverse(n[a]),d=this.field.subtract(0,e.evaluateAt(c)),p=this.field.inverse(s.evaluateAt(c));u[a]=this.field.multiply(d,p)}return u},r})(),dl=(function(){function r(e,t,n,i,o){e instanceof r?this.constructor_2(e):this.constructor_1(e,t,n,i,o)}return r.prototype.constructor_1=function(e,t,n,i,o){var a=t==null||n==null,s=i==null||o==null;if(a&&s)throw new V;a?(t=new le(0,i.getY()),n=new le(0,o.getY())):s&&(i=new le(e.getWidth()-1,t.getY()),o=new le(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=i,this.bottomRight=o,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(i.getX(),o.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(n.getY(),o.getY()))},r.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},r.merge=function(e,t){return e==null?t:t==null?e:new r(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},r.prototype.addMissingRows=function(e,t,n){var i=this.topLeft,o=this.bottomLeft,a=this.topRight,s=this.bottomRight;if(e>0){var l=n?this.topLeft:this.topRight,u=Math.trunc(l.getY()-e);u<0&&(u=0);var c=new le(l.getX(),u);n?i=c:a=c}if(t>0){var d=n?this.bottomLeft:this.bottomRight,p=Math.trunc(d.getY()+t);p>=this.image.getHeight()&&(p=this.image.getHeight()-1);var h=new le(d.getX(),p);n?o=h:s=h}return new r(this.image,i,o,a,s)},r.prototype.getMinX=function(){return this.minX},r.prototype.getMaxX=function(){return this.maxX},r.prototype.getMinY=function(){return this.minY},r.prototype.getMaxY=function(){return this.maxY},r.prototype.getTopLeft=function(){return this.topLeft},r.prototype.getTopRight=function(){return this.topRight},r.prototype.getBottomLeft=function(){return this.bottomLeft},r.prototype.getBottomRight=function(){return this.bottomRight},r})(),FA=(function(){function r(e,t,n,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}return r.prototype.getColumnCount=function(){return this.columnCount},r.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},r.prototype.getRowCount=function(){return this.rowCount},r.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},r.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},r})(),Yl=(function(){function r(){this.buffer=""}return r.form=function(e,t){var n=-1;function i(a,s,l,u,c,d){if(a==="%%")return"%";if(t[++n]!==void 0){a=u?parseInt(u.substr(1)):void 0;var p=c?parseInt(c.substr(1)):void 0,h;switch(d){case"s":h=t[n];break;case"c":h=t[n][0];break;case"f":h=parseFloat(t[n]).toFixed(a);break;case"p":h=parseFloat(t[n]).toPrecision(a);break;case"e":h=parseFloat(t[n]).toExponential(a);break;case"x":h=parseInt(t[n]).toString(p||16);break;case"d":h=parseFloat(parseInt(t[n],p||10).toPrecision(a)).toFixed(0);break}h=typeof h=="object"?JSON.stringify(h):(+h).toString(p);for(var v=parseInt(l),x=l&&l[0]+""=="0"?"0":" ";h.length<v;)h=s!==void 0?h+x:x+h;return h}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)},r.prototype.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.buffer+=r.form(e,t)},r.prototype.toString=function(){return this.buffer},r})(),$A=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bh=(function(){function r(e){this.boundingBox=new dl(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return r.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var n=1;n<r.MAX_NEARBY_DISTANCE;n++){var i=this.imageRowToCodewordIndex(e)-n;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+n,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},r.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},r.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},r.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},r.prototype.getBoundingBox=function(){return this.boundingBox},r.prototype.getCodewords=function(){return this.codewords},r.prototype.toString=function(){var e,t,n=new Yl,i=0;try{for(var o=$A(this.codewords),a=o.next();!a.done;a=o.next()){var s=a.value;if(s==null){n.format("%3d:    |   %n",i++);continue}n.format("%3d: %3d|%3d%n",i++,s.getRowNumber(),s.getValue())}}catch(l){e={error:l}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n.toString()},r.MAX_NEARBY_DISTANCE=5,r})(),jA=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},UA=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Ni=(function(){function r(){this.values=new Map}return r.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},r.prototype.getValue=function(){var e,t,n=-1,i=new Array,o=function(d,p){var h={getKey:function(){return d},getValue:function(){return p}};h.getValue()>n?(n=h.getValue(),i=[],i.push(h.getKey())):h.getValue()===n&&i.push(h.getKey())};try{for(var a=jA(this.values.entries()),s=a.next();!s.done;s=a.next()){var l=UA(s.value,2),u=l[0],c=l[1];o(u,c)}}catch(d){e={error:d}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return Te.toIntArray(i)},r.prototype.getConfidence=function(e){return this.values.get(e)},r})(),VA=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),As=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Od=(function(r){VA(e,r);function e(t,n){var i=r.call(this,t)||this;return i._isLeft=n,i}return e.prototype.setRowNumbers=function(){var t,n;try{for(var i=As(this.getCodewords()),o=i.next();!o.done;o=i.next()){var a=o.value;a?.setRowNumberAsRowIndicatorColumn()}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,t);for(var i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),a=this._isLeft?i.getBottomLeft():i.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(o.getY())),l=this.imageRowToCodewordIndex(Math.trunc(a.getY())),u=-1,c=1,d=0,p=s;p<l;p++)if(n[p]!=null){var h=n[p],v=h.getRowNumber()-u;if(v===0)d++;else if(v===1)c=Math.max(c,d),d=1,u=h.getRowNumber();else if(v<0||h.getRowNumber()>=t.getRowCount()||v>p)n[p]=null;else{var x=void 0;c>2?x=(c-2)*v:x=v;for(var w=x>=p,g=1;g<=x&&!w;g++)w=n[p-g]!=null;w?n[p]=null:(u=h.getRowNumber(),d=1)}}},e.prototype.getRowHeights=function(){var t,n,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var o=new Int32Array(i.getRowCount());try{for(var a=As(this.getCodewords()),s=a.next();!s.done;s=a.next()){var l=s.value;if(l!=null){var u=l.getRowNumber();if(u>=o.length)continue;o[u]++}}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),o=this._isLeft?n.getBottomLeft():n.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(i.getY())),s=this.imageRowToCodewordIndex(Math.trunc(o.getY())),l=this.getCodewords(),u=-1,c=a;c<s;c++)if(l[c]!=null){var d=l[c];d.setRowNumberAsRowIndicatorColumn();var p=d.getRowNumber()-u;p===0||(p===1?u=d.getRowNumber():d.getRowNumber()>=t.getRowCount()?l[c]=null:u=d.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,n,i=this.getCodewords(),o=new Ni,a=new Ni,s=new Ni,l=new Ni;try{for(var u=As(i),c=u.next();!c.done;c=u.next()){var d=c.value;if(d!=null){d.setRowNumberAsRowIndicatorColumn();var p=d.getValue()%30,h=d.getRowNumber();switch(this._isLeft||(h+=2),h%3){case 0:a.setValue(p*3+1);break;case 1:l.setValue(p/3),s.setValue(p%3);break;case 2:o.setValue(p+1);break}}}}catch(x){t={error:x}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}if(o.getValue().length===0||a.getValue().length===0||s.getValue().length===0||l.getValue().length===0||o.getValue()[0]<1||a.getValue()[0]+s.getValue()[0]<Te.MIN_ROWS_IN_BARCODE||a.getValue()[0]+s.getValue()[0]>Te.MAX_ROWS_IN_BARCODE)return null;var v=new FA(o.getValue()[0],a.getValue()[0],s.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(i,v),v},e.prototype.removeIncorrectCodewords=function(t,n){for(var i=0;i<t.length;i++){var o=t[i];if(t[i]!=null){var a=o.getValue()%30,s=o.getRowNumber();if(s>n.getRowCount()){t[i]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:a*3+1!==n.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(a/3)!==n.getErrorCorrectionLevel()||a%3!==n.getRowCountLowerPart())&&(t[i]=null);break;case 2:a+1!==n.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+r.prototype.toString.call(this)},e})(bh),HA=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},GA=(function(){function r(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return r.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Te.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},r.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},r.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var n=this.detectionResultColumns[t].getCodewords(),i=0;i<n.length;i++)n[i]!=null&&(n[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,n));return e},r.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},r.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&t[n]!=null&&e[n].getRowNumber()===t[n].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var o=this.detectionResultColumns[i].getCodewords()[n];o!=null&&(o.setRowNumber(e[n].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[n]=null))}}},r.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<t.length;n++)if(t[n]!=null)for(var i=t[n].getRowNumber(),o=0,a=this.barcodeColumnCount+1;a>0&&o<this.ADJUST_ROW_NUMBER_SKIP;a--){var s=this.detectionResultColumns[a].getCodewords()[n];s!=null&&(o=r.adjustRowNumberIfValid(i,o,s),s.hasValidRowNumber()||e++)}return e},r.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),n=0;n<t.length;n++)if(t[n]!=null)for(var i=t[n].getRowNumber(),o=0,a=1;a<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;a++){var s=this.detectionResultColumns[a].getCodewords()[n];s!=null&&(o=r.adjustRowNumberIfValid(i,o,s),s.hasValidRowNumber()||e++)}return e},r.adjustRowNumberIfValid=function(e,t,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t},r.prototype.adjustRowNumbers=function(e,t,n){var i,o;if(this.detectionResultColumns[e-1]!=null){var a=n[t],s=this.detectionResultColumns[e-1].getCodewords(),l=s;this.detectionResultColumns[e+1]!=null&&(l=this.detectionResultColumns[e+1].getCodewords());var u=new Array(14);u[2]=s[t],u[3]=l[t],t>0&&(u[0]=n[t-1],u[4]=s[t-1],u[5]=l[t-1]),t>1&&(u[8]=n[t-2],u[10]=s[t-2],u[11]=l[t-2]),t<n.length-1&&(u[1]=n[t+1],u[6]=s[t+1],u[7]=l[t+1]),t<n.length-2&&(u[9]=n[t+2],u[12]=s[t+2],u[13]=l[t+2]);try{for(var c=HA(u),d=c.next();!d.done;d=c.next()){var p=d.value;if(r.adjustRowNumber(a,p))return}}catch(h){i={error:h}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}}},r.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},r.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},r.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},r.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},r.prototype.setBoundingBox=function(e){this.boundingBox=e},r.prototype.getBoundingBox=function(){return this.boundingBox},r.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},r.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},r.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new Yl,n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var o=this.detectionResultColumns[i].getCodewords()[n];if(o==null){t.format("    |   ");continue}t.format(" %3d|%3d",o.getRowNumber(),o.getValue())}t.format("%n")}return t.toString()},r})(),qA=(function(){function r(e,t,n,i){this.rowNumber=r.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(i)}return r.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},r.prototype.isValidRowNumber=function(e){return e!==r.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},r.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},r.prototype.getWidth=function(){return this.endX-this.startX},r.prototype.getStartX=function(){return this.startX},r.prototype.getEndX=function(){return this.endX},r.prototype.getBucket=function(){return this.bucket},r.prototype.getValue=function(){return this.value},r.prototype.getRowNumber=function(){return this.rowNumber},r.prototype.setRowNumber=function(e){this.rowNumber=e},r.prototype.toString=function(){return this.rowNumber+"|"+this.value},r.BARCODE_ROW_UNKNOWN=-1,r})(),zA=(function(){function r(){}return r.initialize=function(){for(var e=0;e<Te.SYMBOL_TABLE.length;e++)for(var t=Te.SYMBOL_TABLE[e],n=t&1,i=0;i<Te.BARS_IN_MODULE;i++){for(var o=0;(t&1)===n;)o+=1,t>>=1;n=t&1,r.RATIOS_TABLE[e]||(r.RATIOS_TABLE[e]=new Array(Te.BARS_IN_MODULE)),r.RATIOS_TABLE[e][Te.BARS_IN_MODULE-i-1]=Math.fround(o/Te.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},r.getDecodedValue=function(e){var t=r.getDecodedCodewordValue(r.sampleBitCounts(e));return t!==-1?t:r.getClosestDecodedValue(e)},r.sampleBitCounts=function(e){for(var t=Pe.sum(e),n=new Int32Array(Te.BARS_IN_MODULE),i=0,o=0,a=0;a<Te.MODULES_IN_CODEWORD;a++){var s=t/(2*Te.MODULES_IN_CODEWORD)+a*t/Te.MODULES_IN_CODEWORD;o+e[i]<=s&&(o+=e[i],i++),n[i]++}return n},r.getDecodedCodewordValue=function(e){var t=r.getBitValue(e);return Te.getCodeword(t)===-1?-1:t},r.getBitValue=function(e){for(var t=0,n=0;n<e.length;n++)for(var i=0;i<e[n];i++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)},r.getClosestDecodedValue=function(e){var t=Pe.sum(e),n=new Array(Te.BARS_IN_MODULE);if(t>1)for(var i=0;i<n.length;i++)n[i]=Math.fround(e[i]/t);var o=ll.MAX_VALUE,a=-1;this.bSymbolTableReady||r.initialize();for(var s=0;s<r.RATIOS_TABLE.length;s++){for(var l=0,u=r.RATIOS_TABLE[s],c=0;c<Te.BARS_IN_MODULE;c++){var d=Math.fround(u[c]-n[c]);if(l+=Math.fround(d*d),l>=o)break}l<o&&(o=l,a=Te.SYMBOL_TABLE[s])}return a},r.bSymbolTableReady=!1,r.RATIOS_TABLE=new Array(Te.SYMBOL_TABLE.length).map(function(e){return new Array(Te.BARS_IN_MODULE)}),r})(),WA=(function(){function r(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return r.prototype.getSegmentIndex=function(){return this.segmentIndex},r.prototype.setSegmentIndex=function(e){this.segmentIndex=e},r.prototype.getFileId=function(){return this.fileId},r.prototype.setFileId=function(e){this.fileId=e},r.prototype.getOptionalData=function(){return this.optionalData},r.prototype.setOptionalData=function(e){this.optionalData=e},r.prototype.isLastSegment=function(){return this.lastSegment},r.prototype.setLastSegment=function(e){this.lastSegment=e},r.prototype.getSegmentCount=function(){return this.segmentCount},r.prototype.setSegmentCount=function(e){this.segmentCount=e},r.prototype.getSender=function(){return this.sender||null},r.prototype.setSender=function(e){this.sender=e},r.prototype.getAddressee=function(){return this.addressee||null},r.prototype.setAddressee=function(e){this.addressee=e},r.prototype.getFileName=function(){return this.fileName},r.prototype.setFileName=function(e){this.fileName=e},r.prototype.getFileSize=function(){return this.fileSize},r.prototype.setFileSize=function(e){this.fileSize=e},r.prototype.getChecksum=function(){return this.checksum},r.prototype.setChecksum=function(e){this.checksum=e},r.prototype.getTimestamp=function(){return this.timestamp},r.prototype.setTimestamp=function(e){this.timestamp=e},r})(),Td=(function(){function r(){}return r.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},r})(),KA=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),XA=(function(r){KA(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="NullPointerException",e})(Jt),YA=(function(){function r(){}return r.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},r.prototype.writeBytesOffset=function(e,t,n){if(e==null)throw new XA;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new zl;if(n===0)return;for(var i=0;i<n;i++)this.write(e[t+i])},r.prototype.flush=function(){},r.prototype.close=function(){},r})(),ZA=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),JA=(function(r){ZA(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e})(Jt),QA=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),eC=(function(r){QA(e,r);function e(t){t===void 0&&(t=32);var n=r.call(this)||this;if(n.count=0,t<0)throw new ve("Negative initial size: "+t);return n.buf=new Uint8Array(t),n}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var n=this.buf.length,i=n<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new JA;i=Se.MAX_VALUE}this.buf=mt.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,n,i){if(n<0||n>t.length||i<0||n+i-t.length>0)throw new zl;this.ensureCapacity(this.count+i),Ye.arraycopy(t,n,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return mt.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e})(YA),He;(function(r){r[r.ALPHA=0]="ALPHA",r[r.LOWER=1]="LOWER",r[r.MIXED=2]="MIXED",r[r.PUNCT=3]="PUNCT",r[r.ALPHA_SHIFT=4]="ALPHA_SHIFT",r[r.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(He||(He={}));function Eh(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Oo;function ln(r){if(typeof Oo>"u"&&(Oo=Eh()),Oo===null)throw new Error("BigInt is not supported!");return Oo(r)}function tC(){var r=[];r[0]=ln(1);var e=ln(900);r[1]=e;for(var t=2;t<16;t++)r[t]=r[t-1]*e;return r}var rC=(function(){function r(){}return r.decode=function(e,t){var n=new Ce(""),i=yt.ISO8859_1;n.enableDecoding(i);for(var o=1,a=e[o++],s=new WA;o<e[0];){switch(a){case r.TEXT_COMPACTION_MODE_LATCH:o=r.textCompaction(e,o,n);break;case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:o=r.byteCompaction(a,e,i,o,n);break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[o++]);break;case r.NUMERIC_COMPACTION_MODE_LATCH:o=r.numericCompaction(e,o,n);break;case r.ECI_CHARSET:yt.getCharacterSetECIByValue(e[o++]);break;case r.ECI_GENERAL_PURPOSE:o+=2;break;case r.ECI_USER_DEFINED:o++;break;case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=r.decodeMacroBlock(e,o,s);break;case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:throw new te;default:o--,o=r.textCompaction(e,o,n);break}if(o<e.length)a=e[o++];else throw te.getFormatInstance()}if(n.length()===0)throw te.getFormatInstance();var l=new Ca(null,n.toString(),null,t);return l.setOther(s),l},r.decodeMacroBlock=function(e,t,n){if(t+r.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw te.getFormatInstance();for(var i=new Int32Array(r.NUMBER_OF_SEQUENCE_CODEWORDS),o=0;o<r.NUMBER_OF_SEQUENCE_CODEWORDS;o++,t++)i[o]=e[t];n.setSegmentIndex(Se.parseInt(r.decodeBase900toBase10(i,r.NUMBER_OF_SEQUENCE_CODEWORDS)));var a=new Ce;t=r.textCompaction(e,t,a),n.setFileId(a.toString());var s=-1;for(e[t]===r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=t+1);t<e[0];)switch(e[t]){case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case r.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new Ce;t=r.textCompaction(e,t+1,l),n.setFileName(l.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var u=new Ce;t=r.textCompaction(e,t+1,u),n.setSender(u.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var c=new Ce;t=r.textCompaction(e,t+1,c),n.setAddressee(c.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var d=new Ce;t=r.numericCompaction(e,t+1,d),n.setSegmentCount(Se.parseInt(d.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var p=new Ce;t=r.numericCompaction(e,t+1,p),n.setTimestamp(Td.parseLong(p.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var h=new Ce;t=r.numericCompaction(e,t+1,h),n.setChecksum(Se.parseInt(h.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var v=new Ce;t=r.numericCompaction(e,t+1,v),n.setFileSize(Td.parseLong(v.toString()));break;default:throw te.getFormatInstance()}break;case r.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw te.getFormatInstance()}if(s!==-1){var x=t-s;n.isLastSegment()&&x--,n.setOptionalData(mt.copyOfRange(e,s,s+x))}return t},r.textCompaction=function(e,t,n){for(var i=new Int32Array((e[0]-t)*2),o=new Int32Array((e[0]-t)*2),a=0,s=!1;t<e[0]&&!s;){var l=e[t++];if(l<r.TEXT_COMPACTION_MODE_LATCH)i[a]=l/30,i[a+1]=l%30,a+=2;else switch(l){case r.TEXT_COMPACTION_MODE_LATCH:i[a++]=r.TEXT_COMPACTION_MODE_LATCH;break;case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:t--,s=!0;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[a]=r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=e[t++],o[a]=l,a++;break}}return r.decodeTextCompaction(i,o,a,n),t},r.decodeTextCompaction=function(e,t,n,i){for(var o=He.ALPHA,a=He.ALPHA,s=0;s<n;){var l=e[s],u="";switch(o){case He.ALPHA:if(l<26)u=String.fromCharCode(65+l);else switch(l){case 26:u=" ";break;case r.LL:o=He.LOWER;break;case r.ML:o=He.MIXED;break;case r.PS:a=o,o=He.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:o=He.ALPHA;break}break;case He.LOWER:if(l<26)u=String.fromCharCode(97+l);else switch(l){case 26:u=" ";break;case r.AS:a=o,o=He.ALPHA_SHIFT;break;case r.ML:o=He.MIXED;break;case r.PS:a=o,o=He.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:o=He.ALPHA;break}break;case He.MIXED:if(l<r.PL)u=r.MIXED_CHARS[l];else switch(l){case r.PL:o=He.PUNCT;break;case 26:u=" ";break;case r.LL:o=He.LOWER;break;case r.AL:o=He.ALPHA;break;case r.PS:a=o,o=He.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:o=He.ALPHA;break}break;case He.PUNCT:if(l<r.PAL)u=r.PUNCT_CHARS[l];else switch(l){case r.PAL:o=He.ALPHA;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:o=He.ALPHA;break}break;case He.ALPHA_SHIFT:if(o=a,l<26)u=String.fromCharCode(65+l);else switch(l){case 26:u=" ";break;case r.TEXT_COMPACTION_MODE_LATCH:o=He.ALPHA;break}break;case He.PUNCT_SHIFT:if(o=a,l<r.PAL)u=r.PUNCT_CHARS[l];else switch(l){case r.PAL:o=He.ALPHA;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:o=He.ALPHA;break}break}u!==""&&i.append(u),s++}},r.byteCompaction=function(e,t,n,i,o){var a=new eC,s=0,l=0,u=!1;switch(e){case r.BYTE_COMPACTION_MODE_LATCH:for(var c=new Int32Array(6),d=t[i++];i<t[0]&&!u;)switch(c[s++]=d,l=900*l+d,d=t[i++],d){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:i--,u=!0;break;default:if(s%5===0&&s>0){for(var p=0;p<6;++p)a.write(Number(ln(l)>>ln(8*(5-p))));l=0,s=0}break}i===t[0]&&d<r.TEXT_COMPACTION_MODE_LATCH&&(c[s++]=d);for(var h=0;h<s;h++)a.write(c[h]);break;case r.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!u;){var v=t[i++];if(v<r.TEXT_COMPACTION_MODE_LATCH)s++,l=900*l+v;else switch(v){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:i--,u=!0;break}if(s%5===0&&s>0){for(var p=0;p<6;++p)a.write(Number(ln(l)>>ln(8*(5-p))));l=0,s=0}}break}return o.append(pr.decode(a.toByteArray(),n)),i},r.numericCompaction=function(e,t,n){for(var i=0,o=!1,a=new Int32Array(r.MAX_NUMERIC_CODEWORDS);t<e[0]&&!o;){var s=e[t++];if(t===e[0]&&(o=!0),s<r.TEXT_COMPACTION_MODE_LATCH)a[i]=s,i++;else switch(s){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:t--,o=!0;break}(i%r.MAX_NUMERIC_CODEWORDS===0||s===r.NUMERIC_COMPACTION_MODE_LATCH||o)&&i>0&&(n.append(r.decodeBase900toBase10(a,i)),i=0)}return t},r.decodeBase900toBase10=function(e,t){for(var n=ln(0),i=0;i<t;i++)n+=r.EXP900[t-i-1]*ln(e[i]);var o=n.toString();if(o.charAt(0)!=="1")throw new te;return o.substring(1)},r.TEXT_COMPACTION_MODE_LATCH=900,r.BYTE_COMPACTION_MODE_LATCH=901,r.NUMERIC_COMPACTION_MODE_LATCH=902,r.BYTE_COMPACTION_MODE_LATCH_6=924,r.ECI_USER_DEFINED=925,r.ECI_GENERAL_PURPOSE=926,r.ECI_CHARSET=927,r.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,r.MACRO_PDF417_TERMINATOR=922,r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,r.MAX_NUMERIC_CODEWORDS=15,r.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,r.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,r.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,r.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,r.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,r.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,r.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,r.PL=25,r.LL=27,r.AS=27,r.ML=28,r.AL=28,r.PS=29,r.PAL=29,r.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,r.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",r.EXP900=Eh()?tC():[],r.NUMBER_OF_SEQUENCE_CODEWORDS=2,r})(),Oi=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nC=(function(){function r(){}return r.decode=function(e,t,n,i,o,a,s){for(var l=new dl(e,t,n,i,o),u=null,c=null,d,p=!0;;p=!1){if(t!=null&&(u=r.getRowIndicatorColumn(e,l,t,!0,a,s)),i!=null&&(c=r.getRowIndicatorColumn(e,l,i,!1,a,s)),d=r.merge(u,c),d==null)throw V.getNotFoundInstance();var h=d.getBoundingBox();if(p&&h!=null&&(h.getMinY()<l.getMinY()||h.getMaxY()>l.getMaxY()))l=h;else break}d.setBoundingBox(l);var v=d.getBarcodeColumnCount()+1;d.setDetectionResultColumn(0,u),d.setDetectionResultColumn(v,c);for(var x=u!=null,w=1;w<=v;w++){var g=x?w:v-w;if(d.getDetectionResultColumn(g)===void 0){var y=void 0;g===0||g===v?y=new Od(l,g===0):y=new bh(l),d.setDetectionResultColumn(g,y);for(var m=-1,_=m,E=l.getMinY();E<=l.getMaxY();E++){if(m=r.getStartColumn(d,g,E,x),m<0||m>l.getMaxX()){if(_===-1)continue;m=_}var b=r.detectCodeword(e,l.getMinX(),l.getMaxX(),x,m,E,a,s);b!=null&&(y.setCodeword(E,b),_=m,a=Math.min(a,b.getWidth()),s=Math.max(s,b.getWidth()))}}}return r.createDecoderResult(d)},r.merge=function(e,t){if(e==null&&t==null)return null;var n=r.getBarcodeMetadata(e,t);if(n==null)return null;var i=dl.merge(r.adjustBoundingBox(e),r.adjustBoundingBox(t));return new GA(n,i)},r.adjustBoundingBox=function(e){var t,n;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var o=r.getMax(i),a=0;try{for(var s=Oi(i),l=s.next();!l.done;l=s.next()){var u=l.value;if(a+=o-u,u>0)break}}catch(h){t={error:h}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}for(var c=e.getCodewords(),d=0;a>0&&c[d]==null;d++)a--;for(var p=0,d=i.length-1;d>=0&&(p+=o-i[d],!(i[d]>0));d--);for(var d=c.length-1;p>0&&c[d]==null;d--)p--;return e.getBoundingBox().addMissingRows(a,p,e.isLeft())},r.getMax=function(e){var t,n,i=-1;try{for(var o=Oi(e),a=o.next();!a.done;a=o.next()){var s=a.value;i=Math.max(i,s)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i},r.getBarcodeMetadata=function(e,t){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?n:n.getColumnCount()!==i.getColumnCount()&&n.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&n.getRowCount()!==i.getRowCount()?null:n},r.getRowIndicatorColumn=function(e,t,n,i,o,a){for(var s=new Od(t,i),l=0;l<2;l++)for(var u=l===0?1:-1,c=Math.trunc(Math.trunc(n.getX())),d=Math.trunc(Math.trunc(n.getY()));d<=t.getMaxY()&&d>=t.getMinY();d+=u){var p=r.detectCodeword(e,0,e.getWidth(),i,c,d,o,a);p!=null&&(s.setCodeword(d,p),i?c=p.getStartX():c=p.getEndX())}return s},r.adjustCodewordCount=function(e,t){var n=t[0][1],i=n.getValue(),o=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-r.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(o<1||o>Te.MAX_CODEWORDS_IN_BARCODE)throw V.getNotFoundInstance();n.setValue(o)}else i[0]!==o&&n.setValue(o)},r.createDecoderResult=function(e){var t=r.createBarcodeMatrix(e);r.adjustCodewordCount(e,t);for(var n=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),o=[],a=new Array,s=0;s<e.getBarcodeRowCount();s++)for(var l=0;l<e.getBarcodeColumnCount();l++){var u=t[s][l+1].getValue(),c=s*e.getBarcodeColumnCount()+l;u.length===0?n.push(c):u.length===1?i[c]=u[0]:(a.push(c),o.push(u))}for(var d=new Array(o.length),p=0;p<d.length;p++)d[p]=o[p];return r.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Te.toIntArray(n),Te.toIntArray(a),d)},r.createDecoderResultFromAmbiguousValues=function(e,t,n,i,o){for(var a=new Int32Array(i.length),s=100;s-- >0;){for(var l=0;l<a.length;l++)t[i[l]]=o[l][a[l]];try{return r.decodeCodewords(t,e,n)}catch(c){var u=c instanceof dt;if(!u)throw c}if(a.length===0)throw dt.getChecksumInstance();for(var l=0;l<a.length;l++)if(a[l]<o[l].length-1){a[l]++;break}else if(a[l]=0,l===a.length-1)throw dt.getChecksumInstance()}throw dt.getChecksumInstance()},r.createBarcodeMatrix=function(e){for(var t,n,i,o,a=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),s=0;s<a.length;s++)for(var l=0;l<a[s].length;l++)a[s][l]=new Ni;var u=0;try{for(var c=Oi(e.getDetectionResultColumns()),d=c.next();!d.done;d=c.next()){var p=d.value;if(p!=null)try{for(var h=(i=void 0,Oi(p.getCodewords())),v=h.next();!v.done;v=h.next()){var x=v.value;if(x!=null){var w=x.getRowNumber();if(w>=0){if(w>=a.length)continue;a[w][u].setValue(x.getValue())}}}}catch(g){i={error:g}}finally{try{v&&!v.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}u++}}catch(g){t={error:g}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return a},r.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},r.getStartColumn=function(e,t,n,i){var o,a,s=i?1:-1,l=null;if(r.isValidBarcodeColumn(e,t-s)&&(l=e.getDetectionResultColumn(t-s).getCodeword(n)),l!=null)return i?l.getEndX():l.getStartX();if(l=e.getDetectionResultColumn(t).getCodewordNearby(n),l!=null)return i?l.getStartX():l.getEndX();if(r.isValidBarcodeColumn(e,t-s)&&(l=e.getDetectionResultColumn(t-s).getCodewordNearby(n)),l!=null)return i?l.getEndX():l.getStartX();for(var u=0;r.isValidBarcodeColumn(e,t-s);){t-=s;try{for(var c=(o=void 0,Oi(e.getDetectionResultColumn(t).getCodewords())),d=c.next();!d.done;d=c.next()){var p=d.value;if(p!=null)return(i?p.getEndX():p.getStartX())+s*u*(p.getEndX()-p.getStartX())}}catch(h){o={error:h}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(o)throw o.error}}u++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},r.detectCodeword=function(e,t,n,i,o,a,s,l){o=r.adjustCodewordStartColumn(e,t,n,i,o,a);var u=r.getModuleBitCount(e,t,n,i,o,a);if(u==null)return null;var c,d=Pe.sum(u);if(i)c=o+d;else{for(var p=0;p<u.length/2;p++){var h=u[p];u[p]=u[u.length-1-p],u[u.length-1-p]=h}c=o,o=c-d}if(!r.checkCodewordSkew(d,s,l))return null;var v=zA.getDecodedValue(u),x=Te.getCodeword(v);return x===-1?null:new qA(o,c,r.getCodewordBucketNumber(v),x)},r.getModuleBitCount=function(e,t,n,i,o,a){for(var s=o,l=new Int32Array(8),u=0,c=i?1:-1,d=i;(i?s<n:s>=t)&&u<l.length;)e.get(s,a)===d?(l[u]++,s+=c):(u++,d=!d);return u===l.length||s===(i?n:t)&&u===l.length-1?l:null},r.getNumberOfECCodeWords=function(e){return 2<<e},r.adjustCodewordStartColumn=function(e,t,n,i,o,a){for(var s=o,l=i?-1:1,u=0;u<2;u++){for(;(i?s>=t:s<n)&&i===e.get(s,a);){if(Math.abs(o-s)>r.CODEWORD_SKEW_SIZE)return o;s+=l}l=-l,i=!i}return s},r.checkCodewordSkew=function(e,t,n){return t-r.CODEWORD_SKEW_SIZE<=e&&e<=n+r.CODEWORD_SKEW_SIZE},r.decodeCodewords=function(e,t,n){if(e.length===0)throw te.getFormatInstance();var i=1<<t+1,o=r.correctErrors(e,n,i);r.verifyCodewordCount(e,i);var a=rC.decode(e,""+t);return a.setErrorsCorrected(o),a.setErasures(n.length),a},r.correctErrors=function(e,t,n){if(t!=null&&t.length>n/2+r.MAX_ERRORS||n<0||n>r.MAX_EC_CODEWORDS)throw dt.getChecksumInstance();return r.errorCorrection.decode(e,n,t)},r.verifyCodewordCount=function(e,t){if(e.length<4)throw te.getFormatInstance();var n=e[0];if(n>e.length)throw te.getFormatInstance();if(n===0)if(t<e.length)e[0]=e.length-t;else throw te.getFormatInstance()},r.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),n=0,i=t.length-1;!((e&1)!==n&&(n=e&1,i--,i<0));)t[i]++,e>>=1;return t},r.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},r.getCodewordBucketNumber_number=function(e){return r.getCodewordBucketNumber(r.getBitCountForCodeword(e))},r.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},r.toString=function(e){for(var t=new Yl,n=0;n<e.length;n++){t.format("Row %2d: ",n);for(var i=0;i<e[n].length;i++){var o=e[n][i];o.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}t.format("%n")}return t.toString()},r.CODEWORD_SKEW_SIZE=2,r.MAX_ERRORS=3,r.MAX_EC_CODEWORDS=512,r.errorCorrection=new LA,r})(),iC=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ia=(function(){function r(){}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n=r.decode(e,t,!1);if(n==null||n.length===0||n[0]==null)throw V.getNotFoundInstance();return n[0]},r.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return r.decode(e,t,!0)}catch(n){throw n instanceof te||n instanceof dt?V.getNotFoundInstance():n}},r.decode=function(e,t,n){var i,o,a=new Array,s=PA.detectMultiple(e,t,n);try{for(var l=iC(s.getPoints()),u=l.next();!u.done;u=l.next()){var c=u.value,d=nC.decode(s.getBits(),c[4],c[5],c[6],c[7],r.getMinCodewordWidth(c),r.getMaxCodewordWidth(c)),p=new Ft(d.getText(),d.getRawBytes(),void 0,c,pe.PDF_417);p.putMetadata(Tt.ERROR_CORRECTION_LEVEL,d.getECLevel());var h=d.getOther();h!=null&&p.putMetadata(Tt.PDF417_EXTRA_METADATA,h),a.push(p)}}catch(v){i={error:v}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return a.map(function(v){return v})},r.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},r.getMinWidth=function(e,t){return e==null||t==null?Se.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},r.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(r.getMaxWidth(e[0],e[4]),r.getMaxWidth(e[6],e[2])*Te.MODULES_IN_CODEWORD/Te.MODULES_IN_STOP_PATTERN),Math.max(r.getMaxWidth(e[1],e[5]),r.getMaxWidth(e[7],e[3])*Te.MODULES_IN_CODEWORD/Te.MODULES_IN_STOP_PATTERN)))},r.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(r.getMinWidth(e[0],e[4]),r.getMinWidth(e[6],e[2])*Te.MODULES_IN_CODEWORD/Te.MODULES_IN_STOP_PATTERN),Math.min(r.getMinWidth(e[1],e[5]),r.getMinWidth(e[7],e[3])*Te.MODULES_IN_CODEWORD/Te.MODULES_IN_STOP_PATTERN)))},r.prototype.reset=function(){},r})(),oC=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Rd=(function(r){oC(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ReaderException",e})(Jt),Pd=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ah=(function(){function r(){}return r.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},r.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},r.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(Ze.TRY_HARDER)!==void 0,n=e==null?null:e.get(Ze.POSSIBLE_FORMATS),i=new Array;if(n!=null){var o=n.some(function(a){return a===pe.UPC_A||a===pe.UPC_E||a===pe.EAN_13||a===pe.EAN_8||a===pe.CODABAR||a===pe.CODE_39||a===pe.CODE_93||a===pe.CODE_128||a===pe.ITF||a===pe.RSS_14||a===pe.RSS_EXPANDED});o&&!t&&i.push(new ri(e)),n.includes(pe.QR_CODE)&&i.push(new na),n.includes(pe.DATA_MATRIX)&&i.push(new ra),n.includes(pe.AZTEC)&&i.push(new ea),n.includes(pe.PDF_417)&&i.push(new ia),o&&t&&i.push(new ri(e))}i.length===0&&(t||i.push(new ri(e)),i.push(new na),i.push(new ra),i.push(new ea),i.push(new ia),t&&i.push(new ri(e))),this.readers=i},r.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var n=Pd(this.readers),i=n.next();!i.done;i=n.next()){var o=i.value;o.reset()}}catch(a){e={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},r.prototype.decodeInternal=function(e){var t,n;if(this.readers===null)throw new Rd("No readers where selected, nothing can be read.");try{for(var i=Pd(this.readers),o=i.next();!o.done;o=i.next()){var a=o.value;try{return a.decode(e,this.hints)}catch(s){if(s instanceof Rd)continue}}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}throw new V("No MultiFormat Readers were able to detect the code.")},r})(),aC=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){aC(e,r);function e(t,n){t===void 0&&(t=null),n===void 0&&(n=500);var i=this,o=new Ah;return o.setHints(t),i=r.call(this,o,n)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e})(wi);var sC=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){sC(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new ia,t)||this}return e})(wi);var lC=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){lC(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new na,t)||this}return e})(wi);var fl;(function(r){r[r.ERROR_CORRECTION=0]="ERROR_CORRECTION",r[r.CHARACTER_SET=1]="CHARACTER_SET",r[r.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",r[r.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",r[r.MIN_SIZE=4]="MIN_SIZE",r[r.MAX_SIZE=5]="MAX_SIZE",r[r.MARGIN=6]="MARGIN",r[r.PDF417_COMPACT=7]="PDF417_COMPACT",r[r.PDF417_COMPACTION=8]="PDF417_COMPACTION",r[r.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",r[r.AZTEC_LAYERS=10]="AZTEC_LAYERS",r[r.QR_VERSION=11]="QR_VERSION",r[r.GS1_FORMAT=12]="GS1_FORMAT",r[r.FORCE_C40=13]="FORCE_C40"})(fl||(fl={}));const To=fl;var Ch=(function(){function r(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new dn(e,Int32Array.from([1])))}return r.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var n=t[t.length-1],i=this.field,o=t.length;o<=e;o++){var a=n.multiply(new dn(i,Int32Array.from([1,i.exp(o-1+i.getGeneratorBase())])));t.push(a),n=a}return t[e]},r.prototype.encode=function(e,t){if(t===0)throw new ve("No error correction bytes");var n=e.length-t;if(n<=0)throw new ve("No data bytes provided");var i=this.buildGenerator(t),o=new Int32Array(n);Ye.arraycopy(e,0,o,0,n);var a=new dn(this.field,o);a=a.multiplyByMonomial(t,1);for(var s=a.divide(i)[1],l=s.getCoefficients(),u=t-l.length,c=0;c<u;c++)e[n+c]=0;Ye.arraycopy(l,0,e,n+u,l.length)},r})(),Di=(function(){function r(){}return r.applyMaskPenaltyRule1=function(e){return r.applyMaskPenaltyRule1Internal(e,!0)+r.applyMaskPenaltyRule1Internal(e,!1)},r.applyMaskPenaltyRule2=function(e){for(var t=0,n=e.getArray(),i=e.getWidth(),o=e.getHeight(),a=0;a<o-1;a++)for(var s=n[a],l=0;l<i-1;l++){var u=s[l];u===s[l+1]&&u===n[a+1][l]&&u===n[a+1][l+1]&&t++}return r.N2*t},r.applyMaskPenaltyRule3=function(e){for(var t=0,n=e.getArray(),i=e.getWidth(),o=e.getHeight(),a=0;a<o;a++)for(var s=0;s<i;s++){var l=n[a];s+6<i&&l[s]===1&&l[s+1]===0&&l[s+2]===1&&l[s+3]===1&&l[s+4]===1&&l[s+5]===0&&l[s+6]===1&&(r.isWhiteHorizontal(l,s-4,s)||r.isWhiteHorizontal(l,s+7,s+11))&&t++,a+6<o&&n[a][s]===1&&n[a+1][s]===0&&n[a+2][s]===1&&n[a+3][s]===1&&n[a+4][s]===1&&n[a+5][s]===0&&n[a+6][s]===1&&(r.isWhiteVertical(n,s,a-4,a)||r.isWhiteVertical(n,s,a+7,a+11))&&t++}return t*r.N3},r.isWhiteHorizontal=function(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(var i=t;i<n;i++)if(e[i]===1)return!1;return!0},r.isWhiteVertical=function(e,t,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(var o=n;o<i;o++)if(e[o][t]===1)return!1;return!0},r.applyMaskPenaltyRule4=function(e){for(var t=0,n=e.getArray(),i=e.getWidth(),o=e.getHeight(),a=0;a<o;a++)for(var s=n[a],l=0;l<i;l++)s[l]===1&&t++;var u=e.getHeight()*e.getWidth(),c=Math.floor(Math.abs(t*2-u)*10/u);return c*r.N4},r.getDataMaskBit=function(e,t,n){var i,o;switch(e){case 0:i=n+t&1;break;case 1:i=n&1;break;case 2:i=t%3;break;case 3:i=(n+t)%3;break;case 4:i=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:o=n*t,i=(o&1)+o%3;break;case 6:o=n*t,i=(o&1)+o%3&1;break;case 7:o=n*t,i=o%3+(n+t&1)&1;break;default:throw new ve("Invalid mask pattern: "+e)}return i===0},r.applyMaskPenaltyRule1Internal=function(e,t){for(var n=0,i=t?e.getHeight():e.getWidth(),o=t?e.getWidth():e.getHeight(),a=e.getArray(),s=0;s<i;s++){for(var l=0,u=-1,c=0;c<o;c++){var d=t?a[s][c]:a[c][s];d===u?l++:(l>=5&&(n+=r.N1+(l-5)),l=1,u=d)}l>=5&&(n+=r.N1+(l-5))}return n},r.N1=3,r.N2=3,r.N3=40,r.N4=10,r})(),uC=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cC=(function(){function r(e,t){this.width=e,this.height=t;for(var n=new Array(t),i=0;i!==t;i++)n[i]=new Uint8Array(e);this.bytes=n}return r.prototype.getHeight=function(){return this.height},r.prototype.getWidth=function(){return this.width},r.prototype.get=function(e,t){return this.bytes[t][e]},r.prototype.getArray=function(){return this.bytes},r.prototype.setNumber=function(e,t,n){this.bytes[t][e]=n},r.prototype.setBoolean=function(e,t,n){this.bytes[t][e]=n?1:0},r.prototype.clear=function(e){var t,n;try{for(var i=uC(this.bytes),o=i.next();!o.done;o=i.next()){var a=o.value;mt.fill(a,e)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var n=0,i=this.height;n<i;++n)for(var o=this.bytes[n],a=t.bytes[n],s=0,l=this.width;s<l;++s)if(o[s]!==a[s])return!1;return!0},r.prototype.toString=function(){for(var e=new Ce,t=0,n=this.height;t<n;++t){for(var i=this.bytes[t],o=0,a=this.width;o<a;++o)switch(i[o]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},r})(),hl=(function(){function r(){this.maskPattern=-1}return r.prototype.getMode=function(){return this.mode},r.prototype.getECLevel=function(){return this.ecLevel},r.prototype.getVersion=function(){return this.version},r.prototype.getMaskPattern=function(){return this.maskPattern},r.prototype.getMatrix=function(){return this.matrix},r.prototype.toString=function(){var e=new Ce;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},r.prototype.setMode=function(e){this.mode=e},r.prototype.setECLevel=function(e){this.ecLevel=e},r.prototype.setVersion=function(e){this.version=e},r.prototype.setMaskPattern=function(e){this.maskPattern=e},r.prototype.setMatrix=function(e){this.matrix=e},r.isValidMaskPattern=function(e){return e>=0&&e<r.NUM_MASK_PATTERNS},r.NUM_MASK_PATTERNS=8,r})(),dC=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Je=(function(r){dC(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="WriterException",e})(Jt),kd=(function(){function r(){}return r.clearMatrix=function(e){e.clear(255)},r.buildMatrix=function(e,t,n,i,o){r.clearMatrix(o),r.embedBasicPatterns(n,o),r.embedTypeInfo(t,i,o),r.maybeEmbedVersionInfo(n,o),r.embedDataBits(e,i,o)},r.embedBasicPatterns=function(e,t){r.embedPositionDetectionPatternsAndSeparators(t),r.embedDarkDotAtLeftBottomCorner(t),r.maybeEmbedPositionAdjustmentPatterns(e,t),r.embedTimingPatterns(t)},r.embedTypeInfo=function(e,t,n){var i=new Et;r.makeTypeInfoBits(e,t,i);for(var o=0,a=i.getSize();o<a;++o){var s=i.get(i.getSize()-1-o),l=r.TYPE_INFO_COORDINATES[o],u=l[0],c=l[1];if(n.setBoolean(u,c,s),o<8){var d=n.getWidth()-o-1,p=8;n.setBoolean(d,p,s)}else{var d=8,p=n.getHeight()-7+(o-8);n.setBoolean(d,p,s)}}},r.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var n=new Et;r.makeVersionInfoBits(e,n);for(var i=17,o=0;o<6;++o)for(var a=0;a<3;++a){var s=n.get(i);i--,t.setBoolean(o,t.getHeight()-11+a,s),t.setBoolean(t.getHeight()-11+a,o,s)}}},r.embedDataBits=function(e,t,n){for(var i=0,o=-1,a=n.getWidth()-1,s=n.getHeight()-1;a>0;){for(a===6&&(a-=1);s>=0&&s<n.getHeight();){for(var l=0;l<2;++l){var u=a-l;if(r.isEmpty(n.get(u,s))){var c=void 0;i<e.getSize()?(c=e.get(i),++i):c=!1,t!==255&&Di.getDataMaskBit(t,u,s)&&(c=!c),n.setBoolean(u,s,c)}}s+=o}o=-o,s+=o,a-=2}if(i!==e.getSize())throw new Je("Not all bits consumed: "+i+"/"+e.getSize())},r.findMSBSet=function(e){return 32-Se.numberOfLeadingZeros(e)},r.calculateBCHCode=function(e,t){if(t===0)throw new ve("0 polynomial");var n=r.findMSBSet(t);for(e<<=n-1;r.findMSBSet(e)>=n;)e^=t<<r.findMSBSet(e)-n;return e},r.makeTypeInfoBits=function(e,t,n){if(!hl.isValidMaskPattern(t))throw new Je("Invalid mask pattern");var i=e.getBits()<<3|t;n.appendBits(i,5);var o=r.calculateBCHCode(i,r.TYPE_INFO_POLY);n.appendBits(o,10);var a=new Et;if(a.appendBits(r.TYPE_INFO_MASK_PATTERN,15),n.xor(a),n.getSize()!==15)throw new Je("should not happen but we got: "+n.getSize())},r.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var n=r.calculateBCHCode(e.getVersionNumber(),r.VERSION_INFO_POLY);if(t.appendBits(n,12),t.getSize()!==18)throw new Je("should not happen but we got: "+t.getSize())},r.isEmpty=function(e){return e===255},r.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var n=(t+1)%2;r.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),r.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}},r.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Je;e.setNumber(8,e.getHeight()-8,1)},r.embedHorizontalSeparationPattern=function(e,t,n){for(var i=0;i<8;++i){if(!r.isEmpty(n.get(e+i,t)))throw new Je;n.setNumber(e+i,t,0)}},r.embedVerticalSeparationPattern=function(e,t,n){for(var i=0;i<7;++i){if(!r.isEmpty(n.get(e,t+i)))throw new Je;n.setNumber(e,t+i,0)}},r.embedPositionAdjustmentPattern=function(e,t,n){for(var i=0;i<5;++i)for(var o=r.POSITION_ADJUSTMENT_PATTERN[i],a=0;a<5;++a)n.setNumber(e+a,t+i,o[a])},r.embedPositionDetectionPattern=function(e,t,n){for(var i=0;i<7;++i)for(var o=r.POSITION_DETECTION_PATTERN[i],a=0;a<7;++a)n.setNumber(e+a,t+i,o[a])},r.embedPositionDetectionPatternsAndSeparators=function(e){var t=r.POSITION_DETECTION_PATTERN[0].length;r.embedPositionDetectionPattern(0,0,e),r.embedPositionDetectionPattern(e.getWidth()-t,0,e),r.embedPositionDetectionPattern(0,e.getWidth()-t,e);var n=8;r.embedHorizontalSeparationPattern(0,n-1,e),r.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),r.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var i=7;r.embedVerticalSeparationPattern(i,0,e),r.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),r.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},r.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,i=r.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],o=0,a=i.length;o!==a;o++){var s=i[o];if(s>=0)for(var l=0;l!==a;l++){var u=i[l];u>=0&&r.isEmpty(t.get(u,s))&&r.embedPositionAdjustmentPattern(u-2,s-2,t)}}},r.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),r.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),r.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),r.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),r.VERSION_INFO_POLY=7973,r.TYPE_INFO_POLY=1335,r.TYPE_INFO_MASK_PATTERN=21522,r})(),fC=(function(){function r(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return r.prototype.getDataBytes=function(){return this.dataBytes},r.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},r})(),Nd=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function r(){}return r.calculateMaskPenalty=function(e){return Di.applyMaskPenaltyRule1(e)+Di.applyMaskPenaltyRule2(e)+Di.applyMaskPenaltyRule3(e)+Di.applyMaskPenaltyRule4(e)},r.encode=function(e,t,n){n===void 0&&(n=null);var i=r.DEFAULT_BYTE_MODE_ENCODING,o=n!==null&&n.get(To.CHARACTER_SET)!==void 0;o&&(i=n.get(To.CHARACTER_SET).toString());var a=this.chooseMode(e,i),s=new Et;if(a===Qe.BYTE&&(o||r.DEFAULT_BYTE_MODE_ENCODING!==i)){var l=yt.getCharacterSetECIByName(i);l!==void 0&&this.appendECI(l,s)}this.appendModeInfo(a,s);var u=new Et;this.appendBytes(e,a,u,i);var c;if(n!==null&&n.get(To.QR_VERSION)!==void 0){var d=Number.parseInt(n.get(To.QR_VERSION).toString(),10);c=Ln.getVersionForNumber(d);var p=this.calculateBitsNeeded(a,s,u,c);if(!this.willFit(p,c,t))throw new Je("Data too big for requested version")}else c=this.recommendVersion(t,a,s,u);var h=new Et;h.appendBitArray(s);var v=a===Qe.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(v,c,a,h),h.appendBitArray(u);var x=c.getECBlocksForLevel(t),w=c.getTotalCodewords()-x.getTotalECCodewords();this.terminateBits(w,h);var g=this.interleaveWithECBytes(h,c.getTotalCodewords(),w,x.getNumBlocks()),y=new hl;y.setECLevel(t),y.setMode(a),y.setVersion(c);var m=c.getDimensionForVersion(),_=new cC(m,m),E=this.chooseMaskPattern(g,t,c,_);return y.setMaskPattern(E),kd.buildMatrix(g,t,c,E,_),y.setMatrix(_),y},r.recommendVersion=function(e,t,n,i){var o=this.calculateBitsNeeded(t,n,i,Ln.getVersionForNumber(1)),a=this.chooseVersion(o,e),s=this.calculateBitsNeeded(t,n,i,a);return this.chooseVersion(s,e)},r.calculateBitsNeeded=function(e,t,n,i){return t.getSize()+e.getCharacterCountBits(i)+n.getSize()},r.getAlphanumericCode=function(e){return e<r.ALPHANUMERIC_TABLE.length?r.ALPHANUMERIC_TABLE[e]:-1},r.chooseMode=function(e,t){if(t===void 0&&(t=null),yt.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Qe.KANJI;for(var n=!1,i=!1,o=0,a=e.length;o<a;++o){var s=e.charAt(o);if(r.isDigit(s))n=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)i=!0;else return Qe.BYTE}return i?Qe.ALPHANUMERIC:n?Qe.NUMERIC:Qe.BYTE},r.isOnlyDoubleByteKanji=function(e){var t;try{t=pr.encode(e,yt.SJIS)}catch{return!1}var n=t.length;if(n%2!==0)return!1;for(var i=0;i<n;i+=2){var o=t[i]&255;if((o<129||o>159)&&(o<224||o>235))return!1}return!0},r.chooseMaskPattern=function(e,t,n,i){for(var o=Number.MAX_SAFE_INTEGER,a=-1,s=0;s<hl.NUM_MASK_PATTERNS;s++){kd.buildMatrix(e,t,n,s,i);var l=this.calculateMaskPenalty(i);l<o&&(o=l,a=s)}return a},r.chooseVersion=function(e,t){for(var n=1;n<=40;n++){var i=Ln.getVersionForNumber(n);if(r.willFit(e,i,t))return i}throw new Je("Data too big")},r.willFit=function(e,t,n){var i=t.getTotalCodewords(),o=t.getECBlocksForLevel(n),a=o.getTotalECCodewords(),s=i-a,l=(e+7)/8;return s>=l},r.terminateBits=function(e,t){var n=e*8;if(t.getSize()>n)throw new Je("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(var i=0;i<4&&t.getSize()<n;++i)t.appendBit(!1);var o=t.getSize()&7;if(o>0)for(var i=o;i<8;i++)t.appendBit(!1);for(var a=e-t.getSizeInBytes(),i=0;i<a;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==n)throw new Je("Bits size does not equal capacity")},r.getNumDataBytesAndNumECBytesForBlockID=function(e,t,n,i,o,a){if(i>=n)throw new Je("Block ID too large");var s=e%n,l=n-s,u=Math.floor(e/n),c=u+1,d=Math.floor(t/n),p=d+1,h=u-d,v=c-p;if(h!==v)throw new Je("EC bytes mismatch");if(n!==l+s)throw new Je("RS blocks mismatch");if(e!==(d+h)*l+(p+v)*s)throw new Je("Total bytes mismatch");i<l?(o[0]=d,a[0]=h):(o[0]=p,a[0]=v)},r.interleaveWithECBytes=function(e,t,n,i){var o,a,s,l;if(e.getSizeInBytes()!==n)throw new Je("Number of bits and data bytes does not match");for(var u=0,c=0,d=0,p=new Array,h=0;h<i;++h){var v=new Int32Array(1),x=new Int32Array(1);r.getNumDataBytesAndNumECBytesForBlockID(t,n,i,h,v,x);var w=v[0],g=new Uint8Array(w);e.toBytes(8*u,g,0,w);var y=r.generateECBytes(g,x[0]);p.push(new fC(g,y)),c=Math.max(c,w),d=Math.max(d,y.length),u+=v[0]}if(n!==u)throw new Je("Data bytes does not match offset");for(var m=new Et,h=0;h<c;++h)try{for(var _=(o=void 0,Nd(p)),E=_.next();!E.done;E=_.next()){var b=E.value,g=b.getDataBytes();h<g.length&&m.appendBits(g[h],8)}}catch(j){o={error:j}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(o)throw o.error}}for(var h=0;h<d;++h)try{for(var S=(s=void 0,Nd(p)),B=S.next();!B.done;B=S.next()){var b=B.value,y=b.getErrorCorrectionBytes();h<y.length&&m.appendBits(y[h],8)}}catch(j){s={error:j}}finally{try{B&&!B.done&&(l=S.return)&&l.call(S)}finally{if(s)throw s.error}}if(t!==m.getSizeInBytes())throw new Je("Interleaving error: "+t+" and "+m.getSizeInBytes()+" differ.");return m},r.generateECBytes=function(e,t){for(var n=e.length,i=new Int32Array(n+t),o=0;o<n;o++)i[o]=e[o]&255;new Ch(Zt.QR_CODE_FIELD_256).encode(i,t);for(var a=new Uint8Array(t),o=0;o<t;o++)a[o]=i[n+o];return a},r.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},r.appendLengthInfo=function(e,t,n,i){var o=n.getCharacterCountBits(t);if(e>=1<<o)throw new Je(e+" is bigger than "+((1<<o)-1));i.appendBits(e,o)},r.appendBytes=function(e,t,n,i){switch(t){case Qe.NUMERIC:r.appendNumericBytes(e,n);break;case Qe.ALPHANUMERIC:r.appendAlphanumericBytes(e,n);break;case Qe.BYTE:r.append8BitBytes(e,n,i);break;case Qe.KANJI:r.appendKanjiBytes(e,n);break;default:throw new Je("Invalid mode: "+t)}},r.getDigit=function(e){return e.charCodeAt(0)-48},r.isDigit=function(e){var t=r.getDigit(e);return t>=0&&t<=9},r.appendNumericBytes=function(e,t){for(var n=e.length,i=0;i<n;){var o=r.getDigit(e.charAt(i));if(i+2<n){var a=r.getDigit(e.charAt(i+1)),s=r.getDigit(e.charAt(i+2));t.appendBits(o*100+a*10+s,10),i+=3}else if(i+1<n){var a=r.getDigit(e.charAt(i+1));t.appendBits(o*10+a,7),i+=2}else t.appendBits(o,4),i++}},r.appendAlphanumericBytes=function(e,t){for(var n=e.length,i=0;i<n;){var o=r.getAlphanumericCode(e.charCodeAt(i));if(o===-1)throw new Je;if(i+1<n){var a=r.getAlphanumericCode(e.charCodeAt(i+1));if(a===-1)throw new Je;t.appendBits(o*45+a,11),i+=2}else t.appendBits(o,6),i++}},r.append8BitBytes=function(e,t,n){var i;try{i=pr.encode(e,n)}catch(l){throw new Je(l)}for(var o=0,a=i.length;o!==a;o++){var s=i[o];t.appendBits(s,8)}},r.appendKanjiBytes=function(e,t){var n;try{n=pr.encode(e,yt.SJIS)}catch(d){throw new Je(d)}for(var i=n.length,o=0;o<i;o+=2){var a=n[o]&255,s=n[o+1]&255,l=a<<8&4294967295|s,u=-1;if(l>=33088&&l<=40956?u=l-33088:l>=57408&&l<=60351&&(u=l-49472),u===-1)throw new Je("Invalid byte sequence");var c=(u>>8)*192+(u&255);t.appendBits(c,13)}},r.appendECI=function(e,t){t.appendBits(Qe.ECI.getBits(),4),t.appendBits(e.getValue(),8)},r.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),r.DEFAULT_BYTE_MODE_ENCODING=yt.UTF8.getName(),r})();var hC=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){hC(e,r);function e(t,n,i,o,a,s,l,u){var c=r.call(this,s,l)||this;if(c.yuvData=t,c.dataWidth=n,c.dataHeight=i,c.left=o,c.top=a,o+s>n||a+l>i)throw new ve("Crop rectangle does not fit within image data.");return u&&c.reverseHorizontal(s,l),c}return e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new ve("Requested row is outside the image: "+t);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var o=(t+this.top)*this.dataWidth+this.left;return Ye.arraycopy(this.yuvData,o,n,0,i),n},e.prototype.getMatrix=function(){var t=this.getWidth(),n=this.getHeight();if(t===this.dataWidth&&n===this.dataHeight)return this.yuvData;var i=t*n,o=new Uint8ClampedArray(i),a=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Ye.arraycopy(this.yuvData,a,o,0,i),o;for(var s=0;s<n;s++){var l=s*t;Ye.arraycopy(this.yuvData,a,o,l,t),a+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,i,o){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+n,i,o,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*n),o=this.yuvData,a=this.top*this.dataWidth+this.left,s=0;s<n;s++){for(var l=s*t,u=0;u<t;u++){var c=o[a+u*e.THUMBNAIL_SCALE_FACTOR]&255;i[l+u]=4278190080|c*65793}a+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,n){for(var i=this.yuvData,o=0,a=this.top*this.dataWidth+this.left;o<n;o++,a+=this.dataWidth)for(var s=a+t/2,l=a,u=a+t-1;l<s;l++,u--){var c=i[l];i[l]=i[u],i[u]=c}},e.prototype.invert=function(){return new Aa(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(lo);var pC=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){pC(e,r);function e(t,n,i,o,a,s,l){var u=r.call(this,n,i)||this;if(u.dataWidth=o,u.dataHeight=a,u.left=s,u.top=l,t.BYTES_PER_ELEMENT===4){for(var c=n*i,d=new Uint8ClampedArray(c),p=0;p<c;p++){var h=t[p],v=h>>16&255,x=h>>7&510,w=h&255;d[p]=(v+x+w)/4&255}u.luminances=d}else u.luminances=t;if(o===void 0&&(u.dataWidth=n),a===void 0&&(u.dataHeight=i),s===void 0&&(u.left=0),l===void 0&&(u.top=0),u.left+n>u.dataWidth||u.top+i>u.dataHeight)throw new ve("Crop rectangle does not fit within image data.");return u}return e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new ve("Requested row is outside the image: "+t);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var o=(t+this.top)*this.dataWidth+this.left;return Ye.arraycopy(this.luminances,o,n,0,i),n},e.prototype.getMatrix=function(){var t=this.getWidth(),n=this.getHeight();if(t===this.dataWidth&&n===this.dataHeight)return this.luminances;var i=t*n,o=new Uint8ClampedArray(i),a=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Ye.arraycopy(this.luminances,a,o,0,i),o;for(var s=0;s<n;s++){var l=s*t;Ye.arraycopy(this.luminances,a,o,l,t),a+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,i,o){return new e(this.luminances,i,o,this.dataWidth,this.dataHeight,this.left+t,this.top+n)},e.prototype.invert=function(){return new Aa(this)},e})(lo);var vC=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),gC=(function(r){vC(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e})(yt),yC=(function(){function r(){}return r.ISO_8859_1=yt.ISO8859_1,r})(),pl,mC=301,xC=function(r,e){for(var t=1,n=0;n<255;n++)e[n]=t,r[t]=n,t*=2,t>=256&&(t^=mC);return{LOG:r,ALOG:e}};pl=xC([],[]),pl.LOG;pl.ALOG;var Dd;(function(r){r[r.FORCE_NONE=0]="FORCE_NONE",r[r.FORCE_SQUARE=1]="FORCE_SQUARE",r[r.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(Dd||(Dd={}));var Md=129,Sh=230,wC=231,_C=235,bC=236,EC=237,AC=238,CC=239,SC=240,Cs=254,IC=254,Bd="[)>05",Ld="[)>06",Fd="",Ue=0,It=1,Vt=2,vt=3,bt=4,Dt=5,OC=(function(){function r(){}return r.prototype.getEncodingMode=function(){return Ue},r.prototype.encode=function(e){var t=br.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),i=br.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Dt:e.writeCodeword(wC),e.signalEncoderChange(Dt);return;case It:e.writeCodeword(Sh),e.signalEncoderChange(It);return;case vt:e.writeCodeword(AC),e.signalEncoderChange(vt);break;case Vt:e.writeCodeword(CC),e.signalEncoderChange(Vt);break;case bt:e.writeCodeword(SC),e.signalEncoderChange(bt);break;default:throw new Error("Illegal mode: "+i)}else br.isExtendedASCII(n)?(e.writeCodeword(_C),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},r.prototype.encodeASCIIDigits=function(e,t){if(br.isDigit(e)&&br.isDigit(t)){var n=(e-48)*10+(t-48);return n+130}throw new Error("not digits: "+e+t)},r})(),TC=(function(){function r(){}return r.prototype.getEncodingMode=function(){return Dt},r.prototype.encode=function(e){var t=new Ce;for(t.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();t.append(n),e.pos++;var i=br.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(Ue);break}}var o=t.length()-1,a=1,s=e.getCodewordCount()+o+a;e.updateSymbolInfo(s);var l=e.getSymbolInfo().getDataCapacity()-s>0;if(e.hasMoreCharacters()||l)if(o<=249)t.setCharAt(0,Oe.getCharAt(o));else if(o<=1555)t.setCharAt(0,Oe.getCharAt(Math.floor(o/250)+249)),t.insert(1,Oe.getCharAt(o%250));else throw new Error("Message length not in valid ranges: "+o);for(var u=0,n=t.length();u<n;u++)e.writeCodeword(this.randomize255State(t.charAt(u).charCodeAt(0),e.getCodewordCount()+1))},r.prototype.randomize255State=function(e,t){var n=149*t%255+1,i=e+n;return i<=255?i:i-256},r})(),Zl=(function(){function r(){}return r.prototype.getEncodingMode=function(){return It},r.prototype.encodeMaximal=function(e){for(var t=new Ce,n=0,i=e.pos,o=0;e.hasMoreCharacters();){var a=e.getCurrentChar();e.pos++,n=this.encodeChar(a,t),t.length()%3===0&&(i=e.pos,o=t.length())}if(o!==t.length()){var s=Math.floor(t.length()/3*2),l=Math.floor(e.getCodewordCount()+s+1);e.updateSymbolInfo(l);var u=e.getSymbolInfo().getDataCapacity()-l,c=Math.floor(t.length()%3);(c===2&&u!==2||c===1&&(n>3||u!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(Sh),this.handleEOD(e,t)},r.prototype.encode=function(e){for(var t=new Ce;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var i=this.encodeChar(n,t),o=Math.floor(t.length()/3)*2,a=e.getCodewordCount()+o;e.updateSymbolInfo(a);var s=e.getSymbolInfo().getDataCapacity()-a;if(!e.hasMoreCharacters()){var l=new Ce;for(t.length()%3===2&&s!==2&&(i=this.backtrackOneCharacter(e,t,l,i));t.length()%3===1&&(i>3||s!==1);)i=this.backtrackOneCharacter(e,t,l,i);break}var u=t.length();if(u%3===0){var c=br.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(c!==this.getEncodingMode()){e.signalEncoderChange(Ue);break}}}this.handleEOD(e,t)},r.prototype.backtrackOneCharacter=function(e,t,n,i){var o=t.length(),a=t.toString().substring(0,o-i);t.setLengthToZero(),t.append(a),e.pos--;var s=e.getCurrentChar();return i=this.encodeChar(s,n),e.resetSymbolInfo(),i},r.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var n=t.toString().substring(3);t.setLengthToZero(),t.append(n)},r.prototype.handleEOD=function(e,t){var n=Math.floor(t.length()/3*2),i=t.length()%3,o=e.getCodewordCount()+n;e.updateSymbolInfo(o);var a=e.getSymbolInfo().getDataCapacity()-o;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Cs)}else if(a===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Cs),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(a>0||e.hasMoreCharacters())&&e.writeCodeword(Cs)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Ue)},r.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var n=2;return n+=this.encodeChar(e-128,t),n},r.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=t/256,i=t%256,o=new Ce;return o.append(n),o.append(i),o.toString()},r})(),RC=(function(){function r(){}return r.prototype.getEncodingMode=function(){return bt},r.prototype.encode=function(e){for(var t=new Ce;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var o=t.toString().substring(4);t.setLengthToZero(),t.append(o);var a=br.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){e.signalEncoderChange(Ue);break}}}t.append(Oe.getCharAt(31)),this.handleEOD(e,t)},r.prototype.handleEOD=function(e,t){try{var n=t.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),o=e.getRemainingCharacters();if(o>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),o<=i&&i<=2)return}if(n>4)throw new Error("Count must not exceed 4");var a=n-1,s=this.encodeToCodewords(t.toString()),l=!e.hasMoreCharacters(),u=l&&a<=2;if(a<=2){e.updateSymbolInfo(e.getCodewordCount()+a);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(u=!1,e.updateSymbolInfo(e.getCodewordCount()+s.length))}u?(e.resetSymbolInfo(),e.pos-=a):e.writeCodewords(s)}finally{e.signalEncoderChange(Ue)}},r.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(Oe.getCharAt(e-64)):br.illegalCharacter(Oe.getCharAt(e))},r.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,o=t>=3?e.charAt(2).charCodeAt(0):0,a=t>=4?e.charAt(3).charCodeAt(0):0,s=(n<<18)+(i<<12)+(o<<6)+a,l=s>>16&255,u=s>>8&255,c=s&255,d=new Ce;return d.append(l),t>=2&&d.append(u),t>=3&&d.append(c),d.toString()},r})(),PC=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),kC=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},De=(function(){function r(e,t,n,i,o,a,s,l){s===void 0&&(s=0),l===void 0&&(l=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=n,this.matrixWidth=i,this.matrixHeight=o,this.dataRegions=a,this.rsBlockData=s,this.rsBlockError=l}return r.lookup=function(e,t,n,i,o){var a,s;t===void 0&&(t=0),n===void 0&&(n=null),i===void 0&&(i=null),o===void 0&&(o=!0);try{for(var l=kC(DC),u=l.next();!u.done;u=l.next()){var c=u.value;if(!(t===1&&c.rectangular)&&!(t===2&&!c.rectangular)&&!(n!=null&&(c.getSymbolWidth()<n.getWidth()||c.getSymbolHeight()<n.getHeight()))&&!(i!=null&&(c.getSymbolWidth()>i.getWidth()||c.getSymbolHeight()>i.getHeight()))&&e<=c.dataCapacity)return c}}catch(d){a={error:d}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}if(o)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},r.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},r.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},r.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},r.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},r.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},r.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},r.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},r.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},r.prototype.getDataCapacity=function(){return this.dataCapacity},r.prototype.getErrorCodewords=function(){return this.errorCodewords},r.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},r.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},r})(),NC=(function(r){PC(e,r);function e(){return r.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e})(De),DC=[new De(!1,3,5,8,8,1),new De(!1,5,7,10,10,1),new De(!0,5,7,16,6,1),new De(!1,8,10,12,12,1),new De(!0,10,11,14,6,2),new De(!1,12,12,14,14,1),new De(!0,16,14,24,10,1),new De(!1,18,14,16,16,1),new De(!1,22,18,18,18,1),new De(!0,22,18,16,10,2),new De(!1,30,20,20,20,1),new De(!0,32,24,16,14,2),new De(!1,36,24,22,22,1),new De(!1,44,28,24,24,1),new De(!0,49,28,22,14,2),new De(!1,62,36,14,14,4),new De(!1,86,42,16,16,4),new De(!1,114,48,18,18,4),new De(!1,144,56,20,20,4),new De(!1,174,68,22,22,4),new De(!1,204,84,24,24,4,102,42),new De(!1,280,112,14,14,16,140,56),new De(!1,368,144,16,16,16,92,36),new De(!1,456,192,18,18,16,114,48),new De(!1,576,224,20,20,16,144,56),new De(!1,696,272,22,22,16,174,68),new De(!1,816,336,24,24,16,136,56),new De(!1,1050,408,18,18,36,175,68),new De(!1,1304,496,20,20,36,163,62),new NC],MC=(function(){function r(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(s){return s.charCodeAt(0)}),n=new Ce,i=0,o=t.length;i<o;i++){var a=String.fromCharCode(t[i]&255);if(a==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(a)}this.msg=n.toString(),this.shape=0,this.codewords=new Ce,this.newEncoding=-1}return r.prototype.setSymbolShape=function(e){this.shape=e},r.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},r.prototype.getMessage=function(){return this.msg},r.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},r.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},r.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},r.prototype.getCodewords=function(){return this.codewords},r.prototype.writeCodewords=function(e){this.codewords.append(e)},r.prototype.writeCodeword=function(e){this.codewords.append(e)},r.prototype.getCodewordCount=function(){return this.codewords.length()},r.prototype.getNewEncoding=function(){return this.newEncoding},r.prototype.signalEncoderChange=function(e){this.newEncoding=e},r.prototype.resetEncoderSignal=function(){this.newEncoding=-1},r.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},r.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},r.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},r.prototype.getSymbolInfo=function(){return this.symbolInfo},r.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=De.lookup(e,this.shape,this.minSize,this.maxSize,!0))},r.prototype.resetSymbolInfo=function(){this.symbolInfo=null},r})(),BC=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),LC=(function(r){BC(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return vt},e.prototype.encode=function(t){for(var n=new Ce;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,n);var o=n.length();if(o%3===0){this.writeNextTriplet(t,n);var a=br.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){t.signalEncoderChange(Ue);break}}}this.handleEOD(t,n)},e.prototype.encodeChar=function(t,n){switch(t){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:t>=48&&t<=57?n.append(t-48+4):t>=65&&t<=90?n.append(t-65+14):br.illegalCharacter(Oe.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,n){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),o=n.length();t.pos-=o,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(IC),t.getNewEncoding()<0&&t.signalEncoderChange(Ue)},e})(Zl),FC=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),$C=(function(r){FC(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Vt},e.prototype.encodeChar=function(t,n){if(t===32)return n.append(3),1;if(t>=48&&t<=57)return n.append(t-48+4),1;if(t>=97&&t<=122)return n.append(t-97+14),1;if(t<32)return n.append(0),n.append(t),2;if(t<=47)return n.append(1),n.append(t-33),2;if(t<=64)return n.append(1),n.append(t-58+15),2;if(t>=91&&t<=95)return n.append(1),n.append(t-91+22),2;if(t===96)return n.append(2),n.append(0),2;if(t<=90)return n.append(2),n.append(t-65+1),2;if(t<=127)return n.append(2),n.append(t-123+27),2;n.append("1");var i=2;return i+=this.encodeChar(t-128,n),i},e})(Zl),br=(function(){function r(){}return r.randomize253State=function(e){var t=149*e%253+1,n=Md+t;return n<=254?n:n-254},r.encodeHighLevel=function(e,t,n,i,o){t===void 0&&(t=0),n===void 0&&(n=null),i===void 0&&(i=null),o===void 0&&(o=!1);var a=new Zl,s=[new OC,a,new $C,new LC,new RC,new TC],l=new MC(e);l.setSymbolShape(t),l.setSizeConstraints(n,i),e.startsWith(Bd)&&e.endsWith(Fd)?(l.writeCodeword(bC),l.setSkipAtEnd(2),l.pos+=Bd.length):e.startsWith(Ld)&&e.endsWith(Fd)&&(l.writeCodeword(EC),l.setSkipAtEnd(2),l.pos+=Ld.length);var u=Ue;for(o&&(a.encodeMaximal(l),u=l.getNewEncoding(),l.resetEncoderSignal());l.hasMoreCharacters();)s[u].encode(l),l.getNewEncoding()>=0&&(u=l.getNewEncoding(),l.resetEncoderSignal());var c=l.getCodewordCount();l.updateSymbolInfo();var d=l.getSymbolInfo().getDataCapacity();c<d&&u!==Ue&&u!==Dt&&u!==bt&&l.writeCodeword("");var p=l.getCodewords();for(p.length()<d&&p.append(Md);p.length()<d;)p.append(this.randomize253State(p.length()+1));return l.getCodewords().toString()},r.lookAheadTest=function(e,t,n){var i=this.lookAheadTestIntern(e,t,n);if(n===vt&&i===vt){for(var o=Math.min(t+3,e.length),a=t;a<o;a++)if(!this.isNativeX12(e.charCodeAt(a)))return Ue}else if(n===bt&&i===bt){for(var o=Math.min(t+4,e.length),a=t;a<o;a++)if(!this.isNativeEDIFACT(e.charCodeAt(a)))return Ue}return i},r.lookAheadTestIntern=function(e,t,n){if(t>=e.length)return n;var i;n===Ue?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[n]=0);for(var o=0,a=new Uint8Array(6),s=[];;){if(t+o===e.length){mt.fill(a,0),mt.fill(s,0);var l=this.findMinimums(i,s,Se.MAX_VALUE,a),u=this.getMinimumCount(a);if(s[Ue]===l)return Ue;if(u===1){if(a[Dt]>0)return Dt;if(a[bt]>0)return bt;if(a[Vt]>0)return Vt;if(a[vt]>0)return vt}return It}var c=e.charCodeAt(t+o);if(o++,this.isDigit(c)?i[Ue]+=.5:this.isExtendedASCII(c)?(i[Ue]=Math.ceil(i[Ue]),i[Ue]+=2):(i[Ue]=Math.ceil(i[Ue]),i[Ue]++),this.isNativeC40(c)?i[It]+=2/3:this.isExtendedASCII(c)?i[It]+=8/3:i[It]+=4/3,this.isNativeText(c)?i[Vt]+=2/3:this.isExtendedASCII(c)?i[Vt]+=8/3:i[Vt]+=4/3,this.isNativeX12(c)?i[vt]+=2/3:this.isExtendedASCII(c)?i[vt]+=13/3:i[vt]+=10/3,this.isNativeEDIFACT(c)?i[bt]+=3/4:this.isExtendedASCII(c)?i[bt]+=17/4:i[bt]+=13/4,this.isSpecialB256(c)?i[Dt]+=4:i[Dt]++,o>=4){if(mt.fill(a,0),mt.fill(s,0),this.findMinimums(i,s,Se.MAX_VALUE,a),s[Ue]<this.min(s[Dt],s[It],s[Vt],s[vt],s[bt]))return Ue;if(s[Dt]<s[Ue]||s[Dt]+1<this.min(s[It],s[Vt],s[vt],s[bt]))return Dt;if(s[bt]+1<this.min(s[Dt],s[It],s[Vt],s[vt],s[Ue]))return bt;if(s[Vt]+1<this.min(s[Dt],s[It],s[bt],s[vt],s[Ue]))return Vt;if(s[vt]+1<this.min(s[Dt],s[It],s[bt],s[Vt],s[Ue]))return vt;if(s[It]+1<this.min(s[Ue],s[Dt],s[bt],s[Vt])){if(s[It]<s[vt])return It;if(s[It]===s[vt]){for(var d=t+o+1;d<e.length;){var p=e.charCodeAt(d);if(this.isX12TermSep(p))return vt;if(!this.isNativeX12(p))break;d++}return It}}}}},r.min=function(e,t,n,i,o){var a=Math.min(e,Math.min(t,Math.min(n,i)));return o===void 0?a:Math.min(a,o)},r.findMinimums=function(e,t,n,i){for(var o=0;o<6;o++){var a=t[o]=Math.ceil(e[o]);n>a&&(n=a,mt.fill(i,0)),n===a&&(i[o]=i[o]+1)}return n},r.getMinimumCount=function(e){for(var t=0,n=0;n<6;n++)t+=e[n];return t||0},r.isDigit=function(e){return e>=48&&e<=57},r.isExtendedASCII=function(e){return e>=128&&e<=255},r.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},r.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},r.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},r.isX12TermSep=function(e){return e===13||e===42||e===62},r.isNativeEDIFACT=function(e){return e>=32&&e<=94},r.isSpecialB256=function(e){return!1},r.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var n=e.length,i=t;i<n&&this.isDigit(e.charCodeAt(i));)i++;return i-t},r.illegalCharacter=function(e){var t=Se.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},r})(),Ss=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$d=(function(){function r(e){this.charset=e,this.name=e.name}return r.prototype.canEncode=function(e){try{return pr.encode(e,this.charset)!=null}catch{return!1}},r})(),jC=(function(){function r(e,t,n){var i,o,a,s,l,u;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(L){return new $d(gC.forName(L))}),this.encoders=[];var c=[];c.push(new $d(yC.ISO_8859_1));for(var d=t!=null&&t.name.startsWith("UTF"),p=0;p<e.length;p++){var h=!1;try{for(var v=(i=void 0,Ss(c)),x=v.next();!x.done;x=v.next()){var w=x.value,g=e.charAt(p),y=g.charCodeAt(0);if(y===n||w.canEncode(g)){h=!0;break}}}catch(L){i={error:L}}finally{try{x&&!x.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}if(!h)try{for(var m=(a=void 0,Ss(this.ENCODERS)),_=m.next();!_.done;_=m.next()){var w=_.value;if(w.canEncode(e.charAt(p))){c.push(w),h=!0;break}}}catch(L){a={error:L}}finally{try{_&&!_.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}h||(d=!0)}if(c.length===1&&!d)this.encoders=[c[0]];else{this.encoders=[];var E=0;try{for(var b=Ss(c),S=b.next();!S.done;S=b.next()){var w=S.value;this.encoders[E++]=w}}catch(L){l={error:L}}finally{try{S&&!S.done&&(u=b.return)&&u.call(b)}finally{if(l)throw l.error}}}var B=-1;if(t!=null){for(var p=0;p<this.encoders.length;p++)if(this.encoders[p]!=null&&t.name===this.encoders[p].name){B=p;break}}this.priorityEncoderIndex=B}return r.prototype.length=function(){return this.encoders.length},r.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},r.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},r.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},r.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},r.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},r.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return pr.encode(Oe.getCharAt(e),this.encoders[t].name)},r})(),UC=3,VC=(function(){function r(e,t,n){this.fnc1=n;var i=new jC(e,t,n);if(i.length()===1)for(var o=0;o<this.bytes.length;o++){var a=e.charAt(o).charCodeAt(0);this.bytes[o]=a===n?1e3:a}else this.bytes=this.encodeMinimally(e,i,n)}return r.prototype.getFNC1Character=function(){return this.fnc1},r.prototype.length=function(){return this.bytes.length},r.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var n=0;n<t;n++)if(this.isECI(e+n))return!1;return!0},r.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},r.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var n=new Ce,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");n.append(this.charAt(i))}return n.toString()},r.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},r.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},r.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},r.prototype.addEdge=function(e,t,n){(e[t][n.encoderIndex]==null||e[t][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[t][n.encoderIndex]=n)},r.prototype.addEdges=function(e,t,n,i,o,a){var s=e.charAt(i).charCodeAt(0),l=0,u=t.length();t.getPriorityEncoderIndex()>=0&&(s===a||t.canEncode(s,t.getPriorityEncoderIndex()))&&(l=t.getPriorityEncoderIndex(),u=l+1);for(var c=l;c<u;c++)(s===a||t.canEncode(s,c))&&this.addEdge(n,i+1,new jd(s,t,c,o,a))},r.prototype.encodeMinimally=function(e,t,n){var i=e.length,o=new jd[i+1][t.length()];this.addEdges(e,t,o,0,null,n);for(var a=1;a<=i;a++){for(var s=0;s<t.length();s++)o[a][s]!=null&&a<i&&this.addEdges(e,t,o,a,o[a][s],n);for(var s=0;s<t.length();s++)o[a-1][s]=null}for(var l=-1,u=Se.MAX_VALUE,s=0;s<t.length();s++)if(o[i][s]!=null){var c=o[i][s];c.cachedTotalSize<u&&(u=c.cachedTotalSize,l=s)}if(l<0)throw new Error('Failed to encode "'+e+'"');for(var d=[],p=o[i][l];p!=null;){if(p.isFNC1())d.unshift(1e3);else for(var h=t.encode(p.c,p.encoderIndex),a=h.length-1;a>=0;a--)d.unshift(h[a]&255);var v=p.previous===null?0:p.previous.encoderIndex;v!==p.encoderIndex&&d.unshift(256+t.getECIValue(p.encoderIndex)),p=p.previous}for(var x=[],a=0;a<x.length;a++)x[a]=d[a];return x},r})(),jd=(function(){function r(e,t,n,i,o){this.c=e,this.encoderSet=t,this.encoderIndex=n,this.previous=i,this.fnc1=o,this.c=e===o?1e3:e;var a=this.isFNC1()?1:t.encode(e,n).length,s=i===null?0:i.encoderIndex;s!==n&&(a+=UC),i!=null&&(a+=i.cachedTotalSize),this.cachedTotalSize=a}return r.prototype.isFNC1=function(){return this.c===1e3},r})(),HC=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();var Ud;(function(r){r[r.ASCII=0]="ASCII",r[r.C40=1]="C40",r[r.TEXT=2]="TEXT",r[r.X12=3]="X12",r[r.EDF=4]="EDF",r[r.B256=5]="B256"})(Ud||(Ud={}));(function(r){HC(e,r);function e(t,n,i,o,a){var s=r.call(this,t,n,i)||this;return s.shape=o,s.macroId=a,s}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(VC);var GC=(function(){function r(){}return r.prototype.isCompact=function(){return this.compact},r.prototype.setCompact=function(e){this.compact=e},r.prototype.getSize=function(){return this.size},r.prototype.setSize=function(e){this.size=e},r.prototype.getLayers=function(){return this.layers},r.prototype.setLayers=function(e){this.layers=e},r.prototype.getCodeWords=function(){return this.codeWords},r.prototype.setCodeWords=function(e){this.codeWords=e},r.prototype.getMatrix=function(){return this.matrix},r.prototype.setMatrix=function(e){this.matrix=e},r})(),Vd=(function(){function r(){}return r.singletonList=function(e){return[e]},r.min=function(e,t){return e.sort(t)[0]},r})(),qC=(function(){function r(e){this.previous=e}return r.prototype.getPrevious=function(){return this.previous},r})(),zC=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Jl=(function(r){zC(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.value=n,o.bitCount=i,o}return e.prototype.appendTo=function(t,n){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,n){return new e(this,t,n)},e.prototype.addBinaryShift=function(t,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,n)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+Se.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e})(qC),WC=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),KC=(function(r){WC(e,r);function e(t,n,i){var o=r.call(this,t,0,0)||this;return o.binaryShiftStart=n,o.binaryShiftByteCount=i,o}return e.prototype.appendTo=function(t,n){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(n[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,n){return new e(this,t,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})(Jl);function XC(r,e,t){return new KC(r,e,t)}function Ti(r,e,t){return new Jl(r,e,t)}var YC=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],fn=0,oa=1,dr=2,Ih=3,Dr=4,ZC=new Jl(null,0,0),Is=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],JC=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function QC(r){var e,t;try{for(var n=JC(r),i=n.next();!i.done;i=n.next()){var o=i.value;mt.fill(o,-1)}}catch(a){e={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r[fn][Dr]=0,r[oa][Dr]=0,r[oa][fn]=28,r[Ih][Dr]=0,r[dr][Dr]=0,r[dr][fn]=15,r}var Oh=QC(mt.createInt32Array(6,6)),e6=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},t6=(function(){function r(e,t,n,i){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=i}return r.prototype.getMode=function(){return this.mode},r.prototype.getToken=function(){return this.token},r.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},r.prototype.getBitCount=function(){return this.bitCount},r.prototype.latchAndAppend=function(e,t){var n=this.bitCount,i=this.token;if(e!==this.mode){var o=Is[this.mode][e];i=Ti(i,o&65535,o>>16),n+=o>>16}var a=e===dr?4:5;return i=Ti(i,t,a),new r(i,e,0,n+a)},r.prototype.shiftAndAppend=function(e,t){var n=this.token,i=this.mode===dr?4:5;return n=Ti(n,Oh[this.mode][e],i),n=Ti(n,t,5),new r(n,this.mode,0,this.bitCount+i+5)},r.prototype.addBinaryShiftChar=function(e){var t=this.token,n=this.mode,i=this.bitCount;if(this.mode===Dr||this.mode===dr){var o=Is[n][fn];t=Ti(t,o&65535,o>>16),i+=o>>16,n=fn}var a=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new r(t,n,this.binaryShiftByteCount+1,i+a);return s.binaryShiftByteCount===2078&&(s=s.endBinaryShift(e+1)),s},r.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=XC(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new r(t,this.mode,0,this.bitCount)},r.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(Is[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=r.calculateBinaryShiftCost(e)-r.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},r.prototype.toBitArray=function(e){for(var t,n,i=[],o=this.endBinaryShift(e.length).token;o!==null;o=o.getPrevious())i.unshift(o);var a=new Et;try{for(var s=e6(i),l=s.next();!l.done;l=s.next()){var u=l.value;u.appendTo(a,e)}}catch(c){t={error:c}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return a},r.prototype.toString=function(){return Oe.format("%s bits=%d bytes=%d",YC[this.mode],this.bitCount,this.binaryShiftByteCount)},r.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},r.INITIAL_STATE=new r(ZC,fn,0,0),r})();function r6(r){var e=Oe.getCharCode(" "),t=Oe.getCharCode("."),n=Oe.getCharCode(",");r[fn][e]=1;for(var i=Oe.getCharCode("Z"),o=Oe.getCharCode("A"),a=o;a<=i;a++)r[fn][a]=a-o+2;r[oa][e]=1;for(var s=Oe.getCharCode("z"),l=Oe.getCharCode("a"),a=l;a<=s;a++)r[oa][a]=a-l+2;r[dr][e]=1;for(var u=Oe.getCharCode("9"),c=Oe.getCharCode("0"),a=c;a<=u;a++)r[dr][a]=a-c+2;r[dr][n]=12,r[dr][t]=13;for(var d=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],p=0;p<d.length;p++)r[Ih][Oe.getCharCode(d[p])]=p;for(var h=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],p=0;p<h.length;p++)Oe.getCharCode(h[p])>0&&(r[Dr][Oe.getCharCode(h[p])]=p);return r}var Os=r6(mt.createInt32Array(5,256)),Ro=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},n6=(function(){function r(e){this.text=e}return r.prototype.encode=function(){for(var e=Oe.getCharCode(" "),t=Oe.getCharCode(`
`),n=Vd.singletonList(t6.INITIAL_STATE),i=0;i<this.text.length;i++){var o=void 0,a=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case Oe.getCharCode("\r"):o=a===t?2:0;break;case Oe.getCharCode("."):o=a===e?3:0;break;case Oe.getCharCode(","):o=a===e?4:0;break;case Oe.getCharCode(":"):o=a===e?5:0;break;default:o=0}o>0?(n=r.updateStateListForPair(n,i,o),i++):n=this.updateStateListForChar(n,i)}var s=Vd.min(n,function(l,u){return l.getBitCount()-u.getBitCount()});return s.toBitArray(this.text)},r.prototype.updateStateListForChar=function(e,t){var n,i,o=[];try{for(var a=Ro(e),s=a.next();!s.done;s=a.next()){var l=s.value;this.updateStateForChar(l,t,o)}}catch(u){n={error:u}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return r.simplifyStates(o)},r.prototype.updateStateForChar=function(e,t,n){for(var i=this.text[t]&255,o=Os[e.getMode()][i]>0,a=null,s=0;s<=Dr;s++){var l=Os[s][i];if(l>0){if(a==null&&(a=e.endBinaryShift(t)),!o||s===e.getMode()||s===dr){var u=a.latchAndAppend(s,l);n.push(u)}if(!o&&Oh[e.getMode()][s]>=0){var c=a.shiftAndAppend(s,l);n.push(c)}}}if(e.getBinaryShiftByteCount()>0||Os[e.getMode()][i]===0){var d=e.addBinaryShiftChar(t);n.push(d)}},r.updateStateListForPair=function(e,t,n){var i,o,a=[];try{for(var s=Ro(e),l=s.next();!l.done;l=s.next()){var u=l.value;this.updateStateForPair(u,t,n,a)}}catch(c){i={error:c}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}return this.simplifyStates(a)},r.updateStateForPair=function(e,t,n,i){var o=e.endBinaryShift(t);if(i.push(o.latchAndAppend(Dr,n)),e.getMode()!==Dr&&i.push(o.shiftAndAppend(Dr,n)),n===3||n===4){var a=o.latchAndAppend(dr,16-n).latchAndAppend(dr,1);i.push(a)}if(e.getBinaryShiftByteCount()>0){var s=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(s)}},r.simplifyStates=function(e){var t,n,i,o,a=[];try{for(var s=Ro(e),l=s.next();!l.done;l=s.next()){var u=l.value,c=!0,d=function(w){if(w.isBetterThanOrEqualTo(u))return c=!1,"break";u.isBetterThanOrEqualTo(w)&&(a=a.filter(function(g){return g!==w}))};try{for(var p=(i=void 0,Ro(a)),h=p.next();!h.done;h=p.next()){var v=h.value,x=d(v);if(x==="break")break}}catch(w){i={error:w}}finally{try{h&&!h.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}c&&a.push(u)}}catch(w){t={error:w}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return a},r})(),i6=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function r(){}return r.encodeBytes=function(e){return r.encode(e,r.DEFAULT_EC_PERCENT,r.DEFAULT_AZTEC_LAYERS)},r.encode=function(e,t,n){var i=new n6(e).encode(),o=Se.truncDivision(i.getSize()*t,100)+11,a=i.getSize()+o,s,l,u,c,d;if(n!==r.DEFAULT_AZTEC_LAYERS){if(s=n<0,l=Math.abs(n),l>(s?r.MAX_NB_BITS_COMPACT:r.MAX_NB_BITS))throw new ve(Oe.format("Illegal value %s for layers",n));u=r.totalBitsInLayer(l,s),c=r.WORD_SIZE[l];var p=u-u%c;if(d=r.stuffBits(i,c),d.getSize()+o>p)throw new ve("Data to large for user specified layer");if(s&&d.getSize()>c*64)throw new ve("Data to large for user specified layer")}else{c=0,d=null;for(var h=0;;h++){if(h>r.MAX_NB_BITS)throw new ve("Data too large for an Aztec code");if(s=h<=3,l=s?h+1:h,u=r.totalBitsInLayer(l,s),!(a>u)){(d==null||c!==r.WORD_SIZE[l])&&(c=r.WORD_SIZE[l],d=r.stuffBits(i,c));var p=u-u%c;if(!(s&&d.getSize()>c*64)&&d.getSize()+o<=p)break}}}var v=r.generateCheckWords(d,u,c),x=d.getSize()/c,w=r.generateModeMessage(s,l,x),g=(s?11:14)+l*4,y=new Int32Array(g),m;if(s){m=g;for(var h=0;h<y.length;h++)y[h]=h}else{m=g+1+2*Se.truncDivision(Se.truncDivision(g,2)-1,15);for(var _=Se.truncDivision(g,2),E=Se.truncDivision(m,2),h=0;h<_;h++){var b=h+Se.truncDivision(h,15);y[_-h-1]=E-b-1,y[_+h]=E+b+1}}for(var S=new Lr(m),h=0,B=0;h<l;h++){for(var L=(l-h)*4+(s?9:12),j=0;j<L;j++)for(var Y=j*2,M=0;M<2;M++)v.get(B+Y+M)&&S.set(y[h*2+M],y[h*2+j]),v.get(B+L*2+Y+M)&&S.set(y[h*2+j],y[g-1-h*2-M]),v.get(B+L*4+Y+M)&&S.set(y[g-1-h*2-M],y[g-1-h*2-j]),v.get(B+L*6+Y+M)&&S.set(y[g-1-h*2-j],y[h*2+M]);B+=L*8}if(r.drawModeMessage(S,s,m,w),s)r.drawBullsEye(S,Se.truncDivision(m,2),5);else{r.drawBullsEye(S,Se.truncDivision(m,2),7);for(var h=0,j=0;h<Se.truncDivision(g,2)-1;h+=15,j+=16)for(var M=Se.truncDivision(m,2)&1;M<m;M+=2)S.set(Se.truncDivision(m,2)-j,M),S.set(Se.truncDivision(m,2)+j,M),S.set(M,Se.truncDivision(m,2)-j),S.set(M,Se.truncDivision(m,2)+j)}var k=new GC;return k.setCompact(s),k.setSize(m),k.setLayers(l),k.setCodeWords(x),k.setMatrix(S),k},r.drawBullsEye=function(e,t,n){for(var i=0;i<n;i+=2)for(var o=t-i;o<=t+i;o++)e.set(o,t-i),e.set(o,t+i),e.set(t-i,o),e.set(t+i,o);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)},r.generateModeMessage=function(e,t,n){var i=new Et;return e?(i.appendBits(t-1,2),i.appendBits(n-1,6),i=r.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(n-1,11),i=r.generateCheckWords(i,40,4)),i},r.drawModeMessage=function(e,t,n,i){var o=Se.truncDivision(n,2);if(t)for(var a=0;a<7;a++){var s=o-3+a;i.get(a)&&e.set(s,o-5),i.get(a+7)&&e.set(o+5,s),i.get(20-a)&&e.set(s,o+5),i.get(27-a)&&e.set(o-5,s)}else for(var a=0;a<10;a++){var s=o-5+a+Se.truncDivision(a,5);i.get(a)&&e.set(s,o-7),i.get(a+10)&&e.set(o+7,s),i.get(29-a)&&e.set(s,o+7),i.get(39-a)&&e.set(o-7,s)}},r.generateCheckWords=function(e,t,n){var i,o,a=e.getSize()/n,s=new Ch(r.getGF(n)),l=Se.truncDivision(t,n),u=r.bitsToWords(e,n,l);s.encode(u,l-a);var c=t%n,d=new Et;d.appendBits(0,c);try{for(var p=i6(Array.from(u)),h=p.next();!h.done;h=p.next()){var v=h.value;d.appendBits(v,n)}}catch(x){i={error:x}}finally{try{h&&!h.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}return d},r.bitsToWords=function(e,t,n){var i=new Int32Array(n),o,a;for(o=0,a=e.getSize()/t;o<a;o++){for(var s=0,l=0;l<t;l++)s|=e.get(o*t+l)?1<<t-l-1:0;i[o]=s}return i},r.getGF=function(e){switch(e){case 4:return Zt.AZTEC_PARAM;case 6:return Zt.AZTEC_DATA_6;case 8:return Zt.AZTEC_DATA_8;case 10:return Zt.AZTEC_DATA_10;case 12:return Zt.AZTEC_DATA_12;default:throw new ve("Unsupported word size "+e)}},r.stuffBits=function(e,t){for(var n=new Et,i=e.getSize(),o=(1<<t)-2,a=0;a<i;a+=t){for(var s=0,l=0;l<t;l++)(a+l>=i||e.get(a+l))&&(s|=1<<t-1-l);(s&o)===o?(n.appendBits(s&o,t),a--):(s&o)===0?(n.appendBits(s|1,t),a--):n.appendBits(s,t)}return n},r.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},r.DEFAULT_EC_PERCENT=33,r.DEFAULT_AZTEC_LAYERS=0,r.MAX_NB_BITS=32,r.MAX_NB_BITS_COMPACT=4,r.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),r})();var o6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),a6=(function(r){o6(e,r);function e(t){var n=r.call(this,t.width,t.height)||this;return n.canvas=t,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(t),n}return e.makeBufferFromCanvasImageData=function(t){var n;try{n=t.getContext("2d",{willReadFrequently:!0})}catch{n=t.getContext("2d")}if(!n)throw new Error("Couldn't get canvas context.");var i=n.getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,n,i){for(var o=new Uint8ClampedArray(n*i),a=0,s=0,l=t.length;a<l;a+=4,s++){var u=void 0,c=t[a+3];if(c===0)u=255;else{var d=t[a],p=t[a+1],h=t[a+2];u=306*d+601*p+117*h+512>>10}o[s]=u}return o},e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new ve("Requested row is outside the image: "+t);var i=this.getWidth(),o=t*i;return n===null?n=this.buffer.slice(o,o+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(o,o+i))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,i,o){return r.prototype.crop.call(this,t,n,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new Aa(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var i=t*e.DEGREE_TO_RADIANS,o=this.canvas.width,a=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(i))*o+Math.abs(Math.sin(i))*a),l=Math.ceil(Math.abs(Math.sin(i))*o+Math.abs(Math.cos(i))*a);n.width=s,n.height=l;var u=n.getContext("2d");if(!u)throw new Error("Could not create a Canvas Context element.");return u.translate(s/2,l/2),u.rotate(i),u.drawImage(this.canvas,o/-2,a/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.DEGREE_TO_RADIANS=Math.PI/180,e})(lo);function Th(){return typeof navigator<"u"}function s6(){return Th()&&!!navigator.mediaDevices}function l6(){return!!(s6()&&navigator.mediaDevices.enumerateDevices)}var ii=function(){return ii=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},ii.apply(this,arguments)},tt=function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(c){try{u(n.next(c))}catch(d){a(d)}}function l(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?o(c.value):i(c.value).then(s,l)}u((n=n.apply(r,e||[])).next())})},rt=function(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(c){u=[6,c],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Ts=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},u6={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},_i=(function(){function r(e,t,n){t===void 0&&(t=new Map),n===void 0&&(n={}),this.reader=e,this.hints=t,this.options=ii(ii({},u6),n)}return Object.defineProperty(r.prototype,"possibleFormats",{set:function(e){this.hints.set(Ze.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),r.addVideoSource=function(e,t){try{e.srcObject=t}catch{console.error("got interrupted by new loading request")}},r.mediaStreamSetTorch=function(e,t){return tt(this,void 0,void 0,function(){return rt(this,function(n){switch(n.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return n.sent(),[2]}})})},r.mediaStreamIsTorchCompatible=function(e){var t,n,i=e.getVideoTracks();try{for(var o=Ts(i),a=o.next();!a.done;a=o.next()){var s=a.value;if(r.mediaStreamIsTorchCompatibleTrack(s))return!0}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return!1},r.mediaStreamIsTorchCompatibleTrack=function(e){try{var t=e.getCapabilities();return"torch"in t}catch(n){return console.error(n),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},r.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},r.getMediaElement=function(e,t){var n=document.getElementById(e);if(!n)throw new lt("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new lt("element with id '".concat(e,"' must be an ").concat(t," element"));return n},r.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return r.getMediaElement(e,"video");if(!e&&typeof document<"u"){var t=document.createElement("video");return t.width=200,t.height=200,t}throw new Error("Couldn't get videoElement from videoSource!")},r.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return r.getMediaElement(e,"img");if(typeof e>"u"){var t=document.createElement("img");return t.width=200,t.height=200,t}throw new Error("Couldn't get imageElement from imageSource!")},r.prepareVideoElement=function(e){var t=r.createVideoElement(e);return t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},r.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},r.createBinaryBitmapFromCanvas=function(e){var t=new a6(e),n=new hh(t);return new fh(n)},r.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},r.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},r.createCaptureCanvas=function(e){if(!e)throw new lt("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var t=document.createElement("canvas"),n=r.getMediaElementDimensions(e),i=n.width,o=n.height;return t.style.width=i+"px",t.style.height=o+"px",t.width=i,t.height=o,t},r.tryPlayVideo=function(e){return tt(this,void 0,void 0,function(){var t;return rt(this,function(n){switch(n.label){case 0:if(e?.ended)return console.error("Trying to play video that has ended."),[2,!1];if(r.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[2,!0];case 3:return t=n.sent(),console.warn("It was not possible to play the video.",t),[2,!1];case 4:return[2]}})})},r.createCanvasFromMediaElement=function(e){var t=r.createCaptureCanvas(e),n=t.getContext("2d");if(!n)throw new Error("Couldn't find Canvas 2D Context.");return r.drawImageOnCanvas(n,e),t},r.createBinaryBitmapFromMediaElem=function(e){var t=r.createCanvasFromMediaElement(e);return r.createBinaryBitmapFromCanvas(t)},r.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},r.listVideoInputDevices=function(){return tt(this,void 0,void 0,function(){var e,t,n,i,o,a,s,l,u,c,d,p;return rt(this,function(h){switch(h.label){case 0:if(!Th())throw new Error("Can't enumerate devices, navigator is not present.");if(!l6())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),t=[];try{for(n=Ts(e),i=n.next();!i.done;i=n.next())o=i.value,a=o.kind==="video"?"videoinput":o.kind,a==="videoinput"&&(s=o.deviceId||o.id,l=o.label||"Video device ".concat(t.length+1),u=o.groupId,c={deviceId:s,label:l,kind:a,groupId:u},t.push(c))}catch(v){d={error:v}}finally{try{i&&!i.done&&(p=n.return)&&p.call(n)}finally{if(d)throw d.error}}return[2,t]}})})},r.findDeviceById=function(e){return tt(this,void 0,void 0,function(){var t;return rt(this,function(n){switch(n.label){case 0:return[4,r.listVideoInputDevices()];case 1:return t=n.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2]}})})},r.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},r.releaseAllStreams=function(){r.streamTracker.length!==0&&r.streamTracker.forEach(function(e){e.getTracks().forEach(function(t){return t.stop()})}),r.streamTracker=[]},r.playVideoOnLoadAsync=function(e,t){return tt(this,void 0,void 0,function(){var n;return rt(this,function(i){switch(i.label){case 0:return[4,r.tryPlayVideo(e)];case 1:return n=i.sent(),n?[2,!0]:[2,new Promise(function(o,a){var s=setTimeout(function(){r.isVideoPlaying(e)||(a(!1),e.removeEventListener("canplay",l))},t),l=function(){r.tryPlayVideo(e).then(function(u){clearTimeout(s),e.removeEventListener("canplay",l),o(u)})};e.addEventListener("canplay",l)})]}})})},r.attachStreamToVideo=function(e,t,n){return n===void 0&&(n=5e3),tt(this,void 0,void 0,function(){var i;return rt(this,function(o){switch(o.label){case 0:return i=r.prepareVideoElement(t),r.addVideoSource(i,e),[4,r.playVideoOnLoadAsync(i,n)];case 1:return o.sent(),[2,i]}})})},r._waitImageLoad=function(e){return new Promise(function(t,n){var i=1e4,o=setTimeout(function(){r.isImageLoaded(e)||(e.removeEventListener("load",a),n())},i),a=function(){clearTimeout(o),e.removeEventListener("load",a),t()};e.addEventListener("load",a)})},r.checkCallbackFnOrThrow=function(e){if(!e)throw new lt("`callbackFn` is a required parameter, you cannot capture results without it.")},r.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(t){return t.stop()}),e=void 0},r.prototype.decode=function(e){var t=r.createCanvasFromMediaElement(e);return this.decodeFromCanvas(t)},r.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},r.prototype.decodeFromCanvas=function(e){var t=r.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(t)},r.prototype.decodeFromImageElement=function(e){return tt(this,void 0,void 0,function(){var t;return rt(this,function(n){switch(n.label){case 0:if(!e)throw new lt("An image element must be provided.");return t=r.prepareImageElement(e),[4,this._decodeOnLoadImage(t)];case 1:return[2,n.sent()]}})})},r.prototype.decodeFromImageUrl=function(e){return tt(this,void 0,void 0,function(){var t;return rt(this,function(n){switch(n.label){case 0:if(!e)throw new lt("An URL must be provided.");t=r.prepareImageElement(),t.src=e,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.decodeFromImageElement(t)];case 2:return[2,n.sent()];case 3:return r.destroyImageElement(t),[7];case 4:return[2]}})})},r.prototype.decodeFromConstraints=function(e,t,n){return tt(this,void 0,void 0,function(){var i,o;return rt(this,function(a){switch(a.label){case 0:return r.checkCallbackFnOrThrow(n),[4,this.getUserMedia(e)];case 1:i=a.sent(),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.decodeFromStream(i,t,n)];case 3:return[2,a.sent()];case 4:throw o=a.sent(),r.disposeMediaStream(i),o;case 5:return[2]}})})},r.prototype.decodeFromStream=function(e,t,n){return tt(this,void 0,void 0,function(){var i,o,a,s,l,u,c,d,p,h=this;return rt(this,function(v){switch(v.label){case 0:return r.checkCallbackFnOrThrow(n),i=this.options.tryPlayVideoTimeout,[4,r.attachStreamToVideo(e,t,i)];case 1:return o=v.sent(),a=function(){r.disposeMediaStream(e),r.cleanVideoSource(o)},s=this.scan(o,n,a),l=e.getVideoTracks(),u=ii(ii({},s),{stop:function(){s.stop()},streamVideoConstraintsApply:function(x,w){return tt(this,void 0,void 0,function(){var g,y,m,_,E,b,S;return rt(this,function(B){switch(B.label){case 0:g=w?l.filter(w):l,B.label=1;case 1:B.trys.push([1,6,7,8]),y=Ts(g),m=y.next(),B.label=2;case 2:return m.done?[3,5]:(_=m.value,[4,_.applyConstraints(x)]);case 3:B.sent(),B.label=4;case 4:return m=y.next(),[3,2];case 5:return[3,8];case 6:return E=B.sent(),b={error:E},[3,8];case 7:try{m&&!m.done&&(S=y.return)&&S.call(y)}finally{if(b)throw b.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(x){return l.find(x).getConstraints()},streamVideoSettingsGet:function(x){return l.find(x).getSettings()},streamVideoCapabilitiesGet:function(x){return l.find(x).getCapabilities()}}),c=r.mediaStreamIsTorchCompatible(e),c&&(d=l?.find(function(x){return r.mediaStreamIsTorchCompatibleTrack(x)}),p=function(x){return tt(h,void 0,void 0,function(){return rt(this,function(w){switch(w.label){case 0:return[4,r.mediaStreamSetTorch(d,x)];case 1:return w.sent(),[2]}})})},u.switchTorch=p,u.stop=function(){return tt(h,void 0,void 0,function(){return rt(this,function(x){switch(x.label){case 0:return s.stop(),[4,p(!1)];case 1:return x.sent(),[2]}})})}),[2,u]}})})},r.prototype.decodeFromVideoDevice=function(e,t,n){return tt(this,void 0,void 0,function(){var i,o;return rt(this,function(a){switch(a.label){case 0:return r.checkCallbackFnOrThrow(n),e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,t,n)];case 1:return[2,a.sent()]}})})},r.prototype.decodeFromVideoElement=function(e,t){return tt(this,void 0,void 0,function(){var n,i;return rt(this,function(o){switch(o.label){case 0:if(r.checkCallbackFnOrThrow(t),!e)throw new lt("A video element must be provided.");return n=r.prepareVideoElement(e),i=this.options.tryPlayVideoTimeout,[4,r.playVideoOnLoadAsync(n,i)];case 1:return o.sent(),[2,this.scan(n,t)]}})})},r.prototype.decodeFromVideoUrl=function(e,t){return tt(this,void 0,void 0,function(){var n,i,o,a;return rt(this,function(s){switch(s.label){case 0:if(r.checkCallbackFnOrThrow(t),!e)throw new lt("An URL must be provided.");return n=r.prepareVideoElement(),n.src=e,i=function(){r.cleanVideoSource(n)},o=this.options.tryPlayVideoTimeout,[4,r.playVideoOnLoadAsync(n,o)];case 1:return s.sent(),a=this.scan(n,t,i),[2,a]}})})},r.prototype.decodeOnceFromConstraints=function(e,t){return tt(this,void 0,void 0,function(){var n;return rt(this,function(i){switch(i.label){case 0:return[4,this.getUserMedia(e)];case 1:return n=i.sent(),[4,this.decodeOnceFromStream(n,t)];case 2:return[2,i.sent()]}})})},r.prototype.decodeOnceFromStream=function(e,t){return tt(this,void 0,void 0,function(){var n,i,o;return rt(this,function(a){switch(a.label){case 0:return n=!!t,[4,r.attachStreamToVideo(e,t)];case 1:i=a.sent(),a.label=2;case 2:return a.trys.push([2,,4,5]),[4,this.scanOneResult(i)];case 3:return o=a.sent(),[2,o];case 4:return n||r.cleanVideoSource(i),[7];case 5:return[2]}})})},r.prototype.decodeOnceFromVideoDevice=function(e,t){return tt(this,void 0,void 0,function(){var n,i;return rt(this,function(o){switch(o.label){case 0:return e?n={deviceId:{exact:e}}:n={facingMode:"environment"},i={video:n},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,o.sent()]}})})},r.prototype.decodeOnceFromVideoElement=function(e){return tt(this,void 0,void 0,function(){var t,n;return rt(this,function(i){switch(i.label){case 0:if(!e)throw new lt("A video element must be provided.");return t=r.prepareVideoElement(e),n=this.options.tryPlayVideoTimeout,[4,r.playVideoOnLoadAsync(t,n)];case 1:return i.sent(),[4,this.scanOneResult(t)];case 2:return[2,i.sent()]}})})},r.prototype.decodeOnceFromVideoUrl=function(e){return tt(this,void 0,void 0,function(){var t,n;return rt(this,function(i){switch(i.label){case 0:if(!e)throw new lt("An URL must be provided.");t=r.prepareVideoElement(),t.src=e,n=this.decodeOnceFromVideoElement(t),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,n];case 2:return[2,i.sent()];case 3:return r.cleanVideoSource(t),[7];case 4:return[2]}})})},r.prototype.scanOneResult=function(e,t,n,i){var o=this;return t===void 0&&(t=!0),n===void 0&&(n=!0),i===void 0&&(i=!0),new Promise(function(a,s){o.scan(e,function(l,u,c){if(l){a(l),c.stop();return}if(u){if(u instanceof V&&t||u instanceof dt&&n||u instanceof te&&i)return;c.stop(),s(u)}})})},r.prototype.scan=function(e,t,n){var i=this;r.checkCallbackFnOrThrow(t);var o=r.createCaptureCanvas(e),a;try{a=o.getContext("2d",{willReadFrequently:!0})}catch{a=o.getContext("2d")}if(!a)throw new Error("Couldn't create canvas for visual element scan.");var s=function(){a=void 0,o=void 0},l=!1,u,c=function(){l=!0,clearTimeout(u),s(),n&&n()},d={stop:c},p=function(){if(!l)try{r.drawImageOnCanvas(a,e);var h=i.decodeFromCanvas(o);t(h,void 0,d),u=setTimeout(p,i.options.delayBetweenScanSuccess)}catch(g){t(void 0,g,d);var v=g instanceof dt,x=g instanceof te,w=g instanceof V;if(v||x||w){u=setTimeout(p,i.options.delayBetweenScanAttempts);return}s(),n&&n(g)}};return p(),d},r.prototype._decodeOnLoadImage=function(e){return tt(this,void 0,void 0,function(){var t;return rt(this,function(n){switch(n.label){case 0:return t=r.isImageLoaded(e),t?[3,2]:[4,r._waitImageLoad(e)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(e)]}})})},r.prototype.getUserMedia=function(e){return tt(this,void 0,void 0,function(){var t;return rt(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return t=n.sent(),r.streamTracker.push(t),[2,t]}})})},r.streamTracker=[],r})(),c6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){c6(e,r);function e(t,n){return r.call(this,new ea,t,n)||this}return e})(_i);var d6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){d6(e,r);function e(t,n){return r.call(this,new ri(t),t,n)||this}return e})(_i);var f6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){f6(e,r);function e(t,n){return r.call(this,new ra,t,n)||this}return e})(_i);var h6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Hd=(function(r){h6(e,r);function e(t,n){var i=this,o=new Ah;return o.setHints(t),i=r.call(this,o,t,n)||this,i.reader=o,i}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(t){this.hints.set(Ze.POSSIBLE_FORMATS,t),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e.prototype.setHints=function(t){this.hints=t,this.reader.setHints(this.hints)},e})(_i),p6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){p6(e,r);function e(t,n){return r.call(this,new ia,t,n)||this}return e})(_i);var v6=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){v6(e,r);function e(t,n){return r.call(this,new na,t,n)||this}return e})(_i);const g6={class:"min-h-screen bg-gray-50 py-4 md:py-8"},y6={class:"container mx-auto px-2 md:px-4 max-w-4xl"},m6={class:"bg-white rounded-xl shadow-lg p-4 md:p-8"},x6={class:"space-y-4 md:space-y-6"},w6={class:"relative bg-black rounded-lg overflow-hidden",style:{"aspect-ratio":"4/3"}},_6={key:0,class:"absolute inset-0 flex items-center justify-center pointer-events-none"},b6={key:1,class:"absolute top-2 left-2 right-2 md:top-4 md:left-4 md:right-4"},E6={class:"flex gap-2 md:gap-4"},A6={key:0,class:"mt-4 md:mt-8 space-y-4 md:space-y-6"},C6={class:"text-center mb-3 md:mb-4"},S6={class:"text-4xl md:text-6xl"},I6={key:0,class:"bg-white rounded-lg p-4 md:p-6 space-y-3 md:space-y-4"},O6={class:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4 text-xs md:text-sm"},T6={class:"col-span-1 md:col-span-1"},R6={class:"text-gray-900 font-semibold text-sm md:text-lg"},P6={class:"col-span-1 md:col-span-1"},k6={class:"text-gray-900 break-all"},N6={key:0,class:"col-span-1 md:col-span-2"},D6={class:"text-gray-900"},M6={class:"border-t pt-3 md:pt-4"},B6={class:"grid grid-cols-2 gap-3 md:gap-4 text-xs md:text-sm"},L6={class:"col-span-2"},F6={class:"text-gray-900 font-semibold"},$6={class:"text-gray-900"},j6={class:"text-gray-900"},U6={class:"text-gray-900"},V6={class:"text-gray-900 text-xs font-mono break-all"},H6={key:0,class:"text-xs text-gray-500 text-center pt-2 border-t"},G6={key:1,class:"mt-4 md:mt-6"},q6={key:2,class:"mt-4 md:mt-6 bg-green-100 border border-green-300 rounded-lg p-3 md:p-4 text-center"},z6={class:"text-green-700 text-xs md:text-sm mt-1"},W6=ot({__name:"EscanerQR",setup(r){const e=W(null),t=W(!1);let n=null;const i=W(null),o=W([]),a=async()=>{try{t.value=!0,n=new Hd;const h=await Hd.listVideoInputDevices();if(!h||h.length===0)throw new Error("No se encontr ninguna cmara");let v;const x=h.find(w=>w.label.toLowerCase().includes("back")||w.label.toLowerCase().includes("rear")||w.label.toLowerCase().includes("environment"));if(x)v=x.deviceId,console.log("Usando cmara trasera:",x.label);else{const w=h[h.length-1];if(!w)throw new Error("No se encontr un dispositivo de cmara vlido");v=w.deviceId,console.log("Usando cmara:",w.label)}if(!e.value)throw new Error("Elemento de video no inicializado");n.decodeFromVideoDevice(v,e.value,async(w,g)=>{if(w){const y=w.getText();s(),await l(y)}g&&!g.message.includes("No MultiFormat Readers")&&g.name!=="NotFoundException"&&console.error("Error en el escaneo:",g)})}catch(h){console.error("Error iniciando escaneo:",h),alert("Error al acceder a la cmara: "+h.message),t.value=!1}},s=()=>{n&&e.value&&e.value.srcObject&&(e.value.srcObject.getTracks().forEach(v=>v.stop()),e.value.srcObject=null),t.value=!1},l=async h=>{try{let v;try{v=JSON.parse(h)}catch{v={reserva_id:h.trim()}}const{data:x,error:w}=await ae.from("tickets_qr").select("*").eq("reserva_id",v.reserva_id).single();if(w||!x){console.error("Error buscando ticket:",w),i.value={valido:!1,mensaje:"Cdigo QR no encontrado o invlido"},d({valido:!1,nombre:"Desconocido",pelicula:"N/A",timestamp:new Date().toISOString()});return}if(x.estado==="usado"){i.value={valido:!1,mensaje:"Este cdigo QR ya ha sido utilizado"},d({valido:!1,nombre:v.nombre||"Desconocido",pelicula:v.pelicula||"N/A",timestamp:new Date().toISOString()});return}if(x.estado==="expirado"){i.value={valido:!1,mensaje:"Este cdigo QR ha expirado"},d({valido:!1,nombre:v.nombre||"Desconocido",pelicula:v.pelicula||"N/A",timestamp:new Date().toISOString()});return}i.value={valido:!0,mensaje:"Cdigo verificado correctamente",datos:v,confirmado:!1},d({valido:!0,nombre:v.nombre,pelicula:v.pelicula,timestamp:new Date().toISOString()})}catch(v){console.error("Error procesando QR:",v),i.value={valido:!1,mensaje:"Error al procesar el cdigo QR"},d({valido:!1,nombre:"Error",pelicula:"Error de procesamiento",timestamp:new Date().toISOString()})}},u=async()=>{if(i.value?.datos?.reserva_id)try{const{error:h}=await ae.from("tickets_qr").update({estado:"usado",verificado_en:new Date().toISOString()}).eq("reserva_id",i.value.datos.reserva_id);if(h)throw console.error("Error actualizando ticket:",h),h;const{error:v}=await ae.from("reservas").update({estado:"asistida"}).eq("id",i.value.datos.reserva_id);if(v)throw console.error("Error actualizando reserva:",v),v;i.value&&(i.value.confirmado=!0),alert(" Entrada confirmada exitosamente")}catch(h){console.error("Error confirmando entrada:",h),alert("Error al confirmar la entrada: "+h.message)}},c=async()=>{i.value=null,await new Promise(h=>setTimeout(h,500)),await a()},d=h=>{o.value.unshift(h),o.value.length>10&&o.value.pop()},p=h=>h?new Date(h+"T00:00:00").toLocaleDateString("es-ES",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"";return ga(()=>{s()}),(h,v)=>(O(),T("div",g6,[f("div",y6,[f("div",m6,[v[14]||(v[14]=f("h1",{class:"text-2xl md:text-3xl font-bold text-[#8B0000] mb-4 md:mb-6 text-center"},"  Escner de QR ",-1)),f("div",x6,[v[2]||(v[2]=f("div",{class:"bg-blue-50 border border-blue-200 rounded-lg p-3 md:p-4 text-xs md:text-sm text-blue-800"},[f("p",{class:"font-medium mb-1 md:mb-0"},"Instrucciones:"),f("ul",{class:"list-disc list-inside space-y-0.5 md:space-y-1 text-xs md:text-sm"},[f("li",null,"Permite el acceso a la cmara"),f("li",null,"Apunta hacia el cdigo QR"),f("li",null,"Se detectar automticamente")])],-1)),f("div",w6,[f("video",{ref_key:"videoElement",ref:e,class:"w-full h-full object-cover",autoplay:"",playsinline:"",muted:""},null,512),t.value?(O(),T("div",_6,[...v[0]||(v[0]=[f("div",{class:"border-4 border-[#8B0000] rounded-lg",style:{width:"60%","max-width":"250px","aspect-ratio":"1"}},[f("div",{class:"w-full h-full border-2 border-white border-dashed animate-pulse"})],-1)])])):Z("",!0),t.value?(O(),T("div",b6,[...v[1]||(v[1]=[f("div",{class:"bg-[#8B0000] text-white px-3 py-1.5 rounded-lg text-xs md:text-sm font-medium inline-block"}," Buscando cdigo QR... ",-1)])])):Z("",!0)]),f("div",E6,[t.value?(O(),T("button",{key:1,onClick:s,class:"flex-1 bg-red-600 text-white py-2.5 md:py-3 rounded-lg font-semibold text-sm md:text-base hover:bg-red-700 transition-colors"}," Detener ")):(O(),T("button",{key:0,onClick:a,class:"flex-1 bg-[#8B0000] text-white py-2.5 md:py-3 rounded-lg font-semibold text-sm md:text-base hover:bg-[#A52A2A] transition-colors"}," Iniciar "))])]),i.value?(O(),T("div",A6,[f("div",{class:it(["rounded-lg p-4 md:p-6 border-2",i.value.valido?"bg-green-50 border-green-500":"bg-red-50 border-red-500"])},[f("div",C6,[f("span",S6,P(i.value.valido?"":""),1),f("h2",{class:it(["text-xl md:text-2xl font-bold mt-2",i.value.valido?"text-green-800":"text-red-800"])},P(i.value.valido?"ENTRADA VLIDA!":"ENTRADA INVLIDA"),3)]),f("p",{class:it(["text-center mb-3 md:mb-4 text-sm md:text-base",i.value.valido?"text-green-700":"text-red-700"])},P(i.value.mensaje),3),i.value.valido&&i.value.datos?(O(),T("div",I6,[v[12]||(v[12]=f("h3",{class:"font-bold text-base md:text-lg text-gray-800 border-b pb-2"},"  Informacin del Asistente ",-1)),f("div",O6,[f("div",T6,[v[3]||(v[3]=f("span",{class:"font-medium text-gray-600"},"Nombre:",-1)),f("p",R6,P(i.value.datos.nombre),1)]),f("div",P6,[v[4]||(v[4]=f("span",{class:"font-medium text-gray-600"},"Correo:",-1)),f("p",k6,P(i.value.datos.correo),1)]),i.value.datos.carrera?(O(),T("div",N6,[v[5]||(v[5]=f("span",{class:"font-medium text-gray-600"},"Carrera:",-1)),f("p",D6,P(i.value.datos.carrera),1)])):Z("",!0)]),f("div",M6,[v[11]||(v[11]=f("h4",{class:"font-bold text-sm md:text-base text-gray-800 mb-2 md:mb-3"}," Detalles de la Funcin",-1)),f("div",B6,[f("div",L6,[v[6]||(v[6]=f("span",{class:"font-medium text-gray-600"},"Pelcula:",-1)),f("p",F6,P(i.value.datos.pelicula),1)]),f("div",null,[v[7]||(v[7]=f("span",{class:"font-medium text-gray-600"},"Fecha:",-1)),f("p",$6,P(p(i.value.datos.fecha)),1)]),f("div",null,[v[8]||(v[8]=f("span",{class:"font-medium text-gray-600"},"Hora:",-1)),f("p",j6,P(i.value.datos.hora),1)]),f("div",null,[v[9]||(v[9]=f("span",{class:"font-medium text-gray-600"},"Asientos:",-1)),f("p",U6,P(i.value.datos.asientos),1)]),f("div",null,[v[10]||(v[10]=f("span",{class:"font-medium text-gray-600"},"ID:",-1)),f("p",V6,P(i.value.datos.reserva_id),1)])])]),i.value.datos.creado_en?(O(),T("div",H6," QR generado: "+P(new Date(i.value.datos.creado_en).toLocaleString("es-ES")),1)):Z("",!0)])):Z("",!0),i.value.valido&&!i.value.confirmado?(O(),T("div",G6,[f("button",{onClick:u,class:"w-full bg-green-600 text-white py-3 md:py-4 rounded-lg font-bold text-base md:text-lg hover:bg-green-700 transition-colors"},"  CONFIRMAR ENTRADA ")])):Z("",!0),i.value.confirmado?(O(),T("div",q6,[v[13]||(v[13]=f("p",{class:"text-green-800 font-bold text-sm md:text-base"}," Entrada confirmada exitosamente",-1)),f("p",z6,P(new Date().toLocaleString("es-ES")),1)])):Z("",!0)],2),f("button",{onClick:c,class:"w-full bg-[#8B0000] text-white py-2.5 md:py-3 rounded-lg font-semibold text-sm md:text-base hover:bg-[#A52A2A] transition-colors"},"  Escanear Siguiente ")])):Z("",!0)])])]))}}),K6=jn(W6,[["__scopeId","data-v-06802184"]]),X6={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 py-12 px-4 sm:px-6 lg:px-8 relative z-10"},Y6={class:"max-w-md w-full space-y-8 bg-white p-8 rounded-2xl shadow-2xl relative z-20"},Z6={class:"space-y-4"},J6={class:"relative"},Q6={key:0,class:"mt-2 text-sm text-red-600"},eS={class:"relative"},tS={class:"relative"},rS={class:"relative"},nS=["type"],iS={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},oS={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},aS={class:"relative"},sS=["type"],lS={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},uS={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},cS={key:0,class:"mt-1 text-sm text-red-600"},dS={key:0,class:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg"},fS={key:1,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg"},hS=["disabled"],pS={class:"text-center"},vS=ot({__name:"AdminSecretRegister",setup(r){const e=yi(),t="polloAsado2005@",n=or({secretCode:"",fullName:"",email:"",password:"",confirmPassword:""}),i=W(!1),o=W(!1),a=W(!1),s=W(""),l=W(""),u=Ee(()=>!!t),c=Ee(()=>n.confirmPassword.length>0&&n.password!==n.confirmPassword),d=Ee(()=>n.secretCode.length>0&&n.fullName.length>0&&n.email.length>0&&n.password.length>=6&&n.password===n.confirmPassword),p=()=>{i.value=!i.value},h=()=>{o.value=!o.value},v=()=>{n.secretCode="",n.fullName="",n.email="",n.password="",n.confirmPassword=""},x=async()=>{if(!u.value){s.value="El cdigo secreto no est configurado. Contacta al administrador.";return}if(n.secretCode!==t){s.value="Cdigo secreto incorrecto.";return}if(!d.value||c.value){s.value="Verifica los datos del formulario.";return}a.value=!0,s.value="",l.value="";try{const w=n.email.trim().toLowerCase(),{data:g}=await ae.from("usuarios").select("id, correo, rol, nombre").eq("correo",w).maybeSingle(),{data:y}=await ae.auth.getSession(),m=y.session;if(g){if(!m||m.user.id!==g.id){s.value="Este correo ya est registrado. Inicia sesin con esa cuenta y vuelve a intentarlo.";return}const{error:b}=await ae.auth.updateUser({password:n.password,data:{full_name:n.fullName,role:"admin"}});if(b)throw b;const{error:S}=await ae.from("usuarios").update({nombre:n.fullName,rol:"admin"}).eq("id",g.id);if(S)throw S;localStorage.setItem("userId",g.id),localStorage.setItem("userRole","admin"),localStorage.setItem("userName",n.fullName),l.value="Tu cuenta fue promovida a administrador! Redirigiendo al panel...",v(),setTimeout(()=>{e.push("/admin")},1500);return}const{data:_,error:E}=await ae.auth.signUp({email:w,password:n.password,options:{data:{full_name:n.fullName,role:"admin"}}});if(E)throw E;if(_.user){await new Promise(B=>setTimeout(B,500));const{data:b,error:S}=await ae.from("usuarios").select("*").eq("id",_.user.id).single();if(S)throw S;localStorage.setItem("userId",b.id),localStorage.setItem("userRole",b.rol),localStorage.setItem("userName",b.nombre),l.value="Cuenta administrativa creada exitosamente! Redirigiendo al panel...",v(),setTimeout(()=>{e.push("/admin")},1500)}}catch(w){console.error("Error en registro admin:",w),w?.message?.includes("already registered")?s.value="Este correo ya est registrado.":s.value=w?.message||"Error al crear la cuenta administrativa."}finally{a.value=!1}};return(w,g)=>{const y=lr("router-link");return O(),T("div",X6,[f("div",Y6,[g[15]||(g[15]=f("div",{class:"text-center"},[f("h2",{class:"text-3xl font-extrabold text-gray-900"}," Registro Privado de Administradores "),f("p",{class:"mt-2 text-sm text-gray-600"}," Acceso exclusivo. Ingresa el cdigo secreto para crear una cuenta administrativa. ")],-1)),f("form",{class:"mt-8 space-y-6",onSubmit:Yr(x,["prevent"])},[f("div",Z6,[f("div",null,[g[5]||(g[5]=f("label",{for:"secretCode",class:"block text-sm font-medium text-gray-700 mb-1"}," Cdigo Secreto ",-1)),f("div",J6,[fe(f("input",{id:"secretCode","onUpdate:modelValue":g[0]||(g[0]=m=>n.secretCode=m),type:"password",required:"",class:"appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200",placeholder:"Ingresa el cdigo secreto"},null,512),[[Ae,n.secretCode]])]),u.value?Z("",!0):(O(),T("p",Q6," No se ha configurado el cdigo secreto. Contacta al administrador del sistema. "))]),f("div",null,[g[6]||(g[6]=f("label",{for:"fullName",class:"block text-sm font-medium text-gray-700 mb-1"}," Nombre Completo ",-1)),f("div",eS,[fe(f("input",{id:"fullName","onUpdate:modelValue":g[1]||(g[1]=m=>n.fullName=m),type:"text",required:"",class:"appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200",placeholder:"Ej: Mara Martnez"},null,512),[[Ae,n.fullName]])])]),f("div",null,[g[7]||(g[7]=f("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-1"}," Correo Electrnico ",-1)),f("div",tS,[fe(f("input",{id:"email","onUpdate:modelValue":g[2]||(g[2]=m=>n.email=m),type:"email",required:"",class:"appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200",placeholder:"admin@live.uleam.edu.ec"},null,512),[[Ae,n.email]])])]),f("div",null,[g[10]||(g[10]=f("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-1"}," Contrasea ",-1)),f("div",rS,[fe(f("input",{id:"password","onUpdate:modelValue":g[3]||(g[3]=m=>n.password=m),type:i.value?"text":"password",required:"",minlength:"6",class:"appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200",placeholder:"Mnimo 6 caracteres"},null,8,nS),[[Qi,n.password]]),f("button",{type:"button",onClick:p,class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[i.value?(O(),T("svg",oS,[...g[9]||(g[9]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(O(),T("svg",iS,[...g[8]||(g[8]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])])]),f("div",null,[g[13]||(g[13]=f("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-700 mb-1"}," Confirmar Contrasea ",-1)),f("div",aS,[fe(f("input",{id:"confirmPassword","onUpdate:modelValue":g[4]||(g[4]=m=>n.confirmPassword=m),type:o.value?"text":"password",required:"",minlength:"6",class:"appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200",placeholder:"Repite tu contrasea"},null,8,sS),[[Qi,n.confirmPassword]]),f("button",{type:"button",onClick:h,class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[o.value?(O(),T("svg",uS,[...g[12]||(g[12]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(O(),T("svg",lS,[...g[11]||(g[11]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])]),c.value?(O(),T("p",cS," Las contraseas no coinciden ")):Z("",!0)])]),l.value?(O(),T("div",dS,"  "+P(l.value),1)):Z("",!0),s.value?(O(),T("div",fS,"  "+P(s.value),1)):Z("",!0),f("div",null,[f("button",{type:"submit",disabled:a.value||!d.value||!u.value,class:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-lg font-semibold text-white bg-[#8B0000] hover:bg-[#A52A2A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#8B0000] transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed"},P(a.value?"Creando cuenta...":"Crear Administrador"),9,hS)]),f("div",pS,[ue(y,{to:"/login",class:"text-sm font-medium text-[#8B0000] hover:text-[#A52A2A] transition duration-200"},{default:we(()=>[...g[14]||(g[14]=[de("  Volver al inicio de sesin ",-1)])]),_:1})])],32)])])}}}),gS={class:"min-h-screen bg-gray-50"},yS={class:"bg-[#8B0000] text-white shadow-lg"},mS={class:"container mx-auto px-6 py-6"},xS={class:"flex items-center justify-between"},wS={class:"flex gap-3"},_S={class:"container mx-auto px-6 py-8"},bS={class:"mb-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4"},ES={class:"flex items-center gap-4"},AS=["disabled"],CS={key:0,class:"flex justify-center items-center py-12"},SS={key:1,class:"bg-white rounded-xl shadow-md p-12 text-center"},IS={class:"text-gray-600"},OS={key:2,class:"space-y-4"},TS={class:"flex items-start justify-between gap-4"},RS={class:"flex-1"},PS={class:"flex items-center gap-3 mb-2"},kS={class:"text-lg font-bold text-gray-900"},NS={key:0,class:"px-2 py-1 bg-[#8B0000] text-white text-xs font-semibold rounded-full"},DS={class:"text-gray-600 whitespace-pre-line mb-4"},MS={class:"flex items-center gap-4 text-sm text-gray-500"},BS={key:0},LS={class:"flex flex-col gap-2"},FS=["onClick","disabled"],$S=["onClick","disabled"],jS=["onClick","disabled"],US=ot({__name:"AdminNotificaciones",setup(r){const e=W([]),t=W(!0),n=W(null),i=W(null),o=W(null),a=W(!1),s=Ee(()=>n.value===null?e.value:e.value.filter(w=>w.leida===n.value)),l=Ee(()=>e.value.filter(w=>!w.leida)),u=Ee(()=>e.value.filter(w=>w.leida)),c=async()=>{try{if(t.value=!0,!localStorage.getItem("userId"))throw new Error("No se encontr el ID del usuario");const{data:g,error:y}=await ae.from("notificaciones").select("*").eq("tipo","recomendacion").order("enviada_en",{ascending:!1});if(y)throw y;e.value=(g||[]).map(m=>({...m,leida:m.leida||!1}))}catch(w){console.error("Error cargando notificaciones:",w),alert("Error al cargar las sugerencias: "+w.message)}finally{t.value=!1}},d=async w=>{try{i.value=w;const{error:g}=await ae.from("notificaciones").update({leida:!0}).eq("id",w);if(g)throw g;const y=e.value.find(m=>m.id===w);y&&(y.leida=!0)}catch(g){console.error("Error marcando como leda:",g),alert("Error al marcar la sugerencia como leda")}finally{i.value=null}},p=async w=>{try{i.value=w;const{error:g}=await ae.from("notificaciones").update({leida:!1}).eq("id",w);if(g)throw g;const y=e.value.find(m=>m.id===w);y&&(y.leida=!1)}catch(g){console.error("Error marcando como no leda:",g),alert("Error al marcar la sugerencia como no leda")}finally{i.value=null}},h=async()=>{try{a.value=!0;const w=l.value.map(y=>y.id);if(w.length===0)return;const{error:g}=await ae.from("notificaciones").update({leida:!0}).in("id",w);if(g)throw g;e.value.forEach(y=>{y.leida||(y.leida=!0)})}catch(w){console.error("Error marcando todas como ledas:",w),alert("Error al marcar todas las sugerencias como ledas")}finally{a.value=!1}},v=async w=>{if(confirm("Ests seguro de eliminar esta sugerencia?"))try{o.value=w;const{error:g}=await ae.from("notificaciones").delete().eq("id",w);if(g)throw g;e.value=e.value.filter(y=>y.id!==w)}catch(g){console.error("Error eliminando notificacin:",g),alert("Error al eliminar la sugerencia")}finally{o.value=null}},x=w=>{if(!w)return"Fecha no disponible";try{return new Date(w).toLocaleString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return w}};return sr(()=>{c()}),(w,g)=>{const y=lr("RouterLink");return O(),T("div",gS,[f("div",yS,[f("div",mS,[f("div",xS,[g[5]||(g[5]=f("div",null,[f("h1",{class:"text-3xl font-bold"},"Sugerencias de Pelculas"),f("p",{class:"text-gray-200 mt-1"},"Gestiona las sugerencias enviadas por los estudiantes")],-1)),f("div",wS,[ue(y,{to:"/admin",class:"inline-flex items-center gap-2 bg-white/20 hover:bg-white/30 text-white px-5 py-3 rounded-xl font-semibold transition-all duration-200"},{default:we(()=>[...g[3]||(g[3]=[f("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),de(" Dashboard ",-1)])]),_:1}),ue(y,{to:"/admin/cartelera",class:"inline-flex items-center gap-2 bg-white/20 hover:bg-white/30 text-white px-5 py-3 rounded-xl font-semibold transition-all duration-200"},{default:we(()=>[...g[4]||(g[4]=[f("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"})],-1),de(" Cartelera ",-1)])]),_:1})])])])]),f("div",_S,[f("div",bS,[f("div",ES,[f("button",{onClick:g[0]||(g[0]=m=>n.value=null),class:it(["px-4 py-2 rounded-lg font-medium transition-colors",n.value===null?"bg-[#8B0000] text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"])}," Todas ("+P(e.value.length)+") ",3),f("button",{onClick:g[1]||(g[1]=m=>n.value=!1),class:it(["px-4 py-2 rounded-lg font-medium transition-colors",n.value===!1?"bg-[#8B0000] text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"])}," No ledas ("+P(l.value.length)+") ",3),f("button",{onClick:g[2]||(g[2]=m=>n.value=!0),class:it(["px-4 py-2 rounded-lg font-medium transition-colors",n.value===!0?"bg-[#8B0000] text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"])}," Ledas ("+P(u.value.length)+") ",3)]),f("button",{onClick:h,disabled:l.value.length===0||a.value,class:"px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},P(a.value?"Marcando...":"Marcar todas como ledas"),9,AS)]),t.value?(O(),T("div",CS,[...g[6]||(g[6]=[f("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#8B0000]"},null,-1),f("p",{class:"ml-4 text-gray-600"},"Cargando sugerencias...",-1)])])):s.value.length===0?(O(),T("div",SS,[g[7]||(g[7]=f("svg",{class:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1)),g[8]||(g[8]=f("h3",{class:"text-xl font-semibold text-gray-700 mb-2"},"No hay sugerencias",-1)),f("p",IS,P(n.value===!1?"No hay sugerencias sin leer":"No hay sugerencias para mostrar"),1)])):(O(),T("div",OS,[(O(!0),T(ke,null,st(s.value,m=>(O(),T("div",{key:m.id,class:it(["bg-white rounded-xl shadow-md p-6 transition-all hover:shadow-lg",m.leida?"border-l-4 border-transparent":"border-l-4 border-[#8B0000]"])},[f("div",TS,[f("div",RS,[f("div",PS,[f("h3",kS,P(m.titulo),1),m.leida?Z("",!0):(O(),T("span",NS," Nueva "))]),f("div",DS,P(m.mensaje),1),f("div",MS,[m.enviada_en?(O(),T("span",BS,[g[9]||(g[9]=f("svg",{class:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),de(" "+P(x(m.enviada_en)),1)])):Z("",!0)])]),f("div",LS,[m.leida?(O(),T("button",{key:1,onClick:_=>p(m.id),disabled:i.value===m.id,class:"px-4 py-2 bg-gray-400 text-white rounded-lg text-sm font-medium hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},P(i.value===m.id?"Marcando...":"Marcar como no leda"),9,$S)):(O(),T("button",{key:0,onClick:_=>d(m.id),disabled:i.value===m.id,class:"px-4 py-2 bg-blue-500 text-white rounded-lg text-sm font-medium hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},P(i.value===m.id?"Marcando...":"Marcar como leda"),9,FS)),f("button",{onClick:_=>v(m.id),disabled:o.value===m.id,class:"px-4 py-2 bg-red-500 text-white rounded-lg text-sm font-medium hover:bg-red-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},P(o.value===m.id?"Eliminando...":"Eliminar"),9,jS)])])],2))),128))]))])])}}}),VS={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 py-12 px-4 sm:px-6 lg:px-8 relative z-10"},HS={class:"max-w-md w-full space-y-8 bg-white p-8 rounded-2xl shadow-2xl relative z-20"},GS={class:"space-y-4"},qS={class:"relative"},zS={key:0,class:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg"},WS={key:1,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg"},KS=["disabled"],XS={class:"text-center"},YS=ot({__name:"ForgotPassword",setup(r){const e=or({email:""}),t=W(!1),n=W(""),i=W(""),o=async()=>{if(n.value="",i.value="",!e.email.endsWith("@live.uleam.edu.ec")){n.value="Debe usar su correo institucional (@live.uleam.edu.ec)";return}t.value=!0;try{const{error:a}=await ae.auth.resetPasswordForEmail(e.email,{redirectTo:`${window.location.origin}/reset-password`});if(a)throw a;i.value="Enlace de recuperacin enviado! Revisa tu correo electrnico para restablecer tu contrasea.",e.email=""}catch(a){n.value=a.message||"Error al enviar el enlace de recuperacin"}finally{t.value=!1}};return(a,s)=>{const l=lr("router-link");return O(),T("div",VS,[f("div",HS,[s[4]||(s[4]=f("div",{class:"text-center"},[f("h2",{class:"text-3xl font-extrabold text-gray-900"}," Recuperar Contrasea "),f("p",{class:"mt-2 text-sm text-gray-600"}," Ingresa tu correo institucional y te enviaremos un enlace para restablecer tu contrasea ")],-1)),f("form",{class:"mt-8 space-y-6",onSubmit:Yr(o,["prevent"])},[f("div",GS,[f("div",null,[s[2]||(s[2]=f("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-1"}," Correo Electrnico ",-1)),f("div",qS,[s[1]||(s[1]=f("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[f("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})])],-1)),fe(f("input",{id:"email","onUpdate:modelValue":s[0]||(s[0]=u=>e.email=u),type:"email",required:"",class:"appearance-none block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200",placeholder:"ejemplo@live.uleam.edu.ec"},null,512),[[Ae,e.email]])])])]),i.value?(O(),T("div",zS,"  "+P(i.value),1)):Z("",!0),n.value?(O(),T("div",WS,"  "+P(n.value),1)):Z("",!0),f("div",null,[f("button",{type:"submit",disabled:t.value,class:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-lg font-semibold text-white bg-[#8B0000] hover:bg-[#A52A2A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#8B0000] transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed"},P(t.value?"Enviando...":"Enviar Enlace de Recuperacin"),9,KS)]),f("div",XS,[ue(l,{to:"/login",class:"text-sm font-medium text-[#8B0000] hover:text-[#A52A2A] transition duration-200"},{default:we(()=>[...s[3]||(s[3]=[de("  Volver al inicio de sesin ",-1)])]),_:1})])],32)])])}}}),ZS={class:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100"},JS={class:"container mx-auto px-4 sm:px-6 lg:px-8 py-12"},QS={class:"bg-white rounded-2xl shadow-lg p-8 text-center"},e5={class:"flex flex-col sm:flex-row gap-4 justify-center"},t5=ot({__name:"Proximas",setup(r){const e=W(!1),t=async()=>{const{data:n}=await ae.auth.getSession(),i=localStorage.getItem("userId");e.value=!!n.session||!!i};return sr(()=>{t()}),(n,i)=>{const o=lr("router-link");return O(),T("div",ZS,[f("div",JS,[i[4]||(i[4]=$n('<div class="text-center mb-12"><h1 class="text-4xl md:text-5xl font-extrabold text-gray-900 mb-4"> Prximos Estrenos </h1><p class="text-lg text-gray-600 max-w-2xl mx-auto"> Mantente al tanto de las pelculas que prximamente llegarn a nuestro cine. No te pierdas los estrenos ms esperados! </p></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12"><div class="bg-white rounded-2xl shadow-lg overflow-hidden transform hover:-translate-y-2 hover:shadow-2xl transition-all duration-300"><div class="relative aspect-[2/3] bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center"><div class="text-center p-6"><svg class="w-16 h-16 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg><p class="text-gray-500 text-sm">Prximamente</p></div><div class="absolute top-4 right-4 bg-[#8B0000] text-white px-3 py-1 rounded-full text-xs font-bold"> PRXIMAMENTE </div></div><div class="p-6"><h3 class="text-xl font-bold text-gray-900 mb-2"> Estreno en Preparacin </h3><p class="text-sm text-gray-600 mb-4"> Estamos trabajando para traerte los mejores estrenos. Mantente atento a nuestras redes sociales para conocer las fechas exactas. </p><div class="flex items-center text-sm text-gray-500"><svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> Prximamente </div></div></div><div class="bg-white rounded-2xl shadow-lg overflow-hidden transform hover:-translate-y-2 hover:shadow-2xl transition-all duration-300"><div class="relative aspect-[2/3] bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center"><div class="text-center p-6"><svg class="w-16 h-16 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg><p class="text-gray-500 text-sm">Prximamente</p></div><div class="absolute top-4 right-4 bg-[#8B0000] text-white px-3 py-1 rounded-full text-xs font-bold"> PRXIMAMENTE </div></div><div class="p-6"><h3 class="text-xl font-bold text-gray-900 mb-2"> Nuevos Lanzamientos </h3><p class="text-sm text-gray-600 mb-4"> Las pelculas ms esperadas del ao estn por llegar. Sigue nuestras actualizaciones para no perderte ningn estreno importante. </p><div class="flex items-center text-sm text-gray-500"><svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> Prximamente </div></div></div><div class="bg-white rounded-2xl shadow-lg overflow-hidden transform hover:-translate-y-2 hover:shadow-2xl transition-all duration-300"><div class="relative aspect-[2/3] bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center"><div class="text-center p-6"><svg class="w-16 h-16 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg><p class="text-gray-500 text-sm">Prximamente</p></div><div class="absolute top-4 right-4 bg-[#8B0000] text-white px-3 py-1 rounded-full text-xs font-bold"> PRXIMAMENTE </div></div><div class="p-6"><h3 class="text-xl font-bold text-gray-900 mb-2"> Pelculas Exclusivas </h3><p class="text-sm text-gray-600 mb-4"> Estamos negociando los derechos para traer las mejores producciones cinematogrficas directamente a nuestra comunidad universitaria. </p><div class="flex items-center text-sm text-gray-500"><svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> Prximamente </div></div></div></div>',2)),f("div",QS,[i[2]||(i[2]=f("h2",{class:"text-2xl font-bold text-gray-900 mb-4"}," Quieres estar al da con nuestros estrenos? ",-1)),i[3]||(i[3]=f("p",{class:"text-gray-600 mb-6 max-w-2xl mx-auto"}," Regstrate en nuestra plataforma para recibir notificaciones sobre nuevas pelculas, funciones especiales y eventos exclusivos. Tambin puedes seguir nuestras redes sociales para no perderte ningn detalle. ",-1)),f("div",e5,[e.value?Z("",!0):(O(),Rl(o,{key:0,to:"/register",class:"bg-[#8B0000] text-white px-8 py-3 rounded-xl font-semibold shadow-lg hover:bg-[#A52A2A] hover:scale-105 transition-all duration-200"},{default:we(()=>[...i[0]||(i[0]=[de(" Crear Cuenta ",-1)])]),_:1})),ue(o,{to:"/cartelera",class:"bg-gray-200 text-gray-900 px-8 py-3 rounded-xl font-semibold shadow-lg hover:bg-gray-300 hover:scale-105 transition-all duration-200"},{default:we(()=>[...i[1]||(i[1]=[de(" Ver Cartelera Actual ",-1)])]),_:1})])])])])}}}),r5={class:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100"},n5={class:"container mx-auto px-4 sm:px-6 lg:px-8 py-12"},i5={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},o5={class:"bg-white rounded-2xl shadow-lg p-8"},a5={key:0,class:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg"},s5={key:1,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg"},l5=["disabled"],u5=ot({__name:"Contacto",setup(r){const e=or({nombre:"",email:"",asunto:"",mensaje:""}),t=W(!1),n=W(""),i=W(""),o=async()=>{n.value="",i.value="",t.value=!0;try{await new Promise(a=>setTimeout(a,1500)),i.value="Mensaje enviado con xito! Nos pondremos en contacto contigo pronto.",e.nombre="",e.email="",e.asunto="",e.mensaje=""}catch{n.value="Error al enviar el mensaje. Por favor, intenta de nuevo o contctanos directamente por correo electrnico."}finally{t.value=!1}};return(a,s)=>(O(),T("div",r5,[f("div",n5,[s[11]||(s[11]=f("div",{class:"text-center mb-12"},[f("h1",{class:"text-4xl md:text-5xl font-extrabold text-gray-900 mb-4"}," Contctanos "),f("p",{class:"text-lg text-gray-600 max-w-2xl mx-auto"}," Tienes alguna pregunta, sugerencia o necesitas ayuda? Estamos aqu para asistirte. No dudes en ponerte en contacto con nosotros a travs de cualquiera de los siguientes medios. ")],-1)),f("div",i5,[f("div",o5,[s[9]||(s[9]=f("h2",{class:"text-2xl font-bold text-gray-900 mb-6"}," Envanos un Mensaje ",-1)),f("form",{onSubmit:Yr(o,["prevent"]),class:"space-y-6"},[f("div",null,[s[4]||(s[4]=f("label",{for:"nombre",class:"block text-sm font-medium text-gray-700 mb-2"}," Nombre Completo ",-1)),fe(f("input",{id:"nombre","onUpdate:modelValue":s[0]||(s[0]=l=>e.nombre=l),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200",placeholder:"Tu nombre"},null,512),[[Ae,e.nombre]])]),f("div",null,[s[5]||(s[5]=f("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"}," Correo Electrnico ",-1)),fe(f("input",{id:"email","onUpdate:modelValue":s[1]||(s[1]=l=>e.email=l),type:"email",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200",placeholder:"tu@email.com"},null,512),[[Ae,e.email]])]),f("div",null,[s[7]||(s[7]=f("label",{for:"asunto",class:"block text-sm font-medium text-gray-700 mb-2"}," Asunto ",-1)),fe(f("select",{id:"asunto","onUpdate:modelValue":s[2]||(s[2]=l=>e.asunto=l),required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200"},[...s[6]||(s[6]=[$n('<option value="">Selecciona un asunto</option><option value="consulta">Consulta General</option><option value="sugerencia">Sugerencia de Pelcula</option><option value="problema">Reportar un Problema</option><option value="reserva">Consulta sobre Reservas</option><option value="otro">Otro</option>',6)])],512),[[ar,e.asunto]])]),f("div",null,[s[8]||(s[8]=f("label",{for:"mensaje",class:"block text-sm font-medium text-gray-700 mb-2"}," Mensaje ",-1)),fe(f("textarea",{id:"mensaje","onUpdate:modelValue":s[3]||(s[3]=l=>e.mensaje=l),required:"",rows:"5",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B0000] focus:border-transparent transition duration-200 resize-none",placeholder:"Escribe tu mensaje aqu..."},null,512),[[Ae,e.mensaje]])]),i.value?(O(),T("div",a5,"  "+P(i.value),1)):Z("",!0),n.value?(O(),T("div",s5,"  "+P(n.value),1)):Z("",!0),f("button",{type:"submit",disabled:t.value,class:"w-full bg-[#8B0000] text-white px-8 py-3 rounded-lg font-semibold hover:bg-[#A52A2A] hover:scale-105 transition-all duration-200 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed"},P(t.value?"Enviando...":"Enviar Mensaje"),9,l5)],32)]),s[10]||(s[10]=$n('<div class="space-y-6"><div class="bg-white rounded-2xl shadow-lg p-8"><div class="flex items-start space-x-4"><div class="bg-[#8B0000] text-white p-4 rounded-lg"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></div><div><h3 class="text-xl font-bold text-gray-900 mb-2">Ubicacin</h3><p class="text-gray-600"> Universidad Laica Eloy Alfaro de Manab<br> Campus Universitario<br> Manta, Manab, Ecuador </p></div></div></div><div class="bg-white rounded-2xl shadow-lg p-8"><div class="flex items-start space-x-4"><div class="bg-[#8B0000] text-white p-4 rounded-lg"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg></div><div><h3 class="text-xl font-bold text-gray-900 mb-2">Telfono</h3><p class="text-gray-600"> (05) 262-3740<br><span class="text-sm text-gray-500">Lunes a Viernes: 8:00 AM - 6:00 PM</span></p></div></div></div><div class="bg-white rounded-2xl shadow-lg p-8"><div class="flex items-start space-x-4"><div class="bg-[#8B0000] text-white p-4 rounded-lg"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div><div><h3 class="text-xl font-bold text-gray-900 mb-2">Correo Electrnico</h3><p class="text-gray-600"><a href="mailto:cine@uleam.edu.ec" class="text-[#8B0000] hover:underline"> cine@uleam.edu.ec </a></p></div></div></div><div class="bg-white rounded-2xl shadow-lg p-8"><h3 class="text-xl font-bold text-gray-900 mb-4">Sguenos en Redes Sociales</h3><div class="flex space-x-4"><a href="https://www.facebook.com/UleamEc" aria-label="Facebook" class="bg-gray-100 hover:bg-[#8B0000] text-gray-700 hover:text-white p-3 rounded-lg transition-all duration-200 hover:scale-110"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"></path></svg></a><a href="https://www.instagram.com/uleam_ecuador_oficial/" aria-label="Instagram" class="bg-gray-100 hover:bg-[#8B0000] text-gray-700 hover:text-white p-3 rounded-lg transition-all duration-200 hover:scale-110"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"></path></svg></a></div></div></div>',1))])])]))}}),c5={class:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100"},d5={class:"container mx-auto px-4 sm:px-6 lg:px-8 py-12"},f5={class:"max-w-4xl mx-auto space-y-12"},h5={class:"bg-gradient-to-r from-[#8B0000] to-[#A52A2A] rounded-2xl shadow-lg p-8 md:p-12 text-white text-center"},p5={class:"flex flex-col sm:flex-row gap-4 justify-center"},v5=ot({__name:"AcercaDe",setup(r){const e=W(!1),t=async()=>{const{data:n}=await ae.auth.getSession(),i=localStorage.getItem("userId");e.value=!!n.session||!!i};return sr(()=>{t()}),(n,i)=>{const o=lr("router-link");return O(),T("div",c5,[f("div",d5,[i[5]||(i[5]=f("div",{class:"text-center mb-12"},[f("h1",{class:"text-4xl md:text-5xl font-extrabold text-gray-900 mb-4"}," Acerca de Cine ULEAM "),f("p",{class:"text-lg text-gray-600 max-w-3xl mx-auto"}," El espacio cinematogrfico oficial de la Universidad Laica Eloy Alfaro de Manab, creado para enriquecer la vida cultural de nuestra comunidad universitaria. ")],-1)),f("div",f5,[i[4]||(i[4]=$n('<div class="bg-white rounded-2xl shadow-lg p-8 md:p-12"><h2 class="text-3xl font-bold text-gray-900 mb-6 flex items-center"><span class="bg-[#8B0000] text-white p-3 rounded-lg mr-4"><svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path></svg></span> Nuestra Misin </h2><p class="text-gray-700 text-lg leading-relaxed mb-4"> En <strong class="text-[#8B0000]">Cine ULEAM</strong>, nos comprometemos a ofrecer una experiencia cinematogrfica nica y accesible para todos los miembros de la comunidad universitaria. Buscamos promover la cultura, el entretenimiento y el aprendizaje a travs del sptimo arte. </p><p class="text-gray-600 leading-relaxed"> Creemos firmemente que el cine es una herramienta poderosa para la educacin, la reflexin y la conexin entre personas. Por eso, trabajamos constantemente para traer las mejores producciones cinematogrficas, tanto nacionales como internacionales, que enriquezcan el bagaje cultural de nuestros estudiantes, profesores y personal administrativo. </p></div><div class="bg-white rounded-2xl shadow-lg p-8 md:p-12"><h2 class="text-3xl font-bold text-gray-900 mb-6 flex items-center"><span class="bg-[#8B0000] text-white p-3 rounded-lg mr-4"><svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg></span> Nuestra Visin </h2><p class="text-gray-700 text-lg leading-relaxed mb-4"> Aspiramos a convertirnos en el referente cinematogrfico universitario de la regin, siendo reconocidos por nuestra diversidad de programacin, calidad en el servicio y compromiso con la comunidad. </p><p class="text-gray-600 leading-relaxed"> Queremos que Cine ULEAM sea ms que un simple lugar para ver pelculas. Nuestro objetivo es crear un espacio donde se fomente el dilogo, la crtica constructiva y el anlisis cinematogrfico, contribuyendo as a la formacin integral de nuestros estudiantes. </p></div><div class="bg-white rounded-2xl shadow-lg p-8 md:p-12"><h2 class="text-3xl font-bold text-gray-900 mb-8 text-center"> Nuestros Valores </h2><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="border-l-4 border-[#8B0000] pl-6"><h3 class="text-xl font-semibold text-gray-900 mb-2">Accesibilidad</h3><p class="text-gray-600"> Creemos que el cine debe ser accesible para todos. Por eso, ofrecemos precios especiales para estudiantes y promociones regulares para la comunidad universitaria. </p></div><div class="border-l-4 border-[#8B0000] pl-6"><h3 class="text-xl font-semibold text-gray-900 mb-2">Diversidad</h3><p class="text-gray-600"> Programamos una amplia variedad de gneros y estilos cinematogrficos, desde grandes estrenos comerciales hasta cine independiente y de autor. </p></div><div class="border-l-4 border-[#8B0000] pl-6"><h3 class="text-xl font-semibold text-gray-900 mb-2">Calidad</h3><p class="text-gray-600"> Mantenemos los ms altos estndares en cuanto a proyeccin, sonido y comodidad para garantizar la mejor experiencia cinematogrfica. </p></div><div class="border-l-4 border-[#8B0000] pl-6"><h3 class="text-xl font-semibold text-gray-900 mb-2">Comunidad</h3><p class="text-gray-600"> Fomentamos el sentido de comunidad universitaria a travs de eventos especiales, ciclos temticos y actividades que unen a estudiantes, profesores y personal. </p></div></div></div><div class="bg-white rounded-2xl shadow-lg p-8 md:p-12"><h2 class="text-3xl font-bold text-gray-900 mb-8 text-center"> Qu Ofrecemos? </h2><div class="space-y-6"><div class="flex items-start space-x-4"><div class="bg-[#8B0000] text-white p-3 rounded-lg flex-shrink-0"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg></div><div><h3 class="text-xl font-semibold text-gray-900 mb-2">Cartelera Variada</h3><p class="text-gray-600"> Ofrecemos una seleccin cuidadosa de pelculas que incluye los ltimos estrenos, clsicos del cine y producciones independientes de gran calidad. </p></div></div><div class="flex items-start space-x-4"><div class="bg-[#8B0000] text-white p-3 rounded-lg flex-shrink-0"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></div><div><h3 class="text-xl font-semibold text-gray-900 mb-2">Sistema de Reservas</h3><p class="text-gray-600"> Nuestra plataforma en lnea te permite reservar tus entradas de forma rpida y sencilla, asegurando tu lugar en las funciones ms populares. </p></div></div><div class="flex items-start space-x-4"><div class="bg-[#8B0000] text-white p-3 rounded-lg flex-shrink-0"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path></svg></div><div><h3 class="text-xl font-semibold text-gray-900 mb-2">Eventos Especiales</h3><p class="text-gray-600"> Organizamos ciclos temticos, maratones cinematogrficas, estrenos exclusivos y encuentros con directores y actores para enriquecer la experiencia. </p></div></div><div class="flex items-start space-x-4"><div class="bg-[#8B0000] text-white p-3 rounded-lg flex-shrink-0"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"></path></svg></div><div><h3 class="text-xl font-semibold text-gray-900 mb-2">Sugerencias de la Comunidad</h3><p class="text-gray-600"> Los estudiantes pueden sugerir pelculas que les gustara ver, haciendo de Cine ULEAM un espacio verdaderamente participativo y democrtico. </p></div></div></div></div>',4)),f("div",h5,[i[2]||(i[2]=f("h2",{class:"text-3xl font-bold mb-4"}," nete a Nuestra Comunidad Cinematogrfica! ",-1)),i[3]||(i[3]=f("p",{class:"text-lg mb-8 opacity-90"}," Regstrate hoy y forma parte de esta increble experiencia cinematogrfica universitaria. ",-1)),f("div",p5,[e.value?Z("",!0):(O(),Rl(o,{key:0,to:"/register",class:"bg-white text-[#8B0000] px-8 py-3 rounded-xl font-semibold shadow-lg hover:bg-gray-100 hover:scale-105 transition-all duration-200"},{default:we(()=>[...i[0]||(i[0]=[de(" Crear Cuenta ",-1)])]),_:1})),ue(o,{to:"/cartelera",class:"bg-white/10 text-white border-2 border-white px-8 py-3 rounded-xl font-semibold shadow-lg hover:bg-white/20 hover:scale-105 transition-all duration-200"},{default:we(()=>[...i[1]||(i[1]=[de(" Ver Cartelera ",-1)])]),_:1})])])])])])}}}),g5={class:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100"},y5={class:"container mx-auto px-4 sm:px-6 lg:px-8 py-12"},m5={key:0,class:"space-y-6"},x5={class:"bg-white rounded-2xl shadow-lg p-6"},w5={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},_5={class:"bg-white rounded-2xl shadow-lg overflow-hidden"},b5={class:"overflow-x-auto"},E5={class:"min-w-full divide-y divide-gray-200"},A5={class:"bg-white divide-y divide-gray-200"},C5={class:"px-6 py-4 whitespace-nowrap"},S5={class:"text-sm font-medium text-gray-900"},I5={class:"text-sm text-gray-500 line-clamp-1"},O5={class:"px-6 py-4 whitespace-nowrap"},T5={class:"text-sm text-gray-900"},R5={class:"text-sm text-gray-500"},P5={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},k5={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},N5={class:"text-gray-500"},D5={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},M5={class:"px-6 py-4 whitespace-nowrap"},B5={class:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2"},L5=["onClick"],F5=["onClick"],$5=["onClick"],j5={key:0,class:"text-center py-12"},U5={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},V5={class:"lg:col-span-2"},H5={class:"bg-white rounded-2xl shadow-lg p-8"},G5={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},q5=["min"],z5={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},W5=["min"],K5={class:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg hover:border-[#C8102E] transition-colors"},X5={class:"space-y-1 text-center"},Y5={class:"flex text-sm text-gray-600"},Z5={for:"archivo",class:"relative cursor-pointer bg-white rounded-md font-medium text-[#C8102E] hover:text-[#A00D25] focus-within:outline-none"},J5={key:0,class:"text-sm text-green-600 font-medium"},Q5={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg"},eI={key:1,class:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg"},tI=["disabled"],rI={key:0},nI={key:1,class:"flex items-center gap-2"},iI={class:"lg:col-span-1"},oI={class:"bg-white rounded-2xl shadow-lg p-6 sticky top-24"},aI={class:"space-y-4 max-h-96 overflow-y-auto"},sI={class:"flex items-start justify-between mb-2"},lI={class:"font-semibold text-gray-900 text-sm"},uI={class:"text-xs text-gray-600 mb-2"},cI={class:"text-xs text-gray-500 line-clamp-2"},dI={key:0,class:"text-center py-8 text-gray-500 text-sm"},fI={class:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl"},hI={class:"p-6"},pI={class:"space-y-4"},vI={class:"text-gray-900 font-semibold"},gI={class:"text-gray-900"},yI={class:"text-gray-600 text-sm"},mI={class:"text-gray-900"},xI={class:"text-gray-900"},wI={class:"grid grid-cols-2 gap-4"},_I={class:"text-gray-900"},bI={class:"text-gray-900"},EI={class:"text-gray-900"},AI={key:0,class:"fixed bottom-4 right-4 bg-white rounded-lg shadow-2xl border-2 border-green-500 p-6 z-50 max-w-md animate-bounce"},CI={class:"flex items-center gap-4"},SI={class:"font-bold text-gray-900"},II={class:"text-sm text-gray-600"},OI=ot({__name:"AlquilerSala",setup(r){const e=W(!1),t=W(null),n=W(!1),i=W(""),o=W(""),a=W(null),s=W(null),l=W(null),u=W(""),c=W(""),d=W(""),p=W([]),h=W([]),v=W(!1),x=W(""),w=W(""),g=or({nombre_solicitante:"",facultad:"",nombre_evento:"",descripcion:"",fecha_inicio:"",hora_inicio:"",fecha_fin:"",hora_fin:"",asistentes_estimados:0}),y={pendiente:"Pendiente",aprobado:"Aprobado",rechazado:"Rechazado"},m=Ee(()=>new Date().toISOString().split("T")[0]),_=Ee(()=>{let J=p.value;return u.value&&(J=J.filter(N=>N.estado===u.value)),c.value&&(J=J.filter(N=>N.fecha_inicio>=c.value)),d.value&&(J=J.filter(N=>N.fecha_inicio<=d.value)),J.sort((N,G)=>{const Re=new Date(N.created_at||0).getTime();return new Date(G.created_at||0).getTime()-Re})});sr(async()=>{await E(),await b()});const E=async()=>{const J=localStorage.getItem("userId"),N=localStorage.getItem("userRole");if(!J){alert("Debes iniciar sesin para acceder a esta seccin"),window.location.href="/login";return}e.value=N==="admin";try{const{data:G,error:Re}=await ae.from("usuarios").select("*").eq("id",J).single();if(Re)throw Re;t.value=G,g.nombre_solicitante=G.nombre}catch(G){console.error("Error cargando usuario:",G)}},b=async()=>{try{if(e.value){const{data:J,error:N}=await ae.from("alquiler_eventos").select("*").order("created_at",{ascending:!1});if(N)throw N;if(J){const G=[...new Set(J.map(Ve=>Ve.usuario_id))],{data:Re}=await ae.from("usuarios").select("id, nombre, correo, carrera").in("id",G);p.value=J.map(Ve=>({...Ve,usuario:Re?.find(et=>et.id===Ve.usuario_id)}))}}else{const J=localStorage.getItem("userId"),{data:N,error:G}=await ae.from("alquiler_eventos").select("*").eq("usuario_id",J).order("created_at",{ascending:!1});if(G)throw G;h.value=N||[]}}catch(J){console.error("Error cargando solicitudes:",J)}},S=J=>{const N=J.target;if(N.files&&N.files[0]){const G=N.files[0];if(G.size>10*1024*1024){i.value="El archivo no puede ser mayor a 10MB";return}a.value=G}},B=async()=>{i.value="",o.value="",n.value=!0;try{const J=localStorage.getItem("userId");if(!J)throw new Error("Usuario no autenticado");const N=new Date(`${g.fecha_inicio}T${g.hora_inicio}`),G=new Date(`${g.fecha_fin}T${g.hora_fin}`);if(G<=N){i.value="La fecha y hora de finalizacin debe ser posterior a la de inicio",n.value=!1;return}const{data:Re,error:Ve}=await ae.from("alquiler_eventos").insert({usuario_id:J,nombre_evento:g.nombre_evento,descripcion:g.descripcion,facultad:g.facultad,fecha_inicio:N.toISOString(),fecha_fin:G.toISOString(),asistentes_estimados:g.asistentes_estimados,estado:"pendiente"}).select().single();if(Ve)throw Ve;if(a.value&&Re){const et=a.value.name.split(".").pop(),ze=`${Re.id}_${Date.now()}.${et}`,{error:Pt}=await ae.storage.from("alquiler-archivos").upload(ze,a.value);if(!Pt){let zt="";try{const{data:wt}=ae.storage.from("alquiler-archivos").getPublicUrl(ze);zt=wt.publicUrl}catch{const{data:wt}=await ae.storage.from("alquiler-archivos").createSignedUrl(ze,31536e3);zt=wt?.signedUrl||ze}await ae.from("alquiler_archivos").insert({evento_id:Re.id,archivo_url:zt})}}o.value="Solicitud enviada exitosamente! Se revisar pronto.",g.facultad="",g.nombre_evento="",g.descripcion="",g.fecha_inicio="",g.hora_inicio="",g.fecha_fin="",g.hora_fin="",g.asistentes_estimados=0,a.value=null,s.value&&(s.value.value=""),await b()}catch(J){console.error("Error enviando solicitud:",J),i.value=J.message||"Error al enviar la solicitud"}finally{n.value=!1}},L=async J=>{try{const{error:N}=await ae.from("alquiler_eventos").update({estado:"aprobado"}).eq("id",J);if(N)throw N;k("Solicitud Aprobada","La solicitud ha sido aprobada exitosamente"),await b()}catch(N){console.error("Error aprobando solicitud:",N),alert("Error al aprobar la solicitud")}},j=async J=>{if(confirm("Ests seguro de rechazar esta solicitud?"))try{const{error:N}=await ae.from("alquiler_eventos").update({estado:"rechazado"}).eq("id",J);if(N)throw N;k("Solicitud Rechazada","La solicitud ha sido rechazada"),await b()}catch(N){console.error("Error rechazando solicitud:",N),alert("Error al rechazar la solicitud")}},Y=async J=>{if(!J.usuario){const{data:N}=await ae.from("usuarios").select("nombre, correo, carrera").eq("id",J.usuario_id).single();J.usuario=N}l.value=J},M=()=>{l.value=null},k=(J,N)=>{x.value=J,w.value=N,v.value=!0,setTimeout(()=>{v.value=!1},3e3)},K=J=>new Date(J).toLocaleDateString("es-ES",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),ee=J=>new Date(J).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"});return(J,N)=>(O(),T("div",g5,[f("div",y5,[N[36]||(N[36]=f("div",{class:"text-center mb-12"},[f("h1",{class:"text-4xl md:text-5xl font-extrabold text-gray-900 mb-4"},"  Alquiler de Sala "),f("p",{class:"text-lg text-gray-600 max-w-2xl mx-auto"}," Solicita el alquiler de la sala de cine para eventos acadmicos e institucionales ")],-1)),e.value?(O(),T("div",m5,[f("div",x5,[N[16]||(N[16]=f("h2",{class:"text-xl font-bold text-gray-900 mb-4"},"Filtros",-1)),f("div",w5,[f("div",null,[N[13]||(N[13]=f("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Estado",-1)),fe(f("select",{"onUpdate:modelValue":N[0]||(N[0]=G=>u.value=G),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#C8102E] focus:border-transparent"},[...N[12]||(N[12]=[f("option",{value:""},"Todos los estados",-1),f("option",{value:"pendiente"},"Pendiente",-1),f("option",{value:"aprobado"},"Aprobado",-1),f("option",{value:"rechazado"},"Rechazado",-1)])],512),[[ar,u.value]])]),f("div",null,[N[14]||(N[14]=f("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Fecha Desde",-1)),fe(f("input",{"onUpdate:modelValue":N[1]||(N[1]=G=>c.value=G),type:"date",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#C8102E] focus:border-transparent"},null,512),[[Ae,c.value]])]),f("div",null,[N[15]||(N[15]=f("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Fecha Hasta",-1)),fe(f("input",{"onUpdate:modelValue":N[2]||(N[2]=G=>d.value=G),type:"date",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#C8102E] focus:border-transparent"},null,512),[[Ae,d.value]])])])]),f("div",_5,[f("div",b5,[f("table",E5,[N[17]||(N[17]=f("thead",{class:"bg-[#C8102E]"},[f("tr",null,[f("th",{class:"px-6 py-4 text-left text-xs font-medium text-white uppercase tracking-wider"},"Evento"),f("th",{class:"px-6 py-4 text-left text-xs font-medium text-white uppercase tracking-wider"},"Solicitante"),f("th",{class:"px-6 py-4 text-left text-xs font-medium text-white uppercase tracking-wider"},"Facultad"),f("th",{class:"px-6 py-4 text-left text-xs font-medium text-white uppercase tracking-wider"},"Fecha/Hora"),f("th",{class:"px-6 py-4 text-left text-xs font-medium text-white uppercase tracking-wider"},"Asistentes"),f("th",{class:"px-6 py-4 text-left text-xs font-medium text-white uppercase tracking-wider"},"Estado"),f("th",{class:"px-6 py-4 text-left text-xs font-medium text-white uppercase tracking-wider"},"Acciones")])],-1)),f("tbody",A5,[(O(!0),T(ke,null,st(_.value,G=>(O(),T("tr",{key:G.id,class:"hover:bg-gray-50 transition-colors"},[f("td",C5,[f("div",S5,P(G.nombre_evento),1),f("div",I5,P(G.descripcion),1)]),f("td",O5,[f("div",T5,P(G.usuario?.nombre||"N/A"),1),f("div",R5,P(G.usuario?.correo||""),1)]),f("td",P5,P(G.facultad||"N/A"),1),f("td",k5,[f("div",null,P(K(G.fecha_inicio)),1),f("div",N5,P(ee(G.fecha_inicio))+" - "+P(ee(G.fecha_fin)),1)]),f("td",D5,P(G.asistentes_estimados||"N/A"),1),f("td",M5,[f("span",{class:it(["px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full",G.estado==="aprobado"?"bg-green-100 text-green-800":G.estado==="rechazado"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"])},P(y[G.estado]),3)]),f("td",B5,[G.estado==="pendiente"?(O(),T("button",{key:0,onClick:Re=>L(G.id),class:"text-[#006847] hover:text-[#005238] transition-colors font-semibold"},"  Aprobar ",8,L5)):Z("",!0),G.estado==="pendiente"?(O(),T("button",{key:1,onClick:Re=>j(G.id),class:"text-[#C8102E] hover:text-[#A00D25] transition-colors font-semibold"},"  Rechazar ",8,F5)):Z("",!0),f("button",{onClick:Re=>Y(G),class:"text-blue-600 hover:text-blue-800 transition-colors"},"  Ver ",8,$5)])]))),128))])])]),_.value.length===0?(O(),T("div",j5,[...N[18]||(N[18]=[f("svg",{class:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),f("p",{class:"text-gray-500"},"No hay solicitudes con los filtros seleccionados",-1)])])):Z("",!0)])])):(O(),T("div",U5,[f("div",V5,[f("div",H5,[N[34]||(N[34]=f("h2",{class:"text-2xl font-bold text-gray-900 mb-6"},"Nueva Solicitud de Alquiler",-1)),f("form",{onSubmit:Yr(B,["prevent"]),class:"space-y-6"},[f("div",null,[N[19]||(N[19]=f("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Nombre del Solicitante * ",-1)),fe(f("input",{"onUpdate:modelValue":N[3]||(N[3]=G=>g.nombre_solicitante=G),type:"text",required:"",readonly:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:ring-2 focus:ring-[#C8102E] focus:border-transparent"},null,512),[[Ae,g.nombre_solicitante]])]),f("div",null,[N[20]||(N[20]=f("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Facultad o Unidad Acadmica * ",-1)),fe(f("input",{"onUpdate:modelValue":N[4]||(N[4]=G=>g.facultad=G),type:"text",required:"",placeholder:"Ej: Facultad de Ciencias de la Ingeniera",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#C8102E] focus:border-transparent"},null,512),[[Ae,g.facultad]])]),f("div",null,[N[21]||(N[21]=f("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Nombre del Evento * ",-1)),fe(f("input",{"onUpdate:modelValue":N[5]||(N[5]=G=>g.nombre_evento=G),type:"text",required:"",placeholder:"Ej: Conferencia de Inteligencia Artificial",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#C8102E] focus:border-transparent"},null,512),[[Ae,g.nombre_evento]])]),f("div",null,[N[22]||(N[22]=f("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Descripcin Breve del Evento * ",-1)),fe(f("textarea",{"onUpdate:modelValue":N[6]||(N[6]=G=>g.descripcion=G),required:"",rows:"4",placeholder:"Describe brevemente el propsito y contenido del evento...",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#C8102E] focus:border-transparent resize-none"},null,512),[[Ae,g.descripcion]])]),f("div",G5,[f("div",null,[N[23]||(N[23]=f("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Fecha de Inicio * ",-1)),fe(f("input",{"onUpdate:modelValue":N[7]||(N[7]=G=>g.fecha_inicio=G),type:"date",required:"",min:m.value,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#C8102E] focus:border-transparent"},null,8,q5),[[Ae,g.fecha_inicio]])]),f("div",null,[N[24]||(N[24]=f("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Hora de Inicio * ",-1)),fe(f("input",{"onUpdate:modelValue":N[8]||(N[8]=G=>g.hora_inicio=G),type:"time",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#C8102E] focus:border-transparent"},null,512),[[Ae,g.hora_inicio]])])]),f("div",z5,[f("div",null,[N[25]||(N[25]=f("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Fecha de Finalizacin * ",-1)),fe(f("input",{"onUpdate:modelValue":N[9]||(N[9]=G=>g.fecha_fin=G),type:"date",required:"",min:g.fecha_inicio||m.value,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#C8102E] focus:border-transparent"},null,8,W5),[[Ae,g.fecha_fin]])]),f("div",null,[N[26]||(N[26]=f("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Hora de Finalizacin * ",-1)),fe(f("input",{"onUpdate:modelValue":N[10]||(N[10]=G=>g.hora_fin=G),type:"time",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#C8102E] focus:border-transparent"},null,512),[[Ae,g.hora_fin]])])]),f("div",null,[N[27]||(N[27]=f("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Cantidad Estimada de Asistentes * ",-1)),fe(f("input",{"onUpdate:modelValue":N[11]||(N[11]=G=>g.asistentes_estimados=G),type:"number",required:"",min:"1",placeholder:"Ej: 50",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#C8102E] focus:border-transparent"},null,512),[[Ae,g.asistentes_estimados,void 0,{number:!0}]])]),f("div",null,[N[32]||(N[32]=f("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Archivo Adjunto (Opcional) ",-1)),f("div",K5,[f("div",X5,[N[30]||(N[30]=f("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48"},[f("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),f("div",Y5,[f("label",Z5,[N[28]||(N[28]=f("span",null,"Subir archivo",-1)),f("input",{id:"archivo",ref_key:"archivoInput",ref:s,type:"file",accept:"image/*,.pdf",onChange:S,class:"sr-only"},null,544)]),N[29]||(N[29]=f("p",{class:"pl-1"},"o arrastra y suelta",-1))]),N[31]||(N[31]=f("p",{class:"text-xs text-gray-500"},"PNG, JPG, PDF hasta 10MB",-1)),a.value?(O(),T("p",J5,"  "+P(a.value.name),1)):Z("",!0)])])]),i.value?(O(),T("div",Q5,"  "+P(i.value),1)):Z("",!0),o.value?(O(),T("div",eI,"  "+P(o.value),1)):Z("",!0),f("button",{type:"submit",disabled:n.value,class:"w-full bg-[#006847] text-white px-8 py-4 rounded-lg font-semibold text-lg hover:bg-[#005238] hover:scale-105 transition-all duration-200 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[n.value?(O(),T("span",nI,[...N[33]||(N[33]=[f("svg",{class:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24"},[f("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),f("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),de(" Enviando... ",-1)])])):(O(),T("span",rI," Solicitar Alquiler"))],8,tI)],32)])]),f("div",iI,[f("div",oI,[N[35]||(N[35]=f("h3",{class:"text-xl font-bold text-gray-900 mb-4"},"Mis Solicitudes",-1)),f("div",aI,[(O(!0),T(ke,null,st(h.value,G=>(O(),T("div",{key:G.id,class:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow"},[f("div",sI,[f("h4",lI,P(G.nombre_evento),1),f("span",{class:it(["px-2 py-1 text-xs font-semibold rounded-full",G.estado==="aprobado"?"bg-green-100 text-green-800":G.estado==="rechazado"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"])},P(y[G.estado]),3)]),f("p",uI,P(K(G.fecha_inicio)),1),f("p",cI,P(G.descripcion),1)]))),128)),h.value.length===0?(O(),T("div",dI," No tienes solicitudes an ")):Z("",!0)])])])]))]),l.value?(O(),T("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:Yr(M,["self"])},[f("div",fI,[f("div",hI,[f("div",{class:"flex items-center justify-between mb-6"},[N[38]||(N[38]=f("h3",{class:"text-2xl font-bold text-gray-900"},"Detalles de la Solicitud",-1)),f("button",{onClick:M,class:"text-gray-400 hover:text-gray-600 transition-colors"},[...N[37]||(N[37]=[f("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),f("div",pI,[f("div",null,[N[39]||(N[39]=f("label",{class:"text-sm font-medium text-gray-700"},"Evento",-1)),f("p",vI,P(l.value.nombre_evento),1)]),f("div",null,[N[40]||(N[40]=f("label",{class:"text-sm font-medium text-gray-700"},"Solicitante",-1)),f("p",gI,P(l.value.usuario?.nombre),1),f("p",yI,P(l.value.usuario?.correo),1)]),f("div",null,[N[41]||(N[41]=f("label",{class:"text-sm font-medium text-gray-700"},"Facultad",-1)),f("p",mI,P(l.value.facultad||"N/A"),1)]),f("div",null,[N[42]||(N[42]=f("label",{class:"text-sm font-medium text-gray-700"},"Descripcin",-1)),f("p",xI,P(l.value.descripcion||"N/A"),1)]),f("div",wI,[f("div",null,[N[43]||(N[43]=f("label",{class:"text-sm font-medium text-gray-700"},"Fecha/Hora Inicio",-1)),f("p",_I,P(K(l.value.fecha_inicio))+" "+P(ee(l.value.fecha_inicio)),1)]),f("div",null,[N[44]||(N[44]=f("label",{class:"text-sm font-medium text-gray-700"},"Fecha/Hora Fin",-1)),f("p",bI,P(K(l.value.fecha_fin))+" "+P(ee(l.value.fecha_fin)),1)])]),f("div",null,[N[45]||(N[45]=f("label",{class:"text-sm font-medium text-gray-700"},"Asistentes Estimados",-1)),f("p",EI,P(l.value.asistentes_estimados||"N/A"),1)]),f("div",null,[N[46]||(N[46]=f("label",{class:"text-sm font-medium text-gray-700"},"Estado",-1)),f("span",{class:it(["px-3 py-1 inline-flex text-sm font-semibold rounded-full",l.value.estado==="aprobado"?"bg-green-100 text-green-800":l.value.estado==="rechazado"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"])},P(y[l.value.estado]),3)])])])])])):Z("",!0),ue(Np,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:we(()=>[v.value?(O(),T("div",AI,[f("div",CI,[N[47]||(N[47]=f("div",{class:"flex-shrink-0"},[f("div",{class:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center"},[f("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])])],-1)),f("div",null,[f("h4",SI,P(x.value),1),f("p",II,P(w.value),1)])])])):Z("",!0)]),_:1})]))}}),TI=jn(OI,[["__scopeId","data-v-ef3c8b25"]]),RI=[{path:"/",name:"Homepage",component:Pm},{path:"/login",name:"Login",component:Wm,meta:{requiresGuest:!0}},{path:"/register",name:"Register",component:gx,meta:{requiresGuest:!0}},{path:"/cartelera",name:"Cartelera",component:s3,meta:{requiresAuth:!0}},{path:"/sugerencia",name:"Sugerencia",component:V3,meta:{requiresAuth:!0,requiresStudent:!0}},{path:"/generar-qr",name:"GeneradorQR",component:E8,meta:{requiresAuth:!0}},{path:"/escanear-qr",name:"EscanerQR",component:K6,meta:{requiresAuth:!0}},{path:"/admin",name:"AdminDashboard",component:D_,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/cartelera",name:"AdminCartelera",component:Nw,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin-secret-register",name:"AdminSecretRegister",component:vS,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/notificaciones",name:"AdminNotificaciones",component:US,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/encuestas",name:"AdminEncuestas",component:Eb,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/encuestas",name:"EncuestasEstudiante",component:u4,meta:{requiresAuth:!0,requiresStudent:!0}},{path:"/forgot-password",name:"ForgotPassword",component:YS,meta:{requiresGuest:!0}},{path:"/proximas",name:"Proximas",component:t5},{path:"/contacto",name:"Contacto",component:u5},{path:"/acerca-de",name:"AcercaDe",component:v5},{path:"/alquiler-sala",name:"AlquilerSala",component:TI,meta:{requiresAuth:!0}}],Rh=Eg({history:rg(),routes:RI});Rh.beforeEach(async(r,e,t)=>{const{data:n}=await ae.auth.getSession(),i=n.session,o=localStorage.getItem("userId"),a=localStorage.getItem("userRole"),s=!!i||!!o,l=i?.user?.user_metadata?.role??a??null;if(i&&!o&&localStorage.setItem("userId",i.user.id),i&&l&&!a&&localStorage.setItem("userRole",l),i?.user?.user_metadata?.full_name&&!localStorage.getItem("userName")&&localStorage.setItem("userName",i.user.user_metadata.full_name),r.meta?.requiresAuth&&!s)return t({path:"/login",query:{redirect:r.fullPath}});if(r.meta?.requiresAdmin){if(!s)return t({path:"/login",query:{redirect:r.fullPath}});if(l!=="admin")return t(l==="estudiante"?"/cartelera":"/")}if(r.meta?.requiresStudent){if(!s)return t({path:"/login",query:{redirect:r.fullPath}});if(l!=="estudiante")return t(l==="admin"?"/admin":"/")}return r.meta?.requiresGuest&&s?t(l==="admin"?"/admin":"/cartelera"):t()});const Ph=av(Sm);Ph.use(Rh);Ph.mount("#app");
